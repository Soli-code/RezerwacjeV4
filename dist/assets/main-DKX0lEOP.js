var ZF=Object.defineProperty;var QF=(t,e,n)=>e in t?ZF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Sn=(t,e,n)=>QF(t,typeof e!="symbol"?e+"":e,n);function e7(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var t7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function R6(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var bw={exports:{}},cm={},_w={exports:{}},An={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IN;function n7(){if(IN)return An;IN=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),d=Symbol.iterator;function h(re){return re===null||typeof re!="object"?null:(re=d&&re[d]||re["@@iterator"],typeof re=="function"?re:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,x={};function v(re,O,X){this.props=re,this.context=O,this.refs=x,this.updater=X||p}v.prototype.isReactComponent={},v.prototype.setState=function(re,O){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,O,"setState")},v.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function b(){}b.prototype=v.prototype;function S(re,O,X){this.props=re,this.context=O,this.refs=x,this.updater=X||p}var k=S.prototype=new b;k.constructor=S,y(k,v.prototype),k.isPureReactComponent=!0;var T=Array.isArray,j=Object.prototype.hasOwnProperty,P={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function N(re,O,X){var q,V={},ne=null,ge=null;if(O!=null)for(q in O.ref!==void 0&&(ge=O.ref),O.key!==void 0&&(ne=""+O.key),O)j.call(O,q)&&!C.hasOwnProperty(q)&&(V[q]=O[q]);var ye=arguments.length-2;if(ye===1)V.children=X;else if(1<ye){for(var xe=Array(ye),Se=0;Se<ye;Se++)xe[Se]=arguments[Se+2];V.children=xe}if(re&&re.defaultProps)for(q in ye=re.defaultProps,ye)V[q]===void 0&&(V[q]=ye[q]);return{$$typeof:t,type:re,key:ne,ref:ge,props:V,_owner:P.current}}function L(re,O){return{$$typeof:t,type:re.type,key:O,ref:re.ref,props:re.props,_owner:re._owner}}function R(re){return typeof re=="object"&&re!==null&&re.$$typeof===t}function D(re){var O={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(X){return O[X]})}var M=/\/+/g;function H(re,O){return typeof re=="object"&&re!==null&&re.key!=null?D(""+re.key):O.toString(36)}function W(re,O,X,q,V){var ne=typeof re;(ne==="undefined"||ne==="boolean")&&(re=null);var ge=!1;if(re===null)ge=!0;else switch(ne){case"string":case"number":ge=!0;break;case"object":switch(re.$$typeof){case t:case e:ge=!0}}if(ge)return ge=re,V=V(ge),re=q===""?"."+H(ge,0):q,T(V)?(X="",re!=null&&(X=re.replace(M,"$&/")+"/"),W(V,O,X,"",function(Se){return Se})):V!=null&&(R(V)&&(V=L(V,X+(!V.key||ge&&ge.key===V.key?"":(""+V.key).replace(M,"$&/")+"/")+re)),O.push(V)),1;if(ge=0,q=q===""?".":q+":",T(re))for(var ye=0;ye<re.length;ye++){ne=re[ye];var xe=q+H(ne,ye);ge+=W(ne,O,X,xe,V)}else if(xe=h(re),typeof xe=="function")for(re=xe.call(re),ye=0;!(ne=re.next()).done;)ne=ne.value,xe=q+H(ne,ye++),ge+=W(ne,O,X,xe,V);else if(ne==="object")throw O=String(re),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ge}function Z(re,O,X){if(re==null)return re;var q=[],V=0;return W(re,q,"","",function(ne){return O.call(X,ne,V++)}),q}function B(re){if(re._status===-1){var O=re._result;O=O(),O.then(function(X){(re._status===0||re._status===-1)&&(re._status=1,re._result=X)},function(X){(re._status===0||re._status===-1)&&(re._status=2,re._result=X)}),re._status===-1&&(re._status=0,re._result=O)}if(re._status===1)return re._result.default;throw re._result}var F={current:null},Q={transition:null},ee={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:Q,ReactCurrentOwner:P};function te(){throw Error("act(...) is not supported in production builds of React.")}return An.Children={map:Z,forEach:function(re,O,X){Z(re,function(){O.apply(this,arguments)},X)},count:function(re){var O=0;return Z(re,function(){O++}),O},toArray:function(re){return Z(re,function(O){return O})||[]},only:function(re){if(!R(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},An.Component=v,An.Fragment=n,An.Profiler=i,An.PureComponent=S,An.StrictMode=r,An.Suspense=l,An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,An.act=te,An.cloneElement=function(re,O,X){if(re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+re+".");var q=y({},re.props),V=re.key,ne=re.ref,ge=re._owner;if(O!=null){if(O.ref!==void 0&&(ne=O.ref,ge=P.current),O.key!==void 0&&(V=""+O.key),re.type&&re.type.defaultProps)var ye=re.type.defaultProps;for(xe in O)j.call(O,xe)&&!C.hasOwnProperty(xe)&&(q[xe]=O[xe]===void 0&&ye!==void 0?ye[xe]:O[xe])}var xe=arguments.length-2;if(xe===1)q.children=X;else if(1<xe){ye=Array(xe);for(var Se=0;Se<xe;Se++)ye[Se]=arguments[Se+2];q.children=ye}return{$$typeof:t,type:re.type,key:V,ref:ne,props:q,_owner:ge}},An.createContext=function(re){return re={$$typeof:o,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},re.Provider={$$typeof:s,_context:re},re.Consumer=re},An.createElement=N,An.createFactory=function(re){var O=N.bind(null,re);return O.type=re,O},An.createRef=function(){return{current:null}},An.forwardRef=function(re){return{$$typeof:a,render:re}},An.isValidElement=R,An.lazy=function(re){return{$$typeof:u,_payload:{_status:-1,_result:re},_init:B}},An.memo=function(re,O){return{$$typeof:c,type:re,compare:O===void 0?null:O}},An.startTransition=function(re){var O=Q.transition;Q.transition={};try{re()}finally{Q.transition=O}},An.unstable_act=te,An.useCallback=function(re,O){return F.current.useCallback(re,O)},An.useContext=function(re){return F.current.useContext(re)},An.useDebugValue=function(){},An.useDeferredValue=function(re){return F.current.useDeferredValue(re)},An.useEffect=function(re,O){return F.current.useEffect(re,O)},An.useId=function(){return F.current.useId()},An.useImperativeHandle=function(re,O,X){return F.current.useImperativeHandle(re,O,X)},An.useInsertionEffect=function(re,O){return F.current.useInsertionEffect(re,O)},An.useLayoutEffect=function(re,O){return F.current.useLayoutEffect(re,O)},An.useMemo=function(re,O){return F.current.useMemo(re,O)},An.useReducer=function(re,O,X){return F.current.useReducer(re,O,X)},An.useRef=function(re){return F.current.useRef(re)},An.useState=function(re){return F.current.useState(re)},An.useSyncExternalStore=function(re,O,X){return F.current.useSyncExternalStore(re,O,X)},An.useTransition=function(){return F.current.useTransition()},An.version="18.3.1",An}var RN;function l1(){return RN||(RN=1,_w.exports=n7()),_w.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FN;function r7(){if(FN)return cm;FN=1;var t=l1(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,d={},h=null,p=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(p=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(d[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)d[u]===void 0&&(d[u]=l[u]);return{$$typeof:e,type:a,key:h,ref:p,props:d,_owner:i.current}}return cm.Fragment=n,cm.jsx=o,cm.jsxs=o,cm}var zN;function i7(){return zN||(zN=1,bw.exports=r7()),bw.exports}var m=i7(),Y=l1();const Pt=Rv(Y),s7=e7({__proto__:null,default:Pt},[Y]);var cy={},Sw={exports:{}},bo={},kw={exports:{}},Nw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN;function o7(){return BN||(BN=1,function(t){function e(Q,ee){var te=Q.length;Q.push(ee);e:for(;0<te;){var re=te-1>>>1,O=Q[re];if(0<i(O,ee))Q[re]=ee,Q[te]=O,te=re;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],te=Q.pop();if(te!==ee){Q[0]=te;e:for(var re=0,O=Q.length,X=O>>>1;re<X;){var q=2*(re+1)-1,V=Q[q],ne=q+1,ge=Q[ne];if(0>i(V,te))ne<O&&0>i(ge,V)?(Q[re]=ge,Q[ne]=te,re=ne):(Q[re]=V,Q[q]=te,re=q);else if(ne<O&&0>i(ge,te))Q[re]=ge,Q[ne]=te,re=ne;else break e}}return ee}function i(Q,ee){var te=Q.sortIndex-ee.sortIndex;return te!==0?te:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Q){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=Q)r(c),ee.sortIndex=ee.expirationTime,e(l,ee);else break;ee=n(c)}}function T(Q){if(x=!1,k(Q),!y)if(n(l)!==null)y=!0,B(j);else{var ee=n(c);ee!==null&&F(T,ee.startTime-Q)}}function j(Q,ee){y=!1,x&&(x=!1,b(N),N=-1),p=!0;var te=h;try{for(k(ee),d=n(l);d!==null&&(!(d.expirationTime>ee)||Q&&!D());){var re=d.callback;if(typeof re=="function"){d.callback=null,h=d.priorityLevel;var O=re(d.expirationTime<=ee);ee=t.unstable_now(),typeof O=="function"?d.callback=O:d===n(l)&&r(l),k(ee)}else r(l);d=n(l)}if(d!==null)var X=!0;else{var q=n(c);q!==null&&F(T,q.startTime-ee),X=!1}return X}finally{d=null,h=te,p=!1}}var P=!1,C=null,N=-1,L=5,R=-1;function D(){return!(t.unstable_now()-R<L)}function M(){if(C!==null){var Q=t.unstable_now();R=Q;var ee=!0;try{ee=C(!0,Q)}finally{ee?H():(P=!1,C=null)}}else P=!1}var H;if(typeof S=="function")H=function(){S(M)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=M,H=function(){Z.postMessage(null)}}else H=function(){v(M,0)};function B(Q){C=Q,P||(P=!0,H())}function F(Q,ee){N=v(function(){Q(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,B(j))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var ee=3;break;default:ee=h}var te=h;h=ee;try{return Q()}finally{h=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var te=h;h=Q;try{return ee()}finally{h=te}},t.unstable_scheduleCallback=function(Q,ee,te){var re=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?re+te:re):te=re,Q){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,Q={id:u++,callback:ee,priorityLevel:Q,startTime:te,expirationTime:O,sortIndex:-1},te>re?(Q.sortIndex=te,e(c,Q),n(l)===null&&Q===n(c)&&(x?(b(N),N=-1):x=!0,F(T,te-re))):(Q.sortIndex=O,e(l,Q),y||p||(y=!0,B(j))),Q},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(Q){var ee=h;return function(){var te=h;h=ee;try{return Q.apply(this,arguments)}finally{h=te}}}}(Nw)),Nw}var UN;function a7(){return UN||(UN=1,kw.exports=o7()),kw.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N;function l7(){if($N)return bo;$N=1;var t=l1(),e=a7();function n(f){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(f,g){o(f,g),o(f+"Capture",g)}function o(f,g){for(i[f]=g,f=0;f<g.length;f++)r.add(g[f])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},d={};function h(f){return l.call(d,f)?!0:l.call(u,f)?!1:c.test(f)?d[f]=!0:(u[f]=!0,!1)}function p(f,g,w,E){if(w!==null&&w.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return E?!1:w!==null?!w.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function y(f,g,w,E){if(g===null||typeof g>"u"||p(f,g,w,E))return!0;if(E)return!1;if(w!==null)switch(w.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function x(f,g,w,E,z,K,ce){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=E,this.attributeNamespace=z,this.mustUseProperty=w,this.propertyName=f,this.type=g,this.sanitizeURL=K,this.removeEmptyString=ce}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){v[f]=new x(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var g=f[0];v[g]=new x(g,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){v[f]=new x(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){v[f]=new x(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){v[f]=new x(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){v[f]=new x(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){v[f]=new x(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){v[f]=new x(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){v[f]=new x(f,5,!1,f.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function S(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var g=f.replace(b,S);v[g]=new x(g,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var g=f.replace(b,S);v[g]=new x(g,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var g=f.replace(b,S);v[g]=new x(g,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!1,!1)}),v.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){v[f]=new x(f,1,!1,f.toLowerCase(),null,!0,!0)});function k(f,g,w,E){var z=v.hasOwnProperty(g)?v[g]:null;(z!==null?z.type!==0:E||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(y(g,w,z,E)&&(w=null),E||z===null?h(g)&&(w===null?f.removeAttribute(g):f.setAttribute(g,""+w)):z.mustUseProperty?f[z.propertyName]=w===null?z.type===3?!1:"":w:(g=z.attributeName,E=z.attributeNamespace,w===null?f.removeAttribute(g):(z=z.type,w=z===3||z===4&&w===!0?"":""+w,E?f.setAttributeNS(E,g,w):f.setAttribute(g,w))))}var T=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),P=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),F=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ee(f){return f===null||typeof f!="object"?null:(f=Q&&f[Q]||f["@@iterator"],typeof f=="function"?f:null)}var te=Object.assign,re;function O(f){if(re===void 0)try{throw Error()}catch(w){var g=w.stack.trim().match(/\n( *(at )?)/);re=g&&g[1]||""}return`
`+re+f}var X=!1;function q(f,g){if(!f||X)return"";X=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Ye){var E=Ye}Reflect.construct(f,[],g)}else{try{g.call()}catch(Ye){E=Ye}f.call(g.prototype)}else{try{throw Error()}catch(Ye){E=Ye}f()}}catch(Ye){if(Ye&&E&&typeof Ye.stack=="string"){for(var z=Ye.stack.split(`
`),K=E.stack.split(`
`),ce=z.length-1,_e=K.length-1;1<=ce&&0<=_e&&z[ce]!==K[_e];)_e--;for(;1<=ce&&0<=_e;ce--,_e--)if(z[ce]!==K[_e]){if(ce!==1||_e!==1)do if(ce--,_e--,0>_e||z[ce]!==K[_e]){var Te=`
`+z[ce].replace(" at new "," at ");return f.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",f.displayName)),Te}while(1<=ce&&0<=_e);break}}}finally{X=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?O(f):""}function V(f){switch(f.tag){case 5:return O(f.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return f=q(f.type,!1),f;case 11:return f=q(f.type.render,!1),f;case 1:return f=q(f.type,!0),f;default:return""}}function ne(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case C:return"Fragment";case P:return"Portal";case L:return"Profiler";case N:return"StrictMode";case H:return"Suspense";case W:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case D:return(f.displayName||"Context")+".Consumer";case R:return(f._context.displayName||"Context")+".Provider";case M:var g=f.render;return f=f.displayName,f||(f=g.displayName||g.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Z:return g=f.displayName||null,g!==null?g:ne(f.type)||"Memo";case B:g=f._payload,f=f._init;try{return ne(f(g))}catch{}}return null}function ge(f){var g=f.type;switch(f.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=g.render,f=f.displayName||f.name||"",g.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(g);case 8:return g===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function ye(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function xe(f){var g=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Se(f){var g=xe(f)?"checked":"value",w=Object.getOwnPropertyDescriptor(f.constructor.prototype,g),E=""+f[g];if(!f.hasOwnProperty(g)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var z=w.get,K=w.set;return Object.defineProperty(f,g,{configurable:!0,get:function(){return z.call(this)},set:function(ce){E=""+ce,K.call(this,ce)}}),Object.defineProperty(f,g,{enumerable:w.enumerable}),{getValue:function(){return E},setValue:function(ce){E=""+ce},stopTracking:function(){f._valueTracker=null,delete f[g]}}}}function He(f){f._valueTracker||(f._valueTracker=Se(f))}function $e(f){if(!f)return!1;var g=f._valueTracker;if(!g)return!0;var w=g.getValue(),E="";return f&&(E=xe(f)?f.checked?"true":"false":f.value),f=E,f!==w?(g.setValue(f),!0):!1}function Ge(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function ze(f,g){var w=g.checked;return te({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??f._wrapperState.initialChecked})}function Ne(f,g){var w=g.defaultValue==null?"":g.defaultValue,E=g.checked!=null?g.checked:g.defaultChecked;w=ye(g.value!=null?g.value:w),f._wrapperState={initialChecked:E,initialValue:w,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function pe(f,g){g=g.checked,g!=null&&k(f,"checked",g,!1)}function qe(f,g){pe(f,g);var w=ye(g.value),E=g.type;if(w!=null)E==="number"?(w===0&&f.value===""||f.value!=w)&&(f.value=""+w):f.value!==""+w&&(f.value=""+w);else if(E==="submit"||E==="reset"){f.removeAttribute("value");return}g.hasOwnProperty("value")?Me(f,g.type,w):g.hasOwnProperty("defaultValue")&&Me(f,g.type,ye(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(f.defaultChecked=!!g.defaultChecked)}function Ze(f,g,w){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var E=g.type;if(!(E!=="submit"&&E!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+f._wrapperState.initialValue,w||g===f.value||(f.value=g),f.defaultValue=g}w=f.name,w!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,w!==""&&(f.name=w)}function Me(f,g,w){(g!=="number"||Ge(f.ownerDocument)!==f)&&(w==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+w&&(f.defaultValue=""+w))}var ke=Array.isArray;function We(f,g,w,E){if(f=f.options,g){g={};for(var z=0;z<w.length;z++)g["$"+w[z]]=!0;for(w=0;w<f.length;w++)z=g.hasOwnProperty("$"+f[w].value),f[w].selected!==z&&(f[w].selected=z),z&&E&&(f[w].defaultSelected=!0)}else{for(w=""+ye(w),g=null,z=0;z<f.length;z++){if(f[z].value===w){f[z].selected=!0,E&&(f[z].defaultSelected=!0);return}g!==null||f[z].disabled||(g=f[z])}g!==null&&(g.selected=!0)}}function it(f,g){if(g.dangerouslySetInnerHTML!=null)throw Error(n(91));return te({},g,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function gt(f,g){var w=g.value;if(w==null){if(w=g.children,g=g.defaultValue,w!=null){if(g!=null)throw Error(n(92));if(ke(w)){if(1<w.length)throw Error(n(93));w=w[0]}g=w}g==null&&(g=""),w=g}f._wrapperState={initialValue:ye(w)}}function xt(f,g){var w=ye(g.value),E=ye(g.defaultValue);w!=null&&(w=""+w,w!==f.value&&(f.value=w),g.defaultValue==null&&f.defaultValue!==w&&(f.defaultValue=w)),E!=null&&(f.defaultValue=""+E)}function Tt(f){var g=f.textContent;g===f._wrapperState.initialValue&&g!==""&&g!==null&&(f.value=g)}function Bt(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qt(f,g){return f==null||f==="http://www.w3.org/1999/xhtml"?Bt(g):f==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var Rt,Dt=function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,w,E,z){MSApp.execUnsafeLocalFunction(function(){return f(g,w,E,z)})}:f}(function(f,g){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=g;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Rt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;g.firstChild;)f.appendChild(g.firstChild)}});function Mt(f,g){if(g){var w=f.firstChild;if(w&&w===f.lastChild&&w.nodeType===3){w.nodeValue=g;return}}f.textContent=g}var ot={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(f){Nn.forEach(function(g){g=g+f.charAt(0).toUpperCase()+f.substring(1),ot[g]=ot[f]})});function Qt(f,g,w){return g==null||typeof g=="boolean"||g===""?"":w||typeof g!="number"||g===0||ot.hasOwnProperty(f)&&ot[f]?(""+g).trim():g+"px"}function Wn(f,g){f=f.style;for(var w in g)if(g.hasOwnProperty(w)){var E=w.indexOf("--")===0,z=Qt(w,g[w],E);w==="float"&&(w="cssFloat"),E?f.setProperty(w,z):f[w]=z}}var cn=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(f,g){if(g){if(cn[f]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(n(137,f));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(n(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(n(61))}if(g.style!=null&&typeof g.style!="object")throw Error(n(62))}}function $r(f,g){if(f.indexOf("-")===-1)return typeof g.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dn=null;function Qr(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var _n=null,gr=null,fn=null;function Yt(f){if(f=Wu(f)){if(typeof _n!="function")throw Error(n(280));var g=f.stateNode;g&&(g=Nf(g),_n(f.stateNode,f.type,g))}}function Ot(f){gr?fn?fn.push(f):fn=[f]:gr=f}function Jt(){if(gr){var f=gr,g=fn;if(fn=gr=null,Yt(f),g)for(f=0;f<g.length;f++)Yt(g[f])}}function Yn(f,g){return f(g)}function hn(){}var Cn=!1;function Lr(f,g,w){if(Cn)return f(g,w);Cn=!0;try{return Yn(f,g,w)}finally{Cn=!1,(gr!==null||fn!==null)&&(hn(),Jt())}}function Et(f,g){var w=f.stateNode;if(w===null)return null;var E=Nf(w);if(E===null)return null;w=E[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(f=f.type,E=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!E;break e;default:f=!1}if(f)return null;if(w&&typeof w!="function")throw Error(n(231,g,typeof w));return w}var lr=!1;if(a)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){lr=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{lr=!1}function nr(f,g,w,E,z,K,ce,_e,Te){var Ye=Array.prototype.slice.call(arguments,3);try{g.apply(w,Ye)}catch(dt){this.onError(dt)}}var jn=!1,On=null,ae=!1,we=null,G={onError:function(f){jn=!0,On=f}};function se(f,g,w,E,z,K,ce,_e,Te){jn=!1,On=null,nr.apply(G,arguments)}function fe(f,g,w,E,z,K,ce,_e,Te){if(se.apply(this,arguments),jn){if(jn){var Ye=On;jn=!1,On=null}else throw Error(n(198));ae||(ae=!0,we=Ye)}}function me(f){var g=f,w=f;if(f.alternate)for(;g.return;)g=g.return;else{f=g;do g=f,(g.flags&4098)!==0&&(w=g.return),f=g.return;while(f)}return g.tag===3?w:null}function Ae(f){if(f.tag===13){var g=f.memoizedState;if(g===null&&(f=f.alternate,f!==null&&(g=f.memoizedState)),g!==null)return g.dehydrated}return null}function De(f){if(me(f)!==f)throw Error(n(188))}function Ie(f){var g=f.alternate;if(!g){if(g=me(f),g===null)throw Error(n(188));return g!==f?null:f}for(var w=f,E=g;;){var z=w.return;if(z===null)break;var K=z.alternate;if(K===null){if(E=z.return,E!==null){w=E;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===w)return De(z),f;if(K===E)return De(z),g;K=K.sibling}throw Error(n(188))}if(w.return!==E.return)w=z,E=K;else{for(var ce=!1,_e=z.child;_e;){if(_e===w){ce=!0,w=z,E=K;break}if(_e===E){ce=!0,E=z,w=K;break}_e=_e.sibling}if(!ce){for(_e=K.child;_e;){if(_e===w){ce=!0,w=K,E=z;break}if(_e===E){ce=!0,E=K,w=z;break}_e=_e.sibling}if(!ce)throw Error(n(189))}}if(w.alternate!==E)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?f:g}function Re(f){return f=Ie(f),f!==null?Ve(f):null}function Ve(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var g=Ve(f);if(g!==null)return g;f=f.sibling}return null}var lt=e.unstable_scheduleCallback,vt=e.unstable_cancelCallback,Ct=e.unstable_shouldYield,yt=e.unstable_requestPaint,pt=e.unstable_now,on=e.unstable_getCurrentPriorityLevel,In=e.unstable_ImmediatePriority,Jn=e.unstable_UserBlockingPriority,Sr=e.unstable_NormalPriority,Lo=e.unstable_LowPriority,da=e.unstable_IdlePriority,Bs=null,Wr=null;function fa(f){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Bs,f,void 0,(f.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:zh,Fr=Math.log,Fh=Math.LN2;function zh(f){return f>>>=0,f===0?32:31-(Fr(f)/Fh|0)|0}var wc=64,Pl=4194304;function bc(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function fs(f,g){var w=f.pendingLanes;if(w===0)return 0;var E=0,z=f.suspendedLanes,K=f.pingedLanes,ce=w&268435455;if(ce!==0){var _e=ce&~z;_e!==0?E=bc(_e):(K&=ce,K!==0&&(E=bc(K)))}else ce=w&~z,ce!==0?E=bc(ce):K!==0&&(E=bc(K));if(E===0)return 0;if(g!==0&&g!==E&&(g&z)===0&&(z=E&-E,K=g&-g,z>=K||z===16&&(K&4194240)!==0))return g;if((E&4)!==0&&(E|=w&16),g=f.entangledLanes,g!==0)for(f=f.entanglements,g&=E;0<g;)w=31-kr(g),z=1<<w,E|=f[w],g&=~z;return E}function xu(f,g){switch(f){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hs(f,g){for(var w=f.suspendedLanes,E=f.pingedLanes,z=f.expirationTimes,K=f.pendingLanes;0<K;){var ce=31-kr(K),_e=1<<ce,Te=z[ce];Te===-1?((_e&w)===0||(_e&E)!==0)&&(z[ce]=xu(_e,g)):Te<=g&&(f.expiredLanes|=_e),K&=~_e}}function _c(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function of(){var f=wc;return wc<<=1,(wc&4194240)===0&&(wc=64),f}function af(f){for(var g=[],w=0;31>w;w++)g.push(f);return g}function Dl(f,g,w){f.pendingLanes|=g,g!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,g=31-kr(g),f[g]=w}function R0(f,g){var w=f.pendingLanes&~g;f.pendingLanes=g,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=g,f.mutableReadLanes&=g,f.entangledLanes&=g,g=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<w;){var z=31-kr(w),K=1<<z;g[z]=0,E[z]=-1,f[z]=-1,w&=~K}}function vu(f,g){var w=f.entangledLanes|=g;for(f=f.entanglements;w;){var E=31-kr(w),z=1<<E;z&g|f[E]&g&&(f[E]|=g),w&=~z}}var Un=0;function wu(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Bh,lf,Uh,ha,Sc,Ol=!1,kc=[],Nr=null,pa=null,Mo=null,rn=new Map,Nc=new Map,ma=[],ga="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(f,g){switch(f){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":pa=null;break;case"mouseover":case"mouseout":Mo=null;break;case"pointerover":case"pointerout":rn.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nc.delete(g.pointerId)}}function Ll(f,g,w,E,z,K){return f===null||f.nativeEvent!==K?(f={blockedOn:g,domEventName:w,eventSystemFlags:E,nativeEvent:K,targetContainers:[z]},g!==null&&(g=Wu(g),g!==null&&lf(g)),f):(f.eventSystemFlags|=E,g=f.targetContainers,z!==null&&g.indexOf(z)===-1&&g.push(z),f)}function bu(f,g,w,E,z){switch(g){case"focusin":return Nr=Ll(Nr,f,g,w,E,z),!0;case"dragenter":return pa=Ll(pa,f,g,w,E,z),!0;case"mouseover":return Mo=Ll(Mo,f,g,w,E,z),!0;case"pointerover":var K=z.pointerId;return rn.set(K,Ll(rn.get(K)||null,f,g,w,E,z)),!0;case"gotpointercapture":return K=z.pointerId,Nc.set(K,Ll(Nc.get(K)||null,f,g,w,E,z)),!0}return!1}function _u(f){var g=Vl(f.target);if(g!==null){var w=me(g);if(w!==null){if(g=w.tag,g===13){if(g=Ae(w),g!==null){f.blockedOn=g,Sc(f.priority,function(){Uh(w)});return}}else if(g===3&&w.stateNode.current.memoizedState.isDehydrated){f.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Su(f){if(f.blockedOn!==null)return!1;for(var g=f.targetContainers;0<g.length;){var w=Nu(f.domEventName,f.eventSystemFlags,g[0],f.nativeEvent);if(w===null){w=f.nativeEvent;var E=new w.constructor(w.type,w);dn=E,w.target.dispatchEvent(E),dn=null}else return g=Wu(w),g!==null&&lf(g),f.blockedOn=w,!1;g.shift()}return!0}function $h(f,g,w){Su(f)&&w.delete(g)}function F0(){Ol=!1,Nr!==null&&Su(Nr)&&(Nr=null),pa!==null&&Su(pa)&&(pa=null),Mo!==null&&Su(Mo)&&(Mo=null),rn.forEach($h),Nc.forEach($h)}function Ga(f,g){f.blockedOn===g&&(f.blockedOn=null,Ol||(Ol=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,F0)))}function Io(f){function g(z){return Ga(z,f)}if(0<kc.length){Ga(kc[0],f);for(var w=1;w<kc.length;w++){var E=kc[w];E.blockedOn===f&&(E.blockedOn=null)}}for(Nr!==null&&Ga(Nr,f),pa!==null&&Ga(pa,f),Mo!==null&&Ga(Mo,f),rn.forEach(g),Nc.forEach(g),w=0;w<ma.length;w++)E=ma[w],E.blockedOn===f&&(E.blockedOn=null);for(;0<ma.length&&(w=ma[0],w.blockedOn===null);)_u(w),w.blockedOn===null&&ma.shift()}var Us=T.ReactCurrentBatchConfig,ku=!0;function Cc(f,g,w,E){var z=Un,K=Us.transition;Us.transition=null;try{Un=1,Ml(f,g,w,E)}finally{Un=z,Us.transition=K}}function uf(f,g,w,E){var z=Un,K=Us.transition;Us.transition=null;try{Un=4,Ml(f,g,w,E)}finally{Un=z,Us.transition=K}}function Ml(f,g,w,E){if(ku){var z=Nu(f,g,w,E);if(z===null)_f(f,g,E,Ec,w),cf(f,E);else if(bu(z,f,g,w,E))E.stopPropagation();else if(cf(f,E),g&4&&-1<ga.indexOf(f)){for(;z!==null;){var K=Wu(z);if(K!==null&&Bh(K),K=Nu(f,g,w,E),K===null&&_f(f,g,E,Ec,w),K===z)break;z=K}z!==null&&E.stopPropagation()}else _f(f,g,E,null,w)}}var Ec=null;function Nu(f,g,w,E){if(Ec=null,f=Qr(E),f=Vl(f),f!==null)if(g=me(f),g===null)f=null;else if(w=g.tag,w===13){if(f=Ae(g),f!==null)return f;f=null}else if(w===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;f=null}else g!==f&&(f=null);return Ec=f,null}function df(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(on()){case In:return 1;case Jn:return 4;case Sr:case Lo:return 16;case da:return 536870912;default:return 16}default:return 16}}var Ro=null,Fo=null,zo=null;function Wh(){if(zo)return zo;var f,g=Fo,w=g.length,E,z="value"in Ro?Ro.value:Ro.textContent,K=z.length;for(f=0;f<w&&g[f]===z[f];f++);var ce=w-f;for(E=1;E<=ce&&g[w-E]===z[K-E];E++);return zo=z.slice(f,1<E?1-E:void 0)}function Bo(f){var g=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&g===13&&(f=13)):f=g,f===10&&(f=13),32<=f||f===13?f:0}function ps(){return!0}function Cu(){return!1}function ei(f){function g(w,E,z,K,ce){this._reactName=w,this._targetInst=z,this.type=E,this.nativeEvent=K,this.target=ce,this.currentTarget=null;for(var _e in f)f.hasOwnProperty(_e)&&(w=f[_e],this[_e]=w?w(K):K[_e]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?ps:Cu,this.isPropagationStopped=Cu,this}return te(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),g}var Il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=ei(Il),Ac=te({},Il,{view:0,detail:0}),ff=ei(Ac),Tc,Eu,ya,Fl=te({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:At,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==ya&&(ya&&f.type==="mousemove"?(Tc=f.screenX-ya.screenX,Eu=f.screenY-ya.screenY):Eu=Tc=0,ya=f),Tc)},movementY:function(f){return"movementY"in f?f.movementY:Eu}}),Au=ei(Fl),Vh=te({},Fl,{dataTransfer:0}),z0=ei(Vh),Tu=te({},Ac,{relatedTarget:0}),Ka=ei(Tu),hf=te({},Il,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=ei(hf),pf=te({},Il,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),I=ei(pf),oe=te({},Il,{data:0}),be=ei(oe),Ce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ht(f){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(f):(f=Qe[f])?!!g[f]:!1}function At(){return ht}var Kt=te({},Ac,{key:function(f){if(f.key){var g=Ce[f.key]||f.key;if(g!=="Unidentified")return g}return f.type==="keypress"?(f=Bo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Fe[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:At,charCode:function(f){return f.type==="keypress"?Bo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Bo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),pn=ei(Kt),xn=te({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=ei(xn),Cr=te({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:At}),Mr=ei(Cr),Vr=te({},Il,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ci=ei(Vr),hi=te({},Fl,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Uo=ei(hi),$s=[9,13,27,32],$o=a&&"CompositionEvent"in window,Bl=null;a&&"documentMode"in document&&(Bl=document.documentMode);var mf=a&&"TextEvent"in window&&!Bl,ju=a&&(!$o||Bl&&8<Bl&&11>=Bl),jc=" ",Pu=!1;function Du(f,g){switch(f){case"keyup":return $s.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pc(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var ti=!1;function Ou(f,g){switch(f){case"compositionend":return Pc(g);case"keypress":return g.which!==32?null:(Pu=!0,jc);case"textInput":return f=g.data,f===jc&&Pu?null:f;default:return null}}function Lu(f,g){if(ti)return f==="compositionend"||!$o&&Du(f,g)?(f=Wh(),zo=Fo=Ro=null,ti=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return ju&&g.locale!=="ko"?null:g.data;default:return null}}var Mu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iu(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g==="input"?!!Mu[f.type]:g==="textarea"}function Gi(f,g,w,E){Ot(E),g=Xh(g,"onChange"),0<g.length&&(w=new Rl("onChange","change",null,w,E),f.push({event:w,listeners:g}))}var Dc=null,Xa=null;function Hh(f){wf(f,0)}function ms(f){var g=zc(f);if($e(g))return f}function gf(f,g){if(f==="change")return g}var qh=!1;if(a){var yf;if(a){var xa="oninput"in document;if(!xa){var Ws=document.createElement("div");Ws.setAttribute("oninput","return;"),xa=typeof Ws.oninput=="function"}yf=xa}else yf=!1;qh=yf&&(!document.documentMode||9<document.documentMode)}function lo(){Dc&&(Dc.detachEvent("onpropertychange",Ya),Xa=Dc=null)}function Ya(f){if(f.propertyName==="value"&&ms(Xa)){var g=[];Gi(g,Xa,f,Qr(f)),Lr(Hh,g)}}function va(f,g,w){f==="focusin"?(lo(),Dc=g,Xa=w,Dc.attachEvent("onpropertychange",Ya)):f==="focusout"&&lo()}function Ja(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return ms(Xa)}function Ru(f,g){if(f==="click")return ms(g)}function Wo(f,g){if(f==="input"||f==="change")return ms(g)}function Fu(f,g){return f===g&&(f!==0||1/f===1/g)||f!==f&&g!==g}var Ki=typeof Object.is=="function"?Object.is:Fu;function co(f,g){if(Ki(f,g))return!0;if(typeof f!="object"||f===null||typeof g!="object"||g===null)return!1;var w=Object.keys(f),E=Object.keys(g);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var z=w[E];if(!l.call(g,z)||!Ki(f[z],g[z]))return!1}return!0}function uo(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function wa(f,g){var w=uo(f);f=0;for(var E;w;){if(w.nodeType===3){if(E=f+w.textContent.length,f<=g&&E>=g)return{node:w,offset:g-f};f=E}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=uo(w)}}function Ul(f,g){return f&&g?f===g?!0:f&&f.nodeType===3?!1:g&&g.nodeType===3?Ul(f,g.parentNode):"contains"in f?f.contains(g):f.compareDocumentPosition?!!(f.compareDocumentPosition(g)&16):!1:!1}function Oc(){for(var f=window,g=Ge();g instanceof f.HTMLIFrameElement;){try{var w=typeof g.contentWindow.location.href=="string"}catch{w=!1}if(w)f=g.contentWindow;else break;g=Ge(f.document)}return g}function Za(f){var g=f&&f.nodeName&&f.nodeName.toLowerCase();return g&&(g==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||g==="textarea"||f.contentEditable==="true")}function $l(f){var g=Oc(),w=f.focusedElem,E=f.selectionRange;if(g!==w&&w&&w.ownerDocument&&Ul(w.ownerDocument.documentElement,w)){if(E!==null&&Za(w)){if(g=E.start,f=E.end,f===void 0&&(f=g),"selectionStart"in w)w.selectionStart=g,w.selectionEnd=Math.min(f,w.value.length);else if(f=(g=w.ownerDocument||document)&&g.defaultView||window,f.getSelection){f=f.getSelection();var z=w.textContent.length,K=Math.min(E.start,z);E=E.end===void 0?K:Math.min(E.end,z),!f.extend&&K>E&&(z=E,E=K,K=z),z=wa(w,K);var ce=wa(w,E);z&&ce&&(f.rangeCount!==1||f.anchorNode!==z.node||f.anchorOffset!==z.offset||f.focusNode!==ce.node||f.focusOffset!==ce.offset)&&(g=g.createRange(),g.setStart(z.node,z.offset),f.removeAllRanges(),K>E?(f.addRange(g),f.extend(ce.node,ce.offset)):(g.setEnd(ce.node,ce.offset),f.addRange(g)))}}for(g=[],f=w;f=f.parentNode;)f.nodeType===1&&g.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<g.length;w++)f=g[w],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var xf=a&&"documentMode"in document&&11>=document.documentMode,wi=null,Vo=null,Vn=null,rr=!1;function Ir(f,g,w){var E=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;rr||wi==null||wi!==Ge(E)||(E=wi,"selectionStart"in E&&Za(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),Vn&&co(Vn,E)||(Vn=E,E=Xh(Vo,"onSelect"),0<E.length&&(g=new Rl("onSelect","select",null,g,w),f.push({event:g,listeners:E}),g.target=wi)))}function Rr(f,g){var w={};return w[f.toLowerCase()]=g.toLowerCase(),w["Webkit"+f]="webkit"+g,w["Moz"+f]="moz"+g,w}var gs={animationend:Rr("Animation","AnimationEnd"),animationiteration:Rr("Animation","AnimationIteration"),animationstart:Rr("Animation","AnimationStart"),transitionend:Rr("Transition","TransitionEnd")},ba={},Lc={};a&&(Lc=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Mc(f){if(ba[f])return ba[f];if(!gs[f])return f;var g=gs[f],w;for(w in g)if(g.hasOwnProperty(w)&&w in Lc)return ba[f]=g[w];return f}var B0=Mc("animationend"),U0=Mc("animationiteration"),$0=Mc("animationstart"),W0=Mc("transitionend"),V0=new Map,H0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(f,g){V0.set(f,g),s(g,[f])}for(var zu=0;zu<H0.length;zu++){var Xi=H0[zu],fo=Xi.toLowerCase(),Gh=Xi[0].toUpperCase()+Xi.slice(1);_a(fo,"on"+Gh)}_a(B0,"onAnimationEnd"),_a(U0,"onAnimationIteration"),_a($0,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(W0,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function vf(f,g,w){var E=f.type||"unknown-event";f.currentTarget=w,fe(E,g,void 0,f),f.currentTarget=null}function wf(f,g){g=(g&4)!==0;for(var w=0;w<f.length;w++){var E=f[w],z=E.event;E=E.listeners;e:{var K=void 0;if(g)for(var ce=E.length-1;0<=ce;ce--){var _e=E[ce],Te=_e.instance,Ye=_e.currentTarget;if(_e=_e.listener,Te!==K&&z.isPropagationStopped())break e;vf(z,_e,Ye),K=Te}else for(ce=0;ce<E.length;ce++){if(_e=E[ce],Te=_e.instance,Ye=_e.currentTarget,_e=_e.listener,Te!==K&&z.isPropagationStopped())break e;vf(z,_e,Ye),K=Te}}}if(ae)throw f=we,ae=!1,we=null,f}function cr(f,g){var w=g[xs];w===void 0&&(w=g[xs]=new Set);var E=f+"__bubble";w.has(E)||(bf(g,f,2,!1),w.add(E))}function Kh(f,g,w){var E=0;g&&(E|=4),bf(w,f,E,g)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Ic(f){if(!f[Bu]){f[Bu]=!0,r.forEach(function(w){w!=="selectionchange"&&(T1.has(w)||Kh(w,!1,f),Kh(w,!0,f))});var g=f.nodeType===9?f:f.ownerDocument;g===null||g[Bu]||(g[Bu]=!0,Kh("selectionchange",!1,g))}}function bf(f,g,w,E){switch(df(g)){case 1:var z=Cc;break;case 4:z=uf;break;default:z=Ml}w=z.bind(null,g,w,f),z=void 0,!lr||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(z=!0),E?z!==void 0?f.addEventListener(g,w,{capture:!0,passive:z}):f.addEventListener(g,w,!0):z!==void 0?f.addEventListener(g,w,{passive:z}):f.addEventListener(g,w,!1)}function _f(f,g,w,E,z){var K=E;if((g&1)===0&&(g&2)===0&&E!==null)e:for(;;){if(E===null)return;var ce=E.tag;if(ce===3||ce===4){var _e=E.stateNode.containerInfo;if(_e===z||_e.nodeType===8&&_e.parentNode===z)break;if(ce===4)for(ce=E.return;ce!==null;){var Te=ce.tag;if((Te===3||Te===4)&&(Te=ce.stateNode.containerInfo,Te===z||Te.nodeType===8&&Te.parentNode===z))return;ce=ce.return}for(;_e!==null;){if(ce=Vl(_e),ce===null)return;if(Te=ce.tag,Te===5||Te===6){E=K=ce;continue e}_e=_e.parentNode}}E=E.return}Lr(function(){var Ye=K,dt=Qr(w),mt=[];e:{var ut=V0.get(f);if(ut!==void 0){var It=Rl,Ut=f;switch(f){case"keypress":if(Bo(w)===0)break e;case"keydown":case"keyup":It=pn;break;case"focusin":Ut="focus",It=Ka;break;case"focusout":Ut="blur",It=Ka;break;case"beforeblur":case"afterblur":It=Ka;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=Au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=Mr;break;case B0:case U0:case $0:It=zl;break;case W0:It=Ci;break;case"scroll":It=ff;break;case"wheel":It=Uo;break;case"copy":case"cut":case"paste":It=I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=Tn}var Wt=(g&4)!==0,si=!Wt&&f==="scroll",Ke=Wt?ut!==null?ut+"Capture":null:ut;Wt=[];for(var Oe=Ye,Xe;Oe!==null;){Xe=Oe;var wt=Xe.stateNode;if(Xe.tag===5&&wt!==null&&(Xe=wt,Ke!==null&&(wt=Et(Oe,Ke),wt!=null&&Wt.push(Sf(Oe,wt,Xe)))),si)break;Oe=Oe.return}0<Wt.length&&(ut=new It(ut,Ut,null,w,dt),mt.push({event:ut,listeners:Wt}))}}if((g&7)===0){e:{if(ut=f==="mouseover"||f==="pointerover",It=f==="mouseout"||f==="pointerout",ut&&w!==dn&&(Ut=w.relatedTarget||w.fromElement)&&(Vl(Ut)||Ut[Ei]))break e;if((It||ut)&&(ut=dt.window===dt?dt:(ut=dt.ownerDocument)?ut.defaultView||ut.parentWindow:window,It?(Ut=w.relatedTarget||w.toElement,It=Ye,Ut=Ut?Vl(Ut):null,Ut!==null&&(si=me(Ut),Ut!==si||Ut.tag!==5&&Ut.tag!==6)&&(Ut=null)):(It=null,Ut=Ye),It!==Ut)){if(Wt=Au,wt="onMouseLeave",Ke="onMouseEnter",Oe="mouse",(f==="pointerout"||f==="pointerover")&&(Wt=Tn,wt="onPointerLeave",Ke="onPointerEnter",Oe="pointer"),si=It==null?ut:zc(It),Xe=Ut==null?ut:zc(Ut),ut=new Wt(wt,Oe+"leave",It,w,dt),ut.target=si,ut.relatedTarget=Xe,wt=null,Vl(dt)===Ye&&(Wt=new Wt(Ke,Oe+"enter",Ut,w,dt),Wt.target=Xe,Wt.relatedTarget=si,wt=Wt),si=wt,It&&Ut)t:{for(Wt=It,Ke=Ut,Oe=0,Xe=Wt;Xe;Xe=Rc(Xe))Oe++;for(Xe=0,wt=Ke;wt;wt=Rc(wt))Xe++;for(;0<Oe-Xe;)Wt=Rc(Wt),Oe--;for(;0<Xe-Oe;)Ke=Rc(Ke),Xe--;for(;Oe--;){if(Wt===Ke||Ke!==null&&Wt===Ke.alternate)break t;Wt=Rc(Wt),Ke=Rc(Ke)}Wt=null}else Wt=null;It!==null&&j1(mt,ut,It,Wt,!1),Ut!==null&&si!==null&&j1(mt,si,Ut,Wt,!0)}}e:{if(ut=Ye?zc(Ye):window,It=ut.nodeName&&ut.nodeName.toLowerCase(),It==="select"||It==="input"&&ut.type==="file")var Vt=gf;else if(Iu(ut))if(qh)Vt=Wo;else{Vt=Ja;var en=va}else(It=ut.nodeName)&&It.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(Vt=Ru);if(Vt&&(Vt=Vt(f,Ye))){Gi(mt,Vt,w,dt);break e}en&&en(f,ut,Ye),f==="focusout"&&(en=ut._wrapperState)&&en.controlled&&ut.type==="number"&&Me(ut,"number",ut.value)}switch(en=Ye?zc(Ye):window,f){case"focusin":(Iu(en)||en.contentEditable==="true")&&(wi=en,Vo=Ye,Vn=null);break;case"focusout":Vn=Vo=wi=null;break;case"mousedown":rr=!0;break;case"contextmenu":case"mouseup":case"dragend":rr=!1,Ir(mt,w,dt);break;case"selectionchange":if(xf)break;case"keydown":case"keyup":Ir(mt,w,dt)}var tn;if($o)e:{switch(f){case"compositionstart":var un="onCompositionStart";break e;case"compositionend":un="onCompositionEnd";break e;case"compositionupdate":un="onCompositionUpdate";break e}un=void 0}else ti?Du(f,w)&&(un="onCompositionEnd"):f==="keydown"&&w.keyCode===229&&(un="onCompositionStart");un&&(ju&&w.locale!=="ko"&&(ti||un!=="onCompositionStart"?un==="onCompositionEnd"&&ti&&(tn=Wh()):(Ro=dt,Fo="value"in Ro?Ro.value:Ro.textContent,ti=!0)),en=Xh(Ye,un),0<en.length&&(un=new be(un,f,null,w,dt),mt.push({event:un,listeners:en}),tn?un.data=tn:(tn=Pc(w),tn!==null&&(un.data=tn)))),(tn=mf?Ou(f,w):Lu(f,w))&&(Ye=Xh(Ye,"onBeforeInput"),0<Ye.length&&(dt=new be("onBeforeInput","beforeinput",null,w,dt),mt.push({event:dt,listeners:Ye}),dt.data=tn))}wf(mt,g)})}function Sf(f,g,w){return{instance:f,listener:g,currentTarget:w}}function Xh(f,g){for(var w=g+"Capture",E=[];f!==null;){var z=f,K=z.stateNode;z.tag===5&&K!==null&&(z=K,K=Et(f,w),K!=null&&E.unshift(Sf(f,K,z)),K=Et(f,g),K!=null&&E.push(Sf(f,K,z))),f=f.return}return E}function Rc(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function j1(f,g,w,E,z){for(var K=g._reactName,ce=[];w!==null&&w!==E;){var _e=w,Te=_e.alternate,Ye=_e.stateNode;if(Te!==null&&Te===E)break;_e.tag===5&&Ye!==null&&(_e=Ye,z?(Te=Et(w,K),Te!=null&&ce.unshift(Sf(w,Te,_e))):z||(Te=Et(w,K),Te!=null&&ce.push(Sf(w,Te,_e)))),w=w.return}ce.length!==0&&f.push({event:g,listeners:ce})}var M2=/\r\n?/g,I2=/\u0000|\uFFFD/g;function P1(f){return(typeof f=="string"?f:""+f).replace(M2,`
`).replace(I2,"")}function Yh(f,g,w){if(g=P1(g),P1(f)!==g&&w)throw Error(n(425))}function Uu(){}var kf=null,Fc=null;function q0(f,g){return f==="textarea"||f==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var G0=typeof setTimeout=="function"?setTimeout:void 0,D1=typeof clearTimeout=="function"?clearTimeout:void 0,O1=typeof Promise=="function"?Promise:void 0,R2=typeof queueMicrotask=="function"?queueMicrotask:typeof O1<"u"?function(f){return O1.resolve(null).then(f).catch(F2)}:G0;function F2(f){setTimeout(function(){throw f})}function K0(f,g){var w=g,E=0;do{var z=w.nextSibling;if(f.removeChild(w),z&&z.nodeType===8)if(w=z.data,w==="/$"){if(E===0){f.removeChild(z),Io(g);return}E--}else w!=="$"&&w!=="$?"&&w!=="$!"||E++;w=z}while(w);Io(g)}function Yi(f){for(;f!=null;f=f.nextSibling){var g=f.nodeType;if(g===1||g===3)break;if(g===8){if(g=f.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return f}function ho(f){f=f.previousSibling;for(var g=0;f;){if(f.nodeType===8){var w=f.data;if(w==="$"||w==="$!"||w==="$?"){if(g===0)return f;g--}else w==="/$"&&g++}f=f.previousSibling}return null}var ys=Math.random().toString(36).slice(2),Sa="__reactFiber$"+ys,$u="__reactProps$"+ys,Ei="__reactContainer$"+ys,xs="__reactEvents$"+ys,z2="__reactListeners$"+ys,B2="__reactHandles$"+ys;function Vl(f){var g=f[Sa];if(g)return g;for(var w=f.parentNode;w;){if(g=w[Ei]||w[Sa]){if(w=g.alternate,g.child!==null||w!==null&&w.child!==null)for(f=ho(f);f!==null;){if(w=f[Sa])return w;f=ho(f)}return g}f=w,w=f.parentNode}return null}function Wu(f){return f=f[Sa]||f[Ei],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function zc(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(n(33))}function Nf(f){return f[$u]||null}var X0=[],Qa=-1;function Ho(f){return{current:f}}function Zn(f){0>Qa||(f.current=X0[Qa],X0[Qa]=null,Qa--)}function ir(f,g){Qa++,X0[Qa]=f.current,f.current=g}var Hl={},bi=Ho(Hl),vs=Ho(!1),Bc=Hl;function Vu(f,g){var w=f.type.contextTypes;if(!w)return Hl;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===g)return E.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in w)z[K]=g[K];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=g,f.__reactInternalMemoizedMaskedChildContext=z),z}function ws(f){return f=f.childContextTypes,f!=null}function Jh(){Zn(vs),Zn(bi)}function L1(f,g,w){if(bi.current!==Hl)throw Error(n(168));ir(bi,g),ir(vs,w)}function Y0(f,g,w){var E=f.stateNode;if(g=g.childContextTypes,typeof E.getChildContext!="function")return w;E=E.getChildContext();for(var z in E)if(!(z in g))throw Error(n(108,ge(f)||"Unknown",z));return te({},w,E)}function Uc(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Hl,Bc=bi.current,ir(bi,f),ir(vs,vs.current),!0}function M1(f,g,w){var E=f.stateNode;if(!E)throw Error(n(169));w?(f=Y0(f,g,Bc),E.__reactInternalMemoizedMergedChildContext=f,Zn(vs),Zn(bi),ir(bi,f)):Zn(vs),ir(vs,w)}var el=null,Cf=!1,_=!1;function A(f){el===null?el=[f]:el.push(f)}function U(f){Cf=!0,A(f)}function J(){if(!_&&el!==null){_=!0;var f=0,g=Un;try{var w=el;for(Un=1;f<w.length;f++){var E=w[f];do E=E(!0);while(E!==null)}el=null,Cf=!1}catch(z){throw el!==null&&(el=el.slice(f+1)),lt(In,J),z}finally{Un=g,_=!1}}return null}var ie=[],le=0,ue=null,de=0,he=[],ve=0,Ee=null,Be=1,Ue="";function Le(f,g){ie[le++]=de,ie[le++]=ue,ue=f,de=g}function st(f,g,w){he[ve++]=Be,he[ve++]=Ue,he[ve++]=Ee,Ee=f;var E=Be;f=Ue;var z=32-kr(E)-1;E&=~(1<<z),w+=1;var K=32-kr(g)+z;if(30<K){var ce=z-z%5;K=(E&(1<<ce)-1).toString(32),E>>=ce,z-=ce,Be=1<<32-kr(g)+z|w<<z|E,Ue=K+f}else Be=1<<K|w<<z|E,Ue=f}function Je(f){f.return!==null&&(Le(f,1),st(f,1,0))}function je(f){for(;f===ue;)ue=ie[--le],ie[le]=null,de=ie[--le],ie[le]=null;for(;f===Ee;)Ee=he[--ve],he[ve]=null,Ue=he[--ve],he[ve]=null,Be=he[--ve],he[ve]=null}var Pe=null,tt=null,et=!1,rt=null;function jt(f,g){var w=Ta(5,null,null,0);w.elementType="DELETED",w.stateNode=g,w.return=f,g=f.deletions,g===null?(f.deletions=[w],f.flags|=16):g.push(w)}function kt(f,g){switch(f.tag){case 5:var w=f.type;return g=g.nodeType!==1||w.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(f.stateNode=g,Pe=f,tt=Yi(g.firstChild),!0):!1;case 6:return g=f.pendingProps===""||g.nodeType!==3?null:g,g!==null?(f.stateNode=g,Pe=f,tt=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(w=Ee!==null?{id:Be,overflow:Ue}:null,f.memoizedState={dehydrated:g,treeContext:w,retryLane:1073741824},w=Ta(18,null,null,0),w.stateNode=g,w.return=f,f.child=w,Pe=f,tt=null,!0):!1;default:return!1}}function Xt(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Nt(f){if(et){var g=tt;if(g){var w=g;if(!kt(f,g)){if(Xt(f))throw Error(n(418));g=Yi(w.nextSibling);var E=Pe;g&&kt(f,g)?jt(E,w):(f.flags=f.flags&-4097|2,et=!1,Pe=f)}}else{if(Xt(f))throw Error(n(418));f.flags=f.flags&-4097|2,et=!1,Pe=f}}}function Rn(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Pe=f}function Fn(f){if(f!==Pe)return!1;if(!et)return Rn(f),et=!0,!1;var g;if((g=f.tag!==3)&&!(g=f.tag!==5)&&(g=f.type,g=g!=="head"&&g!=="body"&&!q0(f.type,f.memoizedProps)),g&&(g=tt)){if(Xt(f))throw Pn(),Error(n(418));for(;g;)jt(f,g),g=Yi(g.nextSibling)}if(Rn(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,g=0;f;){if(f.nodeType===8){var w=f.data;if(w==="/$"){if(g===0){tt=Yi(f.nextSibling);break e}g--}else w!=="$"&&w!=="$!"&&w!=="$?"||g++}f=f.nextSibling}tt=null}}else tt=Pe?Yi(f.stateNode.nextSibling):null;return!0}function Pn(){for(var f=tt;f;)f=Yi(f.nextSibling)}function yn(){tt=Pe=null,et=!1}function Qn(f){rt===null?rt=[f]:rt.push(f)}var sr=T.ReactCurrentBatchConfig;function ln(f,g,w){if(f=w.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(n(309));var E=w.stateNode}if(!E)throw Error(n(147,f));var z=E,K=""+f;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===K?g.ref:(g=function(ce){var _e=z.refs;ce===null?delete _e[K]:_e[K]=ce},g._stringRef=K,g)}if(typeof f!="string")throw Error(n(284));if(!w._owner)throw Error(n(290,f))}return f}function Er(f,g){throw f=Object.prototype.toString.call(g),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":f))}function Ji(f){var g=f._init;return g(f._payload)}function zr(f){function g(Ke,Oe){if(f){var Xe=Ke.deletions;Xe===null?(Ke.deletions=[Oe],Ke.flags|=16):Xe.push(Oe)}}function w(Ke,Oe){if(!f)return null;for(;Oe!==null;)g(Ke,Oe),Oe=Oe.sibling;return null}function E(Ke,Oe){for(Ke=new Map;Oe!==null;)Oe.key!==null?Ke.set(Oe.key,Oe):Ke.set(Oe.index,Oe),Oe=Oe.sibling;return Ke}function z(Ke,Oe){return Ke=nd(Ke,Oe),Ke.index=0,Ke.sibling=null,Ke}function K(Ke,Oe,Xe){return Ke.index=Xe,f?(Xe=Ke.alternate,Xe!==null?(Xe=Xe.index,Xe<Oe?(Ke.flags|=2,Oe):Xe):(Ke.flags|=2,Oe)):(Ke.flags|=1048576,Oe)}function ce(Ke){return f&&Ke.alternate===null&&(Ke.flags|=2),Ke}function _e(Ke,Oe,Xe,wt){return Oe===null||Oe.tag!==6?(Oe=mw(Xe,Ke.mode,wt),Oe.return=Ke,Oe):(Oe=z(Oe,Xe),Oe.return=Ke,Oe)}function Te(Ke,Oe,Xe,wt){var Vt=Xe.type;return Vt===C?dt(Ke,Oe,Xe.props.children,wt,Xe.key):Oe!==null&&(Oe.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===B&&Ji(Vt)===Oe.type)?(wt=z(Oe,Xe.props),wt.ref=ln(Ke,Oe,Xe),wt.return=Ke,wt):(wt=ty(Xe.type,Xe.key,Xe.props,null,Ke.mode,wt),wt.ref=ln(Ke,Oe,Xe),wt.return=Ke,wt)}function Ye(Ke,Oe,Xe,wt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Xe.containerInfo||Oe.stateNode.implementation!==Xe.implementation?(Oe=gw(Xe,Ke.mode,wt),Oe.return=Ke,Oe):(Oe=z(Oe,Xe.children||[]),Oe.return=Ke,Oe)}function dt(Ke,Oe,Xe,wt,Vt){return Oe===null||Oe.tag!==7?(Oe=Lf(Xe,Ke.mode,wt,Vt),Oe.return=Ke,Oe):(Oe=z(Oe,Xe),Oe.return=Ke,Oe)}function mt(Ke,Oe,Xe){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return Oe=mw(""+Oe,Ke.mode,Xe),Oe.return=Ke,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case j:return Xe=ty(Oe.type,Oe.key,Oe.props,null,Ke.mode,Xe),Xe.ref=ln(Ke,null,Oe),Xe.return=Ke,Xe;case P:return Oe=gw(Oe,Ke.mode,Xe),Oe.return=Ke,Oe;case B:var wt=Oe._init;return mt(Ke,wt(Oe._payload),Xe)}if(ke(Oe)||ee(Oe))return Oe=Lf(Oe,Ke.mode,Xe,null),Oe.return=Ke,Oe;Er(Ke,Oe)}return null}function ut(Ke,Oe,Xe,wt){var Vt=Oe!==null?Oe.key:null;if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Vt!==null?null:_e(Ke,Oe,""+Xe,wt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case j:return Xe.key===Vt?Te(Ke,Oe,Xe,wt):null;case P:return Xe.key===Vt?Ye(Ke,Oe,Xe,wt):null;case B:return Vt=Xe._init,ut(Ke,Oe,Vt(Xe._payload),wt)}if(ke(Xe)||ee(Xe))return Vt!==null?null:dt(Ke,Oe,Xe,wt,null);Er(Ke,Xe)}return null}function It(Ke,Oe,Xe,wt,Vt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return Ke=Ke.get(Xe)||null,_e(Oe,Ke,""+wt,Vt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case j:return Ke=Ke.get(wt.key===null?Xe:wt.key)||null,Te(Oe,Ke,wt,Vt);case P:return Ke=Ke.get(wt.key===null?Xe:wt.key)||null,Ye(Oe,Ke,wt,Vt);case B:var en=wt._init;return It(Ke,Oe,Xe,en(wt._payload),Vt)}if(ke(wt)||ee(wt))return Ke=Ke.get(Xe)||null,dt(Oe,Ke,wt,Vt,null);Er(Oe,wt)}return null}function Ut(Ke,Oe,Xe,wt){for(var Vt=null,en=null,tn=Oe,un=Oe=0,Pi=null;tn!==null&&un<Xe.length;un++){tn.index>un?(Pi=tn,tn=null):Pi=tn.sibling;var Gn=ut(Ke,tn,Xe[un],wt);if(Gn===null){tn===null&&(tn=Pi);break}f&&tn&&Gn.alternate===null&&g(Ke,tn),Oe=K(Gn,Oe,un),en===null?Vt=Gn:en.sibling=Gn,en=Gn,tn=Pi}if(un===Xe.length)return w(Ke,tn),et&&Le(Ke,un),Vt;if(tn===null){for(;un<Xe.length;un++)tn=mt(Ke,Xe[un],wt),tn!==null&&(Oe=K(tn,Oe,un),en===null?Vt=tn:en.sibling=tn,en=tn);return et&&Le(Ke,un),Vt}for(tn=E(Ke,tn);un<Xe.length;un++)Pi=It(tn,Ke,un,Xe[un],wt),Pi!==null&&(f&&Pi.alternate!==null&&tn.delete(Pi.key===null?un:Pi.key),Oe=K(Pi,Oe,un),en===null?Vt=Pi:en.sibling=Pi,en=Pi);return f&&tn.forEach(function(rd){return g(Ke,rd)}),et&&Le(Ke,un),Vt}function Wt(Ke,Oe,Xe,wt){var Vt=ee(Xe);if(typeof Vt!="function")throw Error(n(150));if(Xe=Vt.call(Xe),Xe==null)throw Error(n(151));for(var en=Vt=null,tn=Oe,un=Oe=0,Pi=null,Gn=Xe.next();tn!==null&&!Gn.done;un++,Gn=Xe.next()){tn.index>un?(Pi=tn,tn=null):Pi=tn.sibling;var rd=ut(Ke,tn,Gn.value,wt);if(rd===null){tn===null&&(tn=Pi);break}f&&tn&&rd.alternate===null&&g(Ke,tn),Oe=K(rd,Oe,un),en===null?Vt=rd:en.sibling=rd,en=rd,tn=Pi}if(Gn.done)return w(Ke,tn),et&&Le(Ke,un),Vt;if(tn===null){for(;!Gn.done;un++,Gn=Xe.next())Gn=mt(Ke,Gn.value,wt),Gn!==null&&(Oe=K(Gn,Oe,un),en===null?Vt=Gn:en.sibling=Gn,en=Gn);return et&&Le(Ke,un),Vt}for(tn=E(Ke,tn);!Gn.done;un++,Gn=Xe.next())Gn=It(tn,Ke,un,Gn.value,wt),Gn!==null&&(f&&Gn.alternate!==null&&tn.delete(Gn.key===null?un:Gn.key),Oe=K(Gn,Oe,un),en===null?Vt=Gn:en.sibling=Gn,en=Gn);return f&&tn.forEach(function(JF){return g(Ke,JF)}),et&&Le(Ke,un),Vt}function si(Ke,Oe,Xe,wt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===C&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case j:e:{for(var Vt=Xe.key,en=Oe;en!==null;){if(en.key===Vt){if(Vt=Xe.type,Vt===C){if(en.tag===7){w(Ke,en.sibling),Oe=z(en,Xe.props.children),Oe.return=Ke,Ke=Oe;break e}}else if(en.elementType===Vt||typeof Vt=="object"&&Vt!==null&&Vt.$$typeof===B&&Ji(Vt)===en.type){w(Ke,en.sibling),Oe=z(en,Xe.props),Oe.ref=ln(Ke,en,Xe),Oe.return=Ke,Ke=Oe;break e}w(Ke,en);break}else g(Ke,en);en=en.sibling}Xe.type===C?(Oe=Lf(Xe.props.children,Ke.mode,wt,Xe.key),Oe.return=Ke,Ke=Oe):(wt=ty(Xe.type,Xe.key,Xe.props,null,Ke.mode,wt),wt.ref=ln(Ke,Oe,Xe),wt.return=Ke,Ke=wt)}return ce(Ke);case P:e:{for(en=Xe.key;Oe!==null;){if(Oe.key===en)if(Oe.tag===4&&Oe.stateNode.containerInfo===Xe.containerInfo&&Oe.stateNode.implementation===Xe.implementation){w(Ke,Oe.sibling),Oe=z(Oe,Xe.children||[]),Oe.return=Ke,Ke=Oe;break e}else{w(Ke,Oe);break}else g(Ke,Oe);Oe=Oe.sibling}Oe=gw(Xe,Ke.mode,wt),Oe.return=Ke,Ke=Oe}return ce(Ke);case B:return en=Xe._init,si(Ke,Oe,en(Xe._payload),wt)}if(ke(Xe))return Ut(Ke,Oe,Xe,wt);if(ee(Xe))return Wt(Ke,Oe,Xe,wt);Er(Ke,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Oe!==null&&Oe.tag===6?(w(Ke,Oe.sibling),Oe=z(Oe,Xe),Oe.return=Ke,Ke=Oe):(w(Ke,Oe),Oe=mw(Xe,Ke.mode,wt),Oe.return=Ke,Ke=Oe),ce(Ke)):w(Ke,Oe)}return si}var ni=zr(!0),Hn=zr(!1),Ai=Ho(null),Ti=null,Ar=null,ri=null;function _i(){ri=Ar=Ti=null}function bs(f){var g=Ai.current;Zn(Ai),f._currentValue=g}function po(f,g,w){for(;f!==null;){var E=f.alternate;if((f.childLanes&g)!==g?(f.childLanes|=g,E!==null&&(E.childLanes|=g)):E!==null&&(E.childLanes&g)!==g&&(E.childLanes|=g),f===w)break;f=f.return}}function Tr(f,g){Ti=f,ri=Ar=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&g)!==0&&(xo=!0),f.firstContext=null)}function Hr(f){var g=f._currentValue;if(ri!==f)if(f={context:f,memoizedValue:g,next:null},Ar===null){if(Ti===null)throw Error(n(308));Ar=f,Ti.dependencies={lanes:0,firstContext:f}}else Ar=Ar.next=f;return g}var Vs=null;function ql(f){Vs===null?Vs=[f]:Vs.push(f)}function tl(f,g,w,E){var z=g.interleaved;return z===null?(w.next=w,ql(g)):(w.next=z.next,z.next=w),g.interleaved=w,qn(f,E)}function qn(f,g){f.lanes|=g;var w=f.alternate;for(w!==null&&(w.lanes|=g),w=f,f=f.return;f!==null;)f.childLanes|=g,w=f.alternate,w!==null&&(w.childLanes|=g),w=f,f=f.return;return w.tag===3?w.stateNode:null}var ka=!1;function Zh(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J0(f,g){f=f.updateQueue,g.updateQueue===f&&(g.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function mo(f,g){return{eventTime:f,lane:g,tag:0,payload:null,callback:null,next:null}}function go(f,g,w){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,($n&2)!==0){var z=E.pending;return z===null?g.next=g:(g.next=z.next,z.next=g),E.pending=g,qn(f,w)}return z=E.interleaved,z===null?(g.next=g,ql(E)):(g.next=z.next,z.next=g),E.interleaved=g,qn(f,w)}function $c(f,g,w){if(g=g.updateQueue,g!==null&&(g=g.shared,(w&4194240)!==0)){var E=g.lanes;E&=f.pendingLanes,w|=E,g.lanes=w,vu(f,w)}}function yo(f,g){var w=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,w===E)){var z=null,K=null;if(w=w.firstBaseUpdate,w!==null){do{var ce={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};K===null?z=K=ce:K=K.next=ce,w=w.next}while(w!==null);K===null?z=K=g:K=K.next=g}else z=K=g;w={baseState:E.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:E.shared,effects:E.effects},f.updateQueue=w;return}f=w.lastBaseUpdate,f===null?w.firstBaseUpdate=g:f.next=g,w.lastBaseUpdate=g}function nl(f,g,w,E){var z=f.updateQueue;ka=!1;var K=z.firstBaseUpdate,ce=z.lastBaseUpdate,_e=z.shared.pending;if(_e!==null){z.shared.pending=null;var Te=_e,Ye=Te.next;Te.next=null,ce===null?K=Ye:ce.next=Ye,ce=Te;var dt=f.alternate;dt!==null&&(dt=dt.updateQueue,_e=dt.lastBaseUpdate,_e!==ce&&(_e===null?dt.firstBaseUpdate=Ye:_e.next=Ye,dt.lastBaseUpdate=Te))}if(K!==null){var mt=z.baseState;ce=0,dt=Ye=Te=null,_e=K;do{var ut=_e.lane,It=_e.eventTime;if((E&ut)===ut){dt!==null&&(dt=dt.next={eventTime:It,lane:0,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null});e:{var Ut=f,Wt=_e;switch(ut=g,It=w,Wt.tag){case 1:if(Ut=Wt.payload,typeof Ut=="function"){mt=Ut.call(It,mt,ut);break e}mt=Ut;break e;case 3:Ut.flags=Ut.flags&-65537|128;case 0:if(Ut=Wt.payload,ut=typeof Ut=="function"?Ut.call(It,mt,ut):Ut,ut==null)break e;mt=te({},mt,ut);break e;case 2:ka=!0}}_e.callback!==null&&_e.lane!==0&&(f.flags|=64,ut=z.effects,ut===null?z.effects=[_e]:ut.push(_e))}else It={eventTime:It,lane:ut,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},dt===null?(Ye=dt=It,Te=mt):dt=dt.next=It,ce|=ut;if(_e=_e.next,_e===null){if(_e=z.shared.pending,_e===null)break;ut=_e,_e=ut.next,ut.next=null,z.lastBaseUpdate=ut,z.shared.pending=null}}while(!0);if(dt===null&&(Te=mt),z.baseState=Te,z.firstBaseUpdate=Ye,z.lastBaseUpdate=dt,g=z.shared.interleaved,g!==null){z=g;do ce|=z.lane,z=z.next;while(z!==g)}else K===null&&(z.shared.lanes=0);jf|=ce,f.lanes=ce,f.memoizedState=mt}}function Wc(f,g,w){if(f=g.effects,g.effects=null,f!==null)for(g=0;g<f.length;g++){var E=f[g],z=E.callback;if(z!==null){if(E.callback=null,E=w,typeof z!="function")throw Error(n(191,z));z.call(E)}}}var Hu={},Hs=Ho(Hu),qu=Ho(Hu),Gl=Ho(Hu);function rl(f){if(f===Hu)throw Error(n(174));return f}function Gu(f,g){switch(ir(Gl,g),ir(qu,f),ir(Hs,Hu),f=g.nodeType,f){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:qt(null,"");break;default:f=f===8?g.parentNode:g,g=f.namespaceURI||null,f=f.tagName,g=qt(g,f)}Zn(Hs),ir(Hs,g)}function Na(){Zn(Hs),Zn(qu),Zn(Gl)}function I1(f){rl(Gl.current);var g=rl(Hs.current),w=qt(g,f.type);g!==w&&(ir(qu,f),ir(Hs,w))}function Z0(f){qu.current===f&&(Zn(Hs),Zn(qu))}var yr=Ho(0);function qo(f){for(var g=f;g!==null;){if(g.tag===13){var w=g.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Q0=[];function em(){for(var f=0;f<Q0.length;f++)Q0[f]._workInProgressVersionPrimary=null;Q0.length=0}var Qh=T.ReactCurrentDispatcher,ep=T.ReactCurrentBatchConfig,Ca=0,wr=null,qr=null,Br=null,Ku=!1,il=!1,Xu=0,U2=0;function ii(){throw Error(n(321))}function tp(f,g){if(g===null)return!1;for(var w=0;w<g.length&&w<f.length;w++)if(!Ki(f[w],g[w]))return!1;return!0}function Ef(f,g,w,E,z,K){if(Ca=K,wr=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,Qh.current=f===null||f.memoizedState===null?SF:kF,f=w(E,z),il){K=0;do{if(il=!1,Xu=0,25<=K)throw Error(n(301));K+=1,Br=qr=null,g.updateQueue=null,Qh.current=NF,f=w(E,z)}while(il)}if(Qh.current=U1,g=qr!==null&&qr.next!==null,Ca=0,Br=qr=wr=null,Ku=!1,g)throw Error(n(300));return f}function Ea(){var f=Xu!==0;return Xu=0,f}function Go(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?wr.memoizedState=Br=f:Br=Br.next=f,Br}function qs(){if(qr===null){var f=wr.alternate;f=f!==null?f.memoizedState:null}else f=qr.next;var g=Br===null?wr.memoizedState:Br.next;if(g!==null)Br=g,qr=f;else{if(f===null)throw Error(n(310));qr=f,f={memoizedState:qr.memoizedState,baseState:qr.baseState,baseQueue:qr.baseQueue,queue:qr.queue,next:null},Br===null?wr.memoizedState=Br=f:Br=Br.next=f}return Br}function Af(f,g){return typeof g=="function"?g(f):g}function np(f){var g=qs(),w=g.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=f;var E=qr,z=E.baseQueue,K=w.pending;if(K!==null){if(z!==null){var ce=z.next;z.next=K.next,K.next=ce}E.baseQueue=z=K,w.pending=null}if(z!==null){K=z.next,E=E.baseState;var _e=ce=null,Te=null,Ye=K;do{var dt=Ye.lane;if((Ca&dt)===dt)Te!==null&&(Te=Te.next={lane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),E=Ye.hasEagerState?Ye.eagerState:f(E,Ye.action);else{var mt={lane:dt,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null};Te===null?(_e=Te=mt,ce=E):Te=Te.next=mt,wr.lanes|=dt,jf|=dt}Ye=Ye.next}while(Ye!==null&&Ye!==K);Te===null?ce=E:Te.next=_e,Ki(E,g.memoizedState)||(xo=!0),g.memoizedState=E,g.baseState=ce,g.baseQueue=Te,w.lastRenderedState=E}if(f=w.interleaved,f!==null){z=f;do K=z.lane,wr.lanes|=K,jf|=K,z=z.next;while(z!==f)}else z===null&&(w.lanes=0);return[g.memoizedState,w.dispatch]}function Kl(f){var g=qs(),w=g.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=f;var E=w.dispatch,z=w.pending,K=g.memoizedState;if(z!==null){w.pending=null;var ce=z=z.next;do K=f(K,ce.action),ce=ce.next;while(ce!==z);Ki(K,g.memoizedState)||(xo=!0),g.memoizedState=K,g.baseQueue===null&&(g.baseState=K),w.lastRenderedState=K}return[K,E]}function R1(){}function tm(f,g){var w=wr,E=qs(),z=g(),K=!Ki(E.memoizedState,z);if(K&&(E.memoizedState=z,xo=!0),E=E.queue,sp(z1.bind(null,w,E,f),[f]),E.getSnapshot!==g||K||Br!==null&&Br.memoizedState.tag&1){if(w.flags|=2048,Gs(9,nm.bind(null,w,E,z,g),void 0,null),ji===null)throw Error(n(349));(Ca&30)!==0||F1(w,g,z)}return z}function F1(f,g,w){f.flags|=16384,f={getSnapshot:g,value:w},g=wr.updateQueue,g===null?(g={lastEffect:null,stores:null},wr.updateQueue=g,g.stores=[f]):(w=g.stores,w===null?g.stores=[f]:w.push(f))}function nm(f,g,w,E){g.value=w,g.getSnapshot=E,Yu(g)&&rp(f)}function z1(f,g,w){return w(function(){Yu(g)&&rp(f)})}function Yu(f){var g=f.getSnapshot;f=f.value;try{var w=g();return!Ki(f,w)}catch{return!0}}function rp(f){var g=qn(f,1);g!==null&&cl(g,f,1,-1)}function Tf(f){var g=Go();return typeof f=="function"&&(f=f()),g.memoizedState=g.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Af,lastRenderedState:f},g.queue=f,f=f.dispatch=_F.bind(null,wr,f),[g.memoizedState,f]}function Gs(f,g,w,E){return f={tag:f,create:g,destroy:w,deps:E,next:null},g=wr.updateQueue,g===null?(g={lastEffect:null,stores:null},wr.updateQueue=g,g.lastEffect=f.next=f):(w=g.lastEffect,w===null?g.lastEffect=f.next=f:(E=w.next,w.next=f,f.next=E,g.lastEffect=f)),f}function sl(){return qs().memoizedState}function Ko(f,g,w,E){var z=Go();wr.flags|=f,z.memoizedState=Gs(1|g,w,void 0,E===void 0?null:E)}function Vc(f,g,w,E){var z=qs();E=E===void 0?null:E;var K=void 0;if(qr!==null){var ce=qr.memoizedState;if(K=ce.destroy,E!==null&&tp(E,ce.deps)){z.memoizedState=Gs(g,w,K,E);return}}wr.flags|=f,z.memoizedState=Gs(1|g,w,K,E)}function ip(f,g){return Ko(8390656,8,f,g)}function sp(f,g){return Vc(2048,8,f,g)}function B1(f,g){return Vc(4,2,f,g)}function op(f,g){return Vc(4,4,f,g)}function ap(f,g){if(typeof g=="function")return f=f(),g(f),function(){g(null)};if(g!=null)return f=f(),g.current=f,function(){g.current=null}}function Lk(f,g,w){return w=w!=null?w.concat([f]):null,Vc(4,4,ap.bind(null,g,f),w)}function $2(){}function Mk(f,g){var w=qs();g=g===void 0?null:g;var E=w.memoizedState;return E!==null&&g!==null&&tp(g,E[1])?E[0]:(w.memoizedState=[f,g],f)}function Ik(f,g){var w=qs();g=g===void 0?null:g;var E=w.memoizedState;return E!==null&&g!==null&&tp(g,E[1])?E[0]:(f=f(),w.memoizedState=[f,g],f)}function Rk(f,g,w){return(Ca&21)===0?(f.baseState&&(f.baseState=!1,xo=!0),f.memoizedState=w):(Ki(w,g)||(w=of(),wr.lanes|=w,jf|=w,f.baseState=!0),g)}function wF(f,g){var w=Un;Un=w!==0&&4>w?w:4,f(!0);var E=ep.transition;ep.transition={};try{f(!1),g()}finally{Un=w,ep.transition=E}}function Fk(){return qs().memoizedState}function bF(f,g,w){var E=ed(f);if(w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},zk(f))Bk(g,w);else if(w=tl(f,g,w,E),w!==null){var z=Xs();cl(w,f,E,z),Uk(w,g,E)}}function _F(f,g,w){var E=ed(f),z={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(zk(f))Bk(g,z);else{var K=f.alternate;if(f.lanes===0&&(K===null||K.lanes===0)&&(K=g.lastRenderedReducer,K!==null))try{var ce=g.lastRenderedState,_e=K(ce,w);if(z.hasEagerState=!0,z.eagerState=_e,Ki(_e,ce)){var Te=g.interleaved;Te===null?(z.next=z,ql(g)):(z.next=Te.next,Te.next=z),g.interleaved=z;return}}catch{}finally{}w=tl(f,g,z,E),w!==null&&(z=Xs(),cl(w,f,E,z),Uk(w,g,E))}}function zk(f){var g=f.alternate;return f===wr||g!==null&&g===wr}function Bk(f,g){il=Ku=!0;var w=f.pending;w===null?g.next=g:(g.next=w.next,w.next=g),f.pending=g}function Uk(f,g,w){if((w&4194240)!==0){var E=g.lanes;E&=f.pendingLanes,w|=E,g.lanes=w,vu(f,w)}}var U1={readContext:Hr,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useInsertionEffect:ii,useLayoutEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useMutableSource:ii,useSyncExternalStore:ii,useId:ii,unstable_isNewReconciler:!1},SF={readContext:Hr,useCallback:function(f,g){return Go().memoizedState=[f,g===void 0?null:g],f},useContext:Hr,useEffect:ip,useImperativeHandle:function(f,g,w){return w=w!=null?w.concat([f]):null,Ko(4194308,4,ap.bind(null,g,f),w)},useLayoutEffect:function(f,g){return Ko(4194308,4,f,g)},useInsertionEffect:function(f,g){return Ko(4,2,f,g)},useMemo:function(f,g){var w=Go();return g=g===void 0?null:g,f=f(),w.memoizedState=[f,g],f},useReducer:function(f,g,w){var E=Go();return g=w!==void 0?w(g):g,E.memoizedState=E.baseState=g,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:g},E.queue=f,f=f.dispatch=bF.bind(null,wr,f),[E.memoizedState,f]},useRef:function(f){var g=Go();return f={current:f},g.memoizedState=f},useState:Tf,useDebugValue:$2,useDeferredValue:function(f){return Go().memoizedState=f},useTransition:function(){var f=Tf(!1),g=f[0];return f=wF.bind(null,f[1]),Go().memoizedState=f,[g,f]},useMutableSource:function(){},useSyncExternalStore:function(f,g,w){var E=wr,z=Go();if(et){if(w===void 0)throw Error(n(407));w=w()}else{if(w=g(),ji===null)throw Error(n(349));(Ca&30)!==0||F1(E,g,w)}z.memoizedState=w;var K={value:w,getSnapshot:g};return z.queue=K,ip(z1.bind(null,E,K,f),[f]),E.flags|=2048,Gs(9,nm.bind(null,E,K,w,g),void 0,null),w},useId:function(){var f=Go(),g=ji.identifierPrefix;if(et){var w=Ue,E=Be;w=(E&~(1<<32-kr(E)-1)).toString(32)+w,g=":"+g+"R"+w,w=Xu++,0<w&&(g+="H"+w.toString(32)),g+=":"}else w=U2++,g=":"+g+"r"+w.toString(32)+":";return f.memoizedState=g},unstable_isNewReconciler:!1},kF={readContext:Hr,useCallback:Mk,useContext:Hr,useEffect:sp,useImperativeHandle:Lk,useInsertionEffect:B1,useLayoutEffect:op,useMemo:Ik,useReducer:np,useRef:sl,useState:function(){return np(Af)},useDebugValue:$2,useDeferredValue:function(f){var g=qs();return Rk(g,qr.memoizedState,f)},useTransition:function(){var f=np(Af)[0],g=qs().memoizedState;return[f,g]},useMutableSource:R1,useSyncExternalStore:tm,useId:Fk,unstable_isNewReconciler:!1},NF={readContext:Hr,useCallback:Mk,useContext:Hr,useEffect:sp,useImperativeHandle:Lk,useInsertionEffect:B1,useLayoutEffect:op,useMemo:Ik,useReducer:Kl,useRef:sl,useState:function(){return Kl(Af)},useDebugValue:$2,useDeferredValue:function(f){var g=qs();return qr===null?g.memoizedState=f:Rk(g,qr.memoizedState,f)},useTransition:function(){var f=Kl(Af)[0],g=qs().memoizedState;return[f,g]},useMutableSource:R1,useSyncExternalStore:tm,useId:Fk,unstable_isNewReconciler:!1};function ol(f,g){if(f&&f.defaultProps){g=te({},g),f=f.defaultProps;for(var w in f)g[w]===void 0&&(g[w]=f[w]);return g}return g}function W2(f,g,w,E){g=f.memoizedState,w=w(E,g),w=w==null?g:te({},g,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var $1={isMounted:function(f){return(f=f._reactInternals)?me(f)===f:!1},enqueueSetState:function(f,g,w){f=f._reactInternals;var E=Xs(),z=ed(f),K=mo(E,z);K.payload=g,w!=null&&(K.callback=w),g=go(f,K,z),g!==null&&(cl(g,f,z,E),$c(g,f,z))},enqueueReplaceState:function(f,g,w){f=f._reactInternals;var E=Xs(),z=ed(f),K=mo(E,z);K.tag=1,K.payload=g,w!=null&&(K.callback=w),g=go(f,K,z),g!==null&&(cl(g,f,z,E),$c(g,f,z))},enqueueForceUpdate:function(f,g){f=f._reactInternals;var w=Xs(),E=ed(f),z=mo(w,E);z.tag=2,g!=null&&(z.callback=g),g=go(f,z,E),g!==null&&(cl(g,f,E,w),$c(g,f,E))}};function $k(f,g,w,E,z,K,ce){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,K,ce):g.prototype&&g.prototype.isPureReactComponent?!co(w,E)||!co(z,K):!0}function Wk(f,g,w){var E=!1,z=Hl,K=g.contextType;return typeof K=="object"&&K!==null?K=Hr(K):(z=ws(g)?Bc:bi.current,E=g.contextTypes,K=(E=E!=null)?Vu(f,z):Hl),g=new g(w,K),f.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=$1,f.stateNode=g,g._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=z,f.__reactInternalMemoizedMaskedChildContext=K),g}function Vk(f,g,w,E){f=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(w,E),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(w,E),g.state!==f&&$1.enqueueReplaceState(g,g.state,null)}function V2(f,g,w,E){var z=f.stateNode;z.props=w,z.state=f.memoizedState,z.refs={},Zh(f);var K=g.contextType;typeof K=="object"&&K!==null?z.context=Hr(K):(K=ws(g)?Bc:bi.current,z.context=Vu(f,K)),z.state=f.memoizedState,K=g.getDerivedStateFromProps,typeof K=="function"&&(W2(f,g,K,w),z.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(g=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),g!==z.state&&$1.enqueueReplaceState(z,z.state,null),nl(f,w,z,E),z.state=f.memoizedState),typeof z.componentDidMount=="function"&&(f.flags|=4194308)}function lp(f,g){try{var w="",E=g;do w+=V(E),E=E.return;while(E);var z=w}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:f,source:g,stack:z,digest:null}}function H2(f,g,w){return{value:f,source:null,stack:w??null,digest:g??null}}function q2(f,g){try{console.error(g.value)}catch(w){setTimeout(function(){throw w})}}var CF=typeof WeakMap=="function"?WeakMap:Map;function Hk(f,g,w){w=mo(-1,w),w.tag=3,w.payload={element:null};var E=g.value;return w.callback=function(){X1||(X1=!0,aw=E),q2(f,g)},w}function qk(f,g,w){w=mo(-1,w),w.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var z=g.value;w.payload=function(){return E(z)},w.callback=function(){q2(f,g)}}var K=f.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(w.callback=function(){q2(f,g),typeof E!="function"&&(Zu===null?Zu=new Set([this]):Zu.add(this));var ce=g.stack;this.componentDidCatch(g.value,{componentStack:ce!==null?ce:""})}),w}function Gk(f,g,w){var E=f.pingCache;if(E===null){E=f.pingCache=new CF;var z=new Set;E.set(g,z)}else z=E.get(g),z===void 0&&(z=new Set,E.set(g,z));z.has(w)||(z.add(w),f=BF.bind(null,f,g,w),g.then(f,f))}function Kk(f){do{var g;if((g=f.tag===13)&&(g=f.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return f;f=f.return}while(f!==null);return null}function Xk(f,g,w,E,z){return(f.mode&1)===0?(f===g?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(g=mo(-1,1),g.tag=2,go(w,g,1))),w.lanes|=1),f):(f.flags|=65536,f.lanes=z,f)}var EF=T.ReactCurrentOwner,xo=!1;function Ks(f,g,w,E){g.child=f===null?Hn(g,null,w,E):ni(g,f.child,w,E)}function Yk(f,g,w,E,z){w=w.render;var K=g.ref;return Tr(g,z),E=Ef(f,g,w,E,K,z),w=Ea(),f!==null&&!xo?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~z,Hc(f,g,z)):(et&&w&&Je(g),g.flags|=1,Ks(f,g,E,z),g.child)}function Jk(f,g,w,E,z){if(f===null){var K=w.type;return typeof K=="function"&&!pw(K)&&K.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(g.tag=15,g.type=K,Zk(f,g,K,E,z)):(f=ty(w.type,null,E,g,g.mode,z),f.ref=g.ref,f.return=g,g.child=f)}if(K=f.child,(f.lanes&z)===0){var ce=K.memoizedProps;if(w=w.compare,w=w!==null?w:co,w(ce,E)&&f.ref===g.ref)return Hc(f,g,z)}return g.flags|=1,f=nd(K,E),f.ref=g.ref,f.return=g,g.child=f}function Zk(f,g,w,E,z){if(f!==null){var K=f.memoizedProps;if(co(K,E)&&f.ref===g.ref)if(xo=!1,g.pendingProps=E=K,(f.lanes&z)!==0)(f.flags&131072)!==0&&(xo=!0);else return g.lanes=f.lanes,Hc(f,g,z)}return G2(f,g,w,E,z)}function Qk(f,g,w){var E=g.pendingProps,z=E.children,K=f!==null?f.memoizedState:null;if(E.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},ir(up,Xo),Xo|=w;else{if((w&1073741824)===0)return f=K!==null?K.baseLanes|w:w,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:f,cachePool:null,transitions:null},g.updateQueue=null,ir(up,Xo),Xo|=f,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=K!==null?K.baseLanes:w,ir(up,Xo),Xo|=E}else K!==null?(E=K.baseLanes|w,g.memoizedState=null):E=w,ir(up,Xo),Xo|=E;return Ks(f,g,z,w),g.child}function eN(f,g){var w=g.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(g.flags|=512,g.flags|=2097152)}function G2(f,g,w,E,z){var K=ws(w)?Bc:bi.current;return K=Vu(g,K),Tr(g,z),w=Ef(f,g,w,E,K,z),E=Ea(),f!==null&&!xo?(g.updateQueue=f.updateQueue,g.flags&=-2053,f.lanes&=~z,Hc(f,g,z)):(et&&E&&Je(g),g.flags|=1,Ks(f,g,w,z),g.child)}function tN(f,g,w,E,z){if(ws(w)){var K=!0;Uc(g)}else K=!1;if(Tr(g,z),g.stateNode===null)V1(f,g),Wk(g,w,E),V2(g,w,E,z),E=!0;else if(f===null){var ce=g.stateNode,_e=g.memoizedProps;ce.props=_e;var Te=ce.context,Ye=w.contextType;typeof Ye=="object"&&Ye!==null?Ye=Hr(Ye):(Ye=ws(w)?Bc:bi.current,Ye=Vu(g,Ye));var dt=w.getDerivedStateFromProps,mt=typeof dt=="function"||typeof ce.getSnapshotBeforeUpdate=="function";mt||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(_e!==E||Te!==Ye)&&Vk(g,ce,E,Ye),ka=!1;var ut=g.memoizedState;ce.state=ut,nl(g,E,ce,z),Te=g.memoizedState,_e!==E||ut!==Te||vs.current||ka?(typeof dt=="function"&&(W2(g,w,dt,E),Te=g.memoizedState),(_e=ka||$k(g,w,_e,E,ut,Te,Ye))?(mt||typeof ce.UNSAFE_componentWillMount!="function"&&typeof ce.componentWillMount!="function"||(typeof ce.componentWillMount=="function"&&ce.componentWillMount(),typeof ce.UNSAFE_componentWillMount=="function"&&ce.UNSAFE_componentWillMount()),typeof ce.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ce.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=E,g.memoizedState=Te),ce.props=E,ce.state=Te,ce.context=Ye,E=_e):(typeof ce.componentDidMount=="function"&&(g.flags|=4194308),E=!1)}else{ce=g.stateNode,J0(f,g),_e=g.memoizedProps,Ye=g.type===g.elementType?_e:ol(g.type,_e),ce.props=Ye,mt=g.pendingProps,ut=ce.context,Te=w.contextType,typeof Te=="object"&&Te!==null?Te=Hr(Te):(Te=ws(w)?Bc:bi.current,Te=Vu(g,Te));var It=w.getDerivedStateFromProps;(dt=typeof It=="function"||typeof ce.getSnapshotBeforeUpdate=="function")||typeof ce.UNSAFE_componentWillReceiveProps!="function"&&typeof ce.componentWillReceiveProps!="function"||(_e!==mt||ut!==Te)&&Vk(g,ce,E,Te),ka=!1,ut=g.memoizedState,ce.state=ut,nl(g,E,ce,z);var Ut=g.memoizedState;_e!==mt||ut!==Ut||vs.current||ka?(typeof It=="function"&&(W2(g,w,It,E),Ut=g.memoizedState),(Ye=ka||$k(g,w,Ye,E,ut,Ut,Te)||!1)?(dt||typeof ce.UNSAFE_componentWillUpdate!="function"&&typeof ce.componentWillUpdate!="function"||(typeof ce.componentWillUpdate=="function"&&ce.componentWillUpdate(E,Ut,Te),typeof ce.UNSAFE_componentWillUpdate=="function"&&ce.UNSAFE_componentWillUpdate(E,Ut,Te)),typeof ce.componentDidUpdate=="function"&&(g.flags|=4),typeof ce.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ce.componentDidUpdate!="function"||_e===f.memoizedProps&&ut===f.memoizedState||(g.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||_e===f.memoizedProps&&ut===f.memoizedState||(g.flags|=1024),g.memoizedProps=E,g.memoizedState=Ut),ce.props=E,ce.state=Ut,ce.context=Te,E=Ye):(typeof ce.componentDidUpdate!="function"||_e===f.memoizedProps&&ut===f.memoizedState||(g.flags|=4),typeof ce.getSnapshotBeforeUpdate!="function"||_e===f.memoizedProps&&ut===f.memoizedState||(g.flags|=1024),E=!1)}return K2(f,g,w,E,K,z)}function K2(f,g,w,E,z,K){eN(f,g);var ce=(g.flags&128)!==0;if(!E&&!ce)return z&&M1(g,w,!1),Hc(f,g,K);E=g.stateNode,EF.current=g;var _e=ce&&typeof w.getDerivedStateFromError!="function"?null:E.render();return g.flags|=1,f!==null&&ce?(g.child=ni(g,f.child,null,K),g.child=ni(g,null,_e,K)):Ks(f,g,_e,K),g.memoizedState=E.state,z&&M1(g,w,!0),g.child}function nN(f){var g=f.stateNode;g.pendingContext?L1(f,g.pendingContext,g.pendingContext!==g.context):g.context&&L1(f,g.context,!1),Gu(f,g.containerInfo)}function rN(f,g,w,E,z){return yn(),Qn(z),g.flags|=256,Ks(f,g,w,E),g.child}var X2={dehydrated:null,treeContext:null,retryLane:0};function Y2(f){return{baseLanes:f,cachePool:null,transitions:null}}function iN(f,g,w){var E=g.pendingProps,z=yr.current,K=!1,ce=(g.flags&128)!==0,_e;if((_e=ce)||(_e=f!==null&&f.memoizedState===null?!1:(z&2)!==0),_e?(K=!0,g.flags&=-129):(f===null||f.memoizedState!==null)&&(z|=1),ir(yr,z&1),f===null)return Nt(g),f=g.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((g.mode&1)===0?g.lanes=1:f.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(ce=E.children,f=E.fallback,K?(E=g.mode,K=g.child,ce={mode:"hidden",children:ce},(E&1)===0&&K!==null?(K.childLanes=0,K.pendingProps=ce):K=ny(ce,E,0,null),f=Lf(f,E,w,null),K.return=g,f.return=g,K.sibling=f,g.child=K,g.child.memoizedState=Y2(w),g.memoizedState=X2,f):J2(g,ce));if(z=f.memoizedState,z!==null&&(_e=z.dehydrated,_e!==null))return AF(f,g,ce,E,_e,z,w);if(K){K=E.fallback,ce=g.mode,z=f.child,_e=z.sibling;var Te={mode:"hidden",children:E.children};return(ce&1)===0&&g.child!==z?(E=g.child,E.childLanes=0,E.pendingProps=Te,g.deletions=null):(E=nd(z,Te),E.subtreeFlags=z.subtreeFlags&14680064),_e!==null?K=nd(_e,K):(K=Lf(K,ce,w,null),K.flags|=2),K.return=g,E.return=g,E.sibling=K,g.child=E,E=K,K=g.child,ce=f.child.memoizedState,ce=ce===null?Y2(w):{baseLanes:ce.baseLanes|w,cachePool:null,transitions:ce.transitions},K.memoizedState=ce,K.childLanes=f.childLanes&~w,g.memoizedState=X2,E}return K=f.child,f=K.sibling,E=nd(K,{mode:"visible",children:E.children}),(g.mode&1)===0&&(E.lanes=w),E.return=g,E.sibling=null,f!==null&&(w=g.deletions,w===null?(g.deletions=[f],g.flags|=16):w.push(f)),g.child=E,g.memoizedState=null,E}function J2(f,g){return g=ny({mode:"visible",children:g},f.mode,0,null),g.return=f,f.child=g}function W1(f,g,w,E){return E!==null&&Qn(E),ni(g,f.child,null,w),f=J2(g,g.pendingProps.children),f.flags|=2,g.memoizedState=null,f}function AF(f,g,w,E,z,K,ce){if(w)return g.flags&256?(g.flags&=-257,E=H2(Error(n(422))),W1(f,g,ce,E)):g.memoizedState!==null?(g.child=f.child,g.flags|=128,null):(K=E.fallback,z=g.mode,E=ny({mode:"visible",children:E.children},z,0,null),K=Lf(K,z,ce,null),K.flags|=2,E.return=g,K.return=g,E.sibling=K,g.child=E,(g.mode&1)!==0&&ni(g,f.child,null,ce),g.child.memoizedState=Y2(ce),g.memoizedState=X2,K);if((g.mode&1)===0)return W1(f,g,ce,null);if(z.data==="$!"){if(E=z.nextSibling&&z.nextSibling.dataset,E)var _e=E.dgst;return E=_e,K=Error(n(419)),E=H2(K,E,void 0),W1(f,g,ce,E)}if(_e=(ce&f.childLanes)!==0,xo||_e){if(E=ji,E!==null){switch(ce&-ce){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=(z&(E.suspendedLanes|ce))!==0?0:z,z!==0&&z!==K.retryLane&&(K.retryLane=z,qn(f,z),cl(E,f,z,-1))}return hw(),E=H2(Error(n(421))),W1(f,g,ce,E)}return z.data==="$?"?(g.flags|=128,g.child=f.child,g=UF.bind(null,f),z._reactRetry=g,null):(f=K.treeContext,tt=Yi(z.nextSibling),Pe=g,et=!0,rt=null,f!==null&&(he[ve++]=Be,he[ve++]=Ue,he[ve++]=Ee,Be=f.id,Ue=f.overflow,Ee=g),g=J2(g,E.children),g.flags|=4096,g)}function sN(f,g,w){f.lanes|=g;var E=f.alternate;E!==null&&(E.lanes|=g),po(f.return,g,w)}function Z2(f,g,w,E,z){var K=f.memoizedState;K===null?f.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:z}:(K.isBackwards=g,K.rendering=null,K.renderingStartTime=0,K.last=E,K.tail=w,K.tailMode=z)}function oN(f,g,w){var E=g.pendingProps,z=E.revealOrder,K=E.tail;if(Ks(f,g,E.children,w),E=yr.current,(E&2)!==0)E=E&1|2,g.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=g.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&sN(f,w,g);else if(f.tag===19)sN(f,w,g);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===g)break e;for(;f.sibling===null;){if(f.return===null||f.return===g)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(ir(yr,E),(g.mode&1)===0)g.memoizedState=null;else switch(z){case"forwards":for(w=g.child,z=null;w!==null;)f=w.alternate,f!==null&&qo(f)===null&&(z=w),w=w.sibling;w=z,w===null?(z=g.child,g.child=null):(z=w.sibling,w.sibling=null),Z2(g,!1,z,w,K);break;case"backwards":for(w=null,z=g.child,g.child=null;z!==null;){if(f=z.alternate,f!==null&&qo(f)===null){g.child=z;break}f=z.sibling,z.sibling=w,w=z,z=f}Z2(g,!0,w,null,K);break;case"together":Z2(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function V1(f,g){(g.mode&1)===0&&f!==null&&(f.alternate=null,g.alternate=null,g.flags|=2)}function Hc(f,g,w){if(f!==null&&(g.dependencies=f.dependencies),jf|=g.lanes,(w&g.childLanes)===0)return null;if(f!==null&&g.child!==f.child)throw Error(n(153));if(g.child!==null){for(f=g.child,w=nd(f,f.pendingProps),g.child=w,w.return=g;f.sibling!==null;)f=f.sibling,w=w.sibling=nd(f,f.pendingProps),w.return=g;w.sibling=null}return g.child}function TF(f,g,w){switch(g.tag){case 3:nN(g),yn();break;case 5:I1(g);break;case 1:ws(g.type)&&Uc(g);break;case 4:Gu(g,g.stateNode.containerInfo);break;case 10:var E=g.type._context,z=g.memoizedProps.value;ir(Ai,E._currentValue),E._currentValue=z;break;case 13:if(E=g.memoizedState,E!==null)return E.dehydrated!==null?(ir(yr,yr.current&1),g.flags|=128,null):(w&g.child.childLanes)!==0?iN(f,g,w):(ir(yr,yr.current&1),f=Hc(f,g,w),f!==null?f.sibling:null);ir(yr,yr.current&1);break;case 19:if(E=(w&g.childLanes)!==0,(f.flags&128)!==0){if(E)return oN(f,g,w);g.flags|=128}if(z=g.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),ir(yr,yr.current),E)break;return null;case 22:case 23:return g.lanes=0,Qk(f,g,w)}return Hc(f,g,w)}var aN,Q2,lN,cN;aN=function(f,g){for(var w=g.child;w!==null;){if(w.tag===5||w.tag===6)f.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===g)break;for(;w.sibling===null;){if(w.return===null||w.return===g)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Q2=function(){},lN=function(f,g,w,E){var z=f.memoizedProps;if(z!==E){f=g.stateNode,rl(Hs.current);var K=null;switch(w){case"input":z=ze(f,z),E=ze(f,E),K=[];break;case"select":z=te({},z,{value:void 0}),E=te({},E,{value:void 0}),K=[];break;case"textarea":z=it(f,z),E=it(f,E),K=[];break;default:typeof z.onClick!="function"&&typeof E.onClick=="function"&&(f.onclick=Uu)}bn(w,E);var ce;w=null;for(Ye in z)if(!E.hasOwnProperty(Ye)&&z.hasOwnProperty(Ye)&&z[Ye]!=null)if(Ye==="style"){var _e=z[Ye];for(ce in _e)_e.hasOwnProperty(ce)&&(w||(w={}),w[ce]="")}else Ye!=="dangerouslySetInnerHTML"&&Ye!=="children"&&Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&Ye!=="autoFocus"&&(i.hasOwnProperty(Ye)?K||(K=[]):(K=K||[]).push(Ye,null));for(Ye in E){var Te=E[Ye];if(_e=z!=null?z[Ye]:void 0,E.hasOwnProperty(Ye)&&Te!==_e&&(Te!=null||_e!=null))if(Ye==="style")if(_e){for(ce in _e)!_e.hasOwnProperty(ce)||Te&&Te.hasOwnProperty(ce)||(w||(w={}),w[ce]="");for(ce in Te)Te.hasOwnProperty(ce)&&_e[ce]!==Te[ce]&&(w||(w={}),w[ce]=Te[ce])}else w||(K||(K=[]),K.push(Ye,w)),w=Te;else Ye==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,_e=_e?_e.__html:void 0,Te!=null&&_e!==Te&&(K=K||[]).push(Ye,Te)):Ye==="children"?typeof Te!="string"&&typeof Te!="number"||(K=K||[]).push(Ye,""+Te):Ye!=="suppressContentEditableWarning"&&Ye!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ye)?(Te!=null&&Ye==="onScroll"&&cr("scroll",f),K||_e===Te||(K=[])):(K=K||[]).push(Ye,Te))}w&&(K=K||[]).push("style",w);var Ye=K;(g.updateQueue=Ye)&&(g.flags|=4)}},cN=function(f,g,w,E){w!==E&&(g.flags|=4)};function rm(f,g){if(!et)switch(f.tailMode){case"hidden":g=f.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?g||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function _s(f){var g=f.alternate!==null&&f.alternate.child===f.child,w=0,E=0;if(g)for(var z=f.child;z!==null;)w|=z.lanes|z.childLanes,E|=z.subtreeFlags&14680064,E|=z.flags&14680064,z.return=f,z=z.sibling;else for(z=f.child;z!==null;)w|=z.lanes|z.childLanes,E|=z.subtreeFlags,E|=z.flags,z.return=f,z=z.sibling;return f.subtreeFlags|=E,f.childLanes=w,g}function jF(f,g,w){var E=g.pendingProps;switch(je(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(g),null;case 1:return ws(g.type)&&Jh(),_s(g),null;case 3:return E=g.stateNode,Na(),Zn(vs),Zn(bi),em(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(Fn(g)?g.flags|=4:f===null||f.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,rt!==null&&(uw(rt),rt=null))),Q2(f,g),_s(g),null;case 5:Z0(g);var z=rl(Gl.current);if(w=g.type,f!==null&&g.stateNode!=null)lN(f,g,w,E,z),f.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!E){if(g.stateNode===null)throw Error(n(166));return _s(g),null}if(f=rl(Hs.current),Fn(g)){E=g.stateNode,w=g.type;var K=g.memoizedProps;switch(E[Sa]=g,E[$u]=K,f=(g.mode&1)!==0,w){case"dialog":cr("cancel",E),cr("close",E);break;case"iframe":case"object":case"embed":cr("load",E);break;case"video":case"audio":for(z=0;z<Wl.length;z++)cr(Wl[z],E);break;case"source":cr("error",E);break;case"img":case"image":case"link":cr("error",E),cr("load",E);break;case"details":cr("toggle",E);break;case"input":Ne(E,K),cr("invalid",E);break;case"select":E._wrapperState={wasMultiple:!!K.multiple},cr("invalid",E);break;case"textarea":gt(E,K),cr("invalid",E)}bn(w,K),z=null;for(var ce in K)if(K.hasOwnProperty(ce)){var _e=K[ce];ce==="children"?typeof _e=="string"?E.textContent!==_e&&(K.suppressHydrationWarning!==!0&&Yh(E.textContent,_e,f),z=["children",_e]):typeof _e=="number"&&E.textContent!==""+_e&&(K.suppressHydrationWarning!==!0&&Yh(E.textContent,_e,f),z=["children",""+_e]):i.hasOwnProperty(ce)&&_e!=null&&ce==="onScroll"&&cr("scroll",E)}switch(w){case"input":He(E),Ze(E,K,!0);break;case"textarea":He(E),Tt(E);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(E.onclick=Uu)}E=z,g.updateQueue=E,E!==null&&(g.flags|=4)}else{ce=z.nodeType===9?z:z.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Bt(w)),f==="http://www.w3.org/1999/xhtml"?w==="script"?(f=ce.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof E.is=="string"?f=ce.createElement(w,{is:E.is}):(f=ce.createElement(w),w==="select"&&(ce=f,E.multiple?ce.multiple=!0:E.size&&(ce.size=E.size))):f=ce.createElementNS(f,w),f[Sa]=g,f[$u]=E,aN(f,g,!1,!1),g.stateNode=f;e:{switch(ce=$r(w,E),w){case"dialog":cr("cancel",f),cr("close",f),z=E;break;case"iframe":case"object":case"embed":cr("load",f),z=E;break;case"video":case"audio":for(z=0;z<Wl.length;z++)cr(Wl[z],f);z=E;break;case"source":cr("error",f),z=E;break;case"img":case"image":case"link":cr("error",f),cr("load",f),z=E;break;case"details":cr("toggle",f),z=E;break;case"input":Ne(f,E),z=ze(f,E),cr("invalid",f);break;case"option":z=E;break;case"select":f._wrapperState={wasMultiple:!!E.multiple},z=te({},E,{value:void 0}),cr("invalid",f);break;case"textarea":gt(f,E),z=it(f,E),cr("invalid",f);break;default:z=E}bn(w,z),_e=z;for(K in _e)if(_e.hasOwnProperty(K)){var Te=_e[K];K==="style"?Wn(f,Te):K==="dangerouslySetInnerHTML"?(Te=Te?Te.__html:void 0,Te!=null&&Dt(f,Te)):K==="children"?typeof Te=="string"?(w!=="textarea"||Te!=="")&&Mt(f,Te):typeof Te=="number"&&Mt(f,""+Te):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Te!=null&&K==="onScroll"&&cr("scroll",f):Te!=null&&k(f,K,Te,ce))}switch(w){case"input":He(f),Ze(f,E,!1);break;case"textarea":He(f),Tt(f);break;case"option":E.value!=null&&f.setAttribute("value",""+ye(E.value));break;case"select":f.multiple=!!E.multiple,K=E.value,K!=null?We(f,!!E.multiple,K,!1):E.defaultValue!=null&&We(f,!!E.multiple,E.defaultValue,!0);break;default:typeof z.onClick=="function"&&(f.onclick=Uu)}switch(w){case"button":case"input":case"select":case"textarea":E=!!E.autoFocus;break e;case"img":E=!0;break e;default:E=!1}}E&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return _s(g),null;case 6:if(f&&g.stateNode!=null)cN(f,g,f.memoizedProps,E);else{if(typeof E!="string"&&g.stateNode===null)throw Error(n(166));if(w=rl(Gl.current),rl(Hs.current),Fn(g)){if(E=g.stateNode,w=g.memoizedProps,E[Sa]=g,(K=E.nodeValue!==w)&&(f=Pe,f!==null))switch(f.tag){case 3:Yh(E.nodeValue,w,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Yh(E.nodeValue,w,(f.mode&1)!==0)}K&&(g.flags|=4)}else E=(w.nodeType===9?w:w.ownerDocument).createTextNode(E),E[Sa]=g,g.stateNode=E}return _s(g),null;case 13:if(Zn(yr),E=g.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(et&&tt!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Pn(),yn(),g.flags|=98560,K=!1;else if(K=Fn(g),E!==null&&E.dehydrated!==null){if(f===null){if(!K)throw Error(n(318));if(K=g.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(n(317));K[Sa]=g}else yn(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;_s(g),K=!1}else rt!==null&&(uw(rt),rt=null),K=!0;if(!K)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=w,g):(E=E!==null,E!==(f!==null&&f.memoizedState!==null)&&E&&(g.child.flags|=8192,(g.mode&1)!==0&&(f===null||(yr.current&1)!==0?Si===0&&(Si=3):hw())),g.updateQueue!==null&&(g.flags|=4),_s(g),null);case 4:return Na(),Q2(f,g),f===null&&Ic(g.stateNode.containerInfo),_s(g),null;case 10:return bs(g.type._context),_s(g),null;case 17:return ws(g.type)&&Jh(),_s(g),null;case 19:if(Zn(yr),K=g.memoizedState,K===null)return _s(g),null;if(E=(g.flags&128)!==0,ce=K.rendering,ce===null)if(E)rm(K,!1);else{if(Si!==0||f!==null&&(f.flags&128)!==0)for(f=g.child;f!==null;){if(ce=qo(f),ce!==null){for(g.flags|=128,rm(K,!1),E=ce.updateQueue,E!==null&&(g.updateQueue=E,g.flags|=4),g.subtreeFlags=0,E=w,w=g.child;w!==null;)K=w,f=E,K.flags&=14680066,ce=K.alternate,ce===null?(K.childLanes=0,K.lanes=f,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=ce.childLanes,K.lanes=ce.lanes,K.child=ce.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=ce.memoizedProps,K.memoizedState=ce.memoizedState,K.updateQueue=ce.updateQueue,K.type=ce.type,f=ce.dependencies,K.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),w=w.sibling;return ir(yr,yr.current&1|2),g.child}f=f.sibling}K.tail!==null&&pt()>dp&&(g.flags|=128,E=!0,rm(K,!1),g.lanes=4194304)}else{if(!E)if(f=qo(ce),f!==null){if(g.flags|=128,E=!0,w=f.updateQueue,w!==null&&(g.updateQueue=w,g.flags|=4),rm(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ce.alternate&&!et)return _s(g),null}else 2*pt()-K.renderingStartTime>dp&&w!==1073741824&&(g.flags|=128,E=!0,rm(K,!1),g.lanes=4194304);K.isBackwards?(ce.sibling=g.child,g.child=ce):(w=K.last,w!==null?w.sibling=ce:g.child=ce,K.last=ce)}return K.tail!==null?(g=K.tail,K.rendering=g,K.tail=g.sibling,K.renderingStartTime=pt(),g.sibling=null,w=yr.current,ir(yr,E?w&1|2:w&1),g):(_s(g),null);case 22:case 23:return fw(),E=g.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(g.flags|=8192),E&&(g.mode&1)!==0?(Xo&1073741824)!==0&&(_s(g),g.subtreeFlags&6&&(g.flags|=8192)):_s(g),null;case 24:return null;case 25:return null}throw Error(n(156,g.tag))}function PF(f,g){switch(je(g),g.tag){case 1:return ws(g.type)&&Jh(),f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 3:return Na(),Zn(vs),Zn(bi),em(),f=g.flags,(f&65536)!==0&&(f&128)===0?(g.flags=f&-65537|128,g):null;case 5:return Z0(g),null;case 13:if(Zn(yr),f=g.memoizedState,f!==null&&f.dehydrated!==null){if(g.alternate===null)throw Error(n(340));yn()}return f=g.flags,f&65536?(g.flags=f&-65537|128,g):null;case 19:return Zn(yr),null;case 4:return Na(),null;case 10:return bs(g.type._context),null;case 22:case 23:return fw(),null;case 24:return null;default:return null}}var H1=!1,Ss=!1,DF=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function cp(f,g){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Gr(f,g,E)}else w.current=null}function ew(f,g,w){try{w()}catch(E){Gr(f,g,E)}}var uN=!1;function OF(f,g){if(kf=ku,f=Oc(),Za(f)){if("selectionStart"in f)var w={start:f.selectionStart,end:f.selectionEnd};else e:{w=(w=f.ownerDocument)&&w.defaultView||window;var E=w.getSelection&&w.getSelection();if(E&&E.rangeCount!==0){w=E.anchorNode;var z=E.anchorOffset,K=E.focusNode;E=E.focusOffset;try{w.nodeType,K.nodeType}catch{w=null;break e}var ce=0,_e=-1,Te=-1,Ye=0,dt=0,mt=f,ut=null;t:for(;;){for(var It;mt!==w||z!==0&&mt.nodeType!==3||(_e=ce+z),mt!==K||E!==0&&mt.nodeType!==3||(Te=ce+E),mt.nodeType===3&&(ce+=mt.nodeValue.length),(It=mt.firstChild)!==null;)ut=mt,mt=It;for(;;){if(mt===f)break t;if(ut===w&&++Ye===z&&(_e=ce),ut===K&&++dt===E&&(Te=ce),(It=mt.nextSibling)!==null)break;mt=ut,ut=mt.parentNode}mt=It}w=_e===-1||Te===-1?null:{start:_e,end:Te}}else w=null}w=w||{start:0,end:0}}else w=null;for(Fc={focusedElem:f,selectionRange:w},ku=!1,Ft=g;Ft!==null;)if(g=Ft,f=g.child,(g.subtreeFlags&1028)!==0&&f!==null)f.return=g,Ft=f;else for(;Ft!==null;){g=Ft;try{var Ut=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(Ut!==null){var Wt=Ut.memoizedProps,si=Ut.memoizedState,Ke=g.stateNode,Oe=Ke.getSnapshotBeforeUpdate(g.elementType===g.type?Wt:ol(g.type,Wt),si);Ke.__reactInternalSnapshotBeforeUpdate=Oe}break;case 3:var Xe=g.stateNode.containerInfo;Xe.nodeType===1?Xe.textContent="":Xe.nodeType===9&&Xe.documentElement&&Xe.removeChild(Xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(wt){Gr(g,g.return,wt)}if(f=g.sibling,f!==null){f.return=g.return,Ft=f;break}Ft=g.return}return Ut=uN,uN=!1,Ut}function im(f,g,w){var E=g.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var z=E=E.next;do{if((z.tag&f)===f){var K=z.destroy;z.destroy=void 0,K!==void 0&&ew(g,w,K)}z=z.next}while(z!==E)}}function q1(f,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&f)===f){var E=w.create;w.destroy=E()}w=w.next}while(w!==g)}}function tw(f){var g=f.ref;if(g!==null){var w=f.stateNode;switch(f.tag){case 5:f=w;break;default:f=w}typeof g=="function"?g(f):g.current=f}}function dN(f){var g=f.alternate;g!==null&&(f.alternate=null,dN(g)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(g=f.stateNode,g!==null&&(delete g[Sa],delete g[$u],delete g[xs],delete g[z2],delete g[B2])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function fN(f){return f.tag===5||f.tag===3||f.tag===4}function hN(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||fN(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function nw(f,g,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,g?w.nodeType===8?w.parentNode.insertBefore(f,g):w.insertBefore(f,g):(w.nodeType===8?(g=w.parentNode,g.insertBefore(f,w)):(g=w,g.appendChild(f)),w=w._reactRootContainer,w!=null||g.onclick!==null||(g.onclick=Uu));else if(E!==4&&(f=f.child,f!==null))for(nw(f,g,w),f=f.sibling;f!==null;)nw(f,g,w),f=f.sibling}function rw(f,g,w){var E=f.tag;if(E===5||E===6)f=f.stateNode,g?w.insertBefore(f,g):w.appendChild(f);else if(E!==4&&(f=f.child,f!==null))for(rw(f,g,w),f=f.sibling;f!==null;)rw(f,g,w),f=f.sibling}var Zi=null,al=!1;function Ju(f,g,w){for(w=w.child;w!==null;)pN(f,g,w),w=w.sibling}function pN(f,g,w){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Bs,w)}catch{}switch(w.tag){case 5:Ss||cp(w,g);case 6:var E=Zi,z=al;Zi=null,Ju(f,g,w),Zi=E,al=z,Zi!==null&&(al?(f=Zi,w=w.stateNode,f.nodeType===8?f.parentNode.removeChild(w):f.removeChild(w)):Zi.removeChild(w.stateNode));break;case 18:Zi!==null&&(al?(f=Zi,w=w.stateNode,f.nodeType===8?K0(f.parentNode,w):f.nodeType===1&&K0(f,w),Io(f)):K0(Zi,w.stateNode));break;case 4:E=Zi,z=al,Zi=w.stateNode.containerInfo,al=!0,Ju(f,g,w),Zi=E,al=z;break;case 0:case 11:case 14:case 15:if(!Ss&&(E=w.updateQueue,E!==null&&(E=E.lastEffect,E!==null))){z=E=E.next;do{var K=z,ce=K.destroy;K=K.tag,ce!==void 0&&((K&2)!==0||(K&4)!==0)&&ew(w,g,ce),z=z.next}while(z!==E)}Ju(f,g,w);break;case 1:if(!Ss&&(cp(w,g),E=w.stateNode,typeof E.componentWillUnmount=="function"))try{E.props=w.memoizedProps,E.state=w.memoizedState,E.componentWillUnmount()}catch(_e){Gr(w,g,_e)}Ju(f,g,w);break;case 21:Ju(f,g,w);break;case 22:w.mode&1?(Ss=(E=Ss)||w.memoizedState!==null,Ju(f,g,w),Ss=E):Ju(f,g,w);break;default:Ju(f,g,w)}}function mN(f){var g=f.updateQueue;if(g!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new DF),g.forEach(function(E){var z=$F.bind(null,f,E);w.has(E)||(w.add(E),E.then(z,z))})}}function ll(f,g){var w=g.deletions;if(w!==null)for(var E=0;E<w.length;E++){var z=w[E];try{var K=f,ce=g,_e=ce;e:for(;_e!==null;){switch(_e.tag){case 5:Zi=_e.stateNode,al=!1;break e;case 3:Zi=_e.stateNode.containerInfo,al=!0;break e;case 4:Zi=_e.stateNode.containerInfo,al=!0;break e}_e=_e.return}if(Zi===null)throw Error(n(160));pN(K,ce,z),Zi=null,al=!1;var Te=z.alternate;Te!==null&&(Te.return=null),z.return=null}catch(Ye){Gr(z,g,Ye)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)gN(g,f),g=g.sibling}function gN(f,g){var w=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(ll(g,f),Xl(f),E&4){try{im(3,f,f.return),q1(3,f)}catch(Wt){Gr(f,f.return,Wt)}try{im(5,f,f.return)}catch(Wt){Gr(f,f.return,Wt)}}break;case 1:ll(g,f),Xl(f),E&512&&w!==null&&cp(w,w.return);break;case 5:if(ll(g,f),Xl(f),E&512&&w!==null&&cp(w,w.return),f.flags&32){var z=f.stateNode;try{Mt(z,"")}catch(Wt){Gr(f,f.return,Wt)}}if(E&4&&(z=f.stateNode,z!=null)){var K=f.memoizedProps,ce=w!==null?w.memoizedProps:K,_e=f.type,Te=f.updateQueue;if(f.updateQueue=null,Te!==null)try{_e==="input"&&K.type==="radio"&&K.name!=null&&pe(z,K),$r(_e,ce);var Ye=$r(_e,K);for(ce=0;ce<Te.length;ce+=2){var dt=Te[ce],mt=Te[ce+1];dt==="style"?Wn(z,mt):dt==="dangerouslySetInnerHTML"?Dt(z,mt):dt==="children"?Mt(z,mt):k(z,dt,mt,Ye)}switch(_e){case"input":qe(z,K);break;case"textarea":xt(z,K);break;case"select":var ut=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!K.multiple;var It=K.value;It!=null?We(z,!!K.multiple,It,!1):ut!==!!K.multiple&&(K.defaultValue!=null?We(z,!!K.multiple,K.defaultValue,!0):We(z,!!K.multiple,K.multiple?[]:"",!1))}z[$u]=K}catch(Wt){Gr(f,f.return,Wt)}}break;case 6:if(ll(g,f),Xl(f),E&4){if(f.stateNode===null)throw Error(n(162));z=f.stateNode,K=f.memoizedProps;try{z.nodeValue=K}catch(Wt){Gr(f,f.return,Wt)}}break;case 3:if(ll(g,f),Xl(f),E&4&&w!==null&&w.memoizedState.isDehydrated)try{Io(g.containerInfo)}catch(Wt){Gr(f,f.return,Wt)}break;case 4:ll(g,f),Xl(f);break;case 13:ll(g,f),Xl(f),z=f.child,z.flags&8192&&(K=z.memoizedState!==null,z.stateNode.isHidden=K,!K||z.alternate!==null&&z.alternate.memoizedState!==null||(ow=pt())),E&4&&mN(f);break;case 22:if(dt=w!==null&&w.memoizedState!==null,f.mode&1?(Ss=(Ye=Ss)||dt,ll(g,f),Ss=Ye):ll(g,f),Xl(f),E&8192){if(Ye=f.memoizedState!==null,(f.stateNode.isHidden=Ye)&&!dt&&(f.mode&1)!==0)for(Ft=f,dt=f.child;dt!==null;){for(mt=Ft=dt;Ft!==null;){switch(ut=Ft,It=ut.child,ut.tag){case 0:case 11:case 14:case 15:im(4,ut,ut.return);break;case 1:cp(ut,ut.return);var Ut=ut.stateNode;if(typeof Ut.componentWillUnmount=="function"){E=ut,w=ut.return;try{g=E,Ut.props=g.memoizedProps,Ut.state=g.memoizedState,Ut.componentWillUnmount()}catch(Wt){Gr(E,w,Wt)}}break;case 5:cp(ut,ut.return);break;case 22:if(ut.memoizedState!==null){vN(mt);continue}}It!==null?(It.return=ut,Ft=It):vN(mt)}dt=dt.sibling}e:for(dt=null,mt=f;;){if(mt.tag===5){if(dt===null){dt=mt;try{z=mt.stateNode,Ye?(K=z.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(_e=mt.stateNode,Te=mt.memoizedProps.style,ce=Te!=null&&Te.hasOwnProperty("display")?Te.display:null,_e.style.display=Qt("display",ce))}catch(Wt){Gr(f,f.return,Wt)}}}else if(mt.tag===6){if(dt===null)try{mt.stateNode.nodeValue=Ye?"":mt.memoizedProps}catch(Wt){Gr(f,f.return,Wt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===f)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===f)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===f)break e;dt===mt&&(dt=null),mt=mt.return}dt===mt&&(dt=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:ll(g,f),Xl(f),E&4&&mN(f);break;case 21:break;default:ll(g,f),Xl(f)}}function Xl(f){var g=f.flags;if(g&2){try{e:{for(var w=f.return;w!==null;){if(fN(w)){var E=w;break e}w=w.return}throw Error(n(160))}switch(E.tag){case 5:var z=E.stateNode;E.flags&32&&(Mt(z,""),E.flags&=-33);var K=hN(f);rw(f,K,z);break;case 3:case 4:var ce=E.stateNode.containerInfo,_e=hN(f);nw(f,_e,ce);break;default:throw Error(n(161))}}catch(Te){Gr(f,f.return,Te)}f.flags&=-3}g&4096&&(f.flags&=-4097)}function LF(f,g,w){Ft=f,yN(f)}function yN(f,g,w){for(var E=(f.mode&1)!==0;Ft!==null;){var z=Ft,K=z.child;if(z.tag===22&&E){var ce=z.memoizedState!==null||H1;if(!ce){var _e=z.alternate,Te=_e!==null&&_e.memoizedState!==null||Ss;_e=H1;var Ye=Ss;if(H1=ce,(Ss=Te)&&!Ye)for(Ft=z;Ft!==null;)ce=Ft,Te=ce.child,ce.tag===22&&ce.memoizedState!==null?wN(z):Te!==null?(Te.return=ce,Ft=Te):wN(z);for(;K!==null;)Ft=K,yN(K),K=K.sibling;Ft=z,H1=_e,Ss=Ye}xN(f)}else(z.subtreeFlags&8772)!==0&&K!==null?(K.return=z,Ft=K):xN(f)}}function xN(f){for(;Ft!==null;){var g=Ft;if((g.flags&8772)!==0){var w=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:Ss||q1(5,g);break;case 1:var E=g.stateNode;if(g.flags&4&&!Ss)if(w===null)E.componentDidMount();else{var z=g.elementType===g.type?w.memoizedProps:ol(g.type,w.memoizedProps);E.componentDidUpdate(z,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var K=g.updateQueue;K!==null&&Wc(g,K,E);break;case 3:var ce=g.updateQueue;if(ce!==null){if(w=null,g.child!==null)switch(g.child.tag){case 5:w=g.child.stateNode;break;case 1:w=g.child.stateNode}Wc(g,ce,w)}break;case 5:var _e=g.stateNode;if(w===null&&g.flags&4){w=_e;var Te=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":Te.autoFocus&&w.focus();break;case"img":Te.src&&(w.src=Te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Ye=g.alternate;if(Ye!==null){var dt=Ye.memoizedState;if(dt!==null){var mt=dt.dehydrated;mt!==null&&Io(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ss||g.flags&512&&tw(g)}catch(ut){Gr(g,g.return,ut)}}if(g===f){Ft=null;break}if(w=g.sibling,w!==null){w.return=g.return,Ft=w;break}Ft=g.return}}function vN(f){for(;Ft!==null;){var g=Ft;if(g===f){Ft=null;break}var w=g.sibling;if(w!==null){w.return=g.return,Ft=w;break}Ft=g.return}}function wN(f){for(;Ft!==null;){var g=Ft;try{switch(g.tag){case 0:case 11:case 15:var w=g.return;try{q1(4,g)}catch(Te){Gr(g,w,Te)}break;case 1:var E=g.stateNode;if(typeof E.componentDidMount=="function"){var z=g.return;try{E.componentDidMount()}catch(Te){Gr(g,z,Te)}}var K=g.return;try{tw(g)}catch(Te){Gr(g,K,Te)}break;case 5:var ce=g.return;try{tw(g)}catch(Te){Gr(g,ce,Te)}}}catch(Te){Gr(g,g.return,Te)}if(g===f){Ft=null;break}var _e=g.sibling;if(_e!==null){_e.return=g.return,Ft=_e;break}Ft=g.return}}var MF=Math.ceil,G1=T.ReactCurrentDispatcher,iw=T.ReactCurrentOwner,Aa=T.ReactCurrentBatchConfig,$n=0,ji=null,pi=null,Qi=0,Xo=0,up=Ho(0),Si=0,sm=null,jf=0,K1=0,sw=0,om=null,vo=null,ow=0,dp=1/0,qc=null,X1=!1,aw=null,Zu=null,Y1=!1,Qu=null,J1=0,am=0,lw=null,Z1=-1,Q1=0;function Xs(){return($n&6)!==0?pt():Z1!==-1?Z1:Z1=pt()}function ed(f){return(f.mode&1)===0?1:($n&2)!==0&&Qi!==0?Qi&-Qi:sr.transition!==null?(Q1===0&&(Q1=of()),Q1):(f=Un,f!==0||(f=window.event,f=f===void 0?16:df(f.type)),f)}function cl(f,g,w,E){if(50<am)throw am=0,lw=null,Error(n(185));Dl(f,w,E),(($n&2)===0||f!==ji)&&(f===ji&&(($n&2)===0&&(K1|=w),Si===4&&td(f,Qi)),wo(f,E),w===1&&$n===0&&(g.mode&1)===0&&(dp=pt()+500,Cf&&J()))}function wo(f,g){var w=f.callbackNode;hs(f,g);var E=fs(f,f===ji?Qi:0);if(E===0)w!==null&&vt(w),f.callbackNode=null,f.callbackPriority=0;else if(g=E&-E,f.callbackPriority!==g){if(w!=null&&vt(w),g===1)f.tag===0?U(_N.bind(null,f)):A(_N.bind(null,f)),R2(function(){($n&6)===0&&J()}),w=null;else{switch(wu(E)){case 1:w=In;break;case 4:w=Jn;break;case 16:w=Sr;break;case 536870912:w=da;break;default:w=Sr}w=jN(w,bN.bind(null,f))}f.callbackPriority=g,f.callbackNode=w}}function bN(f,g){if(Z1=-1,Q1=0,($n&6)!==0)throw Error(n(327));var w=f.callbackNode;if(fp()&&f.callbackNode!==w)return null;var E=fs(f,f===ji?Qi:0);if(E===0)return null;if((E&30)!==0||(E&f.expiredLanes)!==0||g)g=ey(f,E);else{g=E;var z=$n;$n|=2;var K=kN();(ji!==f||Qi!==g)&&(qc=null,dp=pt()+500,Df(f,g));do try{FF();break}catch(_e){SN(f,_e)}while(!0);_i(),G1.current=K,$n=z,pi!==null?g=0:(ji=null,Qi=0,g=Si)}if(g!==0){if(g===2&&(z=_c(f),z!==0&&(E=z,g=cw(f,z))),g===1)throw w=sm,Df(f,0),td(f,E),wo(f,pt()),w;if(g===6)td(f,E);else{if(z=f.current.alternate,(E&30)===0&&!IF(z)&&(g=ey(f,E),g===2&&(K=_c(f),K!==0&&(E=K,g=cw(f,K))),g===1))throw w=sm,Df(f,0),td(f,E),wo(f,pt()),w;switch(f.finishedWork=z,f.finishedLanes=E,g){case 0:case 1:throw Error(n(345));case 2:Of(f,vo,qc);break;case 3:if(td(f,E),(E&130023424)===E&&(g=ow+500-pt(),10<g)){if(fs(f,0)!==0)break;if(z=f.suspendedLanes,(z&E)!==E){Xs(),f.pingedLanes|=f.suspendedLanes&z;break}f.timeoutHandle=G0(Of.bind(null,f,vo,qc),g);break}Of(f,vo,qc);break;case 4:if(td(f,E),(E&4194240)===E)break;for(g=f.eventTimes,z=-1;0<E;){var ce=31-kr(E);K=1<<ce,ce=g[ce],ce>z&&(z=ce),E&=~K}if(E=z,E=pt()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*MF(E/1960))-E,10<E){f.timeoutHandle=G0(Of.bind(null,f,vo,qc),E);break}Of(f,vo,qc);break;case 5:Of(f,vo,qc);break;default:throw Error(n(329))}}}return wo(f,pt()),f.callbackNode===w?bN.bind(null,f):null}function cw(f,g){var w=om;return f.current.memoizedState.isDehydrated&&(Df(f,g).flags|=256),f=ey(f,g),f!==2&&(g=vo,vo=w,g!==null&&uw(g)),f}function uw(f){vo===null?vo=f:vo.push.apply(vo,f)}function IF(f){for(var g=f;;){if(g.flags&16384){var w=g.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var E=0;E<w.length;E++){var z=w[E],K=z.getSnapshot;z=z.value;try{if(!Ki(K(),z))return!1}catch{return!1}}}if(w=g.child,g.subtreeFlags&16384&&w!==null)w.return=g,g=w;else{if(g===f)break;for(;g.sibling===null;){if(g.return===null||g.return===f)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function td(f,g){for(g&=~sw,g&=~K1,f.suspendedLanes|=g,f.pingedLanes&=~g,f=f.expirationTimes;0<g;){var w=31-kr(g),E=1<<w;f[w]=-1,g&=~E}}function _N(f){if(($n&6)!==0)throw Error(n(327));fp();var g=fs(f,0);if((g&1)===0)return wo(f,pt()),null;var w=ey(f,g);if(f.tag!==0&&w===2){var E=_c(f);E!==0&&(g=E,w=cw(f,E))}if(w===1)throw w=sm,Df(f,0),td(f,g),wo(f,pt()),w;if(w===6)throw Error(n(345));return f.finishedWork=f.current.alternate,f.finishedLanes=g,Of(f,vo,qc),wo(f,pt()),null}function dw(f,g){var w=$n;$n|=1;try{return f(g)}finally{$n=w,$n===0&&(dp=pt()+500,Cf&&J())}}function Pf(f){Qu!==null&&Qu.tag===0&&($n&6)===0&&fp();var g=$n;$n|=1;var w=Aa.transition,E=Un;try{if(Aa.transition=null,Un=1,f)return f()}finally{Un=E,Aa.transition=w,$n=g,($n&6)===0&&J()}}function fw(){Xo=up.current,Zn(up)}function Df(f,g){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==-1&&(f.timeoutHandle=-1,D1(w)),pi!==null)for(w=pi.return;w!==null;){var E=w;switch(je(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&Jh();break;case 3:Na(),Zn(vs),Zn(bi),em();break;case 5:Z0(E);break;case 4:Na();break;case 13:Zn(yr);break;case 19:Zn(yr);break;case 10:bs(E.type._context);break;case 22:case 23:fw()}w=w.return}if(ji=f,pi=f=nd(f.current,null),Qi=Xo=g,Si=0,sm=null,sw=K1=jf=0,vo=om=null,Vs!==null){for(g=0;g<Vs.length;g++)if(w=Vs[g],E=w.interleaved,E!==null){w.interleaved=null;var z=E.next,K=w.pending;if(K!==null){var ce=K.next;K.next=z,E.next=ce}w.pending=E}Vs=null}return f}function SN(f,g){do{var w=pi;try{if(_i(),Qh.current=U1,Ku){for(var E=wr.memoizedState;E!==null;){var z=E.queue;z!==null&&(z.pending=null),E=E.next}Ku=!1}if(Ca=0,Br=qr=wr=null,il=!1,Xu=0,iw.current=null,w===null||w.return===null){Si=1,sm=g,pi=null;break}e:{var K=f,ce=w.return,_e=w,Te=g;if(g=Qi,_e.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var Ye=Te,dt=_e,mt=dt.tag;if((dt.mode&1)===0&&(mt===0||mt===11||mt===15)){var ut=dt.alternate;ut?(dt.updateQueue=ut.updateQueue,dt.memoizedState=ut.memoizedState,dt.lanes=ut.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var It=Kk(ce);if(It!==null){It.flags&=-257,Xk(It,ce,_e,K,g),It.mode&1&&Gk(K,Ye,g),g=It,Te=Ye;var Ut=g.updateQueue;if(Ut===null){var Wt=new Set;Wt.add(Te),g.updateQueue=Wt}else Ut.add(Te);break e}else{if((g&1)===0){Gk(K,Ye,g),hw();break e}Te=Error(n(426))}}else if(et&&_e.mode&1){var si=Kk(ce);if(si!==null){(si.flags&65536)===0&&(si.flags|=256),Xk(si,ce,_e,K,g),Qn(lp(Te,_e));break e}}K=Te=lp(Te,_e),Si!==4&&(Si=2),om===null?om=[K]:om.push(K),K=ce;do{switch(K.tag){case 3:K.flags|=65536,g&=-g,K.lanes|=g;var Ke=Hk(K,Te,g);yo(K,Ke);break e;case 1:_e=Te;var Oe=K.type,Xe=K.stateNode;if((K.flags&128)===0&&(typeof Oe.getDerivedStateFromError=="function"||Xe!==null&&typeof Xe.componentDidCatch=="function"&&(Zu===null||!Zu.has(Xe)))){K.flags|=65536,g&=-g,K.lanes|=g;var wt=qk(K,_e,g);yo(K,wt);break e}}K=K.return}while(K!==null)}CN(w)}catch(Vt){g=Vt,pi===w&&w!==null&&(pi=w=w.return);continue}break}while(!0)}function kN(){var f=G1.current;return G1.current=U1,f===null?U1:f}function hw(){(Si===0||Si===3||Si===2)&&(Si=4),ji===null||(jf&268435455)===0&&(K1&268435455)===0||td(ji,Qi)}function ey(f,g){var w=$n;$n|=2;var E=kN();(ji!==f||Qi!==g)&&(qc=null,Df(f,g));do try{RF();break}catch(z){SN(f,z)}while(!0);if(_i(),$n=w,G1.current=E,pi!==null)throw Error(n(261));return ji=null,Qi=0,Si}function RF(){for(;pi!==null;)NN(pi)}function FF(){for(;pi!==null&&!Ct();)NN(pi)}function NN(f){var g=TN(f.alternate,f,Xo);f.memoizedProps=f.pendingProps,g===null?CN(f):pi=g,iw.current=null}function CN(f){var g=f;do{var w=g.alternate;if(f=g.return,(g.flags&32768)===0){if(w=jF(w,g,Xo),w!==null){pi=w;return}}else{if(w=PF(w,g),w!==null){w.flags&=32767,pi=w;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{Si=6,pi=null;return}}if(g=g.sibling,g!==null){pi=g;return}pi=g=f}while(g!==null);Si===0&&(Si=5)}function Of(f,g,w){var E=Un,z=Aa.transition;try{Aa.transition=null,Un=1,zF(f,g,w,E)}finally{Aa.transition=z,Un=E}return null}function zF(f,g,w,E){do fp();while(Qu!==null);if(($n&6)!==0)throw Error(n(327));w=f.finishedWork;var z=f.finishedLanes;if(w===null)return null;if(f.finishedWork=null,f.finishedLanes=0,w===f.current)throw Error(n(177));f.callbackNode=null,f.callbackPriority=0;var K=w.lanes|w.childLanes;if(R0(f,K),f===ji&&(pi=ji=null,Qi=0),(w.subtreeFlags&2064)===0&&(w.flags&2064)===0||Y1||(Y1=!0,jN(Sr,function(){return fp(),null})),K=(w.flags&15990)!==0,(w.subtreeFlags&15990)!==0||K){K=Aa.transition,Aa.transition=null;var ce=Un;Un=1;var _e=$n;$n|=4,iw.current=null,OF(f,w),gN(w,f),$l(Fc),ku=!!kf,Fc=kf=null,f.current=w,LF(w),yt(),$n=_e,Un=ce,Aa.transition=K}else f.current=w;if(Y1&&(Y1=!1,Qu=f,J1=z),K=f.pendingLanes,K===0&&(Zu=null),fa(w.stateNode),wo(f,pt()),g!==null)for(E=f.onRecoverableError,w=0;w<g.length;w++)z=g[w],E(z.value,{componentStack:z.stack,digest:z.digest});if(X1)throw X1=!1,f=aw,aw=null,f;return(J1&1)!==0&&f.tag!==0&&fp(),K=f.pendingLanes,(K&1)!==0?f===lw?am++:(am=0,lw=f):am=0,J(),null}function fp(){if(Qu!==null){var f=wu(J1),g=Aa.transition,w=Un;try{if(Aa.transition=null,Un=16>f?16:f,Qu===null)var E=!1;else{if(f=Qu,Qu=null,J1=0,($n&6)!==0)throw Error(n(331));var z=$n;for($n|=4,Ft=f.current;Ft!==null;){var K=Ft,ce=K.child;if((Ft.flags&16)!==0){var _e=K.deletions;if(_e!==null){for(var Te=0;Te<_e.length;Te++){var Ye=_e[Te];for(Ft=Ye;Ft!==null;){var dt=Ft;switch(dt.tag){case 0:case 11:case 15:im(8,dt,K)}var mt=dt.child;if(mt!==null)mt.return=dt,Ft=mt;else for(;Ft!==null;){dt=Ft;var ut=dt.sibling,It=dt.return;if(dN(dt),dt===Ye){Ft=null;break}if(ut!==null){ut.return=It,Ft=ut;break}Ft=It}}}var Ut=K.alternate;if(Ut!==null){var Wt=Ut.child;if(Wt!==null){Ut.child=null;do{var si=Wt.sibling;Wt.sibling=null,Wt=si}while(Wt!==null)}}Ft=K}}if((K.subtreeFlags&2064)!==0&&ce!==null)ce.return=K,Ft=ce;else e:for(;Ft!==null;){if(K=Ft,(K.flags&2048)!==0)switch(K.tag){case 0:case 11:case 15:im(9,K,K.return)}var Ke=K.sibling;if(Ke!==null){Ke.return=K.return,Ft=Ke;break e}Ft=K.return}}var Oe=f.current;for(Ft=Oe;Ft!==null;){ce=Ft;var Xe=ce.child;if((ce.subtreeFlags&2064)!==0&&Xe!==null)Xe.return=ce,Ft=Xe;else e:for(ce=Oe;Ft!==null;){if(_e=Ft,(_e.flags&2048)!==0)try{switch(_e.tag){case 0:case 11:case 15:q1(9,_e)}}catch(Vt){Gr(_e,_e.return,Vt)}if(_e===ce){Ft=null;break e}var wt=_e.sibling;if(wt!==null){wt.return=_e.return,Ft=wt;break e}Ft=_e.return}}if($n=z,J(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Bs,f)}catch{}E=!0}return E}finally{Un=w,Aa.transition=g}}return!1}function EN(f,g,w){g=lp(w,g),g=Hk(f,g,1),f=go(f,g,1),g=Xs(),f!==null&&(Dl(f,1,g),wo(f,g))}function Gr(f,g,w){if(f.tag===3)EN(f,f,w);else for(;g!==null;){if(g.tag===3){EN(g,f,w);break}else if(g.tag===1){var E=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Zu===null||!Zu.has(E))){f=lp(w,f),f=qk(g,f,1),g=go(g,f,1),f=Xs(),g!==null&&(Dl(g,1,f),wo(g,f));break}}g=g.return}}function BF(f,g,w){var E=f.pingCache;E!==null&&E.delete(g),g=Xs(),f.pingedLanes|=f.suspendedLanes&w,ji===f&&(Qi&w)===w&&(Si===4||Si===3&&(Qi&130023424)===Qi&&500>pt()-ow?Df(f,0):sw|=w),wo(f,g)}function AN(f,g){g===0&&((f.mode&1)===0?g=1:(g=Pl,Pl<<=1,(Pl&130023424)===0&&(Pl=4194304)));var w=Xs();f=qn(f,g),f!==null&&(Dl(f,g,w),wo(f,w))}function UF(f){var g=f.memoizedState,w=0;g!==null&&(w=g.retryLane),AN(f,w)}function $F(f,g){var w=0;switch(f.tag){case 13:var E=f.stateNode,z=f.memoizedState;z!==null&&(w=z.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(n(314))}E!==null&&E.delete(g),AN(f,w)}var TN;TN=function(f,g,w){if(f!==null)if(f.memoizedProps!==g.pendingProps||vs.current)xo=!0;else{if((f.lanes&w)===0&&(g.flags&128)===0)return xo=!1,TF(f,g,w);xo=(f.flags&131072)!==0}else xo=!1,et&&(g.flags&1048576)!==0&&st(g,de,g.index);switch(g.lanes=0,g.tag){case 2:var E=g.type;V1(f,g),f=g.pendingProps;var z=Vu(g,bi.current);Tr(g,w),z=Ef(null,g,E,f,z,w);var K=Ea();return g.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ws(E)?(K=!0,Uc(g)):K=!1,g.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,Zh(g),z.updater=$1,g.stateNode=z,z._reactInternals=g,V2(g,E,f,w),g=K2(null,g,E,!0,K,w)):(g.tag=0,et&&K&&Je(g),Ks(null,g,z,w),g=g.child),g;case 16:E=g.elementType;e:{switch(V1(f,g),f=g.pendingProps,z=E._init,E=z(E._payload),g.type=E,z=g.tag=VF(E),f=ol(E,f),z){case 0:g=G2(null,g,E,f,w);break e;case 1:g=tN(null,g,E,f,w);break e;case 11:g=Yk(null,g,E,f,w);break e;case 14:g=Jk(null,g,E,ol(E.type,f),w);break e}throw Error(n(306,E,""))}return g;case 0:return E=g.type,z=g.pendingProps,z=g.elementType===E?z:ol(E,z),G2(f,g,E,z,w);case 1:return E=g.type,z=g.pendingProps,z=g.elementType===E?z:ol(E,z),tN(f,g,E,z,w);case 3:e:{if(nN(g),f===null)throw Error(n(387));E=g.pendingProps,K=g.memoizedState,z=K.element,J0(f,g),nl(g,E,null,w);var ce=g.memoizedState;if(E=ce.element,K.isDehydrated)if(K={element:E,isDehydrated:!1,cache:ce.cache,pendingSuspenseBoundaries:ce.pendingSuspenseBoundaries,transitions:ce.transitions},g.updateQueue.baseState=K,g.memoizedState=K,g.flags&256){z=lp(Error(n(423)),g),g=rN(f,g,E,w,z);break e}else if(E!==z){z=lp(Error(n(424)),g),g=rN(f,g,E,w,z);break e}else for(tt=Yi(g.stateNode.containerInfo.firstChild),Pe=g,et=!0,rt=null,w=Hn(g,null,E,w),g.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(yn(),E===z){g=Hc(f,g,w);break e}Ks(f,g,E,w)}g=g.child}return g;case 5:return I1(g),f===null&&Nt(g),E=g.type,z=g.pendingProps,K=f!==null?f.memoizedProps:null,ce=z.children,q0(E,z)?ce=null:K!==null&&q0(E,K)&&(g.flags|=32),eN(f,g),Ks(f,g,ce,w),g.child;case 6:return f===null&&Nt(g),null;case 13:return iN(f,g,w);case 4:return Gu(g,g.stateNode.containerInfo),E=g.pendingProps,f===null?g.child=ni(g,null,E,w):Ks(f,g,E,w),g.child;case 11:return E=g.type,z=g.pendingProps,z=g.elementType===E?z:ol(E,z),Yk(f,g,E,z,w);case 7:return Ks(f,g,g.pendingProps,w),g.child;case 8:return Ks(f,g,g.pendingProps.children,w),g.child;case 12:return Ks(f,g,g.pendingProps.children,w),g.child;case 10:e:{if(E=g.type._context,z=g.pendingProps,K=g.memoizedProps,ce=z.value,ir(Ai,E._currentValue),E._currentValue=ce,K!==null)if(Ki(K.value,ce)){if(K.children===z.children&&!vs.current){g=Hc(f,g,w);break e}}else for(K=g.child,K!==null&&(K.return=g);K!==null;){var _e=K.dependencies;if(_e!==null){ce=K.child;for(var Te=_e.firstContext;Te!==null;){if(Te.context===E){if(K.tag===1){Te=mo(-1,w&-w),Te.tag=2;var Ye=K.updateQueue;if(Ye!==null){Ye=Ye.shared;var dt=Ye.pending;dt===null?Te.next=Te:(Te.next=dt.next,dt.next=Te),Ye.pending=Te}}K.lanes|=w,Te=K.alternate,Te!==null&&(Te.lanes|=w),po(K.return,w,g),_e.lanes|=w;break}Te=Te.next}}else if(K.tag===10)ce=K.type===g.type?null:K.child;else if(K.tag===18){if(ce=K.return,ce===null)throw Error(n(341));ce.lanes|=w,_e=ce.alternate,_e!==null&&(_e.lanes|=w),po(ce,w,g),ce=K.sibling}else ce=K.child;if(ce!==null)ce.return=K;else for(ce=K;ce!==null;){if(ce===g){ce=null;break}if(K=ce.sibling,K!==null){K.return=ce.return,ce=K;break}ce=ce.return}K=ce}Ks(f,g,z.children,w),g=g.child}return g;case 9:return z=g.type,E=g.pendingProps.children,Tr(g,w),z=Hr(z),E=E(z),g.flags|=1,Ks(f,g,E,w),g.child;case 14:return E=g.type,z=ol(E,g.pendingProps),z=ol(E.type,z),Jk(f,g,E,z,w);case 15:return Zk(f,g,g.type,g.pendingProps,w);case 17:return E=g.type,z=g.pendingProps,z=g.elementType===E?z:ol(E,z),V1(f,g),g.tag=1,ws(E)?(f=!0,Uc(g)):f=!1,Tr(g,w),Wk(g,E,z),V2(g,E,z,w),K2(null,g,E,!0,f,w);case 19:return oN(f,g,w);case 22:return Qk(f,g,w)}throw Error(n(156,g.tag))};function jN(f,g){return lt(f,g)}function WF(f,g,w,E){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(f,g,w,E){return new WF(f,g,w,E)}function pw(f){return f=f.prototype,!(!f||!f.isReactComponent)}function VF(f){if(typeof f=="function")return pw(f)?1:0;if(f!=null){if(f=f.$$typeof,f===M)return 11;if(f===Z)return 14}return 2}function nd(f,g){var w=f.alternate;return w===null?(w=Ta(f.tag,g,f.key,f.mode),w.elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=g,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=f.flags&14680064,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,g=f.dependencies,w.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function ty(f,g,w,E,z,K){var ce=2;if(E=f,typeof f=="function")pw(f)&&(ce=1);else if(typeof f=="string")ce=5;else e:switch(f){case C:return Lf(w.children,z,K,g);case N:ce=8,z|=8;break;case L:return f=Ta(12,w,g,z|2),f.elementType=L,f.lanes=K,f;case H:return f=Ta(13,w,g,z),f.elementType=H,f.lanes=K,f;case W:return f=Ta(19,w,g,z),f.elementType=W,f.lanes=K,f;case F:return ny(w,z,K,g);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case R:ce=10;break e;case D:ce=9;break e;case M:ce=11;break e;case Z:ce=14;break e;case B:ce=16,E=null;break e}throw Error(n(130,f==null?f:typeof f,""))}return g=Ta(ce,w,g,z),g.elementType=f,g.type=E,g.lanes=K,g}function Lf(f,g,w,E){return f=Ta(7,f,E,g),f.lanes=w,f}function ny(f,g,w,E){return f=Ta(22,f,E,g),f.elementType=F,f.lanes=w,f.stateNode={isHidden:!1},f}function mw(f,g,w){return f=Ta(6,f,null,g),f.lanes=w,f}function gw(f,g,w){return g=Ta(4,f.children!==null?f.children:[],f.key,g),g.lanes=w,g.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},g}function HF(f,g,w,E,z){this.tag=g,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=af(0),this.expirationTimes=af(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=af(0),this.identifierPrefix=E,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function yw(f,g,w,E,z,K,ce,_e,Te){return f=new HF(f,g,w,_e,Te),g===1?(g=1,K===!0&&(g|=8)):g=0,K=Ta(3,null,null,g),f.current=K,K.stateNode=f,K.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zh(K),f}function qF(f,g,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:E==null?null:""+E,children:f,containerInfo:g,implementation:w}}function PN(f){if(!f)return Hl;f=f._reactInternals;e:{if(me(f)!==f||f.tag!==1)throw Error(n(170));var g=f;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ws(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(n(171))}if(f.tag===1){var w=f.type;if(ws(w))return Y0(f,w,g)}return g}function DN(f,g,w,E,z,K,ce,_e,Te){return f=yw(w,E,!0,f,z,K,ce,_e,Te),f.context=PN(null),w=f.current,E=Xs(),z=ed(w),K=mo(E,z),K.callback=g??null,go(w,K,z),f.current.lanes=z,Dl(f,z,E),wo(f,E),f}function ry(f,g,w,E){var z=g.current,K=Xs(),ce=ed(z);return w=PN(w),g.context===null?g.context=w:g.pendingContext=w,g=mo(K,ce),g.payload={element:f},E=E===void 0?null:E,E!==null&&(g.callback=E),f=go(z,g,ce),f!==null&&(cl(f,z,ce,K),$c(f,z,ce)),ce}function iy(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function ON(f,g){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<g?w:g}}function xw(f,g){ON(f,g),(f=f.alternate)&&ON(f,g)}function GF(){return null}var LN=typeof reportError=="function"?reportError:function(f){console.error(f)};function vw(f){this._internalRoot=f}sy.prototype.render=vw.prototype.render=function(f){var g=this._internalRoot;if(g===null)throw Error(n(409));ry(f,g,null,null)},sy.prototype.unmount=vw.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var g=f.containerInfo;Pf(function(){ry(null,f,null,null)}),g[Ei]=null}};function sy(f){this._internalRoot=f}sy.prototype.unstable_scheduleHydration=function(f){if(f){var g=ha();f={blockedOn:null,target:f,priority:g};for(var w=0;w<ma.length&&g!==0&&g<ma[w].priority;w++);ma.splice(w,0,f),w===0&&_u(f)}};function ww(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function oy(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function MN(){}function KF(f,g,w,E,z){if(z){if(typeof E=="function"){var K=E;E=function(){var Ye=iy(ce);K.call(Ye)}}var ce=DN(g,E,f,0,null,!1,!1,"",MN);return f._reactRootContainer=ce,f[Ei]=ce.current,Ic(f.nodeType===8?f.parentNode:f),Pf(),ce}for(;z=f.lastChild;)f.removeChild(z);if(typeof E=="function"){var _e=E;E=function(){var Ye=iy(Te);_e.call(Ye)}}var Te=yw(f,0,!1,null,null,!1,!1,"",MN);return f._reactRootContainer=Te,f[Ei]=Te.current,Ic(f.nodeType===8?f.parentNode:f),Pf(function(){ry(g,Te,w,E)}),Te}function ay(f,g,w,E,z){var K=w._reactRootContainer;if(K){var ce=K;if(typeof z=="function"){var _e=z;z=function(){var Te=iy(ce);_e.call(Te)}}ry(g,ce,f,z)}else ce=KF(w,g,f,z,E);return iy(ce)}Bh=function(f){switch(f.tag){case 3:var g=f.stateNode;if(g.current.memoizedState.isDehydrated){var w=bc(g.pendingLanes);w!==0&&(vu(g,w|1),wo(g,pt()),($n&6)===0&&(dp=pt()+500,J()))}break;case 13:Pf(function(){var E=qn(f,1);if(E!==null){var z=Xs();cl(E,f,1,z)}}),xw(f,1)}},lf=function(f){if(f.tag===13){var g=qn(f,134217728);if(g!==null){var w=Xs();cl(g,f,134217728,w)}xw(f,134217728)}},Uh=function(f){if(f.tag===13){var g=ed(f),w=qn(f,g);if(w!==null){var E=Xs();cl(w,f,g,E)}xw(f,g)}},ha=function(){return Un},Sc=function(f,g){var w=Un;try{return Un=f,g()}finally{Un=w}},_n=function(f,g,w){switch(g){case"input":if(qe(f,w),g=w.name,w.type==="radio"&&g!=null){for(w=f;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<w.length;g++){var E=w[g];if(E!==f&&E.form===f.form){var z=Nf(E);if(!z)throw Error(n(90));$e(E),qe(E,z)}}}break;case"textarea":xt(f,w);break;case"select":g=w.value,g!=null&&We(f,!!w.multiple,g,!1)}},Yn=dw,hn=Pf;var XF={usingClientEntryPoint:!1,Events:[Wu,zc,Nf,Ot,Jt,dw]},lm={findFiberByHostInstance:Vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YF={bundleType:lm.bundleType,version:lm.version,rendererPackageName:lm.rendererPackageName,rendererConfig:lm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Re(f),f===null?null:f.stateNode},findFiberByHostInstance:lm.findFiberByHostInstance||GF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ly=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ly.isDisabled&&ly.supportsFiber)try{Bs=ly.inject(YF),Wr=ly}catch{}}return bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XF,bo.createPortal=function(f,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ww(g))throw Error(n(200));return qF(f,g,null,w)},bo.createRoot=function(f,g){if(!ww(f))throw Error(n(299));var w=!1,E="",z=LN;return g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onRecoverableError!==void 0&&(z=g.onRecoverableError)),g=yw(f,1,!1,null,null,w,!1,E,z),f[Ei]=g.current,Ic(f.nodeType===8?f.parentNode:f),new vw(g)},bo.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var g=f._reactInternals;if(g===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=Re(g),f=f===null?null:f.stateNode,f},bo.flushSync=function(f){return Pf(f)},bo.hydrate=function(f,g,w){if(!oy(g))throw Error(n(200));return ay(null,f,g,!0,w)},bo.hydrateRoot=function(f,g,w){if(!ww(f))throw Error(n(405));var E=w!=null&&w.hydratedSources||null,z=!1,K="",ce=LN;if(w!=null&&(w.unstable_strictMode===!0&&(z=!0),w.identifierPrefix!==void 0&&(K=w.identifierPrefix),w.onRecoverableError!==void 0&&(ce=w.onRecoverableError)),g=DN(g,null,f,1,w??null,z,!1,K,ce),f[Ei]=g.current,Ic(f),E)for(f=0;f<E.length;f++)w=E[f],z=w._getVersion,z=z(w._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[w,z]:g.mutableSourceEagerHydrationData.push(w,z);return new sy(g)},bo.render=function(f,g,w){if(!oy(g))throw Error(n(200));return ay(null,f,g,!1,w)},bo.unmountComponentAtNode=function(f){if(!oy(f))throw Error(n(40));return f._reactRootContainer?(Pf(function(){ay(null,null,f,!1,function(){f._reactRootContainer=null,f[Ei]=null})}),!0):!1},bo.unstable_batchedUpdates=dw,bo.unstable_renderSubtreeIntoContainer=function(f,g,w,E){if(!oy(w))throw Error(n(200));if(f==null||f._reactInternals===void 0)throw Error(n(38));return ay(f,g,w,!1,E)},bo.version="18.3.1-next-f1338f8080-20240426",bo}var WN;function F6(){if(WN)return Sw.exports;WN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sw.exports=l7(),Sw.exports}var VN;function c7(){if(VN)return cy;VN=1;var t=F6();return cy.createRoot=t.createRoot,cy.hydrateRoot=t.hydrateRoot,cy}var u7=c7(),nu=F6();const z6=Rv(nu);/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xg(){return xg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xg.apply(this,arguments)}var wd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wd||(wd={}));const HN="popstate";function d7(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return h5("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:_x(i)}return h7(e,n,null,t)}function fi(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function B6(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f7(){return Math.random().toString(36).substr(2,8)}function qN(t,e){return{usr:t.state,key:t.key,idx:e}}function h5(t,e,n,r){return n===void 0&&(n=null),xg({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?v0(e):e,{state:n,key:e&&e.key||r||f7()})}function _x(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function v0(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function h7(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=wd.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(xg({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=wd.Pop;let v=u(),b=v==null?null:v-c;c=v,l&&l({action:a,location:x.location,delta:b})}function h(v,b){a=wd.Push;let S=h5(x.location,v,b);c=u()+1;let k=qN(S,c),T=x.createHref(S);try{o.pushState(k,"",T)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(T)}s&&l&&l({action:a,location:x.location,delta:1})}function p(v,b){a=wd.Replace;let S=h5(x.location,v,b);c=u();let k=qN(S,c),T=x.createHref(S);o.replaceState(k,"",T),s&&l&&l({action:a,location:x.location,delta:0})}function y(v){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof v=="string"?v:_x(v);return S=S.replace(/ $/,"%20"),fi(b,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,b)}let x={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(HN,d),l=v,()=>{i.removeEventListener(HN,d),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let b=y(v);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:h,replace:p,go(v){return o.go(v)}};return x}var GN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(GN||(GN={}));function p7(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?v0(e):e,i=G_(r.pathname||"/",n);if(i==null)return null;let s=U6(t);m7(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=E7(i);o=k7(s[a],l)}return o}function U6(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(fi(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Td([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(fi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),U6(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_7(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of $6(s.path))i(s,o,l)}),e}function $6(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=$6(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function m7(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S7(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const g7=/^:[\w-]+$/,y7=3,x7=2,v7=1,w7=10,b7=-2,KN=t=>t==="*";function _7(t,e){let n=t.split("/"),r=n.length;return n.some(KN)&&(r+=b7),e&&(r+=x7),n.filter(i=>!KN(i)).reduce((i,s)=>i+(g7.test(s)?y7:s===""?v7:w7),r)}function S7(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function k7(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=N7({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Td([i,u.pathname]),pathnameBase:P7(Td([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Td([i,u.pathnameBase]))}return s}function N7(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=C7(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let x=a[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const y=a[d];return p&&!y?c[h]=void 0:c[h]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function C7(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),B6(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E7(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return B6(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function G_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function A7(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?v0(t):t;return{pathname:n?n.startsWith("/")?n:T7(n,e):e,search:D7(r),hash:O7(i)}}function T7(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Cw(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function K_(t,e){let n=j7(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function X_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=v0(t):(i=xg({},t),fi(!i.pathname||!i.pathname.includes("?"),Cw("?","pathname","search",i)),fi(!i.pathname||!i.pathname.includes("#"),Cw("#","pathname","hash",i)),fi(!i.search||!i.search.includes("#"),Cw("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=A7(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Td=t=>t.join("/").replace(/\/\/+/g,"/"),P7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function L7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const W6=["post","put","patch","delete"];new Set(W6);const M7=["get",...W6];new Set(M7);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vg.apply(this,arguments)}const Y_=Y.createContext(null),I7=Y.createContext(null),Zd=Y.createContext(null),Fv=Y.createContext(null),xc=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),V6=Y.createContext(null);function R7(t,e){let{relative:n}=e===void 0?{}:e;w0()||fi(!1);let{basename:r,navigator:i}=Y.useContext(Zd),{hash:s,pathname:o,search:a}=q6(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Td([r,o])),i.createHref({pathname:l,search:a,hash:s})}function w0(){return Y.useContext(Fv)!=null}function El(){return w0()||fi(!1),Y.useContext(Fv).location}function H6(t){Y.useContext(Zd).static||Y.useLayoutEffect(t)}function ua(){let{isDataRoute:t}=Y.useContext(xc);return t?Z7():F7()}function F7(){w0()||fi(!1);let t=Y.useContext(Y_),{basename:e,future:n,navigator:r}=Y.useContext(Zd),{matches:i}=Y.useContext(xc),{pathname:s}=El(),o=JSON.stringify(K_(i,n.v7_relativeSplatPath)),a=Y.useRef(!1);return H6(()=>{a.current=!0}),Y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=X_(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Td([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const z7=Y.createContext(null);function B7(t){let e=Y.useContext(xc).outlet;return e&&Y.createElement(z7.Provider,{value:t},e)}function zv(){let{matches:t}=Y.useContext(xc),e=t[t.length-1];return e?e.params:{}}function q6(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=Y.useContext(Zd),{matches:i}=Y.useContext(xc),{pathname:s}=El(),o=JSON.stringify(K_(i,r.v7_relativeSplatPath));return Y.useMemo(()=>X_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function U7(t,e){return $7(t,e)}function $7(t,e,n,r){w0()||fi(!1);let{navigator:i}=Y.useContext(Zd),{matches:s}=Y.useContext(xc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=El(),u;if(e){var d;let v=typeof e=="string"?v0(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||fi(!1),u=v}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=p7(t,{pathname:p}),x=G7(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:Td([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Td([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&x?Y.createElement(Fv.Provider,{value:{location:vg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wd.Pop}},x):x}function W7(){let t=J7(),e=L7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),n?Y.createElement("pre",{style:i},n):null,null)}const V7=Y.createElement(W7,null);class H7 extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?Y.createElement(xc.Provider,{value:this.props.routeContext},Y.createElement(V6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function q7(t){let{routeContext:e,match:n,children:r}=t,i=Y.useContext(Y_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),Y.createElement(xc.Provider,{value:e},r)}function G7(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||fi(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,y=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let p,y=!1,x=null,v=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||V7,l&&(c<0&&h===0?(Q7("route-fallback"),y=!0,v=null):c===h&&(y=!0,v=d.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,h+1)),S=()=>{let k;return p?k=x:y?k=v:d.route.Component?k=Y.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=u,Y.createElement(q7,{match:d,routeContext:{outlet:u,matches:b,isDataRoute:n!=null},children:k})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?Y.createElement(H7,{location:n.location,revalidation:n.revalidation,component:x,error:p,children:S(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):S()},null)}var G6=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(G6||{}),K6=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(K6||{});function K7(t){let e=Y.useContext(Y_);return e||fi(!1),e}function X7(t){let e=Y.useContext(I7);return e||fi(!1),e}function Y7(t){let e=Y.useContext(xc);return e||fi(!1),e}function X6(t){let e=Y7(),n=e.matches[e.matches.length-1];return n.route.id||fi(!1),n.route.id}function J7(){var t;let e=Y.useContext(V6),n=X7(),r=X6();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Z7(){let{router:t}=K7(G6.UseNavigateStable),e=X6(K6.UseNavigateStable),n=Y.useRef(!1);return H6(()=>{n.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,vg({fromRouteId:e},s)))},[t,e])}const XN={};function Q7(t,e,n){XN[t]||(XN[t]=!0)}function ez(t){let{to:e,replace:n,state:r,relative:i}=t;w0()||fi(!1);let{future:s,static:o}=Y.useContext(Zd),{matches:a}=Y.useContext(xc),{pathname:l}=El(),c=ua(),u=X_(e,K_(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return Y.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function tz(t){return B7(t.context)}function oi(t){fi(!1)}function nz(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wd.Pop,navigator:s,static:o=!1,future:a}=t;w0()&&fi(!1);let l=e.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:vg({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=v0(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:y="default"}=r,x=Y.useMemo(()=>{let v=G_(u,l);return v==null?null:{location:{pathname:v,search:d,hash:h,state:p,key:y},navigationType:i}},[l,u,d,h,p,y,i]);return x==null?null:Y.createElement(Zd.Provider,{value:c},Y.createElement(Fv.Provider,{children:n,value:x}))}function rz(t){let{children:e,location:n}=t;return U7(p5(e),n)}new Promise(()=>{});function p5(t,e){e===void 0&&(e=[]);let n=[];return Y.Children.forEach(t,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){n.push.apply(n,p5(r.props.children,s));return}r.type!==oi&&fi(!1),!r.props.index||!r.props.children||fi(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=p5(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function m5(){return m5=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m5.apply(this,arguments)}function iz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oz(t,e){return t.button===0&&(!e||e==="_self")&&!sz(t)}function g5(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function az(t,e){let n=g5(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const lz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cz="6";try{window.__reactRouterVersion=cz}catch{}const uz="startTransition",YN=s7[uz];function dz(t){let{basename:e,children:n,future:r,window:i}=t,s=Y.useRef();s.current==null&&(s.current=d7({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=Y.useCallback(d=>{c&&YN?YN(()=>l(d)):l(d)},[l,c]);return Y.useLayoutEffect(()=>o.listen(u),[o,u]),Y.createElement(nz,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const fz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y6=Y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=iz(e,lz),{basename:p}=Y.useContext(Zd),y,x=!1;if(typeof c=="string"&&hz.test(c)&&(y=c,fz))try{let k=new URL(window.location.href),T=c.startsWith("//")?new URL(k.protocol+c):new URL(c),j=G_(T.pathname,p);T.origin===k.origin&&j!=null?c=j+T.search+T.hash:x=!0}catch{}let v=R7(c,{relative:i}),b=pz(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function S(k){r&&r(k),k.defaultPrevented||b(k)}return Y.createElement("a",m5({},h,{href:y||v,onClick:x||s?r:S,ref:n,target:l}))});var JN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(JN||(JN={}));var ZN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ZN||(ZN={}));function pz(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=ua(),c=El(),u=q6(t,{relative:o});return Y.useCallback(d=>{if(oz(d,n)){d.preventDefault();let h=r!==void 0?r:_x(c)===_x(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function mz(t){let e=Y.useRef(g5(t)),n=Y.useRef(!1),r=El(),i=Y.useMemo(()=>az(r.search,n.current?null:e.current),[r.search]),s=ua(),o=Y.useCallback((a,l)=>{const c=g5(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gz={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ht=(t,e)=>{const n=Y.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>Y.createElement("svg",{ref:u,...gz,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${yz(t)}`,a].join(" "),...c},[...e.map(([d,h])=>Y.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=Ht("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=Ht("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=Ht("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=Ht("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=Ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=Ht("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=Ht("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=Ht("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=Ht("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=Ht("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=Ht("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=Ht("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Ht("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=Ht("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=Ht("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=Ht("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=Ht("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=Ht("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ht("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Ht("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=Ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=Ht("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=Ht("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=Ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=Ht("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=Ht("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=Ht("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=Ht("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=Ht("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=Ht("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=Ht("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=Ht("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=Ht("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=Ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=Ht("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Ht("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=Ht("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=Ht("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=Ht("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Ht("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lz=Ht("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=Ht("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _l=Ht("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=Ht("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=Ht("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=Ht("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=Ht("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=Ht("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=Ht("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=Ht("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=Ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=Ht("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=Ht("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=Ht("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=Ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=Ht("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uz=Ht("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=Ht("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$z="modulepreload",Wz=function(t){return"/"+t},t3={},fu=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=Wz(l),l in t3)return;t3[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":$z,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},Vz=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class iS extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class Hz extends iS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qz extends iS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gz extends iS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var v5;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(v5||(v5={}));var Kz=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class Xz{constructor(e,{headers:n={},customFetch:r,region:i=v5.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Vz(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return Kz(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(y=>{throw new Hz(y)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new qz(u);if(!u.ok)throw new Gz(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return h==="application/json"?p=yield u.json():h==="application/octet-stream"?p=yield u.blob():h==="text/event-stream"?p=u:h==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}}var Di={},hp={},pp={},mp={},gp={},yp={},Yz=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},t0=Yz();const Jz=t0.fetch,tP=t0.fetch.bind(t0),nP=t0.Headers,Zz=t0.Request,Qz=t0.Response,S0=Object.freeze(Object.defineProperty({__proto__:null,Headers:nP,Request:Zz,Response:Qz,default:tP,fetch:Jz},Symbol.toStringTag,{value:"Module"})),eB=R6(S0);var uy={},n3;function rP(){if(n3)return uy;n3=1,Object.defineProperty(uy,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return uy.default=t,uy}var r3;function iP(){if(r3)return yp;r3=1;var t=yp&&yp.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(yp,"__esModule",{value:!0});const e=t(eB),n=t(rP());class r{constructor(s){this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=s.headers,this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=s.shouldThrowOnError,this.signal=s.signal,this.isMaybeSingle=s.isMaybeSingle,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=Object.assign({},this.headers),this.headers[s]=o,this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h;let p=null,y=null,x=null,v=c.status,b=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=j:y=JSON.parse(j))}const k=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),T=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");k&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,x=null,v=406,b="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const k=await c.text();try{p=JSON.parse(k),Array.isArray(p)&&c.status===404&&(y=[],p=null,v=200,b="OK")}catch{c.status===404&&k===""?(v=204,b="No Content"):p={message:k}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,v=200,b="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:y,count:x,status:v,statusText:b}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(d=c==null?void 0:c.stack)!==null&&d!==void 0?d:""}`,hint:"",code:`${(h=c==null?void 0:c.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return yp.default=r,yp}var i3;function sP(){if(i3)return gp;i3=1;var t=gp&&gp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gp,"__esModule",{value:!0});const e=t(iP());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${h}"; options=${d};`,c==="json"?this:this}rollback(){var i;return((i=this.headers.Prefer)!==null&&i!==void 0?i:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return gp.default=n,gp}var s3;function sS(){if(s3)return mp;s3=1;var t=mp&&mp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mp,"__esModule",{value:!0});const e=t(sP());class n extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return mp.default=n,mp}var o3;function oP(){if(o3)return pp;o3=1;var t=pp&&pp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pp,"__esModule",{value:!0});const e=t(sS());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=s,this.schema=o,this.fetch=a}select(i,{head:s=!1,count:o}={}){const a=s?"HEAD":"GET";let l=!1;const c=(i??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(i,{count:s,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(i)){const c=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(i,{count:s}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}delete({count:i}={}){const s="DELETE",o=[];return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return pp.default=n,pp}var um={},dm={},a3;function tB(){return a3||(a3=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.version=void 0,dm.version="0.0.0-automated"),dm}var l3;function nB(){if(l3)return um;l3=1,Object.defineProperty(um,"__esModule",{value:!0}),um.DEFAULT_HEADERS=void 0;const t=tB();return um.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},um}var c3;function rB(){if(c3)return hp;c3=1;var t=hp&&hp.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(hp,"__esModule",{value:!0});const e=t(oP()),n=t(sS()),r=nB();class i{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){let d;const h=new URL(`${this.url}/rpc/${o}`);let p;l||c?(d=l?"HEAD":"GET",Object.entries(a).filter(([x,v])=>v!==void 0).map(([x,v])=>[x,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([x,v])=>{h.searchParams.append(x,v)})):(d="POST",p=a);const y=Object.assign({},this.headers);return u&&(y.Prefer=`count=${u}`),new n.default({method:d,url:h,headers:y,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return hp.default=i,hp}var u3;function iB(){if(u3)return Di;u3=1;var t=Di&&Di.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Di,"__esModule",{value:!0}),Di.PostgrestError=Di.PostgrestBuilder=Di.PostgrestTransformBuilder=Di.PostgrestFilterBuilder=Di.PostgrestQueryBuilder=Di.PostgrestClient=void 0;const e=t(rB());Di.PostgrestClient=e.default;const n=t(oP());Di.PostgrestQueryBuilder=n.default;const r=t(sS());Di.PostgrestFilterBuilder=r.default;const i=t(sP());Di.PostgrestTransformBuilder=i.default;const s=t(iP());Di.PostgrestBuilder=s.default;const o=t(rP());return Di.PostgrestError=o.default,Di.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:s.default,PostgrestError:o.default},Di}var sB=iB();const oB=Rv(sB),{PostgrestClient:aB,PostgrestQueryBuilder:$1e,PostgrestFilterBuilder:W1e,PostgrestTransformBuilder:V1e,PostgrestBuilder:H1e,PostgrestError:q1e}=oB,lB="2.11.2",cB={"X-Client-Info":`realtime-js/${lB}`},uB="1.0.0",aP=1e4,dB=1e3;var qp;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(qp||(qp={}));var Yo;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Yo||(Yo={}));var gl;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gl||(gl={}));var w5;(function(t){t.websocket="websocket"})(w5||(w5={}));var Kf;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Kf||(Kf={}));class fB{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class lP{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var br;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(br||(br={}));const d3=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=hB(o,t,e,i),s),{})},hB=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?cP(s,o):b5(o)},cP=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return yB(e,n)}switch(t){case br.bool:return pB(e);case br.float4:case br.float8:case br.int2:case br.int4:case br.int8:case br.numeric:case br.oid:return mB(e);case br.json:case br.jsonb:return gB(e);case br.timestamp:return xB(e);case br.abstime:case br.date:case br.daterange:case br.int4range:case br.int8range:case br.money:case br.reltime:case br.text:case br.time:case br.timestamptz:case br.timetz:case br.tsrange:case br.tstzrange:return b5(e);default:return b5(e)}},b5=t=>t,pB=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},mB=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},gB=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},yB=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>cP(e,a))}return t},xB=t=>typeof t=="string"?t.replace(" ","T"):t,uP=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ew{constructor(e,n,r={},i=aP){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var f3;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(f3||(f3={}));class zm{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zm.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=zm.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zm.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=s[c];if(d){const h=u.map(v=>v.presence_ref),p=d.map(v=>v.presence_ref),y=u.filter(v=>p.indexOf(v.presence_ref)<0),x=d.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(a[c]=y),x.length>0&&(l[c]=x)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),h=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...h)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var h3;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(h3||(h3={}));var p3;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(p3||(p3={}));var Zc;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zc||(Zc={}));class oS{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Yo.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ew(this,gl.join,this.params,this.timeout),this.rejoinTimer=new lP(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yo.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yo.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Yo.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yo.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gl.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new zm(this),this.broadcastEndpointURL=uP(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>e==null?void 0:e(Zc.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Zc.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Zc.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,p=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,y=[];for(let x=0;x<p;x++){const v=h[x],{filter:{event:b,schema:S,table:k,filter:T}}=v,j=u&&u[x];if(j&&j.event===b&&j.schema===S&&j.table===k&&j.filter===T)y.push(Object.assign(Object.assign({},v),{id:j.id}));else{this.unsubscribe(),e==null||e(Zc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Zc.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Zc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Zc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Yo.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gl.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const i=new Ew(this,gl.leave,{},e);i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ew(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=gl;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var y,x,v;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(x=p.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(h,r)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var y,x,v,b,S,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const T=p.id,j=(y=p.filter)===null||y===void 0?void 0:y.event;return T&&((x=n.ids)===null||x===void 0?void 0:x.includes(T))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const T=(S=(b=p==null?void 0:p.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return T==="*"||T===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:v,commit_timestamp:b,type:S,errors:k}=y;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:b,eventType:S,new:{},old:{},errors:k}),this._getPayloadRecords(y))}p.callback(h,r)})}_isClosed(){return this.state===Yo.closed}_isJoined(){return this.state===Yo.joined}_isJoining(){return this.state===Yo.joining}_isLeaving(){return this.state===Yo.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&oS.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gl.close,{},e)}_onError(e){this._on(gl.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yo.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=d3(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=d3(e.columns,e.old_record)),n}}const vB=()=>{},wB=typeof WebSocket<"u",bB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _B{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=cB,this.params={},this.timeout=aP,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=vB,this.conn=null,this.sendBuffer=[],this.serializer=new fB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>fu(async()=>{const{default:l}=await Promise.resolve().then(()=>S0);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${w5.websocket}`,this.httpEndpoint=uP(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lP(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(wB){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new SB(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),fu(async()=>{const{default:e}=await import("./browser-D7QcfRVH.js").then(n=>n.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:uB}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qp.connecting:return Kf.Connecting;case qp.open:return Kf.Open;case qp.closing:return Kf.Closing;default:return Kf.Closed}}isConnected(){return this.connectionState()===Kf.Open}channel(e,n={config:{}}){const r=new oS(`realtime:${e}`,n,this);return this.channels.push(r),r}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(n){let r=null;try{r=JSON.parse(atob(n.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=n,this.channels.forEach(i=>{n&&i.updateJoinPayload({access_token:n}),i.joinedOnce&&i._isJoined()&&i._push(gl.access_token,{access_token:n})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(dB,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gl.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([bB],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class SB{constructor(e,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=qp.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class aS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oi(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kB extends aS{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _5 extends aS{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var NB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const dP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},CB=()=>NB(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fu(()=>Promise.resolve().then(()=>S0),void 0)).Response:Response}),S5=t=>{if(Array.isArray(t))return t.map(n=>S5(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=S5(r)}),e};var Eh=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Aw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),EB=(t,e,n)=>Eh(void 0,void 0,void 0,function*(){const r=yield CB();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new kB(Aw(i),t.status||500))}).catch(i=>{e(new _5(Aw(i),i))}):e(new _5(Aw(t),t))}),AB=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function c1(t,e,n,r,i,s){return Eh(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,AB(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>EB(l,a,r))})})}function Ex(t,e,n,r){return Eh(this,void 0,void 0,function*(){return c1(t,"GET",e,n,r)})}function hd(t,e,n,r,i){return Eh(this,void 0,void 0,function*(){return c1(t,"POST",e,r,i,n)})}function TB(t,e,n,r,i){return Eh(this,void 0,void 0,function*(){return c1(t,"PUT",e,r,i,n)})}function jB(t,e,n,r){return Eh(this,void 0,void 0,function*(){return c1(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function fP(t,e,n,r,i){return Eh(this,void 0,void 0,function*(){return c1(t,"DELETE",e,r,i,n)})}var _o=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const PB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m3={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class DB{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=dP(i)}uploadOrUpdate(e,n,r,i){return _o(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},m3),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Oi(s))return{data:null,error:s};throw s}})}upload(e,n,r){return _o(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return _o(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:m3.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:s,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Oi(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return _o(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield hd(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new aS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}update(e,n,r){return _o(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return _o(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}copy(e,n,r){return _o(this,void 0,void 0,function*(){try{return{data:{path:(yield hd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return _o(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield hd(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return _o(this,void 0,void 0,function*(){try{const i=yield hd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}download(e,n){return _o(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Ex(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Oi(a))return{data:null,error:a};throw a}})}info(e){return _o(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ex(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:S5(r),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}exists(e){return _o(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield jB(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Oi(r)&&r instanceof _5){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return _o(this,void 0,void 0,function*(){try{return{data:yield fP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}list(e,n,r){return _o(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},PB),n),{prefix:e||""});return{data:yield hd(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Oi(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const OB="2.7.1",LB={"X-Client-Info":`storage-js/${OB}`};var xp=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class MB{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},LB),n),this.fetch=dP(r)}listBuckets(){return xp(this,void 0,void 0,function*(){try{return{data:yield Ex(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oi(e))return{data:null,error:e};throw e}})}getBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield Ex(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return xp(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return xp(this,void 0,void 0,function*(){try{return{data:yield TB(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Oi(r))return{data:null,error:r};throw r}})}emptyBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield hd(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return xp(this,void 0,void 0,function*(){try{return{data:yield fP(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Oi(n))return{data:null,error:n};throw n}})}}class IB extends MB{constructor(e,n={},r){super(e,n,r)}from(e){return new DB(this.url,this.headers,e,this.fetch)}}const RB="2.49.2";let Cm="";typeof Deno<"u"?Cm="deno":typeof document<"u"?Cm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cm="react-native":Cm="node";const FB={"X-Client-Info":`supabase-js-${Cm}/${RB}`},zB={headers:FB},BB={schema:"public"},UB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$B={};var WB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const VB=t=>{let e;return t?e=t:typeof fetch>"u"?e=tP:e=fetch,(...n)=>e(...n)},HB=()=>typeof Headers>"u"?nP:Headers,qB=(t,e,n)=>{const r=VB(n),i=HB();return(s,o)=>WB(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var GB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function KB(t){return t.replace(/\/$/,"")}function XB(t,e){const{db:n,auth:r,realtime:i,global:s}=t,{db:o,auth:a,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>GB(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const hP="2.69.0",Pp=30*1e3,k5=3,Tw=k5*Pp,YB="http://localhost:9999",JB="supabase.auth.token",ZB={"X-Client-Info":`gotrue-js/${hP}`},N5="X-Supabase-Api-Version",pP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,e9=6e5;class lS extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function vn(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class t9 extends lS{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function n9(t){return vn(t)&&t.name==="AuthApiError"}class mP extends lS{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Qd extends lS{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ld extends Qd{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function r9(t){return vn(t)&&t.name==="AuthSessionMissingError"}class jw extends Qd{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dy extends Qd{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fy extends Qd{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i9(t){return vn(t)&&t.name==="AuthImplicitGrantRedirectError"}class g3 extends Qd{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class C5 extends Qd{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Pw(t){return vn(t)&&t.name==="AuthRetryableFetchError"}class y3 extends Qd{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Bm extends Qd{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ax="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x3=` 	
\r=`.split(""),s9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<x3.length;e+=1)t[x3[e].charCodeAt(0)]=-2;for(let e=0;e<Ax.length;e+=1)t[Ax[e].charCodeAt(0)]=e;return t})();function v3(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ax[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Ax[r]),e.queuedBits-=6}}function gP(t,e,n){const r=s9[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function o9(t){const e=[],n=i=>{e.push(i)},r={queue:0,queuedBits:0};return yP(t,i=>{v3(i,r,n)}),v3(null,r,n),e.join("")}function w3(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{l9(o,r,n)};for(let o=0;o<t.length;o+=1)gP(t.charCodeAt(o),i,s);return e.join("")}function a9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function yP(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}a9(r,e)}}function l9(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function c9(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)gP(t.charCodeAt(i),n,r);return new Uint8Array(e)}function u9(t){const e=[];return yP(t,n=>e.push(n)),new Uint8Array(e)}function d9(t){return Math.round(Date.now()/1e3)+t}function f9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Jl=()=>typeof window<"u"&&typeof document<"u",Mf={tested:!1,writable:!1},Um=()=>{if(!Jl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mf.tested)return Mf.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Mf.tested=!0,Mf.writable=!0}catch{Mf.tested=!0,Mf.writable=!1}return Mf.writable};function h9(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const xP=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>fu(async()=>{const{default:r}=await Promise.resolve().then(()=>S0);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},p9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vP=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},hy=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},py=async(t,e)=>{await t.removeItem(e)};class $v{constructor(){this.promise=new $v.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$v.promiseConstructor=Promise;function Dw(t){const e=t.split(".");if(e.length!==3)throw new Bm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!QB.test(e[r]))throw new Bm("JWT not in base64url format");return{header:JSON.parse(w3(e[0])),payload:JSON.parse(w3(e[1])),signature:c9(e[2]),raw:{header:e[0],payload:e[1]}}}async function m9(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function g9(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function y9(t){return("0"+t.toString(16)).substr(-2)}function x9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,y9).join("")}async function v9(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function w9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await v9(t);return o9(n)}async function vp(t,e,n=!1){const r=x9();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await vP(t,`${e}-code-verifier`,i);const s=await w9(r);return[s,r===s?"plain":"s256"]}const b9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _9(t){const e=t.headers.get(N5);if(!e||!e.match(b9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function S9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function k9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var N9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Uf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),C9=[502,503,504];async function b3(t){var e;if(!p9(t))throw new C5(Uf(t),0);if(C9.includes(t.status))throw new C5(Uf(t),t.status);let n;try{n=await t.json()}catch(s){throw new mP(Uf(s),s)}let r;const i=_9(t);if(i&&i.getTime()>=pP["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new y3(Uf(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ld}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new y3(Uf(n),t.status,n.weak_password.reasons);throw new t9(Uf(n),t.status||500,r)}const E9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Dn(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[N5]||(s[N5]=pP["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await A9(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function A9(t,e,n,r,i,s){const o=E9(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new C5(Uf(l),0)}if(a.ok||await b3(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await b3(l)}}function cd(t){var e;let n=null;D9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=d9(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function _3(t){const e=cd(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function yd(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function T9(t){return{data:t,error:null}}function j9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=N9(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function P9(t){return t}function D9(t){return t.access_token&&t.refresh_token&&t.expires_in}var O9=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class L9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=xP(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await Dn(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Dn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:yd})}catch(r){if(vn(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=O9(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Dn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:j9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(vn(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Dn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yd})}catch(n){if(vn(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await Dn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:P9});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=x}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(vn(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Dn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yd})}catch(n){if(vn(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await Dn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:yd})}catch(r){if(vn(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:yd})}catch(r){if(vn(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:n,error:r}=await Dn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(vn(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(vn(n))return{data:null,error:n};throw n}}}const M9={getItem:t=>Um()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Um()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Um()&&globalThis.localStorage.removeItem(t)}};function S3(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function I9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const wp={debug:!!(globalThis&&Um()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class wP extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class R9 extends wP{}async function F9(t,e,n){wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw wp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new R9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wp.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}I9();const z9={url:YB,storageKey:JB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ZB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function k3(t,e,n){return await n()}class bg{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bg.nextInstanceID,bg.nextInstanceID+=1,this.instanceID>0&&Jl()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},z9),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new L9({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=xP(i.fetch),this.lock=i.lock||k3,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Jl()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=F9:this.lock=k3,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Um()?this.storage=M9:(this.memoryStorage={},this.storage=S3(this.memoryStorage)):(this.memoryStorage={},this.storage=S3(this.memoryStorage)),Jl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hP}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=h9(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Jl()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),i9(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return vn(n)?{error:n}:{error:new mP("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:cd}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(vn(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:d,options:h}=e;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await vp(this.storage,this.storageKey)),s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:y},xform:cd})}else if("phone"in e){const{phone:u,password:d,options:h}=e;s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:cd})}else throw new dy("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(vn(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_3})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:_3})}else throw new dy("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jw}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(vn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await hy(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:cd});if(await py(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new jw}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(vn(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:cd}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jw}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(vn(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await vp(this.storage,this.storageKey));const{error:d}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new dy("You must provide either an email or phone number.")}catch(a){if(vn(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Dn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:cd});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(vn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await vp(this.storage,this.storageKey)),await Dn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:T9})}catch(s){if(vn(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ld;const{error:i}=await Dn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(vn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Dn(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Dn(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new dy("You must provide either an email or phone number and a type")}catch(n){if(vn(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await hy(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Tw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yd}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ld}:await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:yd})})}catch(n){if(vn(n))return r9(n)&&(await this._removeSession(),await py(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ld;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await vp(this.storage,this.storageKey));const{data:c,error:u}=await Dn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:yd});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(vn(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ld;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=Dw(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(vn(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ld;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(vn(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Jl())throw new fy("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fy(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new g3("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fy("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new g3("No code detected.");const{data:S,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new fy("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let h=u+d;l&&(h=parseInt(l));const p=h-u;p*1e3<=Pp&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const y=h-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:x,error:v}=await this._getUser(s);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:b,redirectType:e.type},error:null}}catch(r){if(vn(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await hy(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(n9(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await py(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=f9(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vp(this.storage,this.storageKey,!0));try{return await Dn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(vn(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(vn(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:d,error:h}=s;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Dn(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Jl()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(vn(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Dn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(vn(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await g9(async i=>(i>0&&await m9(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Dn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:cd})),(i,s)=>{const o=200*Math.pow(2,i);return s&&Pw(s)&&Date.now()+o-r<Pp})}catch(r){if(this._debug(n,"error",r),vn(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Jl()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await hy(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Tw;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Tw}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),Pw(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ld;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $v;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ld;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),vn(s)){const o={session:null,error:s};return Pw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await vP(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await py(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pp);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Pp);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Pp}ms, refresh threshold is ${k5} ticks`),i<=k5&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof wP)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await vp(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Dn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(vn(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Dn(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(vn(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Dn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(vn(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Dn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(vn(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Dw(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+e9>Date.now()))return r;const{data:i,error:s}=await Dn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Bm("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Bm("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:p,error:y}=await this.getSession();if(y||!p.session)return{data:null,error:y};r=p.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Dw(r);if(S9(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:s,header:i,signature:o},error:null}}const c=k9(i.alg),u=await this.fetchJwk(i.kid,n),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,u9(`${a}.${l}`)))throw new Bm("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(vn(r))return{data:null,error:r};throw r}}}bg.nextInstanceID=0;const B9=bg;class U9 extends B9{constructor(e){super(e)}}var $9=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class W9{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=KB(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:BB,realtime:$B,auth:Object.assign(Object.assign({},UB),{storageKey:l}),global:zB},u=XB(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=qB(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new aB(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Xz(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new IB(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return $9(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new U9({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new _B(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const V9=(t,e,n)=>new W9(t,e,n),H9="https://klumxecllfauamqnrckf.supabase.co",q9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtsdW14ZWNsbGZhdWFtcW5yY2tmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE2NDcyNzUsImV4cCI6MjA1NzIyMzI3NX0.S20v_K_5pDY0oA-4ztB1mlRWRF4vyt-NETZkvyx0PjE",ct=V9(H9,q9,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"x-application-name":"rezerwacje-v4"},fetch:(t,e={})=>{const n=new AbortController,r=setTimeout(()=>n.abort(),6e4);return fetch(t,{...e,signal:n.signal}).finally(()=>{clearTimeout(r)})}},realtime:{timeout:6e4,params:{eventsPerSecond:10}},db:{schema:"public"}});let $m=!1;const G9=async(t,e=5,n=1e3)=>{let r=null,i=0;for(;i<=e;)try{const s=await Promise.resolve(t());return $m=!0,s}catch(s){if(r=s,$m=!1,console.warn(`Prba ${i+1}/${e+1} nie powioda si:`,s),i===e)break;const o=n*Math.pow(2,i);await new Promise(a=>setTimeout(a,o)),i++}throw r},K9=async()=>{var t;try{const e=await ct.auth.getUser();if(e.error)return console.error("Bd pobierania uytkownika:",e.error),!1;const n=e.data.user;if(!n)return!1;const r=await ct.from("profiles").select("is_admin").eq("id",n.id).single();return r.error?(console.error("Bd pobierania profilu:",r.error),!1):((t=r.data)==null?void 0:t.is_admin)||!1}catch(e){return console.error("Bd podczas sprawdzania uprawnie administratora:",e),!1}},N3=async()=>{try{const t=new AbortController,e=setTimeout(()=>t.abort(),1e4),n=await ct.from("profiles").select("id").limit(1).abortSignal(t.signal);return clearTimeout(e),n.error?(console.error("Bd poczenia z Supabase:",n.error),console.error("Status bdu:",n.status),console.error("Kod bdu:",n.error.code),console.error("Szczegy bdu:",n.error.details),n.error.message.includes("querying schema")?console.error("Problem z dostpem do schematu bazy danych"):n.error.message.includes("network error")&&console.error("Problem z sieci - brak poczenia internetowego"),$m=!1,!1):(console.log("Poczenie z Supabase dziaa prawidowo"),$m=!0,!0)}catch(t){return console.error("Wyjtek podczas sprawdzania poczenia z Supabase:",t),t instanceof DOMException&&t.name==="AbortError"&&console.error("Przekroczono limit czasu oczekiwania na odpowied serwera"),t instanceof Error&&(console.error("Nazwa bdu:",t.name),console.error("Wiadomo bdu:",t.message),console.error("Stos wywoa:",t.stack)),$m=!1,!1}},Tx=(t,e,n=null,r=null)=>{if(!t||!e||!n||!r)return 0;const i=new Date(t),s=new Date(e),[o,a]=n.split(":").map(Number),[l,c]=r.split(":").map(Number);i.setHours(o,a,0,0),s.setHours(l,c,0,0);const u=Math.abs(s.getTime()-i.getTime())/(1e3*60*60);return u<=24?1:Math.ceil((u-24)/24)+1},X9=t=>t.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}),C3=async(t,e,n,r=!1)=>!0,Ow=async(t,e)=>{const n=new Date(e);return n.setDate(n.getDate()+1),n},Y9=async(t,e,n)=>{try{const{data:r,error:i}=await ct.from("reservations").select(`
        id,
        start_date,
        end_date,
        start_time,
        end_time,
        status,
        reservation_items!inner (
          equipment_id,
          equipment:equipment (
            name,
            description
          )
        )
      `).gte("start_date",e.toISOString()).lte("end_date",n.toISOString()).neq("status","cancelled");if(i)return console.error("Bd podczas pobierania rezerwacji:",i),new Map;const s=new Map;return t.forEach(o=>{s.set(o,[])}),r&&r.forEach(o=>{o.reservation_items.forEach(a=>{var c;const l=a.equipment_id;if(t.includes(l)){const u={...o,equipment_name:((c=a.equipment)==null?void 0:c.name)||"Nieznany sprzt"},d=s.get(l)||[];d.push(u),s.set(l,d)}})}),s}catch(r){return console.error("Wystpi bd podczas pobierania rezerwacji:",r),new Map}},my=t=>`${X9(t)}, ${t.getHours().toString().padStart(2,"0")}:00`,J9=(t,e=!0)=>{const n=t.getDay()===6,r=Array.from({length:9},(i,s)=>`${(s+8).toString().padStart(2,"0")}:00`);return n?r.filter(i=>{const s=parseInt(i.split(":")[0],10);return s>=8&&s<=13}):r.filter(i=>{const s=parseInt(i.split(":")[0],10);return s>=8&&s<=16})},E3=(t,e)=>{const n=t.getDay()===6,r=parseInt(e.split(":")[0],10);return n?r>=8&&r<=13:r>=8&&r<=16},cS=Y.createContext({});function uS(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wv=Y.createContext(null),dS=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Z9 extends Y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Q9({children:t,isPresent:e}){const n=Y.useId(),r=Y.useRef(null),i=Y.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=Y.useContext(dS);return Y.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),m.jsx(Z9,{isPresent:e,childRef:r,sizeRef:i,children:Y.cloneElement(t,{ref:r})})}const eU=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=uS(tU),l=Y.useId(),c=Y.useCallback(d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},[a,r]),u=Y.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return Y.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[n]),Y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=m.jsx(Q9,{isPresent:n,children:t})),m.jsx(Wv.Provider,{value:u,children:t})};function tU(){return new Map}function bP(t=!0){const e=Y.useContext(Wv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=Y.useId();Y.useEffect(()=>{t&&i(s)},[t]);const o=Y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const gy=t=>t.key||"";function A3(t){const e=[];return Y.Children.forEach(t,n=>{Y.isValidElement(n)&&e.push(n)}),e}const fS=typeof window<"u",_P=fS?Y.useLayoutEffect:Y.useEffect,pc=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=bP(o),c=Y.useMemo(()=>A3(t),[t]),u=o&&!a?[]:c.map(gy),d=Y.useRef(!0),h=Y.useRef(c),p=uS(()=>new Map),[y,x]=Y.useState(c),[v,b]=Y.useState(c);_P(()=>{d.current=!1,h.current=c;for(let T=0;T<v.length;T++){const j=gy(v[T]);u.includes(j)?p.delete(j):p.get(j)!==!0&&p.set(j,!1)}},[v,u.length,u.join("-")]);const S=[];if(c!==y){let T=[...c];for(let j=0;j<v.length;j++){const P=v[j],C=gy(P);u.includes(C)||(T.splice(j,0,P),S.push(P))}s==="wait"&&S.length&&(T=S),b(A3(T)),x(c);return}const{forceRender:k}=Y.useContext(cS);return m.jsx(m.Fragment,{children:v.map(T=>{const j=gy(T),P=o&&!a?!1:c===v||u.includes(j),C=()=>{if(p.has(j))p.set(j,!0);else return;let N=!0;p.forEach(L=>{L||(N=!1)}),N&&(k==null||k(),b(h.current),o&&(l==null||l()),r&&r())};return m.jsx(eU,{isPresent:P,initial:!d.current||n?void 0:!1,custom:P?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:P?void 0:C,children:T},j)})})},ia=t=>t;let SP=ia;function hS(t){let e;return()=>(e===void 0&&(e=t()),e)}const n0=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},iu=t=>t*1e3,su=t=>t/1e3,nU={useManualTiming:!1};function rU(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const p=d&&r?e:n;return u&&s.add(c),p.has(c)||p.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const yy=["read","resolveKeyframes","update","preRender","render","postRender"],iU=40;function kP(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=yy.reduce((b,S)=>(b[S]=rU(s),b),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=o,p=()=>{const b=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,iU),1),i.timestamp=b,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(p))},y=()=>{n=!0,r=!0,i.isProcessing||t(p)};return{schedule:yy.reduce((b,S)=>{const k=o[S];return b[S]=(T,j=!1,P=!1)=>(n||y(),k.schedule(T,j,P)),b},{}),cancel:b=>{for(let S=0;S<yy.length;S++)o[yy[S]].cancel(b)},state:i,steps:o}}const{schedule:Dr,cancel:Ud,state:ns,steps:Lw}=kP(typeof requestAnimationFrame<"u"?requestAnimationFrame:ia,!0),NP=Y.createContext({strict:!1}),T3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},r0={};for(const t in T3)r0[t]={isEnabled:e=>T3[t].some(n=>!!e[n])};function sU(t){for(const e in t)r0[e]={...r0[e],...t[e]}}const oU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jx(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||oU.has(t)}let CP=t=>!jx(t);function aU(t){t&&(CP=e=>e.startsWith("on")?!jx(e):t(e))}try{aU(require("@emotion/is-prop-valid").default)}catch{}function lU(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(CP(i)||n===!0&&jx(i)||!e&&!jx(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function cU(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Vv=Y.createContext({});function _g(t){return typeof t=="string"||Array.isArray(t)}function Hv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const pS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mS=["initial",...pS];function qv(t){return Hv(t.animate)||mS.some(e=>_g(t[e]))}function EP(t){return!!(qv(t)||t.variants)}function uU(t,e){if(qv(t)){const{initial:n,animate:r}=t;return{initial:n===!1||_g(n)?n:void 0,animate:_g(r)?r:void 0}}return t.inherit!==!1?e:{}}function dU(t){const{initial:e,animate:n}=uU(t,Y.useContext(Vv));return Y.useMemo(()=>({initial:e,animate:n}),[j3(e),j3(n)])}function j3(t){return Array.isArray(t)?t.join(" "):t}const fU=Symbol.for("motionComponentSymbol");function Rp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function hU(t,e,n){return Y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rp(n)&&(n.current=r))},[e])}const gS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),pU="framerAppearId",AP="data-"+gS(pU),{schedule:yS}=kP(queueMicrotask,!1),TP=Y.createContext({});function mU(t,e,n,r,i){var s,o;const{visualElement:a}=Y.useContext(Vv),l=Y.useContext(NP),c=Y.useContext(Wv),u=Y.useContext(dS).reducedMotion,d=Y.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=Y.useContext(TP);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&gU(d.current,n,i,p);const y=Y.useRef(!1);Y.useInsertionEffect(()=>{h&&y.current&&h.update(n,c)});const x=n[AP],v=Y.useRef(!!x&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return _P(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),yS.render(h.render),v.current&&h.animationState&&h.animationState.animateChanges())}),Y.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,x)}),v.current=!1))}),h}function gU(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:jP(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Rp(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function jP(t){if(t)return t.options.allowProjection!==!1?t.projection:jP(t.parent)}function yU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&sU(t);function a(c,u){let d;const h={...Y.useContext(dS),...c,layoutId:xU(c)},{isStatic:p}=h,y=dU(c),x=r(c,p);if(!p&&fS){vU();const v=wU(h);d=v.MeasureLayout,y.visualElement=mU(i,x,h,e,v.ProjectionNode)}return m.jsxs(Vv.Provider,{value:y,children:[d&&y.visualElement?m.jsx(d,{visualElement:y.visualElement,...h}):null,n(i,c,hU(x,y.visualElement,u),x,p,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=Y.forwardRef(a);return l[fU]=i,l}function xU({layoutId:t}){const e=Y.useContext(cS).id;return e&&t!==void 0?e+"-"+t:t}function vU(t,e){Y.useContext(NP).strict}function wU(t){const{drag:e,layout:n}=r0;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const bU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xS(t){return typeof t!="string"||t.includes("-")?!1:!!(bU.indexOf(t)>-1||/[A-Z]/u.test(t))}function P3(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function vS(t,e,n,r){if(typeof e=="function"){const[i,s]=P3(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=P3(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const E5=t=>Array.isArray(t),_U=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),SU=t=>E5(t)?t[t.length-1]||0:t,Os=t=>!!(t&&t.getVelocity);function ox(t){const e=Os(t)?t.get():t;return _U(e)?e.toValue():e}function kU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:NU(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const PP=t=>(e,n)=>{const r=Y.useContext(Vv),i=Y.useContext(Wv),s=()=>kU(t,e,r,i);return n?s():uS(s)};function NU(t,e,n,r){const i={},s=r(t,{});for(const h in s)i[h]=ox(s[h]);let{initial:o,animate:a}=t;const l=qv(t),c=EP(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Hv(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const y=vS(t,h[p]);if(y){const{transitionEnd:x,transition:v,...b}=y;for(const S in b){let k=b[S];if(Array.isArray(k)){const T=u?k.length-1:0;k=k[T]}k!==null&&(i[S]=k)}for(const S in x)i[S]=x[S]}}}return i}const k0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ah=new Set(k0),DP=t=>e=>typeof e=="string"&&e.startsWith(t),OP=DP("--"),CU=DP("var(--"),wS=t=>CU(t)?EU.test(t.split("/*")[0].trim()):!1,EU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,LP=(t,e)=>e&&typeof t=="number"?e.transform(t):t,hu=(t,e,n)=>n>e?e:n<t?t:n,N0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Sg={...N0,transform:t=>hu(0,1,t)},xy={...N0,default:1},u1=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ud=u1("deg"),cc=u1("%"),sn=u1("px"),AU=u1("vh"),TU=u1("vw"),D3={...cc,parse:t=>cc.parse(t)/100,transform:t=>cc.transform(t*100)},jU={borderWidth:sn,borderTopWidth:sn,borderRightWidth:sn,borderBottomWidth:sn,borderLeftWidth:sn,borderRadius:sn,radius:sn,borderTopLeftRadius:sn,borderTopRightRadius:sn,borderBottomRightRadius:sn,borderBottomLeftRadius:sn,width:sn,maxWidth:sn,height:sn,maxHeight:sn,top:sn,right:sn,bottom:sn,left:sn,padding:sn,paddingTop:sn,paddingRight:sn,paddingBottom:sn,paddingLeft:sn,margin:sn,marginTop:sn,marginRight:sn,marginBottom:sn,marginLeft:sn,backgroundPositionX:sn,backgroundPositionY:sn},PU={rotate:ud,rotateX:ud,rotateY:ud,rotateZ:ud,scale:xy,scaleX:xy,scaleY:xy,scaleZ:xy,skew:ud,skewX:ud,skewY:ud,distance:sn,translateX:sn,translateY:sn,translateZ:sn,x:sn,y:sn,z:sn,perspective:sn,transformPerspective:sn,opacity:Sg,originX:D3,originY:D3,originZ:sn},O3={...N0,transform:Math.round},bS={...jU,...PU,zIndex:O3,size:sn,fillOpacity:Sg,strokeOpacity:Sg,numOctaves:O3},DU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},OU=k0.length;function LU(t,e,n){let r="",i=!0;for(let s=0;s<OU;s++){const o=k0[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=LP(a,bS[o]);if(!l){i=!1;const u=DU[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function _S(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ah.has(l)){o=!0;continue}else if(OP(l)){i[l]=c;continue}else{const u=LP(c,bS[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=LU(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const MU={offset:"stroke-dashoffset",array:"stroke-dasharray"},IU={offset:"strokeDashoffset",array:"strokeDasharray"};function RU(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?MU:IU;t[s.offset]=sn.transform(-r);const o=sn.transform(e),a=sn.transform(n);t[s.array]=`${o} ${a}`}function L3(t,e,n){return typeof t=="string"?t:sn.transform(e+n*t)}function FU(t,e,n){const r=L3(e,t.x,t.width),i=L3(n,t.y,t.height);return`${r} ${i}`}function SS(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(_S(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:p,dimensions:y}=t;h.transform&&(y&&(p.transform=h.transform),delete h.transform),y&&(i!==void 0||s!==void 0||p.transform)&&(p.transformOrigin=FU(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),o!==void 0&&RU(h,o,a,l,!1)}const kS=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),MP=()=>({...kS(),attrs:{}}),NS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function IP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const RP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FP(t,e,n,r){IP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(RP.has(i)?i:gS(i),e.attrs[i])}const Px={};function zU(t){Object.assign(Px,t)}function zP(t,{layout:e,layoutId:n}){return Ah.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Px[t]||t==="opacity")}function CS(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(Os(i[o])||e.style&&Os(e.style[o])||zP(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function BP(t,e,n){const r=CS(t,e,n);for(const i in t)if(Os(t[i])||Os(e[i])){const s=k0.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function BU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const M3=["x","y","width","height","cx","cy","r"],UU={useVisualState:PP({scrapeMotionValuesFromProps:BP,createRenderState:MP,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(Ah.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<M3.length;a++){const l=M3[a];t[l]!==e[l]&&(o=!0)}o&&Dr.read(()=>{BU(n,r),Dr.render(()=>{SS(r,i,NS(n.tagName),t.transformTemplate),FP(n,r)})})}})},$U={useVisualState:PP({scrapeMotionValuesFromProps:CS,createRenderState:kS})};function UP(t,e,n){for(const r in e)!Os(e[r])&&!zP(r,n)&&(t[r]=e[r])}function WU({transformTemplate:t},e){return Y.useMemo(()=>{const n=kS();return _S(n,e,t),Object.assign({},n.vars,n.style)},[e])}function VU(t,e){const n=t.style||{},r={};return UP(r,n,t),Object.assign(r,WU(t,e)),r}function HU(t,e){const n={},r=VU(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function qU(t,e,n,r){const i=Y.useMemo(()=>{const s=MP();return SS(s,e,NS(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};UP(s,t.style,t),i.style={...s,...i.style}}return i}function GU(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(xS(n)?qU:HU)(r,s,o,n),c=lU(r,typeof n=="string",t),u=n!==Y.Fragment?{...c,...l,ref:i}:{},{children:d}=r,h=Y.useMemo(()=>Os(d)?d.get():d,[d]);return Y.createElement(n,{...u,children:h})}}function KU(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...xS(r)?UU:$U,preloadedFeatures:t,useRender:GU(i),createVisualElement:e,Component:r};return yU(o)}}function $P(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Gv(t,e,n){const r=t.getProps();return vS(r,e,n!==void 0?n:r.custom,t)}const XU=hS(()=>window.ScrollTimeline!==void 0);class YU{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(XU()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class JU extends YU{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ES(t,e){return t?t[e]||t.default||t:void 0}const A5=2e4;function WP(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<A5;)e+=n,r=t.next(e);return e>=A5?1/0:e}function AS(t){return typeof t=="function"}function I3(t,e){t.timeline=e,t.onfinish=null}const TS=t=>Array.isArray(t)&&typeof t[0]=="number",ZU={linearEasing:void 0};function QU(t,e){const n=hS(t);return()=>{var r;return(r=ZU[e])!==null&&r!==void 0?r:n()}}const Dx=QU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),VP=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(n0(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function HP(t){return!!(typeof t=="function"&&Dx()||!t||typeof t=="string"&&(t in T5||Dx())||TS(t)||Array.isArray(t)&&t.every(HP))}const Em=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,T5={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Em([0,.65,.55,1]),circOut:Em([.55,0,1,.45]),backIn:Em([.31,.01,.66,-.59]),backOut:Em([.33,1.53,.69,.99])};function qP(t,e){if(t)return typeof t=="function"&&Dx()?VP(t,e):TS(t)?Em(t):Array.isArray(t)?t.map(n=>qP(n,e)||T5.easeOut):T5[t]}const ml={x:!1,y:!1};function GP(){return ml.x||ml.y}function e$(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function KP(t,e){const n=e$(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function R3(t){return e=>{e.pointerType==="touch"||GP()||t(e)}}function t$(t,e,n={}){const[r,i,s]=KP(t,n),o=R3(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=R3(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const XP=(t,e)=>e?t===e?!0:XP(t,e.parentElement):!1,jS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,n$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function r$(t){return n$.has(t.tagName)||t.tabIndex!==-1}const Am=new WeakSet;function F3(t){return e=>{e.key==="Enter"&&t(e)}}function Mw(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const i$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=F3(()=>{if(Am.has(n))return;Mw(n,"down");const i=F3(()=>{Mw(n,"up")}),s=()=>Mw(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function z3(t){return jS(t)&&!GP()}function s$(t,e,n={}){const[r,i,s]=KP(t,n),o=a=>{const l=a.currentTarget;if(!z3(a)||Am.has(l))return;Am.add(l);const c=e(a),u=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),!(!z3(p)||!Am.has(l))&&(Am.delete(l),typeof c=="function"&&c(p,{success:y}))},d=p=>{u(p,n.useGlobalTarget||XP(l,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return r.forEach(a=>{!r$(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>i$(c,i),i)}),s}function o$(t){return t==="x"||t==="y"?ml[t]?null:(ml[t]=!0,()=>{ml[t]=!1}):ml.x||ml.y?null:(ml.x=ml.y=!0,()=>{ml.x=ml.y=!1})}const YP=new Set(["width","height","top","left","right","bottom",...k0]);let ax;function a$(){ax=void 0}const uc={now:()=>(ax===void 0&&uc.set(ns.isProcessing||nU.useManualTiming?ns.timestamp:performance.now()),ax),set:t=>{ax=t,queueMicrotask(a$)}};function PS(t,e){t.indexOf(e)===-1&&t.push(e)}function DS(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class OS{constructor(){this.subscriptions=[]}add(e){return PS(this.subscriptions,e),()=>DS(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function JP(t,e){return e?t*(1e3/e):0}const B3=30,l$=t=>!isNaN(parseFloat(t));class c${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=uc.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=uc.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=l$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new OS);const r=this.events[e].add(n);return e==="change"?()=>{r(),Dr.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=uc.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>B3)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,B3);return JP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kg(t,e){return new c$(t,e)}function u$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,kg(n))}function d$(t,e){const n=Gv(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=SU(s[o]);u$(t,o,a)}}function f$(t){return!!(Os(t)&&t.add)}function j5(t,e){const n=t.getValue("willChange");if(f$(n))return n.add(e)}function ZP(t){return t.props[AP]}const QP=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,h$=1e-7,p$=12;function m$(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=QP(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>h$&&++a<p$);return o}function d1(t,e,n,r){if(t===e&&n===r)return ia;const i=s=>m$(s,0,1,t,n);return s=>s===0||s===1?s:QP(i(s),e,r)}const eD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tD=t=>e=>1-t(1-e),nD=d1(.33,1.53,.69,.99),LS=tD(nD),rD=eD(LS),iD=t=>(t*=2)<1?.5*LS(t):.5*(2-Math.pow(2,-10*(t-1))),MS=t=>1-Math.sin(Math.acos(t)),sD=tD(MS),oD=eD(MS),aD=t=>/^0[^.\s]+$/u.test(t);function g$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aD(t):!0}const Wm=t=>Math.round(t*1e5)/1e5,IS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function y$(t){return t==null}const x$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,RS=(t,e)=>n=>!!(typeof n=="string"&&x$.test(n)&&n.startsWith(t)||e&&!y$(n)&&Object.prototype.hasOwnProperty.call(n,e)),lD=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(IS);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},v$=t=>hu(0,255,t),Iw={...N0,transform:t=>Math.round(v$(t))},Zf={test:RS("rgb","red"),parse:lD("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Iw.transform(t)+", "+Iw.transform(e)+", "+Iw.transform(n)+", "+Wm(Sg.transform(r))+")"};function w$(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const P5={test:RS("#"),parse:w$,transform:Zf.transform},Fp={test:RS("hsl","hue"),parse:lD("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cc.transform(Wm(e))+", "+cc.transform(Wm(n))+", "+Wm(Sg.transform(r))+")"},js={test:t=>Zf.test(t)||P5.test(t)||Fp.test(t),parse:t=>Zf.test(t)?Zf.parse(t):Fp.test(t)?Fp.parse(t):P5.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Zf.transform(t):Fp.transform(t)},b$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(IS))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(b$))===null||n===void 0?void 0:n.length)||0)>0}const cD="number",uD="color",S$="var",k$="var(",U3="${}",N$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ng(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(N$,l=>(js.test(l)?(r.color.push(s),i.push(uD),n.push(js.parse(l))):l.startsWith(k$)?(r.var.push(s),i.push(S$),n.push(l)):(r.number.push(s),i.push(cD),n.push(parseFloat(l))),++s,U3)).split(U3);return{values:n,split:a,indexes:r,types:i}}function dD(t){return Ng(t).values}function fD(t){const{split:e,types:n}=Ng(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===cD?s+=Wm(i[o]):a===uD?s+=js.transform(i[o]):s+=i[o]}return s}}const C$=t=>typeof t=="number"?0:t;function E$(t){const e=dD(t);return fD(t)(e.map(C$))}const $d={test:_$,parse:dD,createTransformer:fD,getAnimatableNone:E$},A$=new Set(["brightness","contrast","saturate","opacity"]);function T$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(IS)||[];if(!r)return t;const i=n.replace(r,"");let s=A$.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const j$=/\b([a-z-]*)\(.*?\)/gu,D5={...$d,getAnimatableNone:t=>{const e=t.match(j$);return e?e.map(T$).join(" "):t}},P$={...bS,color:js,backgroundColor:js,outlineColor:js,fill:js,stroke:js,borderColor:js,borderTopColor:js,borderRightColor:js,borderBottomColor:js,borderLeftColor:js,filter:D5,WebkitFilter:D5},FS=t=>P$[t];function hD(t,e){let n=FS(t);return n!==D5&&(n=$d),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const D$=new Set(["auto","none","0"]);function O$(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!D$.has(s)&&Ng(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=hD(n,i)}const $3=t=>t===N0||t===sn,W3=(t,e)=>parseFloat(t.split(", ")[e]),V3=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return W3(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?W3(s[1],t):0}},L$=new Set(["x","y","z"]),M$=k0.filter(t=>!L$.has(t));function I$(t){const e=[];return M$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const i0={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:V3(4,13),y:V3(5,14)};i0.translateX=i0.x;i0.translateY=i0.y;const oh=new Set;let O5=!1,L5=!1;function pD(){if(L5){const t=Array.from(oh).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=I$(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}L5=!1,O5=!1,oh.forEach(t=>t.complete()),oh.clear()}function mD(){oh.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(L5=!0)})}function R$(){mD(),pD()}class zS{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(oh.add(this),O5||(O5=!0,Dr.read(mD),Dr.resolveKeyframes(pD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),oh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,oh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),F$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function z$(t){const e=F$.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function yD(t,e,n=1){const[r,i]=z$(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return gD(o)?parseFloat(o):o}return wS(i)?yD(i,e,n+1):i}const xD=t=>e=>e.test(t),B$={test:t=>t==="auto",parse:t=>t},vD=[N0,sn,cc,ud,TU,AU,B$],H3=t=>vD.find(xD(t));class wD extends zS{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),wS(c))){const u=yD(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!YP.has(r)||e.length!==2)return;const[i,s]=e,o=H3(i),a=H3(s);if(o!==a)if($3(o)&&$3(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)g$(e[i])&&r.push(i);r.length&&O$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=i0[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=i0[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const q3=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($d.test(t)||t==="0")&&!t.startsWith("url("));function U$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function $$(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=q3(i,e),a=q3(s,e);return!o||!a?!1:U$(t)||(n==="spring"||AS(n))&&r}const W$=t=>t!==null;function Kv(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(W$),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const V$=40;class bD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=uc.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>V$?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&R$(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=uc.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!$$(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Kv(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ur=(t,e,n)=>t+(e-t)*n;function Rw(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function H$({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Rw(l,a,t+1/3),s=Rw(l,a,t),o=Rw(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ox(t,e){return n=>n>0?e:t}const Fw=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},q$=[P5,Zf,Fp],G$=t=>q$.find(e=>e.test(t));function G3(t){const e=G$(t);if(!e)return!1;let n=e.parse(t);return e===Fp&&(n=H$(n)),n}const K3=(t,e)=>{const n=G3(t),r=G3(e);if(!n||!r)return Ox(t,e);const i={...n};return s=>(i.red=Fw(n.red,r.red,s),i.green=Fw(n.green,r.green,s),i.blue=Fw(n.blue,r.blue,s),i.alpha=Ur(n.alpha,r.alpha,s),Zf.transform(i))},K$=(t,e)=>n=>e(t(n)),f1=(...t)=>t.reduce(K$),M5=new Set(["none","hidden"]);function X$(t,e){return M5.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Y$(t,e){return n=>Ur(t,e,n)}function BS(t){return typeof t=="number"?Y$:typeof t=="string"?wS(t)?Ox:js.test(t)?K3:Q$:Array.isArray(t)?_D:typeof t=="object"?js.test(t)?K3:J$:Ox}function _D(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>BS(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function J$(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=BS(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function Z$(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const Q$=(t,e)=>{const n=$d.createTransformer(e),r=Ng(t),i=Ng(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?M5.has(t)&&!i.values.length||M5.has(e)&&!r.values.length?X$(t,e):f1(_D(Z$(r,i),i.values),n):Ox(t,e)};function SD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ur(t,e,n):BS(t)(t,e)}const eW=5;function kD(t,e,n){const r=Math.max(e-eW,0);return JP(n-t(r),e-r)}const Xr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},X3=.001;function tW({duration:t=Xr.duration,bounce:e=Xr.bounce,velocity:n=Xr.velocity,mass:r=Xr.mass}){let i,s,o=1-e;o=hu(Xr.minDamping,Xr.maxDamping,o),t=hu(Xr.minDuration,Xr.maxDuration,su(t)),o<1?(i=c=>{const u=c*o,d=u*t,h=u-n,p=I5(c,o),y=Math.exp(-d);return X3-h/p*y},s=c=>{const d=c*o*t,h=d*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),x=I5(Math.pow(c,2),o);return(-i(c)+X3>0?-1:1)*((h-p)*y)/x}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-.001+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=rW(i,s,a);if(t=iu(t),isNaN(l))return{stiffness:Xr.stiffness,damping:Xr.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const nW=12;function rW(t,e,n){let r=n;for(let i=1;i<nW;i++)r=r-t(r)/e(r);return r}function I5(t,e){return t*Math.sqrt(1-e*e)}const iW=["duration","bounce"],sW=["stiffness","damping","mass"];function Y3(t,e){return e.some(n=>t[n]!==void 0)}function oW(t){let e={velocity:Xr.velocity,stiffness:Xr.stiffness,damping:Xr.damping,mass:Xr.mass,isResolvedFromDuration:!1,...t};if(!Y3(t,sW)&&Y3(t,iW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*hu(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xr.mass,stiffness:i,damping:s}}else{const n=tW(t);e={...e,...n,mass:Xr.mass},e.isResolvedFromDuration=!0}return e}function ND(t=Xr.visualDuration,e=Xr.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=oW({...n,velocity:-su(n.velocity||0)}),y=h||0,x=c/(2*Math.sqrt(l*u)),v=o-s,b=su(Math.sqrt(l/u)),S=Math.abs(v)<5;r||(r=S?Xr.restSpeed.granular:Xr.restSpeed.default),i||(i=S?Xr.restDelta.granular:Xr.restDelta.default);let k;if(x<1){const j=I5(b,x);k=P=>{const C=Math.exp(-x*b*P);return o-C*((y+x*b*v)/j*Math.sin(j*P)+v*Math.cos(j*P))}}else if(x===1)k=j=>o-Math.exp(-b*j)*(v+(y+b*v)*j);else{const j=b*Math.sqrt(x*x-1);k=P=>{const C=Math.exp(-x*b*P),N=Math.min(j*P,300);return o-C*((y+x*b*v)*Math.sinh(N)+j*v*Math.cosh(N))/j}}const T={calculatedDuration:p&&d||null,next:j=>{const P=k(j);if(p)a.done=j>=d;else{let C=0;x<1&&(C=j===0?iu(y):kD(k,j,P));const N=Math.abs(C)<=r,L=Math.abs(o-P)<=i;a.done=N&&L}return a.value=a.done?o:P,a},toString:()=>{const j=Math.min(WP(T),A5),P=VP(C=>T.next(j*C).value,j,30);return j+"ms "+P}};return T}function J3({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},p=N=>a!==void 0&&N<a||l!==void 0&&N>l,y=N=>a===void 0?l:l===void 0||Math.abs(a-N)<Math.abs(l-N)?a:l;let x=n*e;const v=d+x,b=o===void 0?v:o(v);b!==v&&(x=b-d);const S=N=>-x*Math.exp(-N/r),k=N=>b+S(N),T=N=>{const L=S(N),R=k(N);h.done=Math.abs(L)<=c,h.value=h.done?b:R};let j,P;const C=N=>{p(h.value)&&(j=N,P=ND({keyframes:[h.value,y(h.value)],velocity:kD(k,N,h.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:N=>{let L=!1;return!P&&j===void 0&&(L=!0,T(N),C(N)),j!==void 0&&N>=j?P.next(N-j):(!L&&T(N),h)}}}const aW=d1(.42,0,1,1),lW=d1(0,0,.58,1),CD=d1(.42,0,.58,1),cW=t=>Array.isArray(t)&&typeof t[0]!="number",uW={linear:ia,easeIn:aW,easeInOut:CD,easeOut:lW,circIn:MS,circInOut:oD,circOut:sD,backIn:LS,backInOut:rD,backOut:nD,anticipate:iD},Z3=t=>{if(TS(t)){SP(t.length===4);const[e,n,r,i]=t;return d1(e,n,r,i)}else if(typeof t=="string")return uW[t];return t};function dW(t,e,n){const r=[],i=n||SD,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ia:e;a=f1(l,a)}r.push(a)}return r}function fW(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(SP(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=dW(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=n0(t[d],t[d+1],u);return a[d](h)};return n?u=>c(hu(t[0],t[s-1],u)):c}function hW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=n0(0,e,r);t.push(Ur(n,1,i))}}function pW(t){const e=[0];return hW(e,t.length-1),e}function mW(t,e){return t.map(n=>n*e)}function gW(t,e){return t.map(()=>e||CD).splice(0,t.length-1)}function Lx({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=cW(r)?r.map(Z3):Z3(r),s={done:!1,value:e[0]},o=mW(n&&n.length===e.length?n:pW(e),t),a=fW(o,e,{ease:Array.isArray(i)?i:gW(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const yW=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Dr.update(e,!0),stop:()=>Ud(e),now:()=>ns.isProcessing?ns.timestamp:uc.now()}},xW={decay:J3,inertia:J3,tween:Lx,keyframes:Lx,spring:ND},vW=t=>t/100;class US extends bD{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||zS,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=AS(n)?n:xW[n]||Lx;let l,c;a!==Lx&&typeof e[0]!="number"&&(l=f1(vW,SD(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=WP(u));const{calculatedDuration:d}=u,h=d+i,p=h*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:N}=this.options;return{done:!0,value:N[N.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:h,repeat:p,repeatType:y,repeatDelay:x,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const b=this.currentTime-h*(this.speed>=0?1:-1),S=this.speed>=0?b<0:b>u;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let k=this.currentTime,T=s;if(p){const N=Math.min(this.currentTime,u)/d;let L=Math.floor(N),R=N%1;!R&&N>=1&&(R=1),R===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(y==="reverse"?(R=1-R,x&&(R-=x/d)):y==="mirror"&&(T=o)),k=hu(0,1,R)*d}const j=S?{done:!1,value:l[0]}:T.next(k);a&&(j.value=a(j.value));let{done:P}=j;!S&&c!==null&&(P=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return C&&i!==void 0&&(j.value=Kv(l,this.options,i)),v&&v(j.value),C&&this.finish(),j}get duration(){const{resolved:e}=this;return e?su(e.calculatedDuration):0}get time(){return su(this.currentTime)}set time(e){e=iu(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=su(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=yW,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const wW=new Set(["opacity","clipPath","filter","transform"]);function bW(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=qP(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const _W=hS(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Mx=10,SW=2e4;function kW(t){return AS(t.type)||t.type==="spring"||!HP(t.ease)}function NW(t,e){const n=new US({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<SW;)r=n.sample(s),i.push(r.value),s+=Mx;return{times:void 0,keyframes:i,duration:s-Mx,ease:"linear"}}const ED={anticipate:iD,backInOut:rD,circInOut:oD};function CW(t){return t in ED}class Q3 extends bD{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new wD(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Dx()&&CW(s)&&(s=ED[s]),kW(this.options)){const{onComplete:d,onUpdate:h,motionValue:p,element:y,...x}=this.options,v=NW(e,x);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,i=v.times,s=v.ease,o="keyframes"}const u=bW(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(I3(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Kv(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return su(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return su(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=iu(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return ia;const{animation:r}=n;I3(r,e)}return ia}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:h,...p}=this.options,y=new US({...p,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),x=iu(this.time);c.setWithVelocity(y.sample(x-Mx).value,y.sample(x).value,Mx)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return _W()&&r&&wW.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const EW={type:"spring",stiffness:500,damping:25,restSpeed:10},AW=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TW={type:"keyframes",duration:.8},jW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},PW=(t,{keyframes:e})=>e.length>2?TW:Ah.has(t)?t.startsWith("scale")?AW(e[1]):EW:jW;function DW({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const $S=(t,e,n,r={},i,s)=>o=>{const a=ES(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-iu(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};DW(a)||(u={...u,...PW(t,u)}),u.duration&&(u.duration=iu(u.duration)),u.repeatDelay&&(u.repeatDelay=iu(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=Kv(u.keyframes,a);if(h!==void 0)return Dr.update(()=>{u.onUpdate(h),u.onComplete()}),new JU([])}return!s&&Q3.supports(u)?new Q3(u):new US(u)};function OW({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function AD(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),p=l[d];if(p===void 0||u&&OW(u,d))continue;const y={delay:n,...ES(o||{},d)};let x=!1;if(window.MotionHandoffAnimation){const b=ZP(t);if(b){const S=window.MotionHandoffAnimation(b,d,Dr);S!==null&&(y.startTime=S,x=!0)}}j5(t,d),h.start($S(d,h,p,t.shouldReduceMotion&&YP.has(d)?{type:!1}:y,t,x));const v=h.animation;v&&c.push(v)}return a&&Promise.all(c).then(()=>{Dr.update(()=>{a&&d$(t,a)})}),c}function R5(t,e,n={}){var r;const i=Gv(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(AD(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return LW(t,e,u+c,d,h,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function LW(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(MW).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(R5(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function MW(t,e){return t.sortNodePosition(e)}function IW(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>R5(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=R5(t,e,n);else{const i=typeof e=="function"?Gv(t,e,n.custom):e;r=Promise.all(AD(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const RW=mS.length;function TD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?TD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<RW;n++){const r=mS[n],i=t.props[r];(_g(i)||i===!1)&&(e[r]=i)}return e}const FW=[...pS].reverse(),zW=pS.length;function BW(t){return e=>Promise.all(e.map(({animation:n,options:r})=>IW(t,n,r)))}function UW(t){let e=BW(t),n=eC(),r=!0;const i=l=>(c,u)=>{var d;const h=Gv(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:p,transitionEnd:y,...x}=h;c={...c,...x,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=TD(t.parent)||{},d=[],h=new Set;let p={},y=1/0;for(let v=0;v<zW;v++){const b=FW[v],S=n[b],k=c[b]!==void 0?c[b]:u[b],T=_g(k),j=b===l?S.isActive:null;j===!1&&(y=v);let P=k===u[b]&&k!==c[b]&&T;if(P&&r&&t.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...p},!S.isActive&&j===null||!k&&!S.prevProp||Hv(k)||typeof k=="boolean")continue;const C=$W(S.prevProp,k);let N=C||b===l&&S.isActive&&!P&&T||v>y&&T,L=!1;const R=Array.isArray(k)?k:[k];let D=R.reduce(i(b),{});j===!1&&(D={});const{prevResolvedValues:M={}}=S,H={...M,...D},W=F=>{N=!0,h.has(F)&&(L=!0,h.delete(F)),S.needsAnimating[F]=!0;const Q=t.getValue(F);Q&&(Q.liveStyle=!1)};for(const F in H){const Q=D[F],ee=M[F];if(p.hasOwnProperty(F))continue;let te=!1;E5(Q)&&E5(ee)?te=!$P(Q,ee):te=Q!==ee,te?Q!=null?W(F):h.add(F):Q!==void 0&&h.has(F)?W(F):S.protectedKeys[F]=!0}S.prevProp=k,S.prevResolvedValues=D,S.isActive&&(p={...p,...D}),r&&t.blockInitialAnimation&&(N=!1),N&&(!(P&&C)||L)&&d.push(...R.map(F=>({animation:F,options:{type:b}})))}if(h.size){const v={};h.forEach(b=>{const S=t.getBaseTarget(b),k=t.getValue(b);k&&(k.liveStyle=!0),v[b]=S??null}),d.push({animation:v})}let x=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(h=>{var p;return(p=h.animationState)===null||p===void 0?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=eC(),r=!0}}}function $W(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$P(e,t):!1}function If(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eC(){return{animate:If(!0),whileInView:If(),whileHover:If(),whileTap:If(),whileDrag:If(),whileFocus:If(),exit:If()}}class ef{constructor(e){this.isMounted=!1,this.node=e}update(){}}class WW extends ef{constructor(e){super(e),e.animationState||(e.animationState=UW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Hv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let VW=0;class HW extends ef{constructor(){super(...arguments),this.id=VW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const qW={animation:{Feature:WW},exit:{Feature:HW}};function Cg(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function h1(t){return{point:{x:t.pageX,y:t.pageY}}}const GW=t=>e=>jS(e)&&t(e,h1(e));function Vm(t,e,n,r){return Cg(t,e,GW(n),r)}const tC=(t,e)=>Math.abs(t-e);function KW(t,e){const n=tC(t.x,e.x),r=tC(t.y,e.y);return Math.sqrt(n**2+r**2)}class jD{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Bw(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,p=KW(d.offset,{x:0,y:0})>=3;if(!h&&!p)return;const{point:y}=d,{timestamp:x}=ns;this.history.push({...y,timestamp:x});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=zw(h,this.transformPagePoint),Dr.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Bw(d.type==="pointercancel"?this.lastMoveEventInfo:zw(h,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),y&&y(d,v)},!jS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=h1(e),a=zw(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ns;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Bw(a,this.history)),this.removeListeners=f1(Vm(this.contextWindow,"pointermove",this.handlePointerMove),Vm(this.contextWindow,"pointerup",this.handlePointerUp),Vm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ud(this.updatePoint)}}function zw(t,e){return e?{point:e(t.point)}:t}function nC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Bw({point:t},e){return{point:t,delta:nC(t,PD(e)),offset:nC(t,XW(e)),velocity:YW(e,.1)}}function XW(t){return t[0]}function PD(t){return t[t.length-1]}function YW(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=PD(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>iu(e)));)n--;if(!r)return{x:0,y:0};const s=su(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const DD=1e-4,JW=1-DD,ZW=1+DD,OD=.01,QW=0-OD,eV=0+OD;function la(t){return t.max-t.min}function tV(t,e,n){return Math.abs(t-e)<=n}function rC(t,e,n,r=.5){t.origin=r,t.originPoint=Ur(e.min,e.max,t.origin),t.scale=la(n)/la(e),t.translate=Ur(n.min,n.max,t.origin)-t.originPoint,(t.scale>=JW&&t.scale<=ZW||isNaN(t.scale))&&(t.scale=1),(t.translate>=QW&&t.translate<=eV||isNaN(t.translate))&&(t.translate=0)}function Hm(t,e,n,r){rC(t.x,e.x,n.x,r?r.originX:void 0),rC(t.y,e.y,n.y,r?r.originY:void 0)}function iC(t,e,n){t.min=n.min+e.min,t.max=t.min+la(e)}function nV(t,e,n){iC(t.x,e.x,n.x),iC(t.y,e.y,n.y)}function sC(t,e,n){t.min=e.min-n.min,t.max=t.min+la(e)}function qm(t,e,n){sC(t.x,e.x,n.x),sC(t.y,e.y,n.y)}function rV(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ur(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ur(n,t,r.max):Math.min(t,n)),t}function oC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function iV(t,{top:e,left:n,bottom:r,right:i}){return{x:oC(t.x,n,i),y:oC(t.y,e,r)}}function aC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function sV(t,e){return{x:aC(t.x,e.x),y:aC(t.y,e.y)}}function oV(t,e){let n=.5;const r=la(t),i=la(e);return i>r?n=n0(e.min,e.max-r,t.min):r>i&&(n=n0(t.min,t.max-i,e.min)),hu(0,1,n)}function aV(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const F5=.35;function lV(t=F5){return t===!1?t=0:t===!0&&(t=F5),{x:lC(t,"left","right"),y:lC(t,"top","bottom")}}function lC(t,e,n){return{min:cC(t,e),max:cC(t,n)}}function cC(t,e){return typeof t=="number"?t:t[e]||0}const uC=()=>({translate:0,scale:1,origin:0,originPoint:0}),zp=()=>({x:uC(),y:uC()}),dC=()=>({min:0,max:0}),ai=()=>({x:dC(),y:dC()});function La(t){return[t("x"),t("y")]}function LD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function cV({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uV(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Uw(t){return t===void 0||t===1}function z5({scale:t,scaleX:e,scaleY:n}){return!Uw(t)||!Uw(e)||!Uw(n)}function $f(t){return z5(t)||MD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function MD(t){return fC(t.x)||fC(t.y)}function fC(t){return t&&t!=="0%"}function Ix(t,e,n){const r=t-n,i=e*r;return n+i}function hC(t,e,n,r,i){return i!==void 0&&(t=Ix(t,i,r)),Ix(t,n,r)+e}function B5(t,e=0,n=1,r,i){t.min=hC(t.min,e,n,r,i),t.max=hC(t.max,e,n,r,i)}function ID(t,{x:e,y:n}){B5(t.x,e.translate,e.scale,e.originPoint),B5(t.y,n.translate,n.scale,n.originPoint)}const pC=.999999999999,mC=1.0000000000001;function dV(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Up(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ID(t,o)),r&&$f(s.latestValues)&&Up(t,s.latestValues))}e.x<mC&&e.x>pC&&(e.x=1),e.y<mC&&e.y>pC&&(e.y=1)}function Bp(t,e){t.min=t.min+e,t.max=t.max+e}function gC(t,e,n,r,i=.5){const s=Ur(t.min,t.max,i);B5(t,e,n,s,r)}function Up(t,e){gC(t.x,e.x,e.scaleX,e.scale,e.originX),gC(t.y,e.y,e.scaleY,e.scale,e.originY)}function RD(t,e){return LD(uV(t.getBoundingClientRect(),e))}function fV(t,e,n){const r=RD(t,n),{scroll:i}=e;return i&&(Bp(r.x,i.offset.x),Bp(r.y,i.offset.y)),r}const FD=({current:t})=>t?t.ownerDocument.defaultView:null,hV=new WeakMap;class pV{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ai(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(h1(u).point)},s=(u,d)=>{const{drag:h,dragPropagation:p,onDragStart:y}=this.getProps();if(h&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=o$(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),La(v=>{let b=this.getAxisMotionValue(v).get()||0;if(cc.test(b)){const{projection:S}=this.visualElement;if(S&&S.layout){const k=S.layout.layoutBox[v];k&&(b=la(k)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&Dr.postRender(()=>y(u,d)),j5(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:h,dragDirectionLock:p,onDirectionLock:y,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=mV(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),x&&x(u,d)},a=(u,d)=>this.stop(u,d),l=()=>La(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jD(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:FD(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Dr.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!vy(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=rV(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Rp(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=iV(i.layoutBox,n):this.constraints=!1,this.elastic=lV(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&La(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=aV(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rp(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=fV(r,i.root,this.visualElement.getTransformPagePoint());let o=sV(i.layout.layoutBox,s);if(n){const a=n(cV(o));this.hasMutatedConstraints=!!a,a&&(o=LD(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=La(u=>{if(!vy(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return j5(this.visualElement,e),r.start($S(e,r,0,n,this.visualElement,!1))}stopAnimation(){La(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){La(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){La(n=>{const{drag:r}=this.getProps();if(!vy(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ur(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rp(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};La(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=oV({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),La(o=>{if(!vy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ur(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;hV.set(this.visualElement,this);const e=this.visualElement.current,n=Vm(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Rp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Dr.read(r);const o=Cg(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(La(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=F5,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function vy(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function mV(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class gV extends ef{constructor(e){super(e),this.removeGroupControls=ia,this.removeListeners=ia,this.controls=new pV(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ia}unmount(){this.removeGroupControls(),this.removeListeners()}}const yC=t=>(e,n)=>{t&&Dr.postRender(()=>t(e,n))};class yV extends ef{constructor(){super(...arguments),this.removePointerDownListener=ia}onPointerDown(e){this.session=new jD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:FD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:yC(e),onStart:yC(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Dr.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Vm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const lx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function xC(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const fm={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(sn.test(t))t=parseFloat(t);else return t;const n=xC(t,e.target.x),r=xC(t,e.target.y);return`${n}% ${r}%`}},xV={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$d.parse(t);if(i.length>5)return r;const s=$d.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ur(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class vV extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;zU(wV),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),lx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Dr.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function zD(t){const[e,n]=bP(),r=Y.useContext(cS);return m.jsx(vV,{...t,layoutGroup:r,switchLayoutGroup:Y.useContext(TP),isPresent:e,safeToRemove:n})}const wV={borderRadius:{...fm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:fm,borderTopRightRadius:fm,borderBottomLeftRadius:fm,borderBottomRightRadius:fm,boxShadow:xV};function bV(t,e,n){const r=Os(t)?t:kg(t);return r.start($S("",r,e,n)),r.animation}function _V(t){return t instanceof SVGElement&&t.tagName!=="svg"}const SV=(t,e)=>t.depth-e.depth;class kV{constructor(){this.children=[],this.isDirty=!1}add(e){PS(this.children,e),this.isDirty=!0}remove(e){DS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SV),this.isDirty=!1,this.children.forEach(e)}}function NV(t,e){const n=uc.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(Ud(r),t(s-e))};return Dr.read(r,!0),()=>Ud(r)}const BD=["TopLeft","TopRight","BottomLeft","BottomRight"],CV=BD.length,vC=t=>typeof t=="string"?parseFloat(t):t,wC=t=>typeof t=="number"||sn.test(t);function EV(t,e,n,r,i,s){i?(t.opacity=Ur(0,n.opacity!==void 0?n.opacity:1,AV(r)),t.opacityExit=Ur(e.opacity!==void 0?e.opacity:1,0,TV(r))):s&&(t.opacity=Ur(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<CV;o++){const a=`border${BD[o]}Radius`;let l=bC(e,a),c=bC(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||wC(l)===wC(c)?(t[a]=Math.max(Ur(vC(l),vC(c),r),0),(cc.test(c)||cc.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ur(e.rotate||0,n.rotate||0,r))}function bC(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const AV=UD(0,.5,sD),TV=UD(.5,.95,ia);function UD(t,e,n){return r=>r<t?0:r>e?1:n(n0(t,e,r))}function _C(t,e){t.min=e.min,t.max=e.max}function ja(t,e){_C(t.x,e.x),_C(t.y,e.y)}function SC(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function kC(t,e,n,r,i){return t-=e,t=Ix(t,1/n,r),i!==void 0&&(t=Ix(t,1/i,r)),t}function jV(t,e=0,n=1,r=.5,i,s=t,o=t){if(cc.test(e)&&(e=parseFloat(e),e=Ur(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ur(s.min,s.max,r);t===s&&(a-=e),t.min=kC(t.min,e,n,a,i),t.max=kC(t.max,e,n,a,i)}function NC(t,e,[n,r,i],s,o){jV(t,e[n],e[r],e[i],e.scale,s,o)}const PV=["x","scaleX","originX"],DV=["y","scaleY","originY"];function CC(t,e,n,r){NC(t.x,e,PV,n?n.x:void 0,r?r.x:void 0),NC(t.y,e,DV,n?n.y:void 0,r?r.y:void 0)}function EC(t){return t.translate===0&&t.scale===1}function $D(t){return EC(t.x)&&EC(t.y)}function AC(t,e){return t.min===e.min&&t.max===e.max}function OV(t,e){return AC(t.x,e.x)&&AC(t.y,e.y)}function TC(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WD(t,e){return TC(t.x,e.x)&&TC(t.y,e.y)}function jC(t){return la(t.x)/la(t.y)}function PC(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class LV{constructor(){this.members=[]}add(e){PS(this.members,e),e.scheduleRender()}remove(e){if(DS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function MV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:p,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),h&&(r+=`rotateY(${h}deg) `),p&&(r+=`skewX(${p}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Wf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Tm=typeof window<"u"&&window.MotionDebug!==void 0,$w=["","X","Y","Z"],IV={visibility:"hidden"},DC=1e3;let RV=0;function Ww(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function VD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ZP(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Dr,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&VD(r)}function HD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=RV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Tm&&(Wf.totalNodes=Wf.resolvedTargetDeltas=Wf.recalculatedProjection=0),this.nodes.forEach(BV),this.nodes.forEach(HV),this.nodes.forEach(qV),this.nodes.forEach(UV),Tm&&window.MotionDebug.record(Wf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new kV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new OS),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_V(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=NV(h,250),lx.hasAnimatedSinceResize&&(lx.hasAnimatedSinceResize=!1,this.nodes.forEach(LC))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||JV,{onLayoutAnimationStart:v,onLayoutAnimationComplete:b}=u.getProps(),S=!this.targetLayout||!WD(this.targetLayout,y)||p,k=!h&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,k);const T={...ES(x,"layout"),onPlay:v,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||LC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ud(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(GV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(OC);return}this.isUpdating||this.nodes.forEach(WV),this.isUpdating=!1,this.nodes.forEach(VV),this.nodes.forEach(FV),this.nodes.forEach(zV),this.clearAllSnapshots();const a=uc.now();ns.delta=hu(0,1e3/60,a-ns.timestamp),ns.timestamp=a,ns.isProcessing=!0,Lw.update.process(ns),Lw.preRender.process(ns),Lw.render.process(ns),ns.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($V),this.sharedNodes.forEach(KV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Dr.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Dr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ai(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!$D(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||$f(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ZV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ai();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(QV))){const{scroll:u}=this.root;u&&(Bp(l.x,u.offset.x),Bp(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=ai();if(ja(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&ja(l,o),Bp(l.x,d.offset.x),Bp(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=ai();ja(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Up(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),$f(u.latestValues)&&Up(l,u.latestValues)}return $f(this.latestValues)&&Up(l,this.latestValues),l}removeTransform(o){const a=ai();ja(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!$f(c.latestValues))continue;z5(c.latestValues)&&c.updateSnapshot();const u=ai(),d=c.measurePageBox();ja(u,d),CC(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return $f(this.latestValues)&&CC(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ns.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ns.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),qm(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ai(),this.targetWithTransforms=ai()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nV(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ja(this.target,this.layout.layoutBox),ID(this.target,this.targetDelta)):ja(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ai(),this.relativeTargetOrigin=ai(),qm(this.relativeTargetOrigin,this.target,p.target),ja(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Tm&&Wf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||z5(this.parent.latestValues)||MD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ns.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;ja(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,p=this.treeScale.y;dV(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ai());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(SC(this.prevProjectionDelta.x,this.projectionDelta.x),SC(this.prevProjectionDelta.y,this.projectionDelta.y)),Hm(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==p||!PC(this.projectionDelta.x,this.prevProjectionDelta.x)||!PC(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Tm&&Wf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zp(),this.projectionDelta=zp(),this.projectionDeltaWithTransform=zp()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=zp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=ai(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,x=p!==y,v=this.getStack(),b=!v||v.members.length<=1,S=!!(x&&!b&&this.options.crossfade===!0&&!this.path.some(YV));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const j=T/1e3;MC(d.x,o.x,j),MC(d.y,o.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qm(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),XV(this.relativeTarget,this.relativeTargetOrigin,h,j),k&&OV(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ai()),ja(k,this.relativeTarget)),x&&(this.animationValues=u,EV(u,c,this.latestValues,j,S,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ud(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Dr.update(()=>{lx.hasAnimatedSinceResize=!0,this.currentAnimation=bV(0,DC,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&qD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ai();const d=la(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const h=la(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}ja(a,l),Up(a,u),Hm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new LV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Ww("z",o,c,this.animationValues);for(let u=0;u<$w.length;u++)Ww(`rotate${$w[u]}`,o,c,this.animationValues),Ww(`skew${$w[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return IV;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=ox(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=ox(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!$f(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=MV(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x:p,y}=this.projectionDelta;c.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=h.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in Px){if(h[x]===void 0)continue;const{correct:v,applyTo:b}=Px[x],S=c.transform==="none"?h[x]:v(h[x],d);if(b){const k=b.length;for(let T=0;T<k;T++)c[b[T]]=S}else c[x]=S}return this.options.layoutId&&(c.pointerEvents=d===this?ox(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(OC),this.root.sharedNodes.clear()}}}function FV(t){t.updateLayout()}function zV(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?La(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=la(h);h.min=r[d].min,h.max=h.min+p}):qD(s,n.layoutBox,r)&&La(d=>{const h=o?n.measuredBox[d]:n.layoutBox[d],p=la(r[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=zp();Hm(a,r,n.layoutBox);const l=zp();o?Hm(l,t.applyTransform(i,!0),n.measuredBox):Hm(l,r,n.layoutBox);const c=!$D(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const y=ai();qm(y,n.layoutBox,h.layoutBox);const x=ai();qm(x,r,p.layoutBox),WD(y,x)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function BV(t){Tm&&Wf.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function UV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function $V(t){t.clearSnapshot()}function OC(t){t.clearMeasurements()}function WV(t){t.isLayoutDirty=!1}function VV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function LC(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function HV(t){t.resolveTargetDelta()}function qV(t){t.calcProjection()}function GV(t){t.resetSkewAndRotation()}function KV(t){t.removeLeadSnapshot()}function MC(t,e,n){t.translate=Ur(e.translate,0,n),t.scale=Ur(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function IC(t,e,n,r){t.min=Ur(e.min,n.min,r),t.max=Ur(e.max,n.max,r)}function XV(t,e,n,r){IC(t.x,e.x,n.x,r),IC(t.y,e.y,n.y,r)}function YV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const JV={duration:.45,ease:[.4,0,.1,1]},RC=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),FC=RC("applewebkit/")&&!RC("chrome/")?Math.round:ia;function zC(t){t.min=FC(t.min),t.max=FC(t.max)}function ZV(t){zC(t.x),zC(t.y)}function qD(t,e,n){return t==="position"||t==="preserve-aspect"&&!tV(jC(e),jC(n),.2)}function QV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const eH=HD({attachResizeListener:(t,e)=>Cg(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vw={current:void 0},GD=HD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Vw.current){const t=new eH({});t.mount(window),t.setOptions({layoutScroll:!0}),Vw.current=t}return Vw.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tH={pan:{Feature:yV},drag:{Feature:gV,ProjectionNode:GD,MeasureLayout:zD}};function BC(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Dr.postRender(()=>s(e,h1(e)))}class nH extends ef{mount(){const{current:e}=this.node;e&&(this.unmount=t$(e,n=>(BC(this.node,n,"Start"),r=>BC(this.node,r,"End"))))}unmount(){}}class rH extends ef{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=f1(Cg(this.node.current,"focus",()=>this.onFocus()),Cg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function UC(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Dr.postRender(()=>s(e,h1(e)))}class iH extends ef{mount(){const{current:e}=this.node;e&&(this.unmount=s$(e,n=>(UC(this.node,n,"Start"),(r,{success:i})=>UC(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const U5=new WeakMap,Hw=new WeakMap,sH=t=>{const e=U5.get(t.target);e&&e(t)},oH=t=>{t.forEach(sH)};function aH({root:t,...e}){const n=t||document;Hw.has(n)||Hw.set(n,{});const r=Hw.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(oH,{root:t,...e})),r[i]}function lH(t,e,n){const r=aH(e);return U5.set(t,n),r.observe(t),()=>{U5.delete(t),r.unobserve(t)}}const cH={some:0,all:1};class uH extends ef{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:cH[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return lH(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(dH(e,n))&&this.startObserver()}unmount(){}}function dH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const fH={inView:{Feature:uH},tap:{Feature:iH},focus:{Feature:rH},hover:{Feature:nH}},hH={layout:{ProjectionNode:GD,MeasureLayout:zD}},$5={current:null},KD={current:!1};function pH(){if(KD.current=!0,!!fS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>$5.current=t.matches;t.addListener(e),e()}else $5.current=!1}const mH=[...vD,js,$d],gH=t=>mH.find(xD(t)),$C=new WeakMap;function yH(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Os(i))t.addValue(r,i);else if(Os(s))t.addValue(r,kg(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,kg(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const WC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=zS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=uc.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Dr.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=qv(n),this.isVariantNode=EP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const y=h[p];l[p]!==void 0&&Os(y)&&y.set(l[p],!1)}}mount(e){this.current=e,$C.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),KD.current||pH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:$5.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$C.delete(this.current),this.projection&&this.projection.unmount(),Ud(this.notifyUpdate),Ud(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ah.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Dr.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in r0){const n=r0[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ai()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<WC.length;r++){const i=WC[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=kg(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(gD(i)||aD(i))?i=parseFloat(i):!gH(i)&&$d.test(n)&&(i=hD(e,n)),this.setBaseTarget(e,Os(i)?i.get():i)),Os(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=vS(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Os(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new OS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class XD extends xH{constructor(){super(...arguments),this.KeyframeResolver=wD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Os(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function vH(t){return window.getComputedStyle(t)}class wH extends XD{constructor(){super(...arguments),this.type="html",this.renderInstance=IP}readValueFromInstance(e,n){if(Ah.has(n)){const r=FS(n);return r&&r.default||0}else{const r=vH(e),i=(OP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return RD(e,n)}build(e,n,r){_S(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return CS(e,n,r)}}class bH extends XD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ai}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ah.has(n)){const r=FS(n);return r&&r.default||0}return n=RP.has(n)?n:gS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return BP(e,n,r)}build(e,n,r){SS(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){FP(e,n,r,i)}mount(e){this.isSVGTag=NS(e.tagName),super.mount(e)}}const _H=(t,e)=>xS(t)?new bH(e):new wH(e,{allowProjection:t!==Y.Fragment}),SH=KU({...qW,...fH,...tH,...hH},_H),Ii=cU(SH),kH=["Pon","Wt","r","Czw","Pt","Sob","Nie"],NH=["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],CH=({startDate:t,endDate:e,startTime:n,endTime:r,onChange:i,selectedEquipment:s})=>{const[o,a]=Y.useState(new Date),[l,c]=Y.useState(1),[u,d]=Y.useState(!1),[h,p]=Y.useState(new Map),[y,x]=Y.useState(!1),[v,b]=Y.useState([]),[S,k]=Y.useState(null),[T,j]=Y.useState(""),[P,C]=Y.useState(!1),[N,L]=Y.useState(new Map),[R,D]=Y.useState(!1),M=new Date;M.setHours(0,0,0,0);const H=()=>{i(null,null,null,null),c(1),k(null),j(""),d(!1)},W=Ge=>{const ze=[];return s.forEach(Ne=>{(N.get(Ne.id)||[]).filter(Ze=>{const Me=new Date(Ze.start_date),ke=new Date(Ze.end_date);Me.setHours(0,0,0,0),ke.setHours(23,59,59,999);const We=new Date(Ge);return We.setHours(0,0,0,0),We>=Me&&We<=ke}).forEach(Ze=>{const Me=new Date(Ze.end_date);ze.push(`${Ze.equipment_name||Ne.name} - zarezerwowany do: ${my(Me)}`)})}),ze.join(`
`)};Y.useEffect(()=>{(async()=>{if(s.length===0){p(new Map);return}x(!0);const ze=new Date(o.getFullYear(),o.getMonth(),1),Ne=new Date(o.getFullYear(),o.getMonth()+1,0);try{const pe=s.map(Me=>Me.id),qe=await Y9(pe,ze,Ne),Ze=new Map;for(let Me=new Date(ze);Me<=Ne;Me.setDate(Me.getDate()+1)){const ke=Me.toISOString().split("T")[0],We=new Date(Me);We.setHours(0,0,0,0);for(const it of s){const gt=qe.get(it.id)||[];if(gt.some(Tt=>{const Bt=new Date(Tt.start_date),qt=new Date(Tt.end_date);return Bt.setHours(0,0,0,0),qt.setHours(23,59,59,999),We>=Bt&&We<=qt})){const Tt=await Ow(it.id,We),Bt=gt.find(Rt=>{const Dt=new Date(Rt.start_date),Mt=new Date(Rt.end_date);return Dt.setHours(0,0,0,0),Mt.setHours(23,59,59,999),We>=Dt&&We<=Mt}),qt=(Bt==null?void 0:Bt.equipment_name)||it.name;Ze.set(ke,`${qt} jest zarezerwowany do: ${my(Tt)}`);break}}}p(Ze),L(qe)}catch(pe){console.error("Error checking month availability:",pe),j("Wystpi bd podczas sprawdzania dostpnoci. Sprbuj ponownie pniej.")}finally{x(!1)}})()},[o,s]);const Z=()=>{if(l===1){const Ge=Array.from({length:9},(ze,Ne)=>`${(Ne+8).toString().padStart(2,"0")}:00`);return S&&S.getDay()===6?Ge.filter(ze=>{const Ne=parseInt(ze.split(":")[0],10);return Ne>=8&&Ne<=13}):Ge.filter(ze=>{const Ne=parseInt(ze.split(":")[0],10);return Ne>=8&&Ne<=16})}return v},B=Ge=>{const ze=Array.from({length:9},(Ze,Me)=>`${(Me+8).toString().padStart(2,"0")}:00`);if(!t||!n)return[];const Ne=Ge.toDateString()===t.toDateString(),pe=Ge.getDay()===6,qe=parseInt(n.split(":")[0],10);return ze.filter(Ze=>{const Me=parseInt(Ze.split(":")[0],10);return!(pe&&(Me<8||Me>13)||!pe&&(Me<8||Me>16)||Ne&&Me<=qe)})},F=Ge=>l===1?!1:!v.includes(Ge),Q=Ge=>{if(!t||!e)return!1;const ze=new Date(Ge);ze.setHours(0,0,0,0);const Ne=new Date(t);Ne.setHours(0,0,0,0);const pe=new Date(e);return pe.setHours(23,59,59,999),ze>=Ne&&ze<=pe},ee=(Ge,ze,Ne,pe)=>{const[qe]=Ne.split(":").map(Number),[Ze]=pe.split(":").map(Number),Me=new Date(Ge),ke=new Date(ze);if(Me.setHours(qe,0,0,0),ke.setHours(Ze,0,0,0),ke<=Me)return j("Data zakoczenia musi by pniejsza ni data rozpoczcia."),!1;const We=Ge.getDay()===6,it=ze.getDay()===6;return We&&(qe<8||qe>13)?(j("W soboty rezerwacje s moliwe tylko w godzinach 8:00-13:00."),!1):!We&&(qe<8||qe>16)?(j("Rezerwacje s moliwe tylko w godzinach 8:00-16:00."),!1):it&&(Ze<8||Ze>13)?(j("W soboty rezerwacje s moliwe tylko w godzinach 8:00-13:00."),!1):!it&&(Ze<8||Ze>16)?(j("Rezerwacje s moliwe tylko w godzinach 8:00-16:00."),!1):!0},te=async Ge=>{if(!(!Ge||ge(Ge))){if(l===2){const ze=B(Ge);if(ze.length===0){j("Brak dostpnych godzin zakoczenia dla wybranej daty");return}b(ze)}if(k(Ge),d(!0),j(""),l===1){i(null,null,null,null),x(!0);try{for(const ze of s){const Ne=new Date(Ge);if(!await C3(ze.id,Ne,Ne,!1)){const qe=await Ow(ze.id,Ne);j(`${ze.name} jest zarezerwowany do: ${my(qe)}`),k(null),d(!1);return}}}catch(ze){console.error("Error checking availability:",ze),j("Wystpi bd podczas sprawdzania dostpnoci."),k(null),d(!1)}finally{x(!1)}}else if(l===2){x(!0);try{if(t){const ze=new Date(t);ze.setHours(0,0,0,0);const Ne=new Date(Ge);Ne.setHours(23,59,59,999);for(const pe of s)if(!await C3(pe.id,ze,Ne,!0)){const Ze=await Ow(pe.id,ze);j(`${pe.name} jest niedostpny w wybranym okresie. Nastpna dostpno od: ${my(Ze)}`),k(null),d(!1);return}}}catch(ze){console.error("Error checking range availability:",ze),j("Wystpi bd podczas sprawdzania dostpnoci."),k(null),d(!1)}finally{x(!1)}}}},re=Ge=>{if(l===1)i(S,null,Ge,null),b([]),c(2);else if(l===2&&t&&n){if(!ee(t,S,n,Ge))return;i(t,S,n,Ge),c(1)}d(!1)},[O,X]=Y.useState(null),[q,V]=Y.useState(!1),ne=({content:Ge})=>m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[m.jsx("h3",{className:`text-lg font-medium mb-4 ${Ge.type==="error"?"text-red-600":Ge.type==="success"?"text-green-600":"text-blue-600"}`,children:Ge.title}),m.jsx("p",{className:"text-gray-700 mb-6",children:Ge.message}),m.jsx("button",{onClick:()=>V(!1),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"OK"})]})}),ge=Ge=>{if(!Ge)return!0;const ze=new Date;if(ze.setHours(0,0,0,0),Ge<ze)return!0;const Ne=Ge.toISOString().split("T")[0];if(h.has(Ne))return!0;if(t&&l===2){if(Ge<t)return!0;const pe=new Date(t);for(;pe<=Ge;){const qe=pe.toISOString().split("T")[0];if(h.has(qe))return!0;pe.setDate(pe.getDate()+1)}}return!1},ye=Ge=>Ge?Ge.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}):"",xe=()=>{switch(l){case 1:return"Wybierz dat rozpoczcia wypoyczenia";case 2:return"Wybierz dat zakoczenia wypoyczenia";default:return""}},Se=()=>m.jsx("div",{className:"flex items-center justify-center mb-4",children:[1,2].map(Ge=>m.jsx("div",{className:`w-3 h-3 rounded-full mx-1 ${Ge===l?"bg-solrent-orange":"bg-gray-300"}`},Ge))}),He=()=>{const Ge=o.getFullYear(),ze=o.getMonth(),Ne=new Date(Ge,ze,1).getDay(),pe=new Date(Ge,ze+1,0).getDate(),qe=Ne===0?6:Ne-1,Ze=[];for(let Me=0;Me<qe;Me++)Ze.push(null);for(let Me=1;Me<=pe;Me++)Ze.push(new Date(Ge,ze,Me));return m.jsxs("div",{className:"relative",children:[m.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[kH.map(Me=>m.jsx("div",{className:"text-center py-2 text-sm font-medium text-gray-700",children:Me},Me)),Ze.map((Me,ke)=>{if(!Me)return m.jsx("div",{className:"p-2 text-center text-gray-400"},ke);const We=ge(Me)||y,it=Me&&(t&&Me.toDateString()===t.toDateString()||e&&Me.toDateString()===e.toDateString()),gt=Me&&Q(Me),xt=Me.toDateString()===M.toDateString(),Tt=W(Me);return m.jsxs("div",{className:`
                  relative p-2 text-center cursor-pointer transition-all duration-200 group
                  ${We?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-orange-50"}
                  ${it?"bg-solrent-orange text-white":""}
                  ${gt?"bg-orange-100":""}
                  ${xt?"border-2 border-solrent-orange":""}
                  ${Me.getDay()===0?"bg-gray-200":""} // Sunday styling
                `,onClick:()=>!y&&te(Me),children:[m.jsx("span",{className:it?"text-white":"",children:Me.getDate()}),We&&!y&&m.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-gray-400 rounded-full"}),Tt&&m.jsx("div",{className:"absolute z-50 invisible group-hover:visible bg-gray-800 text-white text-xs rounded py-2 px-3 left-1/2 transform -translate-x-1/2 bottom-full mb-2 min-w-[200px] max-w-[300px] whitespace-pre-line break-words shadow-lg",children:m.jsxs("div",{className:"relative",children:[Tt,m.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full w-2 h-2 bg-gray-800 rotate-45"})]})})]},ke)})]}),m.jsx(pc,{children:y&&m.jsx(Ii.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 z-10",children:m.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[m.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"}),m.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Sprawdzanie dostpnoci..."})]})})})]})},$e=()=>{if(!u)return null;const Ge=Z();return m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs(Ii.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg p-6 max-w-sm w-full mx-4",children:[m.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Wybierz godzin ",l===1?"rozpoczcia":"zakoczenia"]}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ge.map(ze=>{const Ne=F(ze);return m.jsx("button",{onClick:()=>!Ne&&re(ze),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${Ne?"bg-gray-100 text-gray-400 cursor-not-allowed":"hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-orange-500"}`,disabled:Ne,children:ze},ze)})}),m.jsx("button",{onClick:()=>d(!1),className:"mt-4 w-full px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Anuluj"})]})})};return m.jsxs("div",{className:"space-y-6",children:[Se(),m.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:xe()}),(t||e)&&m.jsxs("button",{onClick:H,className:"flex items-center px-3 py-1.5 text-sm font-medium text-white bg-red-500 rounded-lg",children:[m.jsx(Iz,{className:"w-4 h-4 mr-1.5"}),"Resetuj dat"]})]}),m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("button",{onClick:()=>a(new Date(o.setMonth(o.getMonth()-1))),className:"p-2 rounded-full hover:bg-gray-100",disabled:o.getMonth()===M.getMonth()&&o.getFullYear()===M.getFullYear(),children:m.jsx(Bv,{className:"w-5 h-5"})}),m.jsxs("button",{onClick:()=>C(!P),className:"text-lg font-medium",children:[NH[o.getMonth()]," ",o.getFullYear()]}),m.jsx("button",{onClick:()=>a(new Date(o.setMonth(o.getMonth()+1))),className:"p-2 rounded-full hover:bg-gray-100",children:m.jsx(Z_,{className:"w-5 h-5"})})]}),He(),T&&m.jsxs("div",{className:"mt-4 p-4 bg-red-50 rounded-lg flex items-start",children:[m.jsx(J6,{className:"w-5 h-5 text-red-500 mt-0.5 mr-2 flex-shrink-0"}),m.jsx("p",{className:"text-red-700 text-sm",children:T})]}),q&&O&&m.jsx(ne,{content:O}),(t||e)&&m.jsxs("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg",children:[m.jsx("h3",{className:"font-medium text-solrent-dark mb-2",children:"Wybrane terminy:"}),t&&m.jsxs("p",{className:"text-sm",children:["Rozpoczcie: ",ye(t)," ",n]}),e&&m.jsxs("p",{className:"text-sm",children:["Zakoczenie: ",ye(e)," ",r," ",t&&e&&m.jsxs("span",{className:`font-medium ${Tx(t,e,n,r)>=7?"text-green-600":"text-gray-900"}`,children:["(",Tx(t,e,n,r)," dni)"]})]})]})]}),m.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(jz,{className:"w-5 h-5 text-blue-500 mt-0.5 mr-2"}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-blue-700",children:m.jsx("strong",{children:"Godziny otwarcia:"})}),m.jsxs("ul",{className:"text-sm text-blue-600 mt-1",children:[m.jsx("li",{children:"Poniedziaek - Pitek: 8:00 - 16:00"}),m.jsx("li",{children:"Sobota: 8:00 - 13:00"}),m.jsx("li",{children:"Niedziela: nieczynne"})]})]})]})}),m.jsx(pc,{children:$e()})]})},EH=t=>new Promise(e=>setTimeout(e,t));let bp=null;const VC=3,AH=1e3,YD=async(t=0)=>{console.log("Wywoanie funkcji getEquipment");try{const{data:e,error:n}=await ct.from("equipment").select("*, specifications(*), features(*), variants(*)").order("name");if(n)throw console.error("Bd pobierania sprztu z Supabase:",n),n;return console.log("Pobrano sprzt z Supabase:",e),e||[]}catch(e){if(console.error(`Prba ${t+1}/${VC} nie powioda si:`,e),t<VC)return await EH(AH*(t+1)),YD(t+1);throw new Error("Nie udao si pobra danych po kilku prbach. Sprawd poczenie z internetem.")}},TH=async t=>{var i;const{data:e}=await ct.auth.getUser(),{data:n,error:r}=await ct.from("equipment").insert({...t,last_modified_by:(i=e.user)==null?void 0:i.id,updated_at:new Date().toISOString()}).select().single();if(r)throw r;return n},jH=async t=>{const{error:e}=await ct.from("equipment").delete().eq("id",t);if(e)throw e},PH=t=>(bp&&bp.unsubscribe(),bp=ct.channel("equipment_changes").on("postgres_changes",{event:"*",schema:"public",table:"equipment"},e=>{t(e.new)}).subscribe(),()=>{bp&&(bp.unsubscribe(),bp=null)}),DH=({equipment:t,onClose:e,onAddToCart:n,isInCart:r,onRemoveFromCart:i})=>{const s=Y.useRef(null),o=Y.useRef(null);return Y.useEffect(()=>{const a=c=>{c.key==="Escape"&&e()},l=c=>{s.current&&!s.current.contains(c.target)&&e()};return document.addEventListener("keydown",a),document.addEventListener("mousedown",l),()=>{document.removeEventListener("keydown",a),document.removeEventListener("mousedown",l)}},[e]),Y.useEffect(()=>{if(s.current&&o.current){const a=()=>{var d;const l=window.innerHeight,c=((d=s.current)==null?void 0:d.getBoundingClientRect().top)||0,u=l-c-40;o.current.style.maxHeight=`${u}px`};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}},[]),t?m.jsx("div",{className:"fixed inset-0 modal-overlay flex items-center justify-center bg-black bg-opacity-75",children:m.jsx(pc,{children:m.jsxs(Ii.div,{ref:s,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2,ease:"easeOut"},className:"bg-white w-[90%] max-h-[90vh] md:w-full md:h-auto rounded-lg shadow-xl md:max-w-5xl overflow-hidden relative mx-auto my-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[m.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 md:px-6 py-3 md:py-4 border-b bg-white",children:[m.jsx("h2",{id:"modal-title",className:"text-xl md:text-2xl font-semibold text-gray-900",children:t.name}),m.jsx("button",{onClick:e,className:"p-1.5 md:p-2 hover:bg-gray-100 rounded-full transition-colors active:bg-gray-200","aria-label":"Zamknij",children:m.jsx(du,{className:"w-5 h-5 md:w-6 md:h-6 text-gray-500"})})]}),m.jsx("div",{ref:o,className:"overflow-y-auto max-h-[calc(90vh-4rem)] md:h-auto",style:{scrollbarGutter:"stable"},children:m.jsxs("div",{className:"flex flex-col md:flex-row md:divide-x divide-gray-200",children:[m.jsx("div",{className:"md:w-1/2 p-3 md:p-6",children:m.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden flex items-center justify-center h-[200px] md:h-[300px]",children:m.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-contain",loading:"lazy"})})}),m.jsx("div",{className:"md:w-1/2 p-3 md:p-6",children:m.jsxs("div",{className:"space-y-8",children:[m.jsx("div",{className:"bg-gray-50 p-4 md:p-6 rounded-lg",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-xl md:text-2xl font-semibold text-solrent-orange",children:[t.price," z/dzie",t.promotional_price&&m.jsxs("div",{className:"text-sm text-green-600 font-medium mt-1",children:["od 7 dni: ",t.promotional_price," z/dzie"]})]}),t.deposit>0&&m.jsxs("p",{className:"text-sm text-orange-600 mt-2",children:["Kaucja: ",t.deposit," z"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dostpno:"}),m.jsxs("p",{className:"font-medium text-green-600 text-lg",children:[t.quantity," szt."]})]})]})}),m.jsx("button",{onClick:()=>{r&&t?i(t.id):t&&n({...t,quantity:1}),e()},className:`sticky bottom-0 left-0 right-0 w-full py-4 md:py-3 px-4 transition-colors flex items-center justify-center gap-2 md:rounded-lg shadow-lg md:shadow-none ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-solrent-orange hover:bg-orange-700 text-white"}`,children:r?m.jsxs(m.Fragment,{children:[m.jsx(lc,{className:"w-5 h-5"}),"Usu z koszyka"]}):m.jsxs(m.Fragment,{children:[m.jsx(Rz,{className:"w-5 h-5"}),"Dodaj do koszyka"]})}),m.jsxs("div",{className:"text-sm md:text-base",children:[m.jsx("h3",{className:"text-lg md:text-xl font-medium text-gray-900 mb-3 md:mb-4",children:"Opis"}),m.jsx("div",{className:"prose prose-sm max-w-none text-gray-600 leading-relaxed",children:t.description.split(`
`).map((a,l)=>m.jsx("p",{className:"mb-4",children:a},l))})]}),m.jsxs("div",{className:"text-sm md:text-base",children:[m.jsx("h3",{className:"text-lg md:text-xl font-medium text-gray-900 mb-3 md:mb-4",children:"Kategorie"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:t.categories.map((a,l)=>m.jsx("span",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:a==="budowlany"?"Sprzt budowlany":"Sprzt ogrodniczy"},l))})]})]})})]})})]})})}):null},OH=({selectedEquipment:t,onChange:e,onNext:n})=>{const[r,i]=Y.useState("wszystkie"),[s,o]=Y.useState(""),[a,l]=Y.useState([]),[c,u]=Y.useState(!1),[d,h]=Y.useState(null),[p,y]=Y.useState(!1),[x,v]=Y.useState(!0),[b,S]=Y.useState(null),[k,T]=Y.useState(null),[j,P]=Y.useState({name:"",description:"",price:"",deposit:"",image:"",categories:["budowlany"]});Y.useEffect(()=>{(async()=>{const F=await K9();y(F)})()},[]),Y.useEffect(()=>{(async()=>{try{v(!0);const Q=await YD();Q.length>0?(l(Q),S(null)):S("Brak dostpnego sprztu.")}catch(Q){console.error("Error loading equipment:",Q),S(Q instanceof Error?Q.message:"Nie udao si zaadowa sprztu. Sprbuj odwiey stron.")}finally{v(!1)}})();const F=PH(Q=>{l(ee=>ee.map(te=>te.id===Q.id?Q:te))});return()=>{F()}},[]);const C=[{id:"wszystkie",name:"Wszystkie"},{id:"budowlany",name:"Sprzt budowlany"},{id:"ogrodniczy",name:"Sprzt ogrodniczy"}],N=a.filter(B=>{const F=r==="wszystkie"||B.categories.includes(r),Q=B.name.toLowerCase().includes(s.toLowerCase())||B.description.toLowerCase().includes(s.toLowerCase());return F&&Q}),L=B=>{const F=t.find(Q=>Q.id===B);return F?F.quantity:0},R=async(B,F)=>{if(F<0||F>B.quantity)return;t.find(ee=>ee.id===B.id)?e(F===0?t.filter(ee=>ee.id!==B.id):t.map(ee=>ee.id===B.id?{...ee,quantity:F}:ee)):F>0&&e([...t,{...B,quantity:F}])},D=B=>{const{name:F,value:Q}=B.target;if(F==="categories")P({...j,categories:[Q]});else if(F==="price"||F==="deposit"){const ee=Q.replace(/[^0-9]/g,"");P({...j,[F]:ee})}else P({...j,[F]:Q})},M=async()=>{if(!j.name||!j.description||!j.price||!j.image){alert("Prosz wypeni wszystkie pola");return}try{const B={...j,price:parseInt(j.price,10),deposit:parseInt(j.deposit,10)||0},F=await TH(B);l([...a,F]),P({name:"",description:"",price:"",deposit:"",image:"",categories:["budowlany"]})}catch(B){console.error("Error adding equipment:",B),alert("Nie udao si doda sprztu. Sprbuj ponownie.")}},H=B=>{h({...B,price:B.price.toString(),deposit:(B.deposit||"").toString()})},W=async B=>{if(window.confirm("Czy na pewno chcesz usun ten przedmiot?"))try{await jH(B),l(a.filter(F=>F.id!==B)),e(t.filter(F=>F.id!==B))}catch(F){console.error("Error deleting equipment:",F),alert("Nie udao si usun sprztu. Sprbuj ponownie.")}};if(x)return m.jsx("div",{className:"flex justify-center items-center py-12",children:m.jsx("div",{className:"text-gray-600",children:"adowanie sprztu..."})});if(b)return m.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:b});const Z=B=>t.some(F=>F.id===B);return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Wybierz sprzt"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(Qs,{className:"w-5 h-5 text-solrent-orange"}),m.jsxs("span",{className:"text-sm text-gray-600",children:["Wybrano: ",t.reduce((B,F)=>B+F.quantity,0)," szt."]})]}),p&&m.jsx("button",{onClick:()=>u(!c),className:"px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 rounded-lg",children:c?"Ukryj panel":"Zarzdzaj sprztem"})]})]}),p&&c&&m.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Panel zarzdzania sprztem"}),m.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg border border-gray-200",children:[m.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Dodaj nowy sprzt"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa"}),m.jsx("input",{type:"text",name:"name",value:j.name,onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nazwa sprztu"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategoria"}),m.jsxs("select",{name:"categories",value:j.categories[0],onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"budowlany",children:"Sprzt budowlany"}),m.jsx("option",{value:"ogrodniczy",children:"Sprzt ogrodniczy"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cena (z/dzie)"}),m.jsx("input",{type:"text",name:"price",value:j.price,onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Cena za dzie"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kaucja (z)"}),m.jsx("input",{type:"text",name:"deposit",value:j.deposit,onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Kwota kaucji"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL obrazu"}),m.jsx("input",{type:"text",name:"image",value:j.image,onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/image.jpg"})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opis"}),m.jsx("textarea",{name:"description",value:j.description,onChange:D,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Opis sprztu",rows:2})]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Dodaj sprzt"})})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Edytuj istniejcy sprzt"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"bg-gray-100",children:[m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Nazwa"}),m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Kategoria"}),m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Cena/dzie"}),m.jsx("th",{className:"py-2 px-4 border-b text-left",children:"Kaucja"}),m.jsx("th",{className:"py-2 px-4 border-b text-right",children:"Akcje"})]})}),m.jsx("tbody",{children:a.map(B=>m.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[m.jsx("td",{className:"py-2 px-4",children:B.name}),m.jsx("td",{className:"py-2 px-4",children:B.categories[0]==="budowlany"?"Sprzt budowlany":"Sprzt ogrodniczy"}),m.jsxs("td",{className:"py-2 px-4",children:[B.price," z/dzie"]}),m.jsxs("td",{className:"py-2 px-4",children:[B.deposit||0," z"]}),m.jsxs("td",{className:"py-2 px-4 text-right",children:[m.jsx("button",{onClick:()=>H(B),className:"p-1 text-blue-600 hover:text-blue-800 mr-2",children:m.jsx(_0,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>W(B.id),className:"p-1 text-red-600 hover:text-red-800",children:m.jsx(lc,{className:"w-4 h-4"})})]})]},B.id))})]})})]})]}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[m.jsx("div",{className:"flex-1",children:m.jsx("input",{type:"text",placeholder:"Szukaj sprztu...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:s,onChange:B=>o(B.target.value)})}),m.jsx("div",{className:"grid grid-cols-3 gap-2",children:C.map(B=>m.jsx("button",{className:`px-2 py-2 rounded-lg text-center text-sm ${r===B.id?"bg-solrent-orange text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>i(B.id),children:B.name},B.id))})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map((B,F)=>{const Q=L(B.id)>0,ee=L(B.id);return m.jsxs("div",{className:`border rounded-lg overflow-hidden flex min-h-[12rem] ${Q?"bg-[#e6f3ff] border-[#0066cc] border-2":"bg-white"}`,onClick:()=>T(B),children:[m.jsx("div",{className:"w-1/3 min-w-[80px] relative p-3",children:m.jsx("img",{src:B.image,alt:B.name,className:"w-full h-full object-contain"})}),m.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:B.name}),m.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:B.description}),m.jsxs("div",{children:[B.deposit>0&&m.jsxs("p",{className:"text-sm text-orange-600",children:["Kaucja: ",B.deposit," z"]}),m.jsxs("button",{onClick:te=>{te.stopPropagation(),T(B)},className:"mt-1 px-2 py-1 bg-solrent-orange text-white text-sm rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-1","aria-label":`Zobacz szczegy ${B.name}`,children:[m.jsx(Qs,{className:"w-4 h-4"}),"Szczegy sprztu"]})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute right-0 top-0",children:m.jsxs("div",{className:"flex items-center space-x-1",onClick:te=>te.stopPropagation(),children:[ee>0&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:()=>R(B,ee-1),className:"p-1 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors",children:m.jsx(Nx,{className:"w-3 h-3"})}),m.jsx("span",{className:"w-4 text-center text-xs font-medium",children:ee})]}),m.jsx("button",{onClick:()=>R(B,ee+1),disabled:ee>=B.quantity,className:`p-1 rounded-full transition-colors ${ee>=B.quantity?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-orange-100 text-solrent-orange hover:bg-orange-200"}`,title:B.quantity>1?`Dostpne: ${B.quantity} szt.`:"",children:m.jsx(_l,{className:"w-3 h-3"})})]})}),m.jsx("div",{className:"flex items-start flex-nowrap",children:m.jsxs("span",{className:"font-bold text-solrent-orange whitespace-nowrap min-w-[120px]",children:[m.jsxs("span",{className:"block",children:[B.price," z/dzie"]}),B.promotional_price&&m.jsxs("span",{className:"block text-sm text-green-600 whitespace-nowrap",children:["od 7 dni: ",B.promotional_price," z/dzie"]})]})})]})]})]},B.id)})}),N.length===0&&m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-gray-500",children:"Nie znaleziono sprztu speniajcego kryteria wyszukiwania."})}),m.jsx(DH,{equipment:k,onClose:()=>T(null),onAddToCart:B=>R(B,1),isInCart:k?Z(k.id):!1,onRemoveFromCart:B=>R({id:B,quantity:1},0)})]})},LH=({personalInfo:t,onChange:e,onValidityChange:n})=>{const[r,i]=Y.useState(!1),[s,o]=Pt.useState([]),[a,l]=Pt.useState({}),[c,u]=Pt.useState(new Set),[d,h]=Y.useState(!1),p=(k,T)=>{switch(k){case"firstName":return T.length>50?"Imi nie moe by dusze ni 50 znakw":T.trim()?/^[A-Za-z\s-]+$/.test(T)?null:"Dozwolone s tylko litery, spacje i mylniki":`Pole ${k==="firstName"?"Imi":"Nazwisko"} jest wymagane`;case"lastName":return T.length>50?"Nazwisko nie moe by dusze ni 50 znakw":T.trim()?/^[A-Za-z\s-]+$/.test(T)?null:"Dozwolone s tylko litery, spacje i mylniki":`Pole ${k==="firstName"?"Imi":"Nazwisko"} jest wymagane`;case"email":return T.trim()?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(T)?null:"Prosz wprowadzi poprawny adres email (np. jan.kowalski@example.com)":"Adres email jest wymagany";case"phone":return T.trim()?/^\d{3}\s?\d{3}\s?\d{3}$/.test(T.replace(/\s/g,""))?null:"Prosz wprowadzi poprawny 9-cyfrowy numer telefonu (np. 123 456 789)":"Numer telefonu jest wymagany";case"companyNip":return T&&!/^\d{3}-\d{3}-\d{2}-\d{2}$/.test(T.replace(/[^0-9-]/g,""))?"Nieprawidowy format NIP (XXX-XXX-XX-XX)":null;case"companyPostalCode":return T&&!/^\d{2}-\d{3}$/.test(T.replace(/[^0-9-]/g,""))?"Nieprawidowy format kodu pocztowego (XX-XXX)":null;case"comment":return T.length>500?"Komentarz nie moe przekracza 500 znakw":null;default:return null}},y=k=>{const{name:T,value:j}=k.target;let P=j;T==="firstName"||T==="lastName"?P=j.replace(/[0-9]/g,""):T==="email"?P=j:T==="phone"?P=j.replace(/[^0-9]/g,"").slice(0,9).replace(/(\d{3})(?=\d)/g,"$1 "):T==="companyNip"?P=j.replace(/[^0-9]/g,"").slice(0,10).replace(/(\d{3})(\d{3})(\d{2})(\d{2})/,"$1-$2-$3-$4"):T==="companyPostalCode"?P=j.replace(/[^0-9]/g,"").slice(0,5).replace(/(\d{2})(\d{3})/,"$1-$2"):P=j;const C={...t,[T]:P};e(C);const N=p(T,P);o(L=>{const R=L.filter(D=>D.field!==T);return N&&R.push({field:T,message:N}),R}),n(S(C))},x=k=>{const{name:T}=k.target;u(j=>new Set(j).add(T))},v=k=>{const{name:T,checked:j}=k.target;l(L=>{const R={...L};return delete R[T],R});const P={...t,[T]:j};e(P);const N=["dataProcessingAccepted","terms1Accepted","terms2Accepted"].filter(L=>!P[L]);N.length>0?(l(L=>({...L,...N.reduce((R,D)=>({...R,[D]:"To pole jest wymagane"}),{})})),n(!1)):(l({}),n(S(P)))},b=k=>{if(!c.has(k))return null;const T=s.find(j=>j.field===k);return T?T.message:null},S=k=>{var T,j,P,C,N;return((T=k.firstName)==null?void 0:T.trim())!==""&&((j=k.lastName)==null?void 0:j.trim())!==""&&((P=k.email)==null?void 0:P.trim())!==""&&((C=k.email)==null?void 0:C.includes("@"))&&((N=k.phone)==null?void 0:N.trim())!==""&&k.dataProcessingAccepted===!0&&k.terms1Accepted===!0&&k.terms2Accepted===!0};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Dane osobowe"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Wprowad swoje dane kontaktowe potrzebne do rezerwacji"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imi"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(wg,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:y,onBlur:x,pattern:"[A-Za-z\\s-]+",className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("firstName")?"border-red-500":""}`,placeholder:"Jan",required:!0})]}),b("firstName")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("firstName")})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(wg,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:"text",id:"lastName",name:"lastName",value:t.lastName,onChange:y,onBlur:x,pattern:"[A-Za-z\\s-]+",className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("lastName")?"border-red-500":""}`,placeholder:"Kowalski",required:!0})]}),b("lastName")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("lastName")})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(Bd,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:"email",id:"email",name:"email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",value:t.email,onChange:y,onBlur:x,className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("email")?"border-red-500":""}`,placeholder:"jan.kowalski@example.com",required:!0})]})]}),b("email")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("email")}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:m.jsx(bd,{className:"h-5 w-5 text-gray-400"})}),m.jsx("input",{type:"tel",id:"phone",name:"phone",pattern:"[0-9]{9}",maxLength:11,inputMode:"numeric",value:t.phone,onBlur:x,onChange:y,className:`pl-10 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("phone")?"border-red-500":""}`,placeholder:"123 456 789",required:!0})]}),b("phone")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("phone")})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opcjonalny komentarz"}),m.jsx("textarea",{id:"comment",name:"comment",maxLength:500,value:t.comment||"",onChange:y,rows:3,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Dodatkowe informacje lub uwagi do rezerwacji (max 500 znakw)..."})]}),m.jsxs("div",{className:"mt-8",children:[m.jsxs("button",{type:"button",onClick:()=>h(!d),className:"w-full flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[m.jsx("span",{className:"font-medium text-gray-700",children:"Dane firmy (opcjonalne)"}),m.jsx(eu,{className:`w-5 h-5 text-gray-500 transition-transform ${d?"rotate-180":""}`})]}),m.jsx(pc,{children:d&&m.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsxs("div",{className:"space-y-4 mt-4 p-4 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pena nazwa firmy"}),m.jsx("input",{type:"text",name:"companyName",value:t.companyName||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nazwa firmy"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP"}),m.jsx("input",{type:"text",name:"companyNip",value:t.companyNip||"",onChange:y,onBlur:x,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("companyNip")?"border-red-500":""}`,placeholder:"XXX-XXX-XX-XX"}),b("companyNip")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("companyNip")})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),m.jsx("input",{type:"text",name:"companyStreet",value:t.companyStreet||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ulica i numer"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),m.jsx("input",{type:"text",name:"companyPostalCode",value:t.companyPostalCode||"",onChange:y,onBlur:x,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${b("companyPostalCode")?"border-red-500":""}`,placeholder:"XX-XXX"}),b("companyPostalCode")&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:b("companyPostalCode")})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),m.jsx("input",{type:"text",name:"companyCity",value:t.companyCity||"",onChange:y,className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Miasto"})]})]})]})})})]}),m.jsx("div",{className:"bg-blue-50 p-6 rounded-lg space-y-4",children:m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Informacje o przetwarzaniu danych"}),m.jsx("p",{className:"text-sm text-blue-700",children:"Administratorem Pani/Pana danych osobowych jest SOLRENT z siedzib w Knurowie 44-190 ul. Jczmienna 4. Dane bd przetwarzane w celu realizacji usugi wynajmu sprztu. Podanie danych jest dobrowolne, ale niezbdne do wiadczenia usugi."})]}),m.jsxs("button",{onClick:()=>i(!r),className:"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r?"Zwi szczegy":"Rozwi pen informacj",m.jsx(eu,{className:`w-4 h-4 transition-transform ${r?"rotate-180":""}`})]}),m.jsx(pc,{children:r&&m.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsxs("div",{className:"space-y-4 pt-2",children:[m.jsx("div",{children:m.jsx("p",{className:"text-sm text-blue-700",children:"Podstaw prawn przetwarzania podanych przez Pani/Pana danych osobowych jest art. 6 ust. 1 lit. a ROZPORZDZENIA PARLAMENTU EUROPEJSKIEGO I RADY (UE) 2016/679 z dnia 27 kwietnia 2016 r. w sprawie ochrony osb fizycznych w zwizku z przetwarzaniem danych osobowych i w sprawie swobodnego przepywu takich danych oraz uchylenia dyrektywy 95/46/WE (RODO)."})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-blue-700",children:"Podane przez Pani/Pana dane osobowe bd przetwarzane do czasu wycofania zgody. Przysuguje Pani/Panu:"}),m.jsxs("ul",{className:"list-disc pl-6 mt-2 text-sm text-blue-700",children:[m.jsx("li",{children:"prawo dostpu do treci podanych danych osobowych"}),m.jsx("li",{children:"prawo do ich sprostowania, usunicia lub ograniczenia przetwarzania"}),m.jsx("li",{children:"prawo do przenoszenia danych"}),m.jsx("li",{children:"prawo do cofnicia zgody w dowolnym momencie bez wpywu na zgodno z prawem przetwarzania dokonanego przed jej cofniciem"}),m.jsx("li",{children:"prawo do wniesienia skargi do organu nadzorczego w zakresie ochrony danych osobowych"})]})]}),m.jsx("div",{children:m.jsx("p",{className:"text-sm text-blue-700",children:"Pani/Pana dane osobowe nie bd przekazywane do pastw trzecich, nie bd przetwarzane w sposb zautomatyzowany i nie bd profilowane."})})]})})})]})}),m.jsxs("div",{className:"flex items-start space-x-2",children:[m.jsx("input",{id:"dataProcessing",name:"dataProcessingAccepted",type:"checkbox",checked:t.dataProcessingAccepted||!1,onChange:v,className:"h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),m.jsx("label",{htmlFor:"dataProcessing",className:"text-sm text-gray-700",children:m.jsx("span",{className:a.dataProcessingAccepted?"text-red-600":"",children:"Owiadczam, e zapoznaem/-am si z powyszymi informacjami i wyraam zgod na przetwarzanie podanych przeze mnie danych osobowych we wskazanych powyej celach i zakresie."})})]}),a.dataProcessingAccepted&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.dataProcessingAccepted}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{className:"font-medium text-gray-700",children:"Owiadczam, e:"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start",children:[m.jsx("input",{id:"terms1",name:"terms1Accepted",type:"checkbox",checked:t.terms1Accepted||!1,onChange:v,className:`h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a.terms1Accepted?"border-red-500":""}`}),m.jsxs("label",{htmlFor:"terms1",className:"ml-2 block text-sm text-gray-700",children:[m.jsxs("span",{className:a.terms1Accepted?"text-red-600":"",children:["Zapoznaem/am si z pen treci ",m.jsx("a",{href:"https://solrent.pl/zasady-wynajmu/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Warunkw Umowy Najmu"})," i akceptuj wszystkie jej postanowienia, w szczeglnoci:"]}),m.jsxs("ul",{className:"list-disc pl-4 mt-1",children:[m.jsx("li",{children:"Zasady korzystania ze sprztu"}),m.jsx("li",{children:"Warunki patnoci i rozlicze"}),m.jsx("li",{children:"Moliwo potrcenia z wpaconej kaucji w przypadkach okrelonych w Umowie"}),m.jsx("li",{children:"Odpowiedzialno za powierzony sprzt"})]})]})]}),a.terms1Accepted&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.terms1Accepted}),m.jsxs("div",{className:"flex items-start",children:[m.jsx("input",{id:"terms2",name:"terms2Accepted",type:"checkbox",checked:t.terms2Accepted||!1,onChange:v,className:`h-4 w-4 mt-1 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${a.terms2Accepted?"border-red-500":""}`}),m.jsxs("label",{htmlFor:"terms2",className:"ml-2 block text-sm text-gray-700",children:[m.jsx("span",{className:a.terms2Accepted?"text-red-600":"",children:"Przyjmuj do wiadomoci i akceptuj zasady funkcjonowania wypoyczalni:"}),m.jsxs("div",{className:"mt-1 pl-4",children:[m.jsx("p",{className:"font-medium",children:"Godziny otwarcia (tylko w tych godzinach moliwy jest odbir i zwrot sprztu):"}),m.jsxs("ul",{className:"list-none mt-1",children:[m.jsx("li",{children:"Poniedziaek - Pitek: 8:00 - 16:00"}),m.jsx("li",{children:"Sobota: 8:00 - 13:00"}),m.jsx("li",{children:"Niedziela: nieczynne"})]})]}),m.jsxs("div",{className:"mt-2 pl-4",children:[m.jsx("p",{className:"font-medium",children:"Wypoyczalnia zastrzega sobie prawo do:"}),m.jsxs("ul",{className:"list-disc mt-1",children:[m.jsx("li",{children:"Odwoania rezerwacji z powodu usterek technicznych"}),m.jsx("li",{children:"Odwoania rezerwacji w przypadku zdarze losowych"}),m.jsx("li",{children:"Odmowy wydania sprztu osobom, ktre nie speniaj warunkw okrelonych w regulaminie"})]})]})]})]}),a.terms2Accepted&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.terms2Accepted})]})]})]})]})};var HC={};async function qC({recipientEmail:t,subject:e,htmlContent:n,templateData:r}){try{const i=await fetch(`${HC.NEXT_PUBLIC_SUPABASE_URL}/functions/v1/send-email-template`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${HC.NEXT_PUBLIC_SUPABASE_ANON_KEY}`},body:JSON.stringify({recipientEmail:t,subject:e,htmlContent:n,templateData:r})});if(!i.ok){const o=await i.json();throw console.error("Bd wysyania emaila:",o),new Error(`Bd wysyania emaila: ${o.error||i.statusText}`)}return await i.json()}catch(i){throw console.error("Bd wysyania emaila:",i),i}}const qw={newReservation:{subject:"Potwierdzenie nowej rezerwacji",htmlContent:`
      <h2>Dzikujemy za rezerwacj!</h2>
      <p>Witaj {{first_name}},</p>
      <p>Twoja rezerwacja zostaa przyjta i oczekuje na potwierdzenie.</p>
      <h3>Szczegy rezerwacji:</h3>
      <ul>
        <li>Data rozpoczcia: {{start_date}} {{start_time}}</li>
        <li>Data zakoczenia: {{end_date}} {{end_time}}</li>
        <li>Liczba dni: {{days}}</li>
        <li>Sprzt: {{equipment}}</li>
        <li>Cakowita cena: {{total_price}} z</li>
        <li>Kaucja: {{deposit}} z</li>
      </ul>
      <p>Skontaktujemy si z Tob wkrtce w celu potwierdzenia rezerwacji.</p>
    `},statusUpdate:{subject:"Aktualizacja statusu rezerwacji",htmlContent:`
      <h2>Aktualizacja statusu rezerwacji</h2>
      <p>Witaj {{first_name}},</p>
      <p>Status Twojej rezerwacji zosta zaktualizowany na: <strong>{{status}}</strong></p>
      <h3>Szczegy rezerwacji:</h3>
      <ul>
        <li>Data rozpoczcia: {{start_date}} {{start_time}}</li>
        <li>Data zakoczenia: {{end_date}} {{end_time}}</li>
        <li>Liczba dni: {{days}}</li>
        <li>Sprzt: {{equipment}}</li>
        <li>Cakowita cena: {{total_price}} z</li>
        <li>Kaucja: {{deposit}} z</li>
      </ul>
    `},cancelReservation:{subject:"Anulowanie rezerwacji",htmlContent:`
      <h2>Anulowanie rezerwacji</h2>
      <p>Witaj {{first_name}},</p>
      <p>Twoja rezerwacja zostaa anulowana.</p>
      <h3>Szczegy anulowanej rezerwacji:</h3>
      <ul>
        <li>Data rozpoczcia: {{start_date}} {{start_time}}</li>
        <li>Data zakoczenia: {{end_date}} {{end_time}}</li>
        <li>Liczba dni: {{days}}</li>
        <li>Sprzt: {{equipment}}</li>
        <li>Cakowita cena: {{total_price}} z</li>
        <li>Kaucja: {{deposit}} z</li>
      </ul>
      <p>Jeli masz pytania, prosimy o kontakt.</p>
    `},thankYou:{subject:"Dzikujemy za skorzystanie z naszych usug",htmlContent:`
      <h2>Dzikujemy za skorzystanie z naszych usug!</h2>
      <p>Witaj {{first_name}},</p>
      <p>Dzikujemy za skorzystanie z naszych usug. Mamy nadziej, e wszystko spenio Twoje oczekiwania.</p>
      <h3>Szczegy zakoczonej rezerwacji:</h3>
      <ul>
        <li>Data rozpoczcia: {{start_date}} {{start_time}}</li>
        <li>Data zakoczenia: {{end_date}} {{end_time}}</li>
        <li>Liczba dni: {{days}}</li>
        <li>Sprzt: {{equipment}}</li>
        <li>Cakowita cena: {{total_price}} z</li>
        <li>Kaucja: {{deposit}} z</li>
      </ul>
      <p>Zapraszamy ponownie!</p>
    `}},JD=({isOpen:t,onClose:e,title:n,className:r="",children:i})=>t?m.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 ${r}`,children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md relative",children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:m.jsx(du,{className:"w-5 h-5"})}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:n}),i]})]})}):null,ZD=Y.forwardRef(({reservation:t,onSubmit:e},n)=>{const{startDate:r,endDate:i,equipment:s,personalInfo:o}=t,[a,l]=Y.useState(!1),[c,u]=Y.useState(""),[d,h]=Y.useState(!1),[p,y]=Y.useState(!1),[x,v]=Y.useState({title:"",message:"",isError:!1}),b=()=>{if(!r||!i||!t.startTime||!t.endTime)return 0;const C=new Date(r),N=new Date(i),L=t.startTime||"00:00",R=t.endTime||"00:00";return Tx(C,N,L,R)},S=()=>{const C=b();return s.reduce((N,L)=>{const R=C>=7&&L.promotional_price?L.promotional_price:L.price;return N+R*L.quantity*C},0)},k=()=>s.reduce((C,N)=>C+(N.deposit||0)*N.quantity,0),T=C=>C?C.toLocaleDateString("pl-PL",{year:"numeric",month:"long",day:"numeric"}):"",j=async()=>{if(!(a||d)){if(!o.email||!o.firstName||!o.lastName){u("Prosz wypeni wszystkie wymagane pola");return}l(!0),u("");try{const C=r?new Date(r):new Date,N=i?new Date(i):new Date,[L]=t.startTime?t.startTime.split(":").map(Number):[0],[R]=t.endTime?t.endTime.split(":").map(Number):[0];C.setHours(L,0,0,0),N.setHours(R,0,0,0);const D=s.map(te=>`${te.name} (${te.quantity}x)`).join(", "),{data:M,error:H}=await ct.from("customers").select("id").eq("email",o.email).maybeSingle();if(H)throw H;let W;const Z=M;if(Z){const{data:te,error:re}=await ct.from("customers").update({first_name:o.firstName,last_name:o.lastName,phone:o.phone,company_name:o.companyName||null,company_nip:o.companyNip||null,company_street:o.companyStreet||null,company_postal_code:o.companyPostalCode||null,company_city:o.companyCity||null,product_name:D,rental_start_date:C.toISOString(),rental_end_date:N.toISOString(),rental_days:b(),total_amount:S(),deposit_amount:k(),comment:o.comment||null,updated_at:new Date().toISOString()}).eq("id",Z.id).select().single();if(re)throw re;W=Z.id}else{const{data:te,error:re}=await ct.from("customers").insert({first_name:o.firstName,last_name:o.lastName,email:o.email,phone:o.phone,company_name:o.companyName||null,company_nip:o.companyNip||null,company_street:o.companyStreet||null,company_postal_code:o.companyPostalCode||null,company_city:o.companyCity||null,product_name:D,rental_start_date:C.toISOString(),rental_end_date:N.toISOString(),rental_days:b(),total_amount:S(),deposit_amount:k(),comment:o.comment||null}).select().single();if(re)throw re;W=te.id}const{data:B,error:F}=await ct.from("reservations").insert({customer_id:W,start_date:C.toISOString(),end_date:N.toISOString(),start_time:t.startTime,end_time:t.endTime,total_price:S(),status:"pending",comment:o.comment||null}).select().single();if(F)throw F;const Q=s.map(te=>({reservation_id:B.id,equipment_id:te.id,quantity:te.quantity,price_per_day:te.price,deposit:te.deposit||0})),{error:ee}=await ct.from("reservation_items").insert(Q);if(ee)throw ee;try{const te=s.map(O=>`${O.name} (${O.quantity} szt.) - ${O.price} z/dzie`).join(`
`),re={first_name:o.firstName,last_name:o.lastName,start_date:T(r),start_time:t.startTime||"08:00",end_date:T(i),end_time:t.endTime||"16:00",days:b().toString(),equipment:te,total_price:S().toString(),deposit:k().toString()};await qC({recipientEmail:o.email,subject:qw.newReservation.subject,htmlContent:qw.newReservation.htmlContent,templateData:re}),await qC({recipientEmail:"biuro@solrent.pl",subject:`Nowa rezerwacja: ${o.firstName} ${o.lastName}`,htmlContent:qw.newReservation.htmlContent,templateData:re}),console.log("Emaile z potwierdzeniem rezerwacji wysane pomylnie"),await ct.from("email_notifications").insert([{reservation_id:B.id,recipient:o.email,type:"customer",status:"sent"},{reservation_id:B.id,recipient:"biuro@solrent.pl",type:"admin",status:"sent"}])}catch(te){console.error("Bd podczas wysyania emaila z potwierdzeniem rezerwacji:",te)}h(!0),v({title:"Rezerwacja potwierdzona",message:"Rezerwacja zostaa pomylnie utworzona. Na podany adres email zostao wysane potwierdzenie. Dzikujemy!",isError:!1}),y(!0),e&&e()}catch(C){console.error("Error submitting reservation:",C),u("Wystpi bd podczas zapisywania rezerwacji."),v({title:"Bd rezerwacji",message:"Przepraszamy, wystpi bd podczas tworzenia rezerwacji. Sprbuj ponownie.",isError:!0}),y(!0)}finally{l(!1)}}},P=()=>{y(!1),x.isError||(window.location.href="/")};return Y.useImperativeHandle(n,()=>({handleSubmitReservation:j})),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Podsumowanie rezerwacji"}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sprawd szczegy swojej rezerwacji przed potwierdzeniem"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(kl,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-gray-900",children:"Termin rezerwacji"}),m.jsxs("p",{className:"text-gray-700 mt-1",children:["Od: ",m.jsx("span",{className:"font-medium",children:T(r)}),t.startTime&&m.jsxs("span",{className:"font-medium",children:[" ",t.startTime]})]}),m.jsxs("p",{className:"text-gray-700",children:["Do: ",m.jsx("span",{className:"font-medium",children:T(i)}),t.endTime&&m.jsxs("span",{className:"font-medium",children:[" ",t.endTime]})]}),m.jsxs("p",{className:"text-gray-700 mt-1",children:["Liczba dni: ",m.jsx("span",{className:"font-medium",children:b()})]})]})]})}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(Qs,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),m.jsxs("div",{className:"w-full",children:[m.jsx("h3",{className:"font-medium text-gray-900",children:"Wybrany sprzt"}),m.jsx("div",{className:"mt-2 space-y-2",children:s.map(C=>m.jsxs("div",{className:"flex justify-between text-gray-700",children:[m.jsxs("div",{children:[m.jsxs("span",{children:[C.name," x",C.quantity]}),C.promotional_price&&b()>=7&&m.jsx("span",{className:"ml-2 text-sm text-green-600 font-medium",children:"(Cena promocyjna dla wynajmu 7+ dni)"})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{children:C.promotional_price&&b()>=7?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"font-medium text-green-600",children:[(C.promotional_price*C.quantity).toFixed(2)," z/dzie"]}),m.jsxs("span",{className:"ml-2 text-sm line-through text-gray-500",children:[(C.price*C.quantity).toFixed(2)," z"]})]}):m.jsxs("span",{className:"font-medium",children:[(C.price*C.quantity).toFixed(2)," z/dzie"]})}),C.deposit>0&&m.jsxs("div",{className:"text-sm text-orange-600",children:["Kaucja: ",C.deposit*C.quantity," z"]})]})]},C.id))})]})]})}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(wg,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-gray-900",children:"Dane osobowe"}),m.jsxs("p",{className:"text-gray-700 mt-1",children:["Imi i nazwisko: ",m.jsxs("span",{className:"font-medium",children:[o.firstName," ",o.lastName]})]}),m.jsxs("p",{className:"text-gray-700",children:["Email: ",m.jsx("span",{className:"font-medium",children:o.email})]}),m.jsxs("p",{className:"text-gray-700",children:["Telefon: ",m.jsx("span",{className:"font-medium",children:o.phone})]}),o.companyName&&m.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[m.jsx("h4",{className:"font-medium text-gray-900",children:"Dane firmy"}),m.jsxs("p",{className:"text-gray-700 mt-1",children:["Nazwa: ",m.jsx("span",{className:"font-medium",children:o.companyName})]}),m.jsxs("p",{className:"text-gray-700",children:["NIP: ",m.jsx("span",{className:"font-medium",children:o.companyNip})]}),m.jsxs("p",{className:"text-gray-700",children:["Adres: ",m.jsxs("span",{className:"font-medium",children:[o.companyStreet,", ",o.companyPostalCode," ",o.companyCity]})]})]}),o.comment&&m.jsxs("p",{className:"text-gray-700 mt-2",children:["Komentarz: ",m.jsx("span",{className:"italic",children:o.comment})]})]})]})}),m.jsx("div",{className:"bg-orange-50 p-4 rounded-lg mb-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(ac,{className:"w-5 h-5 text-solrent-orange mt-0.5 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-solrent-dark",children:"Podsumowanie kosztw"}),m.jsxs("div",{className:"mt-2 space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-solrent-gray",children:[m.jsx("span",{children:"Koszt dzienny:"}),m.jsx("div",{className:"text-right",children:b()>=7&&s.some(C=>C.promotional_price)?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"font-medium text-green-600",children:[s.reduce((C,N)=>C+(N.promotional_price||N.price)*N.quantity,0).toFixed(2)," z"]}),m.jsxs("span",{className:"ml-2 text-sm line-through",children:[s.reduce((C,N)=>C+N.price*N.quantity,0).toFixed(2)," z"]})]}):m.jsxs("span",{className:"font-medium",children:[s.reduce((C,N)=>C+N.price*N.quantity,0).toFixed(2)," z"]})})]}),m.jsxs("div",{className:"flex justify-between text-solrent-gray",children:[m.jsx("span",{children:"Liczba dni:"}),m.jsx("span",{className:`font-medium ${b()>=7?"text-green-600":"text-gray-900"}`,children:b()})]}),b()>=7&&s.some(C=>C.promotional_price)&&m.jsxs("div",{className:"flex justify-between text-green-600 font-medium pt-2 border-t border-green-200",children:[m.jsx("span",{children:"Oszczdzasz:"}),m.jsxs("span",{children:[((s.reduce((C,N)=>C+N.price*N.quantity,0)-s.reduce((C,N)=>C+(N.promotional_price||N.price)*N.quantity,0))*b()).toFixed(2)," z"]})]}),m.jsxs("div",{className:"flex justify-between text-solrent-gray pt-2 border-t border-orange-200",children:[m.jsx("span",{children:"Cakowity koszt wypoyczenia:"}),m.jsxs("span",{className:"font-medium",children:[S().toFixed(2)," z"]})]}),m.jsxs("div",{className:"flex justify-between text-solrent-gray pt-2 border-t border-orange-200",children:[m.jsx("span",{children:"Kaucja (zwrotna):"}),m.jsxs("span",{className:"font-medium",children:[k().toFixed(2)," z"]})]})]})]})]})})]}),m.jsx("div",{className:"bg-green-50 p-4 rounded-lg text-green-700",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Informacja:"}),' Po klikniciu przycisku "Zarezerwuj" Twoja rezerwacja zostanie zapisana w systemie.',b()>=7&&s.some(C=>C.promotional_price)?m.jsxs("span",{className:"block mt-2",children:[m.jsx("strong",{children:"Promocja aktywna!"})," Wybrae rezerwacj na 7 lub wicej dni - otrzymujesz specjaln znik na wybrane produkty!"]}):b()<7&&s.some(C=>C.promotional_price)?m.jsxs("span",{className:"block mt-2",children:[m.jsx("strong",{children:"Wskazwka:"})," Zarezerwuj na 7 lub wicej dni, aby otrzyma specjaln znik na wybrane produkty!"]}):null]})}),m.jsx("div",{className:"bg-orange-50 p-4 rounded-lg text-orange-700",children:m.jsxs("p",{className:"text-sm",children:[m.jsx("strong",{children:"Kaucja:"})," Kaucja jest pobierana przed rozpoczciem usugi jako zabezpieczenie przed ewentualnymi uszkodzeniami. Kaucja zostanie zwrcona w penej wysokoci po zakoczeniu usugi i stwierdzeniu braku uszkodze. W przypadku stwierdzenia uszkodze, koszty naprawy zostan potrcone z kaucji."]})}),m.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[c&&m.jsx("div",{className:"w-full bg-red-50 p-4 rounded-lg text-red-700",children:c}),d&&m.jsxs("div",{className:"w-full bg-green-50 p-4 rounded-lg text-green-700",children:[m.jsx("p",{className:"font-medium",children:"Rezerwacja zostaa pomylnie zoona!"}),m.jsx("p",{className:"mt-2",children:"Za chwil nastpi przekierowanie na stron gwn..."})]})]}),m.jsx(JD,{isOpen:p,onClose:P,title:x.title,children:m.jsxs("div",{className:`text-center ${x.isError?"text-red-600":"text-green-600"}`,children:[m.jsx("p",{className:"mb-4",children:x.message}),m.jsx("button",{onClick:P,className:`px-4 py-2 rounded-lg text-white ${x.isError?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:"OK"})]})})]})});ZD.displayName="Summary";const MH=({reservation:t,onRemoveItem:e,onRemoveAll:n,currentStep:r,onNext:i,onPrev:s})=>{const[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),u=Y.useRef(null),{startDate:d,endDate:h}=t,[p,y]=Y.useState(!1),x=Y.useRef(t.equipment.length),v=P=>{const C=localStorage.getItem(`summaryCollapsed_${P}`);return C?JSON.parse(C):P>0};Y.useEffect(()=>{p||a(r!==0),x.current=t.equipment.length},[r]),Y.useEffect(()=>{if(!p){const P=v(r);a(P)}},[]),Y.useEffect(()=>{p&&x.current!==t.equipment.length&&(x.current=t.equipment.length)},[t.equipment.length]);const b=()=>{const P=!o;a(P),y(!0),r!==0&&localStorage.setItem(`summaryCollapsed_${r}`,JSON.stringify(P))},S=()=>{c(!0)},k=()=>{n(),c(!1)},T=()=>{const P=j();return t.equipment.reduce((C,N)=>{const L=P>=7&&N.promotional_price?N.promotional_price:N.price;return C+L*N.quantity},0)},j=()=>!d||!h||!t.startTime||!t.endTime?0:Tx(d,h,t.startTime,t.endTime);return r===3||t.equipment.length===0?null:m.jsxs(m.Fragment,{children:[m.jsx("div",{onClick:P=>{P.target.closest("button")||b()},ref:u,className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg fixed-summary transition-all duration-300",children:m.jsxs("div",{className:"max-w-4xl mx-auto relative",children:[m.jsx("div",{onClick:b,className:"absolute -top-8 right-4 bg-white rounded-t-lg border border-b-0 px-3 py-1 shadow-sm hover:bg-gray-50 transition-colors",children:m.jsx(Ii.div,{animate:{rotate:o?0:180},transition:{duration:.3},children:m.jsx(Nm,{className:"w-5 h-5 text-gray-600"})})}),m.jsx("div",{className:"px-4 py-2 flex items-center justify-between border-b",children:m.jsxs("div",{className:"flex items-center justify-between flex-1",children:[m.jsx("div",{className:"flex items-center gap-2 md:gap-4",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:["Wybrane: ",t.equipment.length]}),m.jsxs("button",{onClick:P=>{P.stopPropagation(),S()},className:"flex items-center gap-1 text-red-600 hover:text-red-700 text-xs md:text-sm py-1 px-1.5 md:px-2 rounded transition-colors",children:[m.jsx(lc,{className:"w-4 h-4"}),m.jsx("span",{className:"hidden md:inline",children:"Usu wszystkie"}),m.jsx("span",{className:"md:hidden",children:"Usu"})]})]})}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"text-right",children:[m.jsx("span",{className:"text-sm text-gray-600",children:"Suma:"}),m.jsx("div",{className:"font-bold text-solrent-orange",children:j()>=7&&t.equipment.some(P=>P.promotional_price)?m.jsxs(m.Fragment,{children:[m.jsxs("span",{className:"text-sm line-through text-gray-500",children:[t.equipment.reduce((P,C)=>P+C.price*C.quantity,0)," z/dzie"]}),m.jsxs("span",{className:"block font-bold text-green-600",children:[T()," z/dzie"]})]}):m.jsxs("span",{children:[T()," z/dzie"]})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&m.jsxs("button",{onClick:s,className:"md:px-4 md:py-2 px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 flex items-center gap-1 md:gap-2 text-sm md:text-base",children:[m.jsx(Sx,{className:"w-4 h-4 md:w-5 md:h-5"}),m.jsx("span",{className:"hidden md:inline",children:"Wstecz"})]}),m.jsxs("button",{onClick:i,className:"md:px-4 md:py-2 px-3 py-1.5 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-1 md:gap-2 text-sm md:text-base",children:[m.jsx("span",{className:"hidden md:inline",children:"Dalej"}),m.jsx(vz,{className:"w-4 h-4 md:w-5 md:h-5"})]})]})]})]})}),m.jsx(pc,{children:!o&&m.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:m.jsx("div",{className:"p-4 space-y-4",children:m.jsx("div",{className:"grid grid-cols-2 md:flex md:flex-wrap gap-2",children:t.equipment.map(P=>m.jsxs("div",{className:"flex items-center bg-orange-50 text-solrent-orange px-2 md:px-3 py-1.5 rounded-lg md:rounded-full text-xs md:text-sm",children:[m.jsxs("span",{className:"flex-1 truncate",children:[P.name.includes("/")?m.jsxs("span",{className:"inline-flex flex-col",children:[m.jsx("span",{className:"truncate",children:P.name.split("/")[0].trim()}),m.jsx("span",{className:"truncate",children:P.name.split("/")[1].trim()})]}):P.name,m.jsxs("span",{className:"ml-1 font-medium",children:["x",P.quantity]})]}),m.jsx("button",{onClick:()=>e(P.id),className:"ml-1 md:ml-2 p-1 rounded-full hover:bg-orange-100 transition-colors flex-shrink-0",children:m.jsx(du,{className:"w-4 h-4"})})]},P.id))})})})})]})}),m.jsx(JD,{isOpen:l,onClose:()=>c(!1),title:"Potwierdzenie usunicia",className:"modal-overlay",children:m.jsxs("div",{className:"text-center",children:[m.jsx("p",{className:"mb-6 text-gray-700",children:"Czy na pewno chcesz usun wszystkie produkty?"}),m.jsxs("div",{className:"flex justify-center gap-4",children:[m.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors",children:"Anuluj"}),m.jsx("button",{onClick:k,className:"px-4 py-2 bg-[#FF0000] text-white rounded hover:bg-[#CC0000] transition-colors",children:"Usu wszystko"})]})]})})]})},_p=[{id:"equipment",label:"Wybierz sprzt",icon:Qs},{id:"dates",label:"Wybierz dat",icon:kl},{id:"personal",label:"Dane osobowe",icon:eP},{id:"summary",label:"Podsumowanie",icon:ac}],IH=()=>{const[t,e]=Y.useState(0),[n,r]=Y.useState(0),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),l=Y.useRef(null),[c,u]=Y.useState({startDate:null,endDate:null,startTime:null,endTime:null,equipment:[],personalInfo:{firstName:"",lastName:"",email:"",phone:"",comment:"",termsAccepted:!1}}),d=(C,N)=>{u(L=>({...L,[C]:N}))},h=C=>{d("equipment",c.equipment.filter(N=>N.id!==C))},p=()=>{d("equipment",[])},y=C=>{switch(C){case 0:return c.equipment.length>0;case 1:if(c.startDate&&c.endDate&&c.startTime&&c.endTime){const N=c.startDate&&c.startTime?E3(c.startDate,c.startTime):!1,L=c.endDate&&c.endTime?E3(c.endDate,c.endTime):!1;let R=!0;if(c.startDate&&c.endDate&&c.startTime&&c.endTime){const D=new Date(c.startDate),M=new Date(c.endDate);D.setHours(parseInt(c.startTime.split(":")[0],10)),M.setHours(parseInt(c.endTime.split(":")[0],10)),R=M>D}return N&&L&&R}return!1;case 2:return i;case 3:return!0;default:return!1}},x=C=>C<=n?Array.from({length:C},(N,L)=>L).every(N=>y(N)):!1,v=()=>{if(t<_p.length-1&&y(t)){const C=t+1;e(C),r(Math.max(n,C))}},b=()=>{t>0&&e(t-1)},S=C=>{x(C)&&e(C)},k=()=>{a(!1)},T=()=>{switch(t){case 0:return m.jsx(OH,{selectedEquipment:c.equipment,onChange:C=>d("equipment",C),onNext:v});case 1:return m.jsx(CH,{startDate:c.startDate,endDate:c.endDate,startTime:c.startTime,endTime:c.endTime,selectedEquipment:c.equipment,onChange:(C,N,L,R)=>{d("startDate",C),d("endDate",N),d("startTime",L),d("endTime",R)}});case 2:return m.jsx(LH,{personalInfo:c.personalInfo,onValidityChange:s,onChange:C=>d("personalInfo",C)});case 3:return m.jsx(ZD,{ref:l,reservation:c,onSubmit:k});default:return null}},j=()=>{l.current&&l.current.handleSubmitReservation&&(a(!0),l.current.handleSubmitReservation())},P=()=>t===_p.length-1?Array.from({length:_p.length-1},(C,N)=>N).every(C=>y(C)):y(t);return m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsx("div",{className:"flex border-b",children:_p.map((C,N)=>{const L=C.icon,R=N===t,D=N<t&&y(N),M=x(N),H=!M;return m.jsx("button",{className:`
                flex-1 py-4 px-2 text-center border-r last:border-r-0 transition-colors
                ${H?"cursor-not-allowed opacity-50":"cursor-pointer"}
                ${R?"bg-orange-50 text-solrent-orange":""}
                ${D?"bg-green-50 text-green-600":""}
                ${!R&&!D?"text-gray-400":""}
                ${M&&!R?"hover:bg-gray-50":""}
              `,onClick:()=>S(N),disabled:H,children:m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(L,{className:`w-6 h-6 mb-1 ${D?"text-green-600":""}`}),m.jsx("span",{className:"text-sm font-medium hidden sm:block",children:C.label})]})},C.id)})}),m.jsx("div",{className:`p-6 ${t!==3?"pb-32 md:pb-40":""}`,children:T()}),m.jsx(MH,{reservation:c,onRemoveItem:h,onRemoveAll:p,currentStep:t,onNext:v,onPrev:b}),m.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-between",children:[m.jsx("button",{onClick:b,disabled:t===0,className:`px-4 py-2 rounded ${t===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-200 text-solrent-gray hover:bg-gray-300"}`,children:"Wstecz"}),m.jsx("button",{onClick:t===_p.length-1?j:v,disabled:!P()||o,className:`px-4 py-2 rounded ${!P()||o?"bg-orange-300 text-white cursor-not-allowed":"bg-solrent-orange text-white hover:bg-orange-700"}`,children:t===_p.length-1?"Potwierd rezerwacj":"Dalej"})]})]})},RH=async()=>{const{data:t,error:e}=await ct.from("contact_info").select("*").order("updated_at",{ascending:!1}).limit(1).single();return e?(console.error("Error fetching contact info:",e),{id:"1",phone_number:"694 171 171",email:"kontakt@solrent.pl",updated_at:new Date().toISOString()}):t},FH=()=>{const[t,e]=Y.useState(0);return Y.useEffect(()=>{const n=()=>{e(window.scrollY)};return window.addEventListener("scroll",n,{passive:!0}),()=>{window.removeEventListener("scroll",n)}},[]),t},zH=()=>{const[t,e]=Y.useState(!1),[n,r]=Y.useState(null),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,d]=Y.useState(!1),h=Y.useRef(null),p=Y.useRef(!1),y=FH();Y.useEffect(()=>{o&&c(y>100)},[y,o]),Y.useEffect(()=>{(async()=>{const j=await RH();r(j)})();const k=()=>{a(window.innerWidth<=767)},T=j=>{h.current&&!h.current.contains(j.target)&&e(!1)};return k(),window.addEventListener("resize",k),document.addEventListener("mousedown",T),()=>{window.removeEventListener("resize",k),document.removeEventListener("mousedown",T)}},[]);const x=()=>{n&&(window.location.href=`tel:${n.phone_number.replace(/\s/g,"")}`)},v=()=>{n&&(window.location.href=`mailto:${n.email}`)},b=()=>document.querySelector('[role="dialog"]')!==null;return Y.useEffect(()=>{const S=()=>{const T=b();p.current!==T&&(p.current=T,s(T))};S();const k=new MutationObserver(S);return k.observe(document.body,{childList:!0,subtree:!0}),()=>k.disconnect()},[]),m.jsxs(m.Fragment,{children:[o&&!b()&&!i&&m.jsxs("div",{className:`fixed z-50 transition-all duration-300 ${l?"top-0 right-0 p-2 bg-white/70 backdrop-blur-md shadow-md w-full flex justify-end":"top-4 right-4"}`,children:[m.jsxs(Ii.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"relative",children:[m.jsxs(Ii.button,{whileHover:l?{scale:1.05}:{scale:1.1},whileTap:{scale:.95},onClick:()=>e(!t),className:`flex items-center justify-center transition-all ${l?"bg-solrent-orange/90 hover:bg-solrent-orange px-4 py-2 rounded-lg text-white":"w-[44px] h-[44px] bg-solrent-orange rounded-full shadow-lg"}`,"aria-label":`Zadzwo do nas: ${n==null?void 0:n.phone_number}`,role:"button",tabIndex:0,style:{WebkitTapHighlightColor:"transparent",touchAction:"manipulation"},children:[m.jsx(bd,{className:`${l?"w-4 h-4":"w-5 h-5"} text-white`}),l&&m.jsx("span",{className:"ml-2 text-sm font-medium",children:"Kontakt"})]}),m.jsx(pc,{children:t&&m.jsx(Ii.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`absolute right-0 mt-2 bg-white rounded-lg shadow-lg p-4 ${l?"top-full":"top-[120%]"}`,children:m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:x,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors",children:[m.jsx(bd,{className:"w-5 h-5 text-solrent-orange"}),m.jsx("span",{className:"text-gray-700 font-medium whitespace-nowrap",children:n==null?void 0:n.phone_number})]}),m.jsxs("button",{onClick:v,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors",children:[m.jsx(Bd,{className:"w-5 h-5 text-solrent-orange"}),m.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.email})]})]})})})]}),t&&m.jsx("div",{className:"fixed inset-0 -z-10",onClick:()=>e(!1)})]}),!o&&!i&&m.jsx("div",{className:"fixed bottom-20 right-5 z-50 md:bottom-32",children:m.jsx(pc,{children:t?m.jsxs(Ii.div,{ref:h,initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.3,ease:"easeInOut"},className:"bg-white rounded-lg shadow-lg p-4 pr-16",children:[m.jsx("button",{onClick:()=>e(!1),className:"absolute top-2 right-2 p-1 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Zamknij panel kontaktowy",children:m.jsx(du,{className:"w-4 h-4 text-gray-500"})}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:x,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors","aria-label":`Zadzwo do nas: ${n==null?void 0:n.phone_number}`,children:[m.jsx(bd,{className:"w-5 h-5 text-solrent-orange"}),m.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.phone_number})]}),m.jsxs("button",{onClick:v,className:"flex items-center space-x-3 w-full px-4 py-2 hover:bg-gray-50 rounded-lg transition-colors","aria-label":`Wylij email: ${n==null?void 0:n.email}`,children:[m.jsx(Bd,{className:"w-5 h-5 text-solrent-orange"}),m.jsx("span",{className:"text-gray-700 font-medium",children:n==null?void 0:n.email})]})]})]}):m.jsx(Ii.button,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>e(!0),className:"w-[60px] h-[60px] bg-solrent-orange rounded-full shadow-lg flex items-center justify-center","aria-label":"Otwrz panel kontaktowy",role:"button",tabIndex:0,children:m.jsx(bd,{className:"w-6 h-6 text-white"})})})})]})},BH=async()=>{var t;try{const e=await ct.auth.getUser();if(e.error)return console.error("Bd pobierania uytkownika:",e.error),!1;const n=e.data.user;if(!n)return!1;const r=await ct.from("profiles").select("is_admin").eq("id",n.id).single();return r.error?(console.error("Bd pobierania profilu:",r.error),!1):((t=r.data)==null?void 0:t.is_admin)||!1}catch(e){return console.error("Bd podczas sprawdzania uprawnie administratora:",e),!1}},UH=async t=>{try{const{error:e}=await ct.auth.resetPasswordForEmail(t,{redirectTo:`${window.location.origin}/admin/reset-password`});if(e)throw console.error("Bd podczas wysyania linku do resetowania hasa:",e),e;return console.log("Link do resetowania hasa zosta wysany pomylnie"),!0}catch(e){throw console.error("Wyjtek podczas resetowania hasa:",e),e}},$H=async t=>{console.log("Prba aktualizacji hasa...");try{const{data:{session:e}}=await ct.auth.getSession();if(!e)throw console.error("Brak aktywnej sesji podczas prby aktualizacji hasa"),new Error("Brak aktywnej sesji. Sprbuj ponownie zresetowa haso.");console.log("Sesja uytkownika istnieje, aktualizacja hasa..."),console.log("ID uytkownika:",e.user.id),console.log("Email uytkownika:",e.user.email);const{error:n}=await ct.auth.updateUser({password:t});if(n)throw console.error("Bd podczas aktualizacji hasa:",n),console.error("Kod bdu:",n.code),console.error("Wiadomo bdu:",n.message),console.error("Status bdu:",n.status),n;return console.log("Haso zostao pomylnie zaktualizowane"),!0}catch(e){throw console.error("Wyjtek podczas aktualizacji hasa:",e),e}},WH=t=>{const e=[];return t.length<8&&e.push("Haso musi mie co najmniej 8 znakw"),/[A-Z]/.test(t)||e.push("Haso musi zawiera co najmniej jedn wielk liter"),/[0-9]/.test(t)||e.push("Haso musi zawiera co najmniej jedn cyfr"),e},VH=({onSubmit:t,error:e,isLoading:n,isLocked:r})=>{const[i,s]=Y.useState(""),[o,a]=Y.useState(""),l=async c=>{c.preventDefault(),await t(i,o)};return m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:l,children:[m.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email"}),m.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:c=>s(c.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Adres email",disabled:n||r})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"password",className:"sr-only",children:"Haso"}),m.jsx(y5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:o,onChange:c=>a(c.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Haso",disabled:n||r})]})]}),e&&m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(hc,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Bd logowania"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:e})})]})]})}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:n||r,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n||r?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-solrent-orange"}`,children:n?m.jsxs("span",{className:"flex items-center",children:[m.jsx(b0,{className:"w-5 h-5 mr-2 animate-spin"}),"Logowanie..."]}):r?"Konto tymczasowo zablokowane":"Zaloguj si"})}),m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("div",{className:"text-sm",children:m.jsx(Y6,{to:"/admin/forgot-password",className:"font-medium text-solrent-orange hover:text-orange-700",children:"Zapomniae hasa?"})})})]})},HH=5,qH=15*60*1e3,GH=({onLogin:t})=>{const[e,n]=Y.useState(""),[r,i]=Y.useState(!1),[s,o]=Y.useState(0),[a,l]=Y.useState(null),[c,u]=Y.useState("checking");Y.useEffect(()=>{d();const y=localStorage.getItem("adminLoginLockout");if(y){const x=parseInt(y);x>Date.now()?l(x):(localStorage.removeItem("adminLoginLockout"),o(0))}},[]);const d=async()=>{u("checking");const y=await N3();u(y?"connected":"disconnected")},h=()=>{const y=s+1;if(o(y),y>=HH){const x=Date.now()+qH;l(x),localStorage.setItem("adminLoginLockout",x.toString())}},p=async(y,x)=>{var v,b,S,k,T,j,P,C,N,L;if(n(""),c==="disconnected"&&(await d(),c==="disconnected")){n("Brak poczenia z serwerem. Sprawd poczenie internetowe i sprbuj ponownie.");return}if(a&&a>Date.now()){const R=Math.ceil((a-Date.now())/6e4);n(`Zbyt wiele nieudanych prb. Sprbuj ponownie za ${R} minut.`);return}i(!0);try{if(!await N3())throw new Error("Problem z poczeniem do bazy danych. Sprawd poczenie internetowe i sprbuj ponownie za chwil.");let D;try{D=await G9(()=>ct.auth.signInWithPassword({email:y,password:x}))}catch(Z){throw console.error("Bd logowania:",Z),(v=Z.message)!=null&&v.includes("Database error")||(b=Z.message)!=null&&b.includes("querying schema")||(S=Z.message)!=null&&S.includes("Internal Server Error")?new Error("Problem z poczeniem do bazy danych. Sprbuj ponownie za chwil."):Z}const{data:M,error:H}=D;if(H)throw(k=H.message)!=null&&k.includes("Database error")||(T=H.message)!=null&&T.includes("querying schema")||(j=H.message)!=null&&j.includes("Internal Server Error")?new Error("Problem z poczeniem do bazy danych. Sprbuj ponownie za chwil."):(P=H.message)!=null&&P.includes("Invalid login credentials")?new Error("Nieprawidowy email lub haso. Sprawd dane i sprbuj ponownie."):H;if(!M.user)throw new Error("Nie znaleziono uytkownika");try{if(!await BH())throw await ct.auth.signOut(),new Error("Brak uprawnie administratora. Skontaktuj si z administratorem systemu.")}catch(Z){throw console.error("Bd sprawdzania uprawnie administratora:",Z),await ct.auth.signOut(),(C=Z.message)!=null&&C.includes("Database error")||(N=Z.message)!=null&&N.includes("querying schema")||(L=Z.message)!=null&&L.includes("Internal Server Error")?new Error("Problem z poczeniem do bazy danych. Sprbuj ponownie za chwil."):new Error("Problem z weryfikacj uprawnie. Sprbuj ponownie pniej.")}o(0),t()}catch(R){console.error("Bd podczas logowania:",R);let D=R.message||"Wystpi bd podczas logowania. Sprbuj ponownie.";(D.includes("Database error")||D.includes("querying schema")||D.includes("Internal Server Error"))&&(D="Problem z poczeniem do bazy danych. Sprbuj ponownie za chwil."),D.includes("Nieprawidowy email lub haso")&&h(),n(D)}finally{i(!1)}};return m.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Panel Administracyjny"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Zaloguj si aby zarzdza systemem"}),c==="disconnected"&&m.jsxs("div",{className:"mt-2 bg-yellow-50 p-2 rounded text-sm text-yellow-700 text-center",children:["Problem z poczeniem z serwerem.",m.jsx("button",{className:"ml-2 underline",onClick:d,children:"Sprawd ponownie"})]})]}),m.jsx(VH,{onSubmit:p,error:e,isLoading:r||c==="checking",isLocked:!!a&&a>Date.now(),connectionStatus:c})]})})},KH=({onSubmit:t,error:e,isLoading:n,success:r})=>{const[i,s]=Y.useState(""),o=async a=>{a.preventDefault(),await t(i)};return r?m.jsxs("div",{className:"rounded-md bg-green-50 p-6 text-center",children:[m.jsx(ac,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-green-800 mb-2",children:"Link do resetowania hasa zosta wysany"}),m.jsx("p",{className:"text-green-700",children:"Sprawd swoj skrzynk email i postpuj zgodnie z instrukcjami, aby zresetowa haso."})]}):m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:o,children:[m.jsx("div",{className:"rounded-md shadow-sm",children:m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"email",className:"sr-only",children:"Adres email"}),m.jsx(Bd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:i,onChange:a=>s(a.target.value),className:"appearance-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Adres email",disabled:n})]})}),e&&m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(hc,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Bd resetowania hasa"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:e})})]})]})}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:n,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700"}`,children:n?"Wysyanie...":"Wylij link resetujcy"})}),m.jsx("div",{className:"text-center mt-4",children:m.jsx(Y6,{to:"/admin",className:"text-sm text-solrent-orange hover:text-orange-700",children:"Powrt do strony logowania"})})]})},XH=()=>{const[t,e]=Y.useState(null),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),o=async a=>{e(null),r(!0);try{await UH(a),s(!0)}catch(l){console.error("Bd resetowania hasa:",l),l instanceof Error?e(`Nie udao si wysa linku resetujcego: ${l.message}`):e("Nie udao si wysa linku resetujcego. Sprbuj ponownie.")}finally{r(!1)}};return m.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Resetowanie hasa"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Podaj swj adres email, aby otrzyma link do resetowania hasa"})]}),m.jsx(KH,{onSubmit:o,error:t,isLoading:n,success:i})]})})},YH=({onSubmit:t,error:e,isLoading:n,success:r,successMessage:i="Haso zostao zmienione"})=>{const[s,o]=Y.useState(""),[a,l]=Y.useState(""),[c,u]=Y.useState(null),d=async h=>{if(h.preventDefault(),u(null),s!==a){u("Hasa nie s identyczne");return}const p=WH(s);if(p.length>0){u(p.join(`
`));return}await t(s)};return r?m.jsxs("div",{className:"rounded-md bg-green-50 p-6 text-center",children:[m.jsx(ac,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-green-800 mb-2",children:i}),m.jsx("p",{className:"text-green-700",children:"Za chwil zostaniesz przekierowany do strony logowania."})]}):m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[m.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"new-password",className:"sr-only",children:"Nowe haso"}),m.jsx(y5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{id:"new-password",name:"new-password",type:"password",required:!0,value:s,onChange:h=>o(h.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Nowe haso"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Potwierd haso"}),m.jsx(y5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),m.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",required:!0,value:a,onChange:h=>l(h.target.value),className:"appearance-none rounded-none relative block w-full px-12 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-solrent-orange focus:border-solrent-orange focus:z-10 sm:text-sm",placeholder:"Potwierd haso"})]})]}),(e||c)&&m.jsx("div",{className:"rounded-md bg-red-50 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx(hc,{className:"h-5 w-5 text-red-400"})}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Bd zmiany hasa"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("p",{children:e||c})})]})]})}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:n,className:`group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n?"bg-gray-400 cursor-not-allowed":"bg-solrent-orange hover:bg-orange-700"}`,children:n?"Zapisywanie...":"Zmie haso"})}),m.jsx("div",{className:"text-center mt-4",children:m.jsx("a",{href:"/admin",className:"text-sm text-solrent-orange hover:text-orange-700",children:"Powrt do strony logowania"})})]})},JH=()=>{const[t,e]=Y.useState(null),[n,r]=Y.useState(!1),[i,s]=Y.useState(!1),[o,a]=Y.useState(!1),[l,c]=Y.useState(null),u=ua(),d=El();Y.useEffect(()=>{(async()=>{try{console.log("Rozpoczynam sprawdzanie sesji..."),console.log("URL:",window.location.href),console.log("Hash:",d.hash),console.log("Search params:",d.search);const y=d.hash,x=new URLSearchParams(d.search);if(y){console.log("Znaleziono hash w URL");const T=new URLSearchParams(y.substring(1)),j=T.get("access_token"),P=T.get("refresh_token"),C=T.get("type");if(console.log("Parametry z hash:",{accessToken:j?"istnieje":"brak",refreshToken:P?"istnieje":"brak",type:C}),j&&P&&C==="recovery"){console.log("Ustawianie sesji na podstawie tokenw z hash...");try{const{error:N}=await ct.auth.setSession({access_token:j,refresh_token:P});N?(console.error("Bd podczas ustawiania sesji z hash:",N),c(`Bd sesji (hash): ${N.message}`)):console.log("Sesja ustawiona pomylnie z hash")}catch(N){console.error("Wyjtek podczas ustawiania sesji z hash:",N),c(`Wyjtek sesji (hash): ${N instanceof Error?N.message:String(N)}`)}}}const v=x.get("token"),b=x.get("type");if(v){console.log("Znaleziono token w query string:",b);try{const{error:T}=await ct.auth.verifyOtp({token_hash:v,type:b||"recovery"});T?(console.error("Bd podczas weryfikacji tokena z URL:",T),c(`Bd weryfikacji tokena: ${T.message}`)):console.log("Token z URL zweryfikowany pomylnie")}catch(T){console.error("Wyjtek podczas weryfikacji tokena z URL:",T),c(`Wyjtek weryfikacji tokena: ${T instanceof Error?T.message:String(T)}`)}}const{data:{session:S},error:k}=await ct.auth.getSession();k&&(console.error("Bd podczas pobierania sesji:",k),c(`Bd pobierania sesji: ${k.message}`)),console.log("Sesja uytkownika:",S?"Istnieje":"Brak"),S&&(console.log("ID uytkownika:",S.user.id),console.log("Email uytkownika:",S.user.email)),S||e("Brak aktywnej sesji. Link do resetowania hasa mg wygasn. Sprbuj ponownie zresetowa haso."),a(!0)}catch(y){console.error("Bd podczas sprawdzania sesji:",y),e("Wystpi bd podczas weryfikacji sesji. Sprbuj ponownie zresetowa haso."),c(`Wyjtek gwny: ${y instanceof Error?y.message:String(y)}`),a(!0)}})()},[d]);const h=async p=>{r(!0);try{console.log("Rozpoczynam aktualizacj hasa..."),await $H(p),console.log("Haso zaktualizowane pomylnie"),s(!0),setTimeout(()=>{u("/admin")},3e3)}catch(y){console.error("Bd podczas zmiany hasa:",y),y instanceof Error?e(`Nie udao si zmieni hasa: ${y.message}`):e("Nie udao si zmieni hasa. Sprbuj ponownie.")}finally{r(!1)}};return o?m.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Zmiana hasa"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Wprowad nowe haso"})]}),m.jsx(YH,{onSubmit:h,error:t,isLoading:n,success:i}),l&&m.jsxs("div",{className:"rounded-md bg-blue-50 p-4 text-xs",children:[m.jsx("p",{className:"text-blue-800",children:"Informacje diagnostyczne:"}),m.jsx("p",{className:"text-blue-700 break-all",children:l})]})]})}):m.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-600",children:"Weryfikacja sesji..."})]})})})},ZH=({onLogout:t})=>{const[e,n]=Y.useState(!1),[r,i]=Y.useState(window.innerWidth<768),[s,o]=Y.useState(0),[a,l]=Y.useState(!1),c=El(),u=ua();Y.useEffect(()=>{const p=()=>{const y=window.innerWidth<768;i(y),y||l(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]),Y.useEffect(()=>{d();const p=ct.channel("reservation_changes").on("postgres_changes",{event:"*",schema:"public",table:"reservations",filter:"status=eq.pending"},()=>d()).subscribe();return()=>{p.unsubscribe()}},[]);const d=async()=>{try{const{count:p,error:y}=await ct.from("reservations").select("*",{count:"exact",head:!0}).eq("status","pending");if(y)throw y;o(p||0)}catch(p){console.error("Error loading pending count:",p)}},h=[{path:"dashboard",icon:Qs,title:"Dashboard"},{path:"reservations",icon:kl,title:"Rezerwacje",badge:s>0?s:void 0},{path:"crm",icon:rS,title:"CRM"},{path:"customers",icon:eP,title:"Klienci"},{path:"equipment",icon:Qs,title:"Produkty"},{path:"equipment-stats",icon:nS,title:"Statystyki sprztu"},{path:"calendar",icon:kl,title:"Kalendarz"},{path:"statistics",icon:Z6,title:"Statystyki wypoycze"},{path:"advertisements",icon:Uv,title:"Reklamy"}];return m.jsxs("div",{className:"min-h-screen bg-gray-100",children:[m.jsx("header",{className:`bg-white shadow fixed top-0 right-0 left-0 z-30 transition-all duration-300 ${r?"ml-0":e?"ml-16":"ml-64"}`,children:m.jsxs("div",{className:"flex justify-between items-center h-[73px] px-4",children:[r&&m.jsx("button",{onClick:()=>l(!a),className:"p-2 rounded-lg hover:bg-gray-100",children:m.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:a?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})}),m.jsx("div",{className:"flex justify-between items-center",children:m.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 ml-2",children:"Panel Administracyjny"})}),m.jsx("div",{children:m.jsx("button",{onClick:t,className:"px-3 py-1.5 md:px-4 md:py-2 bg-red-600 text-white text-sm md:text-base rounded hover:bg-red-700",children:"Wyloguj"})})]})}),m.jsxs("div",{className:"flex h-screen pt-[73px]",children:[m.jsxs("nav",{className:`fixed left-0 top-0 h-full bg-white shadow-lg transition-all duration-300 ease-in-out z-40
          ${r?`w-64 ${a?"translate-x-0":"-translate-x-full"}`:`${e?"w-16":"w-64"}`}`,children:[m.jsx("div",{className:"h-[73px] flex items-center justify-center border-b",children:m.jsx("img",{src:"/assets/solrent-logo.png",alt:"SOLRENT Logo",className:`h-12 object-contain transition-all duration-300 ${!r&&e?"scale-75":""}`})}),!r&&m.jsx("button",{onClick:()=>n(!e),className:"absolute -right-3 top-20 bg-white rounded-full p-1.5 shadow-lg border","aria-label":e?"Rozwi menu":"Zwi menu",children:m.jsx(Bv,{className:`w-4 h-4 text-gray-600 transition-transform duration-300 ${e?"rotate-180":""}`})}),m.jsx("div",{className:"space-y-1 p-4",children:h.map(p=>m.jsx(QH,{icon:p.icon,title:p.title,active:c.pathname.includes(`/admin/panel/${p.path}`),onClick:()=>{u(`/admin/panel/${p.path}`),r&&l(!1)},collapsed:!r&&e,badge:p.badge},p.path))})]}),r&&a&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>l(!1)}),m.jsx("main",{className:`flex-1 bg-white rounded-lg shadow-lg p-4 md:p-6 lg:p-8 transition-all duration-300 overflow-auto mt-4
          ${r?"ml-0":e?"ml-16":"ml-64"}`,children:m.jsx(tz,{})})]})]})},QH=({icon:t,title:e,active:n,onClick:r,collapsed:i=!1,badge:s})=>m.jsxs("button",{onClick:r,className:`w-full flex items-center ${i?"justify-center":"justify-start px-3"} py-3 md:py-2 rounded-lg transition-all duration-300 ${n?"bg-solrent-orange text-white":"text-gray-600 hover:bg-gray-100"}`,title:i?e:void 0,children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[m.jsx(t,{className:"w-5 h-5"}),s!==void 0&&m.jsx("span",{className:`absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 ${i?"scale-90":""}`,children:s})]}),!i&&m.jsx("span",{className:"ml-3 whitespace-nowrap text-sm md:text-base",children:e})]}),wy=({icon:t,title:e,value:n,description:r,trend:i,percentage:s})=>m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(t,{className:"w-6 h-6 text-gray-500 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),m.jsx("div",{className:"text-2xl font-semibold",children:n})]})]}),i&&m.jsxs("div",{className:`flex items-center ${i==="up"?"text-green-500":"text-red-500"}`,children:[i==="up"?m.jsx(kx,{className:"w-4 h-4"}):m.jsx(xz,{className:"w-4 h-4"}),m.jsxs("span",{className:"text-sm ml-1",children:[s,"%"]})]})]}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r})]}),eq=()=>{var o;const t=ua(),[e,n]=Y.useState({totalEquipment:0,activeReservations:0,pendingReservations:0,totalCustomers:0,maintenanceNeeded:0,totalRevenue:0,returningCustomers:0,averageRental:0,popularEquipment:[],recentReservations:[]}),[r,i]=Y.useState(null);Y.useEffect(()=>{s()},[]);const s=async()=>{try{const{data:a}=await ct.from("reservations").select(`
          id,
          end_date,
          customers (
            first_name,
            last_name
          ),
          reservation_items (
            equipment (
              name
            )
          )
        `).in("status",["confirmed","picked_up"]).gte("end_date",new Date().toISOString()).lte("end_date",new Date(Date.now()+6048e5).toISOString()).order("end_date",{ascending:!0}),l=a==null?void 0:a.map(x=>{var b;const v=Math.ceil((new Date(x.end_date).getTime()-Date.now())/864e5);return{id:x.id,reservation_id:x.id,customer_name:`${x.customers.first_name} ${x.customers.last_name}`,equipment_name:(b=x.reservation_items[0])==null?void 0:b.equipment.name,days_left:v}}),{data:c}=await ct.from("equipment").select("id"),{data:u}=await ct.from("reservations").select("id").in("status",["confirmed"]),{data:d}=await ct.from("reservations").select(`
          id,
          created_at,
          start_date,
          end_date,
          total_price,
          status,
          customer:customers (
            first_name,
            last_name
          ),
          items:reservation_items (
            equipment:equipment (
              name
            ),
            quantity
          ),
          total_price
        `).eq("status","pending").is("is_reversed",!1).order("created_at",{ascending:!1}).limit(10),{data:h}=await ct.from("customers").select("id"),{data:p}=await ct.from("maintenance_logs").select("id").eq("status","planned"),{data:y}=await ct.from("financial_transactions").select("amount").eq("status","completed").eq("transaction_type","payment");n(x=>({...x,totalEquipment:(c==null?void 0:c.length)||0,activeReservations:(u==null?void 0:u.length)||0,pendingReservations:(d==null?void 0:d.length)||0,recentReservations:d||[],totalCustomers:(h==null?void 0:h.length)||0,maintenanceNeeded:(p==null?void 0:p.length)||0,totalRevenue:(y==null?void 0:y.reduce((v,b)=>v+(b.amount||0),0))||0,upcomingReturns:l||[]}))}catch(a){console.error("Error loading stats:",a),i("Nie udao si zaadowa statystyk")}};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[m.jsx(wy,{icon:Qs,title:"Aktywne rezerwacje",value:e.activeReservations,description:"Obecnie wypoyczony sprzt",trend:"up",percentage:8}),m.jsx(wy,{icon:Q6,title:"Przychd miesiczny",value:`${e.totalRevenue.toFixed(2)} z`,description:"Wzrost o 20% m/m",trend:"up",percentage:20}),m.jsx(wy,{icon:Bz,title:"Stali klienci",value:`${e.returningCustomers}`,description:`${e.totalCustomers>0?(e.returningCustomers/e.totalCustomers*100).toFixed(1):"0"}% wszystkich klientw`,trend:"up",percentage:15}),m.jsx(wy,{icon:Oz,title:"Sprzt do przegldu",value:e.maintenanceNeeded,description:"Zaplanowane przegldy",trend:"down",percentage:5})]}),m.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Rezerwacje w czasie"}),m.jsxs("select",{className:"px-3 py-1 border rounded-lg text-sm",children:[m.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),m.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),m.jsx("option",{value:"90days",children:"Ostatnie 90 dni"})]})]}),m.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Tutaj bdzie wykres"})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Najpopularniejszy sprzt"}),m.jsx(nS,{className:"w-5 h-5 text-green-500"})]}),m.jsx("div",{className:"space-y-4",children:e.popularEquipment.map((a,l)=>{var c,u;return m.jsxs("div",{className:"flex items-center",children:[m.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[l+1,"."]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:((c=a.equipment)==null?void 0:c.name)||a.name}),m.jsxs("div",{className:"text-sm text-gray-500",children:[a.count," wypoycze"]})]}),m.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-green-500",style:{width:`${(u=e.popularEquipment[0])!=null&&u.count?a.count/e.popularEquipment[0].count*100:0}%`}})})]},a.id)})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Statystyki klientw"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-500",children:"Nowi klienci (30 dni)"}),m.jsx("span",{className:"text-lg font-medium text-gray-900",children:"24"})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-500",children:"redni czas wynajmu"}),m.jsxs("span",{className:"text-lg font-medium text-gray-900",children:[e.averageRental.toFixed(1)," dni"]})]}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm text-gray-500",children:"Wskanik powrotw"}),m.jsx("span",{className:"text-lg font-medium text-gray-900",children:"68%"})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Zbliajce si zwroty"}),m.jsxs("div",{className:"space-y-3",children:[(o=e.upcomingReturns)==null?void 0:o.map(a=>m.jsxs("div",{className:"flex items-center justify-between hover:bg-gray-50 p-2 rounded-lg cursor-pointer",onClick:()=>t(`/admin/panel/reservations/${a.reservation_id}`),children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:a.customer_name}),m.jsx("div",{className:"text-sm text-gray-500",children:a.equipment_name})]}),m.jsx("div",{className:`text-sm ${a.days_left<=1?"text-red-600":a.days_left<=3?"text-orange-600":"text-green-600"}`,children:a.days_left===0?"Dzisiaj":a.days_left===1?"Jutro":`Za ${a.days_left} dni`})]},a.id)),(!e.upcomingReturns||e.upcomingReturns.length===0)&&m.jsx("p",{className:"text-center text-gray-500",children:"Brak zbliajcych si zwrotw"})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Ostatnie aktywnoci",e.recentReservations.length>0&&m.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",e.recentReservations.length,")"]})]}),m.jsxs("div",{className:"space-y-4",children:[e.recentReservations.map(a=>m.jsx("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>t(`/admin/panel/reservations/${a.id}`,{state:{from:"/admin/panel/dashboard"}}),children:m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-medium text-gray-900",children:[a.customer.first_name," ",a.customer.last_name]}),m.jsx("div",{className:"text-sm text-gray-600",children:a.items.map(l=>`${l.equipment.name} (${l.quantity}x)`).join(", ")}),m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(a.created_at).toLocaleString("pl-PL")})]}),m.jsx("div",{className:"text-right",children:m.jsxs("div",{className:"font-medium text-solrent-orange",children:[a.total_price," z"]})})]})},a.id)),e.recentReservations.length===0&&m.jsx("p",{className:"text-center text-gray-500",children:"Brak nowych rezerwacji"})]})]})]})]})},Xv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function C0(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function WS(t){return"nodeType"in t}function oo(t){var e,n;return t?C0(t)?t:WS(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function VS(t){const{Document:e}=oo(t);return t instanceof e}function p1(t){return C0(t)?!1:t instanceof oo(t).HTMLElement}function QD(t){return t instanceof oo(t).SVGElement}function E0(t){return t?C0(t)?t.document:WS(t)?VS(t)?t:p1(t)||QD(t)?t.ownerDocument:document:document:document}const pu=Xv?Y.useLayoutEffect:Y.useEffect;function Yv(t){const e=Y.useRef(t);return pu(()=>{e.current=t}),Y.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function tq(){const t=Y.useRef(null),e=Y.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=Y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function eO(t,e){e===void 0&&(e=[t]);const n=Y.useRef(t);return pu(()=>{n.current!==t&&(n.current=t)},e),n}function m1(t,e){const n=Y.useRef();return Y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function nq(t){const e=Yv(t),n=Y.useRef(null),r=Y.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Rx(t){const e=Y.useRef();return Y.useEffect(()=>{e.current=t},[t]),e.current}let Gw={};function HS(t,e){return Y.useMemo(()=>{if(e)return e;const n=Gw[t]==null?0:Gw[t]+1;return Gw[t]=n,t+"-"+n},[t,e])}function tO(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+t*c)}return s},{...e})}}const Gp=tO(1),Eg=tO(-1);function rq(t){return"clientX"in t&&"clientY"in t}function qS(t){if(!t)return!1;const{KeyboardEvent:e}=oo(t.target);return e&&t instanceof e}function iq(t){if(!t)return!1;const{TouchEvent:e}=oo(t.target);return e&&t instanceof e}function Fx(t){if(iq(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return rq(t)?{x:t.clientX,y:t.clientY}:null}const Ag=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ag.Translate.toString(t),Ag.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),GC="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function sq(t){return t.matches(GC)?t:t.querySelector(GC)}const oq={display:"none"};function aq(t){let{id:e,value:n}=t;return Pt.createElement("div",{id:e,style:oq},n)}function lq(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Pt.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function cq(){const[t,e]=Y.useState("");return{announce:Y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const nO=Y.createContext(null);function uq(t){const e=Y.useContext(nO);Y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function dq(){const[t]=Y.useState(()=>new Set),e=Y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[Y.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const fq={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},hq={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function pq(t){let{announcements:e=hq,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=fq}=t;const{announce:s,announcement:o}=cq(),a=HS("DndLiveRegion"),[l,c]=Y.useState(!1);if(Y.useEffect(()=>{c(!0)},[]),uq(Y.useMemo(()=>({onDragStart(d){let{active:h}=d;s(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;e.onDragMove&&s(e.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;s(e.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;s(e.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;s(e.onDragCancel({active:h,over:p}))}}),[s,e])),!l)return null;const u=Pt.createElement(Pt.Fragment,null,Pt.createElement(aq,{id:r,value:i.draggable}),Pt.createElement(lq,{id:a,announcement:o}));return n?nu.createPortal(u,n):u}var Ds;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ds||(Ds={}));function zx(){}function KC(t,e){return Y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function mq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Nl=Object.freeze({x:0,y:0});function gq(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function yq(t,e){const n=Fx(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function xq(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function vq(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function XC(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function rO(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}const iO=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=XC(e),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=XC(l),u=i.reduce((h,p,y)=>h+gq(c[y],p),0),d=Number((u/4).toFixed(4));s.push({id:a,data:{droppableContainer:o,value:d}})}}return s.sort(xq)};function wq(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const bq=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=wq(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(vq)};function _q(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function sO(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Nl}function Sq(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const kq=Sq(1);function oO(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Nq(t,e,n){const r=oO(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const Cq={ignoreTransform:!1};function g1(t,e){e===void 0&&(e=Cq);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=oo(t).getComputedStyle(t);c&&(n=Nq(n,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function YC(t){return g1(t,{ignoreTransform:!0})}function Eq(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function Aq(t,e){return e===void 0&&(e=oo(t).getComputedStyle(t)),e.position==="fixed"}function Tq(t,e){e===void 0&&(e=oo(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Jv(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(VS(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!p1(i)||QD(i)||n.includes(i))return n;const s=oo(t).getComputedStyle(i);return i!==t&&Tq(i,s)&&n.push(i),Aq(i,s)?n:r(i.parentNode)}return t?r(t):n}function aO(t){const[e]=Jv(t,1);return e??null}function Kw(t){return!Xv||!t?null:C0(t)?t:WS(t)?VS(t)||t===E0(t).scrollingElement?window:p1(t)?t:null:null}function lO(t){return C0(t)?t.scrollX:t.scrollLeft}function cO(t){return C0(t)?t.scrollY:t.scrollTop}function W5(t){return{x:lO(t),y:cO(t)}}var Li;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Li||(Li={}));function uO(t){return!Xv||!t?!1:t===document.scrollingElement}function dO(t){const e={x:0,y:0},n=uO(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const jq={x:.2,y:.2};function Pq(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=jq);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=dO(t),p={x:0,y:0},y={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+x.height?(p.y=Li.Backward,y.y=r*Math.abs((e.top+x.height-s)/x.height)):!u&&l>=e.bottom-x.height&&(p.y=Li.Forward,y.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!h&&a>=e.right-x.width?(p.x=Li.Forward,y.x=r*Math.abs((e.right-x.width-a)/x.width)):!d&&o<=e.left+x.width&&(p.x=Li.Backward,y.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:p,speed:y}}function Dq(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function fO(t){return t.reduce((e,n)=>Gp(e,W5(n)),Nl)}function Oq(t){return t.reduce((e,n)=>e+lO(n),0)}function Lq(t){return t.reduce((e,n)=>e+cO(n),0)}function hO(t,e){if(e===void 0&&(e=g1),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);aO(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Mq=[["x",["left","right"],Oq],["y",["top","bottom"],Lq]];class GS{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Jv(n),i=fO(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of Mq)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Gm{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Iq(t){const{EventTarget:e}=oo(t);return t instanceof e?t:E0(t)}function Xw(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Ia;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ia||(Ia={}));function JC(t){t.preventDefault()}function Rq(t){t.stopPropagation()}var Ln;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ln||(Ln={}));const pO={start:[Ln.Space,Ln.Enter],cancel:[Ln.Esc],end:[Ln.Space,Ln.Enter,Ln.Tab]},Fq=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ln.Right:return{...n,x:n.x+25};case Ln.Left:return{...n,x:n.x-25};case Ln.Down:return{...n,y:n.y+25};case Ln.Up:return{...n,y:n.y-25}}};class KS{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Gm(E0(n)),this.windowListeners=new Gm(oo(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ia.Resize,this.handleCancel),this.windowListeners.add(Ia.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ia.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&hO(r),n(Nl)}handleKeyDown(e){if(qS(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=pO,coordinateGetter:o=Fq,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Nl;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const h=Eg(d,u),p={x:0,y:0},{scrollableAncestors:y}=r.current;for(const x of y){const v=e.code,{isTop:b,isRight:S,isLeft:k,isBottom:T,maxScroll:j,minScroll:P}=dO(x),C=Dq(x),N={x:Math.min(v===Ln.Right?C.right-C.width/2:C.right,Math.max(v===Ln.Right?C.left:C.left+C.width/2,d.x)),y:Math.min(v===Ln.Down?C.bottom-C.height/2:C.bottom,Math.max(v===Ln.Down?C.top:C.top+C.height/2,d.y))},L=v===Ln.Right&&!S||v===Ln.Left&&!k,R=v===Ln.Down&&!T||v===Ln.Up&&!b;if(L&&N.x!==d.x){const D=x.scrollLeft+h.x,M=v===Ln.Right&&D<=j.x||v===Ln.Left&&D>=P.x;if(M&&!h.y){x.scrollTo({left:D,behavior:a});return}M?p.x=x.scrollLeft-D:p.x=v===Ln.Right?x.scrollLeft-j.x:x.scrollLeft-P.x,p.x&&x.scrollBy({left:-p.x,behavior:a});break}else if(R&&N.y!==d.y){const D=x.scrollTop+h.y,M=v===Ln.Down&&D<=j.y||v===Ln.Up&&D>=P.y;if(M&&!h.x){x.scrollTo({top:D,behavior:a});return}M?p.y=x.scrollTop-D:p.y=v===Ln.Down?x.scrollTop-j.y:x.scrollTop-P.y,p.y&&x.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,Gp(Eg(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}KS.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=pO,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function ZC(t){return!!(t&&"distance"in t)}function QC(t){return!!(t&&"delay"in t)}class XS{constructor(e,n,r){var i;r===void 0&&(r=Iq(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=E0(o),this.documentListeners=new Gm(this.document),this.listeners=new Gm(r),this.windowListeners=new Gm(oo(o)),this.initialCoordinates=(i=Fx(s))!=null?i:Nl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ia.Resize,this.handleCancel),this.windowListeners.add(Ia.DragStart,JC),this.windowListeners.add(Ia.VisibilityChange,this.handleCancel),this.windowListeners.add(Ia.ContextMenu,JC),this.documentListeners.add(Ia.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(QC(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ZC(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ia.Click,Rq,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ia.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=Fx(e))!=null?n:Nl,c=Eg(i,l);if(!r&&a){if(ZC(a)){if(a.tolerance!=null&&Xw(c,a.tolerance))return this.handleCancel();if(Xw(c,a.distance))return this.handleStart()}if(QC(a)&&Xw(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ln.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const zq={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class YS extends XS{constructor(e){const{event:n}=e,r=E0(n.target);super(e,zq,r)}}YS.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Bq={move:{name:"mousemove"},end:{name:"mouseup"}};var V5;(function(t){t[t.RightClick=2]="RightClick"})(V5||(V5={}));class Uq extends XS{constructor(e){super(e,Bq,E0(e.event.target))}}Uq.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===V5.RightClick?!1:(r==null||r({event:n}),!0)}}];const Yw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $q extends XS{constructor(e){super(e,Yw)}static setup(){return window.addEventListener(Yw.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Yw.move.name,e)};function e(){}}}$q.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Km;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Km||(Km={}));var Bx;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bx||(Bx={}));function Wq(t){let{acceleration:e,activator:n=Km.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=Bx.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=t;const p=Hq({delta:d,disabled:!s}),[y,x]=tq(),v=Y.useRef({x:0,y:0}),b=Y.useRef({x:0,y:0}),S=Y.useMemo(()=>{switch(n){case Km.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Km.DraggableRect:return i}},[n,i,l]),k=Y.useRef(null),T=Y.useCallback(()=>{const P=k.current;if(!P)return;const C=v.current.x*b.current.x,N=v.current.y*b.current.y;P.scrollBy(C,N)},[]),j=Y.useMemo(()=>a===Bx.TreeOrder?[...c].reverse():c,[a,c]);Y.useEffect(()=>{if(!s||!c.length||!S){x();return}for(const P of j){if((r==null?void 0:r(P))===!1)continue;const C=c.indexOf(P),N=u[C];if(!N)continue;const{direction:L,speed:R}=Pq(P,N,S,e,h);for(const D of["x","y"])p[D][L[D]]||(R[D]=0,L[D]=0);if(R.x>0||R.y>0){x(),k.current=P,y(T,o),v.current=R,b.current=L;return}}v.current={x:0,y:0},b.current={x:0,y:0},x()},[e,T,r,x,s,o,JSON.stringify(S),JSON.stringify(p),y,c,j,u,JSON.stringify(h)])}const Vq={x:{[Li.Backward]:!1,[Li.Forward]:!1},y:{[Li.Backward]:!1,[Li.Forward]:!1}};function Hq(t){let{delta:e,disabled:n}=t;const r=Rx(e);return m1(i=>{if(n||!r||!i)return Vq;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Li.Backward]:i.x[Li.Backward]||s.x===-1,[Li.Forward]:i.x[Li.Forward]||s.x===1},y:{[Li.Backward]:i.y[Li.Backward]||s.y===-1,[Li.Forward]:i.y[Li.Forward]||s.y===1}}},[n,e,r])}function qq(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return m1(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function Gq(t,e){return Y.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Tg;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Tg||(Tg={}));var H5;(function(t){t.Optimized="optimized"})(H5||(H5={}));const eE=new Map;function Kq(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=Y.useState(null),{frequency:a,measure:l,strategy:c}=i,u=Y.useRef(t),d=v(),h=eO(d),p=Y.useCallback(function(b){b===void 0&&(b=[]),!h.current&&o(S=>S===null?b:S.concat(b.filter(k=>!S.includes(k))))},[h]),y=Y.useRef(null),x=m1(b=>{if(d&&!n)return eE;if(!b||b===eE||u.current!==t||s!=null){const S=new Map;for(let k of t){if(!k)continue;if(s&&s.length>0&&!s.includes(k.id)&&k.rect.current){S.set(k.id,k.rect.current);continue}const T=k.node.current,j=T?new GS(l(T),T):null;k.rect.current=j,j&&S.set(k.id,j)}return S}return b},[t,s,n,d,l]);return Y.useEffect(()=>{u.current=t},[t]),Y.useEffect(()=>{d||p()},[n,d]),Y.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),Y.useEffect(()=>{d||typeof a!="number"||y.current!==null||(y.current=setTimeout(()=>{p(),y.current=null},a))},[a,d,p,...r]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:s!=null};function v(){switch(c){case Tg.Always:return!1;case Tg.BeforeDragging:return n;default:return!n}}}function JS(t,e){return m1(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Xq(t,e){return JS(t,e)}function Yq(t){let{callback:e,disabled:n}=t;const r=Yv(e),i=Y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return Y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ZS(t){let{callback:e,disabled:n}=t;const r=Yv(e),i=Y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return Y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Jq(t){return new GS(g1(t),t)}function tE(t,e,n){e===void 0&&(e=Jq);const[r,i]=Y.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=Yq({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=ZS({callback:s});return pu(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function Zq(t){const e=JS(t);return sO(t,e)}const nE=[];function Qq(t){const e=Y.useRef(t),n=m1(r=>t?r&&r!==nE&&t&&e.current&&t.parentNode===e.current.parentNode?r:Jv(t):nE,[t]);return Y.useEffect(()=>{e.current=t},[t]),n}function eG(t){const[e,n]=Y.useState(null),r=Y.useRef(t),i=Y.useCallback(s=>{const o=Kw(s.target);o&&n(a=>a?(a.set(o,W5(o)),new Map(a)):null)},[]);return Y.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=Kw(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,W5(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=Kw(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),Y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Gp(s,o),Nl):fO(t):Nl,[t,e])}function rE(t,e){e===void 0&&(e=[]);const n=Y.useRef(null);return Y.useEffect(()=>{n.current=null},e),Y.useEffect(()=>{const r=t!==Nl;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Eg(t,n.current):Nl}function tG(t){Y.useEffect(()=>{if(!Xv)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function mO(t){return Y.useMemo(()=>t?Eq(t):null,[t])}const iE=[];function nG(t,e){e===void 0&&(e=g1);const[n]=t,r=mO(n?oo(n):null),[i,s]=Y.useState(iE);function o(){s(()=>t.length?t.map(l=>uO(l)?r:new GS(e(l),l)):iE)}const a=ZS({callback:o});return pu(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function gO(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return p1(e)?e:t}function rG(t){let{measure:e}=t;const[n,r]=Y.useState(null),i=Y.useCallback(c=>{for(const{target:u}of c)if(p1(u)){r(d=>{const h=e(u);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),s=ZS({callback:i}),o=Y.useCallback(c=>{const u=gO(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?e(u):null)},[e,s]),[a,l]=nq(o);return Y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const iG=[{sensor:YS,options:{}},{sensor:KS,options:{}}],sG={current:{}},cx={draggable:{measure:YC},droppable:{measure:YC,strategy:Tg.WhileDragging,frequency:H5.Optimized},dragOverlay:{measure:g1}};class Xm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const oG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:zx},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cx,measureDroppableContainers:zx,windowRect:null,measuringScheduled:!1},yO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:zx,draggableNodes:new Map,over:null,measureDroppableContainers:zx},QS=Y.createContext(yO),xO=Y.createContext(oG);function aG(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xm}}}function lG(t,e){switch(e.type){case Ds.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ds.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Ds.DragEnd:case Ds.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ds.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Xm(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case Ds.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Xm(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case Ds.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Xm(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function cG(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=Y.useContext(QS),s=Rx(r),o=Rx(n==null?void 0:n.id);return Y.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!qS(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=sq(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function vO(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function uG(t){return Y.useMemo(()=>({draggable:{...cx.draggable,...t==null?void 0:t.draggable},droppable:{...cx.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cx.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function dG(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=Y.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;pu(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=sO(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=aO(c);h&&h.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const e4=Y.createContext({...Nl,scaleX:1,scaleY:1});var pd;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(pd||(pd={}));const fG=Y.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=iG,collisionDetection:d=bq,measuring:h,modifiers:p,...y}=e;const x=Y.useReducer(lG,void 0,aG),[v,b]=x,[S,k]=dq(),[T,j]=Y.useState(pd.Uninitialized),P=T===pd.Initialized,{draggable:{active:C,nodes:N,translate:L},droppable:{containers:R}}=v,D=C!=null?N.get(C):null,M=Y.useRef({initial:null,translated:null}),H=Y.useMemo(()=>{var fn;return C!=null?{id:C,data:(fn=D==null?void 0:D.data)!=null?fn:sG,rect:M}:null},[C,D]),W=Y.useRef(null),[Z,B]=Y.useState(null),[F,Q]=Y.useState(null),ee=eO(y,Object.values(y)),te=HS("DndDescribedBy",o),re=Y.useMemo(()=>R.getEnabled(),[R]),O=uG(h),{droppableRects:X,measureDroppableContainers:q,measuringScheduled:V}=Kq(re,{dragging:P,dependencies:[L.x,L.y],config:O.droppable}),ne=qq(N,C),ge=Y.useMemo(()=>F?Fx(F):null,[F]),ye=gr(),xe=Xq(ne,O.draggable.measure);dG({activeNode:C!=null?N.get(C):null,config:ye.layoutShiftCompensation,initialRect:xe,measure:O.draggable.measure});const Se=tE(ne,O.draggable.measure,xe),He=tE(ne?ne.parentElement:null),$e=Y.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ge=R.getNodeFor((n=$e.current.over)==null?void 0:n.id),ze=rG({measure:O.dragOverlay.measure}),Ne=(r=ze.nodeRef.current)!=null?r:ne,pe=P?(i=ze.rect)!=null?i:Se:null,qe=!!(ze.nodeRef.current&&ze.rect),Ze=Zq(qe?null:Se),Me=mO(Ne?oo(Ne):null),ke=Qq(P?Ge??ne:null),We=nG(ke),it=vO(p,{transform:{x:L.x-Ze.x,y:L.y-Ze.y,scaleX:1,scaleY:1},activatorEvent:F,active:H,activeNodeRect:Se,containerNodeRect:He,draggingNodeRect:pe,over:$e.current.over,overlayNodeRect:ze.rect,scrollableAncestors:ke,scrollableAncestorRects:We,windowRect:Me}),gt=ge?Gp(ge,L):null,xt=eG(ke),Tt=rE(xt),Bt=rE(xt,[Se]),qt=Gp(it,Tt),Rt=pe?kq(pe,it):null,Dt=H&&Rt?d({active:H,collisionRect:Rt,droppableRects:X,droppableContainers:re,pointerCoordinates:gt}):null,Mt=rO(Dt,"id"),[ot,Nn]=Y.useState(null),Qt=qe?it:Gp(it,Bt),Wn=_q(Qt,(s=ot==null?void 0:ot.rect)!=null?s:null,Se),cn=Y.useRef(null),bn=Y.useCallback((fn,Yt)=>{let{sensor:Ot,options:Jt}=Yt;if(W.current==null)return;const Yn=N.get(W.current);if(!Yn)return;const hn=fn.nativeEvent,Cn=new Ot({active:W.current,activeNode:Yn,event:hn,options:Jt,context:$e,onAbort(Et){if(!N.get(Et))return;const{onDragAbort:Bn}=ee.current,nr={id:Et};Bn==null||Bn(nr),S({type:"onDragAbort",event:nr})},onPending(Et,lr,Bn,nr){if(!N.get(Et))return;const{onDragPending:On}=ee.current,ae={id:Et,constraint:lr,initialCoordinates:Bn,offset:nr};On==null||On(ae),S({type:"onDragPending",event:ae})},onStart(Et){const lr=W.current;if(lr==null)return;const Bn=N.get(lr);if(!Bn)return;const{onDragStart:nr}=ee.current,jn={activatorEvent:hn,active:{id:lr,data:Bn.data,rect:M}};nu.unstable_batchedUpdates(()=>{nr==null||nr(jn),j(pd.Initializing),b({type:Ds.DragStart,initialCoordinates:Et,active:lr}),S({type:"onDragStart",event:jn}),B(cn.current),Q(hn)})},onMove(Et){b({type:Ds.DragMove,coordinates:Et})},onEnd:Lr(Ds.DragEnd),onCancel:Lr(Ds.DragCancel)});cn.current=Cn;function Lr(Et){return async function(){const{active:Bn,collisions:nr,over:jn,scrollAdjustedTranslate:On}=$e.current;let ae=null;if(Bn&&On){const{cancelDrop:we}=ee.current;ae={activatorEvent:hn,active:Bn,collisions:nr,delta:On,over:jn},Et===Ds.DragEnd&&typeof we=="function"&&await Promise.resolve(we(ae))&&(Et=Ds.DragCancel)}W.current=null,nu.unstable_batchedUpdates(()=>{b({type:Et}),j(pd.Uninitialized),Nn(null),B(null),Q(null),cn.current=null;const we=Et===Ds.DragEnd?"onDragEnd":"onDragCancel";if(ae){const G=ee.current[we];G==null||G(ae),S({type:we,event:ae})}})}}},[N]),$r=Y.useCallback((fn,Yt)=>(Ot,Jt)=>{const Yn=Ot.nativeEvent,hn=N.get(Jt);if(W.current!==null||!hn||Yn.dndKit||Yn.defaultPrevented)return;const Cn={active:hn};fn(Ot,Yt.options,Cn)===!0&&(Yn.dndKit={capturedBy:Yt.sensor},W.current=Jt,bn(Ot,Yt))},[N,bn]),dn=Gq(u,$r);tG(u),pu(()=>{Se&&T===pd.Initializing&&j(pd.Initialized)},[Se,T]),Y.useEffect(()=>{const{onDragMove:fn}=ee.current,{active:Yt,activatorEvent:Ot,collisions:Jt,over:Yn}=$e.current;if(!Yt||!Ot)return;const hn={active:Yt,activatorEvent:Ot,collisions:Jt,delta:{x:qt.x,y:qt.y},over:Yn};nu.unstable_batchedUpdates(()=>{fn==null||fn(hn),S({type:"onDragMove",event:hn})})},[qt.x,qt.y]),Y.useEffect(()=>{const{active:fn,activatorEvent:Yt,collisions:Ot,droppableContainers:Jt,scrollAdjustedTranslate:Yn}=$e.current;if(!fn||W.current==null||!Yt||!Yn)return;const{onDragOver:hn}=ee.current,Cn=Jt.get(Mt),Lr=Cn&&Cn.rect.current?{id:Cn.id,rect:Cn.rect.current,data:Cn.data,disabled:Cn.disabled}:null,Et={active:fn,activatorEvent:Yt,collisions:Ot,delta:{x:Yn.x,y:Yn.y},over:Lr};nu.unstable_batchedUpdates(()=>{Nn(Lr),hn==null||hn(Et),S({type:"onDragOver",event:Et})})},[Mt]),pu(()=>{$e.current={activatorEvent:F,active:H,activeNode:ne,collisionRect:Rt,collisions:Dt,droppableRects:X,draggableNodes:N,draggingNode:Ne,draggingNodeRect:pe,droppableContainers:R,over:ot,scrollableAncestors:ke,scrollAdjustedTranslate:qt},M.current={initial:pe,translated:Rt}},[H,ne,Dt,Rt,N,Ne,pe,X,R,ot,ke,qt]),Wq({...ye,delta:L,draggingRect:Rt,pointerCoordinates:gt,scrollableAncestors:ke,scrollableAncestorRects:We});const Qr=Y.useMemo(()=>({active:H,activeNode:ne,activeNodeRect:Se,activatorEvent:F,collisions:Dt,containerNodeRect:He,dragOverlay:ze,draggableNodes:N,droppableContainers:R,droppableRects:X,over:ot,measureDroppableContainers:q,scrollableAncestors:ke,scrollableAncestorRects:We,measuringConfiguration:O,measuringScheduled:V,windowRect:Me}),[H,ne,Se,F,Dt,He,ze,N,R,X,ot,q,ke,We,O,V,Me]),_n=Y.useMemo(()=>({activatorEvent:F,activators:dn,active:H,activeNodeRect:Se,ariaDescribedById:{draggable:te},dispatch:b,draggableNodes:N,over:ot,measureDroppableContainers:q}),[F,dn,H,Se,b,te,N,ot,q]);return Pt.createElement(nO.Provider,{value:k},Pt.createElement(QS.Provider,{value:_n},Pt.createElement(xO.Provider,{value:Qr},Pt.createElement(e4.Provider,{value:Wn},c)),Pt.createElement(cG,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Pt.createElement(pq,{...a,hiddenTextDescribedById:te}));function gr(){const fn=(Z==null?void 0:Z.autoScrollEnabled)===!1,Yt=typeof l=="object"?l.enabled===!1:l===!1,Ot=P&&!fn&&!Yt;return typeof l=="object"?{...l,enabled:Ot}:{enabled:Ot}}});function wO(){return Y.useContext(xO)}function hG(t){let{animation:e,children:n}=t;const[r,i]=Y.useState(null),[s,o]=Y.useState(null),a=Rx(n);return!n&&!r&&a&&i(a),pu(()=>{if(!s)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){i(null);return}Promise.resolve(e(c,s)).then(()=>{i(null)})},[e,r,s]),Pt.createElement(Pt.Fragment,null,n,r?Y.cloneElement(r,{ref:o}):null)}const pG={x:0,y:0,scaleX:1,scaleY:1};function mG(t){let{children:e}=t;return Pt.createElement(QS.Provider,{value:yO},Pt.createElement(e4.Provider,{value:pG},e))}const gG={position:"fixed",touchAction:"none"},yG=t=>qS(t)?"transform 250ms ease":void 0,xG=Y.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:i,children:s,className:o,rect:a,style:l,transform:c,transition:u=yG}=t;if(!a)return null;const d=i?c:{...c,scaleX:1,scaleY:1},h={...gG,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ag.Transform.toString(d),transformOrigin:i&&r?yq(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return Pt.createElement(n,{className:o,style:h,ref:e},s)}),vG=t=>e=>{let{active:n,dragOverlay:r}=e;const i={},{styles:s,className:o}=t;if(s!=null&&s.active)for(const[a,l]of Object.entries(s.active))l!==void 0&&(i[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(s!=null&&s.dragOverlay)for(const[a,l]of Object.entries(s.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,c]of Object.entries(i))n.node.style.setProperty(l,c);o!=null&&o.active&&n.node.classList.remove(o.active)}},wG=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ag.Transform.toString(e)},{transform:Ag.Transform.toString(n)}]},bG={duration:250,easing:"ease",keyframes:wG,sideEffects:vG({styles:{active:{opacity:"0"}}})};function _G(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:i}=t;return Yv((s,o)=>{if(e===null)return;const a=n.get(s);if(!a)return;const l=a.node.current;if(!l)return;const c=gO(o);if(!c)return;const{transform:u}=oo(o).getComputedStyle(o),d=oO(u);if(!d)return;const h=typeof e=="function"?e:SG(e);return hO(l,i.draggable.measure),h({active:{id:s,data:a.data,node:l,rect:i.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:i.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:i,transform:d})})}function SG(t){const{duration:e,easing:n,sideEffects:r,keyframes:i}={...bG,...t};return s=>{let{active:o,dragOverlay:a,transform:l,...c}=s;if(!e)return;const u={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},d={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-u.x,y:l.y-u.y,...d},p=i({...c,active:o,dragOverlay:a,transform:{initial:l,final:h}}),[y]=p,x=p[p.length-1];if(JSON.stringify(y)===JSON.stringify(x))return;const v=r==null?void 0:r({active:o,dragOverlay:a,...c}),b=a.node.animate(p,{duration:e,easing:n,fill:"forwards"});return new Promise(S=>{b.onfinish=()=>{v==null||v(),S()}})}}let sE=0;function kG(t){return Y.useMemo(()=>{if(t!=null)return sE++,sE},[t])}const NG=Pt.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:i,transition:s,modifiers:o,wrapperElement:a="div",className:l,zIndex:c=999}=t;const{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggableNodes:y,droppableContainers:x,dragOverlay:v,over:b,measuringConfiguration:S,scrollableAncestors:k,scrollableAncestorRects:T,windowRect:j}=wO(),P=Y.useContext(e4),C=kG(d==null?void 0:d.id),N=vO(o,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:b,overlayNodeRect:v.rect,scrollableAncestors:k,scrollableAncestorRects:T,transform:P,windowRect:j}),L=JS(h),R=_G({config:r,draggableNodes:y,droppableContainers:x,measuringConfiguration:S}),D=L?v.setRef:void 0;return Pt.createElement(mG,null,Pt.createElement(hG,{animation:R},d&&C?Pt.createElement(xG,{key:C,id:d.id,ref:D,as:a,activatorEvent:u,adjustScale:e,className:l,transition:s,rect:L,style:{zIndex:c,...i},transform:N},n):null))});function CG(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function EG(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function AG(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function TG(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const bO=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=CG(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},by={scaleX:1,scaleY:1},jG=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...by}:null}const l=PG(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...by}:i<n&&i>=o?{x:0,y:a.height+l,...by}:{x:0,y:0,...by}};function PG(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const _O="Sortable",DG=Pt.createContext({activeIndex:-1,containerId:_O,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bO,disabled:{draggable:!1,droppable:!1}});function OG(t){let{children:e,id:n,items:r,strategy:i=bO,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=wO(),d=HS(_O,n),h=a.rect!==null,p=Y.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),y=o!=null,x=o?p.indexOf(o.id):-1,v=c?p.indexOf(c.id):-1,b=Y.useRef(p),S=!AG(p,b.current),k=v!==-1&&x===-1||S,T=TG(s);pu(()=>{S&&y&&u(p)},[S,p,y,u]),Y.useEffect(()=>{b.current=p},[p]);const j=Y.useMemo(()=>({activeIndex:x,containerId:d,disabled:T,disableTransforms:k,items:p,overIndex:v,useDragOverlay:h,sortedRects:EG(p,l),strategy:i}),[x,d,T.draggable,T.droppable,k,p,v,l,h,i]);return Pt.createElement(DG.Provider,{value:j},e)}function Ux(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const LG=[Ln.Down,Ln.Right,Ln.Up,Ln.Left],MG=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=e;if(LG.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=i.get(d.id);if(h)switch(t.code){case Ln.Down:r.top<h.top&&l.push(d);break;case Ln.Up:r.top>h.top&&l.push(d);break;case Ln.Left:r.left>h.left&&l.push(d);break;case Ln.Right:r.left<h.left&&l.push(d);break}});const c=iO({collisionRect:r,droppableRects:i,droppableContainers:l});let u=rO(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),h=s.get(u),p=h?i.get(h.id):null,y=h==null?void 0:h.node.current;if(y&&p&&d&&h){const v=Jv(y).some((P,C)=>a[C]!==P),b=SO(d,h),S=IG(d,h),k=v||!b?{x:0,y:0}:{x:S?r.width-p.width:0,y:S?r.height-p.height:0},T={x:p.left,y:p.top};return k.x&&k.y?T:Eg(T,k)}}}};function SO(t,e){return!Ux(t)||!Ux(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function IG(t,e){return!Ux(t)||!Ux(e)||!SO(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const RG=()=>{const t=ua(),e=El(),[n,r]=Y.useState([]),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState(null),[u,d]=Y.useState(null),h=mq(KC(YS),KC(KS,{coordinateGetter:MG}));Y.useEffect(()=>{p(),y()},[]);const p=async()=>{try{s(!0);const k=[{id:"pending",title:"Oczekujce",reservations:[]},{id:"confirmed",title:"Potwierdzone",reservations:[]},{id:"picked_up",title:"Odebrane",reservations:[]},{id:"completed",title:"Zakoczone",reservations:[]},{id:"archived",title:"Historyczne",reservations:[]},{id:"cancelled",title:"Anulowane",reservations:[]}];try{const{data:P,error:C}=await ct.rpc("get_admin_pipeline_data",{p_date_range:"30days",p_status:["pending","confirmed","picked_up","completed","archived","cancelled"]});if(!C&&P&&P.columns){console.log("Dane z RPC:",P.columns);const N=k.map(L=>{const R=P.columns.find(D=>D.id===L.id);return{...L,reservations:(R==null?void 0:R.reservations)||[]}});r(N),s(!1);return}}catch(P){console.error("RPC Error:",P)}const{data:T,error:j}=await ct.from("reservations").select(`
          id,
          status,
          start_date,
          end_date,
          start_time,
          end_time,
          total_price,
          customers (
            id,
            first_name,
            last_name,
            email,
            phone,
            company_name,
            company_nip
          ),
          reservation_items (
            id,
            equipment_id,
            equipment:equipment (
              name
            ),
            quantity
          )
        `);if(j)throw j;if(T){console.log("Dane z fallbacku:",T);const P=[...k];T.forEach(C=>{var R,D,M,H,W,Z,B;const N=C.status||"pending",L=P.findIndex(F=>F.id===N);if(L>=0){const F={id:C.id,customer:{id:((R=C.customers)==null?void 0:R.id)||"",first_name:((D=C.customers)==null?void 0:D.first_name)||"",last_name:((M=C.customers)==null?void 0:M.last_name)||"",email:((H=C.customers)==null?void 0:H.email)||"",phone:((W=C.customers)==null?void 0:W.phone)||"",company_name:(Z=C.customers)==null?void 0:Z.company_name,company_nip:(B=C.customers)==null?void 0:B.company_nip},dates:{start:C.start_date||new Date().toISOString(),end:C.end_date||new Date().toISOString()},total_price:C.total_price||0,items:Array.isArray(C.reservation_items)?C.reservation_items.map(Q=>{var ee;return{id:Q.id||`temp-${Math.random().toString(36).substring(2,9)}`,equipment_name:((ee=Q.equipment)==null?void 0:ee.name)||"Nieznany sprzt",quantity:Q.quantity||1}}):[]};P[L].reservations.push(F)}}),console.log("Przeksztacone kolumny:",P),r(P)}else r(k)}catch(k){console.error("Error loading pipeline data:",k),a("Nie udao si zaadowa danych"),r([{id:"pending",title:"Oczekujce",reservations:[]},{id:"confirmed",title:"Potwierdzone",reservations:[]},{id:"picked_up",title:"Odebrane",reservations:[]},{id:"completed",title:"Zakoczone",reservations:[]},{id:"archived",title:"Historyczne",reservations:[]},{id:"cancelled",title:"Anulowane",reservations:[]}])}finally{s(!1)}},y=()=>{const k=ct.channel("pipeline_updates").on("postgres_changes",{event:"*",schema:"public",table:"reservations"},()=>p()).subscribe();return()=>{k.unsubscribe()}},x=k=>{c(k.active.id)},v=async k=>{const{active:T,over:j}=k;if(!j)return;const P=b(T.id),C=j.id;if(P&&P.id!==C)try{await ct.rpc("update_reservation_pipeline_status",{p_reservation_id:P.id,p_new_status:C}),await p()}catch(N){console.error("Error updating reservation status:",N),a("Nie udao si zaktualizowa statusu")}c(null)},b=k=>{var T;for(const j of n){const P=(T=j.reservations)==null?void 0:T.find(C=>C.id===k);if(P)return P}return null},S=async(k,T)=>{try{await ct.rpc("update_reservation_pipeline_status",{p_reservation_id:k,p_new_status:T}),await p()}catch(j){console.error("Error updating status:",j),a("Nie udao si zaktualizowa statusu")}};return i?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):o?m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 flex items-center",children:[m.jsx(hc,{className:"w-6 h-6 mr-2"}),m.jsx("p",{children:o})]}):m.jsx("div",{className:"h-[calc(100vh-12rem)]",children:m.jsxs(fG,{sensors:h,collisionDetection:iO,onDragStart:x,onDragEnd:v,children:[m.jsx("div",{className:"flex gap-6 pb-6 h-full overflow-x-auto whitespace-nowrap",style:{minWidth:"max-content"},children:n.map(k=>{var T,j;return m.jsxs("div",{className:"inline-block w-[360px] bg-gray-50 rounded-lg p-4 h-fit align-top",children:[m.jsx("div",{className:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200",children:m.jsxs("h3",{className:"font-medium text-gray-900 flex items-center",children:[k.title,m.jsx("span",{className:"ml-2 bg-white text-gray-600 px-2 py-0.5 rounded-full text-sm border",children:((T=k.reservations)==null?void 0:T.length)||0})]})}),m.jsx(OG,{items:((j=k.reservations)==null?void 0:j.map(P=>P.id))||[],strategy:jG,children:m.jsx("div",{className:"space-y-3",children:k.reservations&&k.reservations.length>0?k.reservations.map(P=>{var C,N,L,R,D,M,H;return m.jsxs(Ii.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-md hover:bg-gray-50 transition-all ${l===P.id?"ring-2 ring-solrent-orange":""}`,onClick:()=>{t(`/admin/panel/reservations/${P.id}`,{state:{from:e.pathname+e.search}})},children:[m.jsx("div",{className:"flex justify-between items-start mb-2",children:m.jsxs("div",{children:[m.jsxs("h4",{className:"font-medium text-gray-900 text-sm",children:[((C=P.customer)==null?void 0:C.first_name)||""," ",((N=P.customer)==null?void 0:N.last_name)||""]}),m.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[m.jsx(Bd,{className:"w-4 h-4 mr-1"}),((L=P.customer)==null?void 0:L.email)||""]}),m.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[m.jsx(bd,{className:"w-4 h-4 mr-1"}),((R=P.customer)==null?void 0:R.phone)||""]}),((D=P.customer)==null?void 0:D.company_name)&&m.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[m.jsx(J_,{className:"w-4 h-4 mr-1"}),P.customer.company_name]})]})}),m.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2 bg-gray-50 p-2 rounded",children:[m.jsx(kl,{className:"w-4 h-4 mr-1"}),m.jsxs("span",{children:[(M=P.dates)!=null&&M.start?new Date(P.dates.start).toLocaleDateString():""," -",(H=P.dates)!=null&&H.end?new Date(P.dates.end).toLocaleDateString():""]})]}),m.jsx("div",{className:"space-y-1.5 mb-3",children:Array.isArray(P.items)&&P.items.map((W,Z)=>m.jsxs("div",{className:"flex items-center text-xs bg-gray-50 p-1.5 rounded",children:[m.jsx(Qs,{className:"w-4 h-4 mr-1 text-gray-400"}),m.jsxs("span",{children:[W.equipment_name||"Nieznany sprzt"," (x",W.quantity||1,")"]})]},Z))}),m.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[m.jsxs("span",{className:"font-medium text-solrent-orange text-sm",children:[typeof P.total_price=="number"?P.total_price.toFixed(2):"0.00"," z"]}),m.jsxs("div",{className:"flex space-x-2",children:[k.id==="pending"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"confirmed")},className:"p-1.5 text-green-600 hover:bg-green-50 rounded-full",children:m.jsx(ac,{className:"w-4 h-4"})}),m.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"cancelled")},className:"p-1.5 text-red-600 hover:bg-red-50 rounded-full",children:m.jsx(Cx,{className:"w-4 h-4"})})]}),k.id==="confirmed"&&m.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"picked_up")},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-full",children:m.jsx(ac,{className:"w-4 h-4"})}),k.id==="picked_up"&&m.jsx("button",{onClick:W=>{W.stopPropagation(),S(P.id,"completed")},className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded-full",children:m.jsx(ac,{className:"w-4 h-4"})})]})]})]},P.id)}):null})})]},k.id)})}),m.jsx(NG,{children:l?m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 opacity-90",children:(()=>{var T,j,P;const k=b(l);return k?m.jsxs("div",{children:[m.jsxs("h4",{className:"font-medium text-gray-900",children:[((T=k.customer)==null?void 0:T.first_name)||""," ",((j=k.customer)==null?void 0:j.last_name)||""]}),m.jsx("p",{className:"text-sm text-gray-500",children:(P=k.dates)!=null&&P.start?new Date(k.dates.start).toLocaleDateString():""})]}):null})()}):null})]})})},FG=()=>{const t=ua(),[e,n]=Y.useState([]),[r,i]=Y.useState(!0),[s,o]=Y.useState(null),[a,l]=Y.useState(1),[c,u]=Y.useState(1),[d,h]=Y.useState("created_at"),[p,y]=Y.useState("desc"),[x,v]=Y.useState(!1),[b,S]=Y.useState({status:[],dateRange:"30days",minValue:"",search:""}),k=10;Y.useEffect(()=>{T()},[a,d,p,b]);const T=async()=>{try{i(!0);let C=ct.from("customers").select(`
          *,
          customer_profiles!left (
            lead_status,
            lead_source,
            lifetime_value,
            avg_rental_duration,
            total_rentals,
            last_contact_date
          ),
          customer_activities!left (
            activity_type,
            created_at
          )
        `,{count:"exact"});switch(b.search&&(C=C.or(`
          first_name.ilike.%${b.search}%,
          last_name.ilike.%${b.search}%,
          email.ilike.%${b.search}%,
          phone.ilike.%${b.search}%,
          company_name.ilike.%${b.search}%,
          company_nip.ilike.%${b.search}%
        `)),b.status.length>0&&(C=C.in("customer_profiles.lead_status",b.status)),b.minValue&&(C=C.gte("customer_profiles.lifetime_value",parseFloat(b.minValue))),b.dateRange){case"7days":C=C.gte("created_at",new Date(Date.now()-7*24*60*60*1e3).toISOString());break;case"30days":C=C.gte("created_at",new Date(Date.now()-30*24*60*60*1e3).toISOString());break;case"90days":C=C.gte("created_at",new Date(Date.now()-90*24*60*60*1e3).toISOString());break}C=C.order(d,{ascending:p==="asc"}).range((a-1)*k,a*k-1);const{data:N,count:L,error:R}=await C;if(R)throw R;n(N||[]),u(Math.ceil((L||0)/k)),o(null)}catch(C){console.error("Error loading customers:",C),o("Nie udao si zaadowa listy klientw")}finally{i(!1)}},j=C=>{C===d?y(p==="asc"?"desc":"asc"):(h(C),y("asc"))},P=()=>{const N=[["ID","Imi","Nazwisko","Email","Telefon","Firma","NIP","Data utworzenia","Status","Liczba wypoycze","Warto wypoycze"].join(","),...e.map(D=>{var M,H,W,Z,B,F;return[D.id,D.first_name,D.last_name,D.email,D.phone,D.company_name||"",D.company_nip||"",new Date(D.created_at).toLocaleDateString(),((H=(M=D.customer_profiles)==null?void 0:M[0])==null?void 0:H.status)||"",((Z=(W=D.customer_profiles)==null?void 0:W[0])==null?void 0:Z.total_rentals)||0,((F=(B=D.customer_profiles)==null?void 0:B[0])==null?void 0:F.lifetime_value)||0].join(",")})].join(`
`),L=new Blob([N],{type:"text/csv;charset=utf-8;"}),R=document.createElement("a");R.href=URL.createObjectURL(L),R.download=`klienci_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(R),R.click(),document.body.removeChild(R)};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center",children:[m.jsx("div",{className:"flex-1 w-full md:w-auto",children:m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",placeholder:"Szukaj klientw...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",value:b.search,onChange:C=>S({...b,search:C.target.value})}),m.jsx(tS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})}),m.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[m.jsxs("button",{onClick:()=>v(!x),className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[m.jsx(Cz,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden md:inline",children:"Filtry"})]}),m.jsxs("button",{onClick:P,className:"px-4 py-2 border rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[m.jsx(Ch,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden md:inline",children:"Eksportuj"})]}),m.jsxs("button",{onClick:()=>t("new"),className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[m.jsx(_l,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden md:inline",children:"Dodaj klienta"})]})]})]}),m.jsx(pc,{children:x&&m.jsx(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden bg-white rounded-lg shadow p-4",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),m.jsxs("select",{multiple:!0,value:b.status,onChange:C=>{const N=Array.from(C.target.selectedOptions,L=>L.value);S({...b,status:N})},className:"w-full p-2 border rounded-lg",children:[m.jsx("option",{value:"lead",children:"Lead"}),m.jsx("option",{value:"customer",children:"Klient"}),m.jsx("option",{value:"inactive",children:"Nieaktywny"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Okres"}),m.jsxs("select",{value:b.dateRange,onChange:C=>S({...b,dateRange:C.target.value}),className:"w-full p-2 border rounded-lg",children:[m.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),m.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),m.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),m.jsx("option",{value:"all",children:"Wszystkie"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. warto wypoycze"}),m.jsx("input",{type:"number",value:b.minValue,onChange:C=>S({...b,minValue:C.target.value}),className:"w-full p-2 border rounded-lg",placeholder:"np. 1000"})]}),m.jsx("div",{className:"flex items-end",children:m.jsx("button",{onClick:()=>S({status:[],dateRange:"30days",minValue:"",search:""}),className:"w-full p-2 border rounded-lg text-gray-600 hover:bg-gray-50",children:"Resetuj filtry"})})]})})}),m.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("last_name"),children:m.jsxs("div",{className:"flex items-center gap-2",children:["Klient",d==="last_name"&&(p==="asc"?m.jsx(Nm,{className:"w-4 h-4"}):m.jsx(eu,{className:"w-4 h-4"}))]})}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontakt"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Firma"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.status"),children:m.jsxs("div",{className:"flex items-center gap-2",children:["Status",d==="customer_profiles.status"&&(p==="asc"?m.jsx(Nm,{className:"w-4 h-4"}):m.jsx(eu,{className:"w-4 h-4"}))]})}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.total_rentals"),children:m.jsxs("div",{className:"flex items-center gap-2",children:["Wypoyczenia",d==="customer_profiles.total_rentals"&&(p==="asc"?m.jsx(Nm,{className:"w-4 h-4"}):m.jsx(eu,{className:"w-4 h-4"}))]})}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>j("customer_profiles.lifetime_value"),children:m.jsxs("div",{className:"flex items-center gap-2",children:["Warto",d==="customer_profiles.lifetime_value"&&(p==="asc"?m.jsx(Nm,{className:"w-4 h-4"}):m.jsx(eu,{className:"w-4 h-4"}))]})}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r?m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"px-6 py-4 text-center",children:m.jsx("div",{className:"flex justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-solrent-orange"})})})}):e.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Nie znaleziono klientw speniajcych kryteria"})}):e.map(C=>{var N,L,R,D,M,H,W,Z,B;return m.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t(`${C.id}`),children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"flex items-center",children:m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.first_name," ",C.last_name]}),m.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",C.id.split("-")[0]]})]})})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900 flex flex-col gap-1",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Bd,{className:"w-4 h-4 text-gray-400"}),C.email]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(bd,{className:"w-4 h-4 text-gray-400"}),C.phone]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:C.company_name&&m.jsxs("div",{className:"text-sm text-gray-900",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(J_,{className:"w-4 h-4 text-gray-400"}),C.company_name]}),m.jsxs("div",{className:"text-sm text-gray-500",children:["NIP: ",C.company_nip]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${((N=C.customer_profiles)==null?void 0:N.lead_status)==="hot"?"bg-red-100 text-red-800":((L=C.customer_profiles)==null?void 0:L.lead_status)==="warm"?"bg-yellow-100 text-yellow-800":((R=C.customer_profiles)==null?void 0:R.lead_status)==="converted"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:((D=C.customer_profiles)==null?void 0:D.lead_status)==="hot"?"Gorcy lead":((M=C.customer_profiles)==null?void 0:M.lead_status)==="warm"?"Zainteresowany":((H=C.customer_profiles)==null?void 0:H.lead_status)==="converted"?"Klient":((W=C.customer_profiles)==null?void 0:W.lead_status)==="cold"?"Zimny lead":"Nowy"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((Z=C.customer_profiles)==null?void 0:Z.total_rentals)||0}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(((B=C.customer_profiles)==null?void 0:B.lifetime_value)||0).toFixed(2)," z"]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsxs("div",{className:"flex justify-end space-x-2",onClick:F=>F.stopPropagation(),children:[m.jsx("button",{onClick:()=>t(`${C.id}/edit`),className:"text-indigo-600 hover:text-indigo-900",children:m.jsx(_0,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>{},className:"text-red-600 hover:text-red-900",children:m.jsx(lc,{className:"w-5 h-5"})})]})})]},C.id)})})]})}),m.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[m.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[m.jsx("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:a===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Poprzednia"}),m.jsx("button",{onClick:()=>l(C=>Math.min(c,C+1)),disabled:a===c,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Nastpna"})]}),m.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[m.jsx("div",{children:m.jsxs("p",{className:"text-sm text-gray-700",children:["Wywietlanie"," ",m.jsx("span",{className:"font-medium",children:(a-1)*k+1})," ","-"," ",m.jsx("span",{className:"font-medium",children:Math.min(a*k,e.length)})," ","z"," ",m.jsx("span",{className:"font-medium",children:e.length})," ","wynikw"]})}),m.jsx("div",{children:m.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[m.jsxs("button",{onClick:()=>l(1),disabled:a===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("span",{className:"sr-only",children:"Pierwsza"}),m.jsx(eu,{className:"h-5 w-5 rotate-90"})]}),m.jsxs("button",{onClick:()=>l(C=>Math.max(1,C-1)),disabled:a===1,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("span",{className:"sr-only",children:"Poprzednia"}),m.jsx(Bv,{className:"h-5 w-5"})]}),Array.from({length:c},(C,N)=>N+1).filter(C=>Math.abs(C-a)<2||C===1||C===c).map((C,N,L)=>N>0&&L[N-1]!==C-1?[m.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."},`ellipsis-${C}`),m.jsx("button",{onClick:()=>l(C),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${C===a?"z-10 bg-solrent-orange border-solrent-orange text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:C},C)]:m.jsx("button",{onClick:()=>l(C),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${C===a?"z-10 bg-solrent-orange border-solrent-orange text-white":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:C},C)),m.jsxs("button",{onClick:()=>l(C=>Math.min(c,C+1)),disabled:a===c,className:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("span",{className:"sr-only",children:"Nastpna"}),m.jsx(Z_,{className:"h-5 w-5"})]}),m.jsxs("button",{onClick:()=>l(c),disabled:a===c,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx("span",{className:"sr-only",children:"Ostatnia"}),m.jsx(eu,{className:"h-5 w-5 -rotate-90"})]})]})})]})]})]}),s&&m.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center",children:[m.jsx(hc,{className:"w-5 h-5 mr-2"}),m.jsx("span",{children:s}),m.jsx("button",{onClick:()=>o(null),className:"ml-4 text-red-500 hover:text-red-600",children:m.jsx(du,{className:"w-4 h-4"})})]})]})},zG=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState([]),[i,s]=Y.useState(null),[o,a]=Y.useState(!0),[l,c]=Y.useState(null),[u,d]=Y.useState({status:"all",source:"all",assignedTo:"all"});Y.useEffect(()=>{h()},[u]);const h=async()=>{try{a(!0);const{data:b,error:S}=await ct.from("crm_contacts").select(`
          *,
          customer:customers (
            first_name,
            last_name,
            email,
            phone
          )
        `).order("lead_score",{ascending:!1});if(S)throw S;const{data:k,error:T}=await ct.from("crm_tasks").select("*").order("due_date",{ascending:!0});if(T)throw T;e(b||[]),r(k||[])}catch(b){console.error("Error loading CRM data:",b),c("Nie udao si zaadowa danych CRM")}finally{a(!1)}},p=async(b,S)=>{try{const{error:k}=await ct.from("crm_tasks").update({status:S}).eq("id",b);if(k)throw k;await h()}catch(k){console.error("Error updating task status:",k),c("Nie udao si zaktualizowa statusu zadania")}},y=()=>{const b=t.filter(k=>k.status==="customer").length,S=t.length;return S>0?(b/S*100).toFixed(1):"0.0"},x=()=>{const b=t.reduce((S,k)=>S+(k.lead_score||0),0);return t.length>0?Math.round(b/t.length):0},v=b=>{};return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"CRM"}),m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("select",{value:u.status,onChange:b=>d({...u,status:b.target.value}),className:"px-4 py-2 border rounded-lg",children:[m.jsx("option",{value:"all",children:"Wszystkie statusy"}),m.jsx("option",{value:"lead",children:"Leady"}),m.jsx("option",{value:"customer",children:"Klienci"}),m.jsx("option",{value:"inactive",children:"Nieaktywni"})]}),m.jsx("button",{onClick:()=>v(),className:"px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:m.jsx(Ch,{className:"w-5 h-5"})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Aktywne leady"}),m.jsx("p",{className:"text-2xl font-bold",children:t.filter(b=>b.status==="lead").length})]}),m.jsx(rS,{className:"w-8 h-8 text-blue-500"})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Zadania na dzi"}),m.jsx("p",{className:"text-2xl font-bold",children:n.filter(b=>new Date(b.due_date).toDateString()===new Date().toDateString()).length})]}),m.jsx(kl,{className:"w-8 h-8 text-green-500"})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Konwersja"}),m.jsx("p",{className:"text-2xl font-bold",children:y()+"%"})]}),m.jsx(kx,{className:"w-8 h-8 text-green-500"})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"redni Lead Score"}),m.jsx("p",{className:"text-2xl font-bold",children:x().toString()})]}),m.jsx(Uv,{className:"w-8 h-8 text-orange-500"})]})})]}),m.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kontakt"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Score"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ostatni kontakt"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nastpny kontakt"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(b=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"flex items-center",children:m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[b.customer.first_name," ",b.customer.last_name]}),m.jsx("div",{className:"text-sm text-gray-500",children:b.customer.email})]})})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${b.status==="lead"?"bg-yellow-100 text-yellow-800":b.status==="customer"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.status==="lead"?"Lead":b.status==="customer"?"Klient":"Nieaktywny"})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-900",children:b.lead_score})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.last_contact_date?new Date(b.last_contact_date).toLocaleDateString():"Brak"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.next_contact_date?new Date(b.next_contact_date).toLocaleDateString():"Brak"}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsx("button",{onClick:()=>s(b),className:"text-indigo-600 hover:text-indigo-900",children:m.jsx(_0,{className:"w-5 h-5"})})})]},b.id))})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Zadania"}),m.jsx("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:m.jsx(_l,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"space-y-4",children:n.map(b=>m.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:b.title}),m.jsx("p",{className:"text-sm text-gray-500",children:b.description}),m.jsxs("p",{className:"text-xs text-gray-400",children:["Due: ",new Date(b.due_date).toLocaleDateString()]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${b.priority==="high"?"bg-red-100 text-red-800":b.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:b.priority}),m.jsx("button",{onClick:()=>p(b.id,"completed"),className:"text-green-600 hover:text-green-700",children:m.jsx(Sz,{className:"w-5 h-5"})})]})]},b.id))})]}),l&&m.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2",children:[m.jsx(hc,{className:"w-5 h-5"}),m.jsx("span",{children:l}),m.jsx("button",{onClick:()=>c(null),className:"ml-2 text-red-500 hover:text-red-600",children:m.jsx(du,{className:"w-4 h-4"})})]})]})};function ts(t){this.content=t}ts.prototype={constructor:ts,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new ts(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new ts(n)},addToStart:function(t,e){return new ts([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new ts(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new ts(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=ts.from(t),t.size?new ts(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=ts.from(t),t.size?new ts(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=ts.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};ts.from=function(t){if(t instanceof ts)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new ts(e)};function kO(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=kO(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function NO(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=NO(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class ft{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ft(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new ft(r,i)}cutByIndex(e,n){return e==n?ft.empty:e==0&&n==this.content.length?this:new ft(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ft(i,s)}addToStart(e){return new ft([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ft(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return kO(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return NO(this,e,n,r)}findIndex(e,n=-1){if(e==0)return _y(0,e);if(e==this.size)return _y(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?_y(r+1,o):_y(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ft.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ft(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ft.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ft(n||e,r)}static from(e){if(!e)return ft.empty;if(e instanceof ft)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ft([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ft.empty=new ft([],0);const Jw={index:0,offset:0};function _y(t,e){return Jw.index=t,Jw.offset=e,Jw}function $x(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!$x(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!$x(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let vr=class q5{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&$x(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return q5.none;if(e instanceof q5)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};vr.none=[];class Wx extends Error{}class Lt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=EO(this.content,e+this.openStart,n);return r&&new Lt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Lt(CO(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Lt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Lt(ft.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Lt(e,r,i)}}Lt.empty=new Lt(ft.empty,0,0);function CO(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(CO(s.content,e-i-1,n-i-1)))}function EO(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=EO(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function BG(t,e,n){if(n.openStart>t.depth)throw new Wx("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Wx("Inconsistent open depths");return AO(t,e,n,0)}function AO(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=AO(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return lh(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=UG(n,t);return lh(s,jO(t,o,a,e,r))}else return lh(s,Vx(t,e,r))}function TO(t,e){if(!e.type.compatibleContent(t.type))throw new Wx("Cannot join "+e.type.name+" onto "+t.type.name)}function G5(t,e,n){let r=t.node(n);return TO(r,e.node(n)),r}function ah(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ym(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ah(t.nodeAfter,r),s++));for(let a=s;a<o;a++)ah(i.child(a),r);e&&e.depth==n&&e.textOffset&&ah(e.nodeBefore,r)}function lh(t,e){return t.type.checkContent(e),t.copy(e)}function jO(t,e,n,r,i){let s=t.depth>i&&G5(t,e,i+1),o=r.depth>i&&G5(n,r,i+1),a=[];return Ym(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(TO(s,o),ah(lh(s,jO(t,e,n,r,i+1)),a)):(s&&ah(lh(s,Vx(t,e,i+1)),a),Ym(e,n,i,a),o&&ah(lh(o,Vx(n,r,i+1)),a)),Ym(r,null,i,a),new ft(a)}function Vx(t,e,n){let r=[];if(Ym(null,t,n,r),t.depth>n){let i=G5(t,e,n+1);ah(lh(i,Vx(t,e,n+1)),r)}return Ym(e,null,n,r),new ft(r)}function UG(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(ft.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class jg{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return vr.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hx(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new jg(n,r,s)}static resolveCached(e,n){let r=oE.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else oE.set(e,r=new $G);let i=r.elts[r.i]=jg.resolve(e,n);return r.i=(r.i+1)%WG,i}}class $G{constructor(){this.elts=[],this.i=0}}const WG=12,oE=new WeakMap;class Hx{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const VG=Object.create(null);let jd=class K5{constructor(e,n,r,i=vr.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||ft.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&$x(this.attrs,n||e.defaultAttrs||VG)&&vr.sameSet(this.marks,r||vr.none)}copy(e=null){return e==this.content?this:new K5(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new K5(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Lt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new Lt(c,i.depth-o,s.depth-o)}replace(e,n,r){return BG(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return jg.resolveCached(this,e)}resolveNoCache(e){return jg.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),PO(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ft.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=vr.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!vr.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=ft.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};jd.prototype.text=void 0;class qx extends jd{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):PO(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new qx(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new qx(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function PO(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class xh{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new HG(e,n);if(r.next==null)return xh.empty;let i=DO(r);r.next&&r.err("Unexpected trailing text");let s=ZG(JG(i));return QG(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return ft.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}xh.empty=new xh(!0);class HG{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function DO(t){let e=[];do e.push(qG(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function qG(t){let e=[];do e.push(GG(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GG(t){let e=YG(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=KG(t,e);else break;return e}function aE(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function KG(t,e){let n=aE(t),r=n;return t.eat(",")&&(t.next!="}"?r=aE(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function XG(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function YG(t){if(t.eat("(")){let e=DO(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=XG(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function JG(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function OO(t,e){return e-t}function lE(t,e){let n=[];return r(e),n.sort(OO);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function ZG(t){let e=Object.create(null);return n(lE(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);lE(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new xh(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(OO);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function QG(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function LO(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function MO(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function IO(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function RO(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new tK(t,r,e[r]);return n}let cE=class FO{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=RO(e,r.attrs),this.defaultAttrs=LO(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xh.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:MO(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jd(this,this.computeAttrs(e),ft.from(n),vr.setFrom(r))}createChecked(e=null,n,r){return n=ft.from(n),this.checkContent(n),new jd(this,this.computeAttrs(e),n,vr.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ft.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ft.empty,!0);return s?new jd(this,e,n.append(s),vr.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){IO(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:vr.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new FO(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function eK(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class tK{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?eK(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Zv{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=RO(e,i.attrs),this.excluded=null;let s=LO(this.attrs);this.instance=s?new vr(this,s):null}create(e=null){return!e&&this.instance?this.instance:new vr(this,MO(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Zv(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){IO(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class zO{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=ts.from(e.nodes),n.marks=ts.from(e.marks||{}),this.nodes=cE.compile(this.spec.nodes,this),this.marks=Zv.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=xh.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?uE(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:uE(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof cE){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new qx(r,r.defaultAttrs,e,vr.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return jd.fromJSON(this,e)}markFromJSON(e){return vr.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function uE(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function nK(t){return t.tag!=null}function rK(t){return t.style!=null}class Pd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(nK(i))this.tags.push(i);else if(rK(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new fE(this,n,!1);return r.addAll(e,vr.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new fE(this,n,!0);return r.addAll(e,vr.none,n.from,n.to),Lt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(oK(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=hE(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=hE(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Pd(e,Pd.schemaRules(e)))}}const BO={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},iK={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},UO={ol:!0,ul:!0},Pg=1,X5=2,ux=4;function dE(t,e,n){return e!=null?(e?Pg:0)|(e==="full"?X5:0):t&&t.whitespace=="pre"?Pg|X5:n&-5}class Sy{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=vr.none,this.match=s||(o&ux?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ft.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Pg)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ft.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ft.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!BO.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class fE{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=dE(null,n.preserveWhitespace,0)|(r?ux:0);i?s=new Sy(i.type,i.attrs,vr.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Sy(null,null,vr.none,!0,null,o):s=new Sy(e.schema.topNodeType,null,vr.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&X5?"full":this.localPreserveWS||(i.options&Pg)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;UO.hasOwnProperty(o)&&this.parser.normalizeLists&&sK(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:iK.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(BO.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r)||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n){let r,i;for(let s=this.open;s>=0;s--){let o=this.nodes[s],a=o.findWrapping(e);if(a&&(!r||r.length>a.length)&&(r=a,i=o,!a.length)||o.solid)break}if(!r)return null;this.sync(i);for(let s=0;s<r.length;s++)n=this.enterInner(r[s],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let r=this.findPlace(e,n);if(r){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=vr.none;for(let o of r.concat(e.marks))(i.type?i.type.allowsMarkType(o.type):pE(o.type,e.type))&&(s=o.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=dE(e,s,o.options);o.options&ux&&o.content.length==0&&(a|=ux);let l=vr.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):pE(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Sy(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Pg)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function sK(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&UO.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function oK(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function hE(t){let e={};for(let n in t)e[n]=t[n];return e}function pE(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Th{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Zw(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=dx(Zw(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&dx(Zw(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return dx(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Th(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=mE(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return mE(e.marks)}}function mE(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Zw(t){return t.document||window.document}const gE=new WeakMap;function aK(t){let e=gE.get(t);return e===void 0&&gE.set(t,e=lK(t)),e}function lK(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function dx(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=aK(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:y}=dx(t,h,n,r);if(l.appendChild(p),y){if(a)throw new RangeError("Multiple content holes");a=y}}}return{dom:l,contentDOM:a}}const $O=65535,WO=Math.pow(2,16);function cK(t,e){return t+e*WO}function yE(t){return t&$O}function uK(t){return(t-(t&$O))/WO}const VO=1,HO=2,fx=4,qO=8;class Y5{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&qO)>0}get deletedBefore(){return(this.delInfo&(VO|fx))>0}get deletedAfter(){return(this.delInfo&(HO|fx))>0}get deletedAcross(){return(this.delInfo&fx)>0}}class ta{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ta.empty)return ta.empty}recover(e){let n=0,r=yE(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+uK(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,p=l+i+(h<0?0:u);if(r)return p;let y=e==(n<0?l:d)?null:cK(a/3,e-l),x=e==l?HO:e==d?VO:fx;return(n<0?e!=l:e!=d)&&(x|=qO),new Y5(p,x,y)}i+=u-c}return r?e+i:new Y5(e+i,0,null)}touches(e,n){let r=0,i=yE(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new ta(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ta.empty:new ta(e<0?[0,-e,0]:[0,0,e])}}ta.empty=new ta([]);class Dg{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Dg(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Dg;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new Y5(e,i,null)}}const Qw=Object.create(null);class zs{getMap(){return ta.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Qw[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Qw)throw new RangeError("Duplicate use of step JSON ID "+e);return Qw[e]=n,n.prototype.jsonID=e,n}}class yi{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new yi(e,null)}static fail(e){return new yi(null,e)}static fromReplace(e,n,r,i){try{return yi.ok(e.replace(n,r,i))}catch(s){if(s instanceof Wx)return yi.fail(s.message);throw s}}}function t4(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(t4(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return ft.fromArray(r)}class _d extends zs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Lt(t4(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return yi.fromReplace(e,this.from,this.to,s)}invert(){return new sc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _d(n.pos,r.pos,this.mark)}merge(e){return e instanceof _d&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new _d(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _d(n.from,n.to,e.markFromJSON(n.mark))}}zs.jsonID("addMark",_d);class sc extends zs{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Lt(t4(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return yi.fromReplace(e,this.from,this.to,r)}invert(){return new _d(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new sc(n.pos,r.pos,this.mark)}merge(e){return e instanceof sc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new sc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new sc(n.from,n.to,e.markFromJSON(n.mark))}}zs.jsonID("removeMark",sc);class Sd extends zs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return yi.fromReplace(e,this.pos,this.pos+1,new Lt(ft.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Sd(this.pos,n.marks[i]);return new Sd(this.pos,this.mark)}}return new s0(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sd(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Sd(n.pos,e.markFromJSON(n.mark))}}zs.jsonID("addNodeMark",Sd);class s0 extends zs{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return yi.fromReplace(e,this.pos,this.pos+1,new Lt(ft.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Sd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new s0(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new s0(n.pos,e.markFromJSON(n.mark))}}zs.jsonID("removeNodeMark",s0);class Mi extends zs{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&J5(e,this.from,this.to)?yi.fail("Structure replace would overwrite content"):yi.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ta([this.from,this.to-this.from,this.slice.size])}invert(e){return new Mi(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Mi(n.pos,Math.max(n.pos,r.pos),this.slice)}merge(e){if(!(e instanceof Mi)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Lt.empty:new Lt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Mi(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Lt.empty:new Lt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Mi(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Mi(n.from,n.to,Lt.fromJSON(e,n.slice),!!n.structure)}}zs.jsonID("replace",Mi);class Ui extends zs{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(J5(e,this.from,this.gapFrom)||J5(e,this.gapTo,this.to)))return yi.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return yi.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?yi.fromReplace(e,this.from,this.to,r):yi.fail("Content does not fit in gap")}getMap(){return new ta([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Ui(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ui(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ui(n.from,n.to,n.gapFrom,n.gapTo,Lt.fromJSON(e,n.slice),n.insert,!!n.structure)}}zs.jsonID("replaceAround",Ui);function J5(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function dK(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),y=r.addToSet(d);for(let x=0;x<d.length;x++)d[x].isInSet(y)||(o&&o.to==h&&o.mark.eq(d[x])?o.to=p:i.push(o=new sc(h,p,d[x])));a&&a.to==h?a.to=p:s.push(a=new _d(h,p,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function fK(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Zv){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<i.length;p++){let y=i[p];y.step==s-1&&d.eq(i[p].style)&&(h=y)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new sc(o.from,o.to,o.style)))}function n4(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Mi(a,u,Lt.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new sc(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,y;for(;h=p.exec(c.text);)y||(y=new Lt(ft.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Mi(a+h.index,a+h.index+h[0].length,y))}}a=u}if(!r.validEnd){let l=r.fillBefore(ft.empty,!0);t.replace(a,a,new Lt(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function hK(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function A0(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!hK(i,s,o))break}return null}function pK(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=ft.empty,d=0;for(let y=s,x=!1;y>n;y--)x||r.index(y)>0?(x=!0,u=ft.from(r.node(y).copy(u)),d++):l--;let h=ft.empty,p=0;for(let y=s,x=!1;y>n;y--)x||i.after(y+1)<i.end(y)?(x=!0,h=ft.from(i.node(y).copy(h)),p++):c++;t.step(new Ui(l,c,o,a,new Lt(u.append(h),d,p),u.size-d,!0))}function r4(t,e,n=null,r=t){let i=mK(t,e),s=i&&gK(r,e);return s?i.map(xE).concat({type:e,attrs:n}).concat(s.map(xE)):null}function xE(t){return{type:t,attrs:null}}function mK(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function gK(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function yK(t,e,n){let r=ft.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ft.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Ui(i,s,i,s,new Lt(r,0,0),n.length,!0))}function xK(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&vK(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",y=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!y?c=!1:!p&&y&&(c=!0)}c===!1&&KO(t,o,a,s),n4(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new Ui(d,h,d+1,h-1,new Lt(ft.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&GO(t,o,a,s),!1}})}function GO(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function KO(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function vK(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function wK(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Ui(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Lt(ft.from(o),0,0),1,!0))}function ou(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),y=r&&r[u+1];y&&(p=p.replaceChild(0,y.type.create(y.attrs)));let x=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!x.type.validContent(p))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function bK(t,e,n=1,r){let i=t.doc.resolve(e),s=ft.empty,o=ft.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=ft.from(i.node(a).copy(s));let u=r&&r[c];o=ft.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Mi(e,e,new Lt(s.append(o),n,n),!0))}function tf(t,e){let n=t.resolve(e),r=n.index();return XO(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function _K(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function XO(t,e){return!!(t&&e&&!t.isLeaf&&_K(t,e))}function Qv(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&XO(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function SK(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);KO(t,u.node(),u.before(),a)}o.inlineContent&&n4(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Mi(c,l.map(e+n,-1),Lt.empty,!0)),r===!0){let u=t.doc.resolve(c);GO(t,u.node(),u.before(),t.steps.length)}return t}function kK(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function YO(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function e2(t,e,n=e,r=Lt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return JO(i,s,r)?new Mi(e,n,r):new NK(i,s,r).fit()}function JO(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class NK{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ft.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ft.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new Lt(s,o,a);return e>-1?new Ui(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Mi(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(ft.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eb(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Lt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=eb(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Lt(jm(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Lt(jm(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let x=0;x<s.length;x++)this.openFrontierNode(s[x]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let x=0;x<i.childCount;x++)u.push(i.child(x));d=d.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let x=a.child(c),v=d.matchType(x.type);if(!v)break;c++,(c>1||l==0||x.content.size)&&(d=v,u.push(ZO(x.mark(h.allowedMarks(x.marks)),c==1?l:0,c==a.childCount?p:-1)))}let y=c==a.childCount;y||(p=-1),this.placed=Pm(this.placed,n,ft.from(u)),this.frontier[n].match=d,y&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,v=a;x<p;x++){let b=v.lastChild;this.frontier.push({type:b.type,match:b.contentMatchAt(b.childCount)}),v=b.content}this.unplaced=y?e==0?Lt.empty:new Lt(jm(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new Lt(jm(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!tb(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=tb(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=tb(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Pm(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Pm(this.placed,this.depth,ft.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ft.empty,!0);n.childCount&&(this.placed=Pm(this.placed,this.frontier.length,n))}}function jm(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(jm(t.firstChild.content,e-1,n)))}function Pm(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Pm(t.lastChild.content,e-1,n)))}function eb(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function ZO(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,ZO(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ft.empty,!0)))),t.copy(r)}function tb(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!CK(n,s.content,o)?a:null}function CK(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function EK(t){return t.spec.defining||t.spec.definingForContent}function AK(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(JO(i,s,r))return t.step(new Mi(e,n,r));let o=eL(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let y=i.node(h).type.spec;if(y.defining||y.definingAsContext||y.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let y=h.firstChild;if(c.push(y),p==r.openStart)break;h=y.content}for(let h=u-1;h>=0;h--){let p=c[h],y=EK(p.type);if(y&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(y||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),y=c[p];if(y)for(let x=0;x<o.length;x++){let v=o[(x+l)%o.length],b=!0;v<0&&(b=!1,v=-v);let S=i.node(v-1),k=i.index(v-1);if(S.canReplaceWith(k,k,y.type,y.marks))return t.replace(i.before(v),b?s.after(v):n,new Lt(QO(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let p=o[h];p<0||(e=i.before(p),n=s.after(p))}}function QO(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(QO(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(ft.empty,!0))}return t}function TK(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=kK(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Lt(ft.from(r),0,0))}function jK(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=eL(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function eL(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Kp extends zs{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return yi.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return yi.fromReplace(e,this.pos,this.pos+1,new Lt(ft.from(i),0,n.isLeaf?0:1))}getMap(){return ta.empty}invert(e){return new Kp(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Kp(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Kp(n.pos,n.attr,n.value)}}zs.jsonID("attr",Kp);class Og extends zs{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return yi.ok(r)}getMap(){return ta.empty}invert(e){return new Og(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Og(n.attr,n.value)}}zs.jsonID("docAttr",Og);let o0=class extends Error{};o0=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};o0.prototype=Object.create(Error.prototype);o0.prototype.constructor=o0;o0.prototype.name="TransformError";class PK{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Dg}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new o0(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Lt.empty){let i=e2(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Lt(ft.from(r),0,0))}delete(e,n){return this.replace(e,n,Lt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return AK(this,e,n,r),this}replaceRangeWith(e,n,r){return TK(this,e,n,r),this}deleteRange(e,n){return jK(this,e,n),this}lift(e,n){return pK(this,e,n),this}join(e,n=1){return SK(this,e,n),this}wrap(e,n){return yK(this,e,n),this}setBlockType(e,n=e,r,i=null){return xK(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return wK(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Kp(e,n,r)),this}setDocAttribute(e,n){return this.step(new Og(e,n)),this}addNodeMark(e,n){return this.step(new Sd(e,n)),this}removeNodeMark(e,n){if(!(n instanceof vr)){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n=n.isInSet(r.marks),!n)return this}return this.step(new s0(e,n)),this}split(e,n=1,r){return bK(this,e,n,r),this}addMark(e,n,r){return dK(this,e,n,r),this}removeMark(e,n,r){return fK(this,e,n,r),this}clearIncompatible(e,n,r){return n4(this,e,n,r),this}}const nb=Object.create(null);class wn{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new DK(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Lt.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?Lt.empty:n),a==0&&bE(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),bE(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new mn(e):Dp(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Dp(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Dp(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new sa(e.node(0))}static atStart(e){return Dp(e,e,0,0,1)||new sa(e)}static atEnd(e){return Dp(e,e,e.content.size,e.childCount,-1)||new sa(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in nb)throw new RangeError("Duplicate use of selection JSON ID "+e);return nb[e]=n,n.prototype.jsonID=e,n}getBookmark(){return mn.between(this.$anchor,this.$head).getBookmark()}}wn.prototype.visible=!0;class DK{constructor(e,n){this.$from=e,this.$to=n}}let vE=!1;function wE(t){!vE&&!t.parent.inlineContent&&(vE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class mn extends wn{constructor(e,n=e){wE(e),wE(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return wn.near(r);let i=e.resolve(n.map(this.anchor));return new mn(i.parent.inlineContent?i:r,r)}replace(e,n=Lt.empty){if(super.replace(e,n),n==Lt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof mn&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new t2(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new mn(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=wn.findFrom(n,r,!0)||wn.findFrom(n,-r,!0);if(s)n=s.$head;else return wn.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(wn.findFrom(e,-r,!0)||wn.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new mn(e,n)}}wn.jsonID("text",mn);class t2{constructor(e,n){this.anchor=e,this.head=n}map(e){return new t2(e.map(this.anchor),e.map(this.head))}resolve(e){return mn.between(e.resolve(this.anchor),e.resolve(this.head))}}class Zt extends wn{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?wn.near(s):new Zt(s)}content(){return new Lt(ft.from(this.node),0,0)}eq(e){return e instanceof Zt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new i4(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Zt(e.resolve(n.anchor))}static create(e,n){return new Zt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Zt.prototype.visible=!1;wn.jsonID("node",Zt);class i4{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new t2(r,r):new i4(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Zt.isSelectable(r)?new Zt(n):wn.near(n)}}class sa extends wn{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Lt.empty){if(n==Lt.empty){e.delete(0,e.doc.content.size);let r=wn.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new sa(e)}map(e){return new sa(e)}eq(e){return e instanceof sa}getBookmark(){return OK}}wn.jsonID("all",sa);const OK={map(){return this},resolve(t){return new sa(t)}};function Dp(t,e,n,r,i,s=!1){if(e.inlineContent)return mn.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&Zt.isSelectable(a))return Zt.create(t,n-(i<0?a.nodeSize:0))}else{let l=Dp(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function bE(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Mi||i instanceof Ui))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(wn.near(t.doc.resolve(o),n))}const _E=1,SE=2,kE=4;class LK extends PK{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|_E)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&_E)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=SE,this}ensureMarks(e){return vr.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&SE)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||vr.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(wn.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=kE,this}get scrolledIntoView(){return(this.updated&kE)>0}}function NE(t,e){return!e||!t?t:t.bind(e)}class Dm{constructor(e,n,r){this.name=e,this.init=NE(n.init,r),this.apply=NE(n.apply,r)}}const MK=[new Dm("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Dm("selection",{init(t,e){return t.selection||wn.atStart(e.doc)},apply(t){return t.selection}}),new Dm("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Dm("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class rb{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=MK.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Dm(r.key,r.spec.state,r))})}}class $p{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new $p(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new LK(this)}static create(e){let n=new rb(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new $p(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new rb(this.schema,e.plugins),r=n.fields,i=new $p(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new rb(e.schema,e.plugins),s=new $p(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=jd.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=wn.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function tL(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=tL(i,e,{})),n[r]=i}return n}class ao{constructor(e){this.spec=e,this.props={},e.props&&tL(e.props,this,this.props),this.key=e.key?e.key.key:nL("plugin")}getState(e){return e[this.key]}}const ib=Object.create(null);function nL(t){return t in ib?t+"$"+ ++ib[t]:(ib[t]=0,t+"$")}class Al{constructor(e="key"){this.key=nL(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const is=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},a0=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Z5=null;const Qc=function(t,e,n){let r=Z5||(Z5=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},IK=function(){Z5=null},vh=function(t,e,n,r){return n&&(CE(t,e,n,r,-1)||CE(t,e,n,r,1))},RK=/^(img|br|input|textarea|hr)$/i;function CE(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Fa(t))){let s=t.parentNode;if(!s||s.nodeType!=1||y1(t)||RK.test(t.nodeName)||t.contentEditable=="false")return!1;e=is(t)+(i<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(i<0?-1:0)],t.contentEditable=="false")return!1;e=i<0?Fa(t):0}else return!1}}function Fa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function FK(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Fa(t)}else if(t.parentNode&&!y1(t))e=is(t),t=t.parentNode;else return null}}function zK(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!y1(t))e=is(t)+1,t=t.parentNode;else return null}}function BK(t,e,n){for(let r=e==0,i=e==Fa(t);r||i;){if(t==n)return!0;let s=is(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Fa(t)}}function y1(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const n2=function(t){return t.focusNode&&vh(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Xf(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function UK(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function $K(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Fa(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Fa(r.startContainer),r.startOffset)}}}const mc=typeof navigator<"u"?navigator:null,EE=typeof document<"u"?document:null,nf=mc&&mc.userAgent||"",Q5=/Edge\/(\d+)/.exec(nf),rL=/MSIE \d/.exec(nf),e_=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nf),Ao=!!(rL||e_||Q5),Dd=rL?document.documentMode:e_?+e_[1]:Q5?+Q5[1]:0,Cl=!Ao&&/gecko\/(\d+)/i.test(nf);Cl&&+(/Firefox\/(\d+)/.exec(nf)||[0,0])[1];const t_=!Ao&&/Chrome\/(\d+)/.exec(nf),Ls=!!t_,iL=t_?+t_[1]:0,no=!Ao&&!!mc&&/Apple Computer/.test(mc.vendor),l0=no&&(/Mobile\/\w+/.test(nf)||!!mc&&mc.maxTouchPoints>2),Ra=l0||(mc?/Mac/.test(mc.platform):!1),WK=mc?/Win/.test(mc.platform):!1,ru=/Android \d/.test(nf),x1=!!EE&&"webkitFontSmoothing"in EE.documentElement.style,VK=x1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function HK(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Gc(t,e){return typeof t=="number"?t:t[e]}function qK(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function AE(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=a0(o);continue}let a=o,l=a==s.body,c=l?HK(s):qK(a),u=0,d=0;if(e.top<c.top+Gc(r,"top")?d=-(c.top-e.top+Gc(i,"top")):e.bottom>c.bottom-Gc(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Gc(i,"top")-c.top:e.bottom-c.bottom+Gc(i,"bottom")),e.left<c.left+Gc(r,"left")?u=-(c.left-e.left+Gc(i,"left")):e.right>c.right-Gc(r,"right")&&(u=e.right-c.right+Gc(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,y=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let x=a.scrollLeft-p,v=a.scrollTop-y;e={left:e.left-x,top:e.top-v,right:e.right-x,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:a0(o)}}function GK(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:sL(t.dom)}}function sL(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=a0(r));return e}function KK({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;oL(n,r==0?0:r-e)}function oL(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Sp=null;function XK(t){if(t.setActive)return t.setActive();if(Sp)return t.focus(Sp);let e=sL(t);t.focus(Sp==null?{get preventScroll(){return Sp={preventScroll:!0},!0}}:void 0),Sp||(Sp=!1,oL(e,0))}function aL(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Qc(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let y=h[p];if(y.top<=o&&y.bottom>=a){o=Math.max(y.bottom,o),a=Math.min(y.top,a);let x=y.left>e.left?y.left-e.left:y.right<e.left?e.left-y.right:0;if(x<r){n=u,r=x,i=x&&n.nodeType==3?{left:y.right<e.left?y.right:y.left,top:e.top}:e,u.nodeType==1&&x&&(s=d+(e.left>=(y.left+y.right)/2?1:0));continue}}else y.top>e.top&&!l&&y.left<=e.left&&y.right>=e.left&&(l=u,c={left:Math.max(y.left,Math.min(y.right,e.left)),top:y.top});!n&&(e.left>=y.right&&e.top>=y.top||e.left>=y.left&&e.top>=y.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?YK(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:aL(n,i)}function YK(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=dd(r,1);if(s.top!=s.bottom&&s4(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function s4(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function JK(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function ZK(t,e,n){let{node:r,offset:i}=aL(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function QK(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function lL(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(s4(e,c))return lL(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function eX(t,e){let n=t.dom.ownerDocument,r,i=0,s=$K(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!s4(e,c)||(o=lL(t.dom,e,c),!o))return null}if(no)for(let c=o;r&&c;c=a0(c))c.draggable&&(r=void 0);if(o=JK(o,e),r){if(Cl&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;x1&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=QK(t,r,i,e))}a==null&&(a=ZK(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function TE(t){return t.top<t.bottom||t.left<t.right}function dd(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(TE(r))return r}return Array.prototype.find.call(n,TE)||t.getBoundingClientRect()}const tX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function cL(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=x1||Cl;if(r.nodeType==3)if(o&&(tX.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=dd(Qc(r,i,i),n);if(Cl&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=dd(Qc(r,i-1,i-1),-1);if(c.top==l.top){let u=dd(Qc(r,i,i+1),-1);if(u.top!=l.top)return hm(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,hm(dd(Qc(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Fa(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return sb(l.getBoundingClientRect(),!1)}if(s==null&&i<Fa(r)){let l=r.childNodes[i];if(l.nodeType==1)return sb(l.getBoundingClientRect(),!0)}return sb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Fa(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Qc(l,Fa(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return hm(dd(c,1),!1)}if(s==null&&i<Fa(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Qc(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return hm(dd(c,-1),!0)}return hm(dd(r.nodeType==3?Qc(r):r,-n),n>=0)}function hm(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function sb(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function uL(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function nX(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return uL(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=cL(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Qc(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const rX=/[\u0590-\u08ac]/;function iX(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!rX.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:uL(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:y,focusOffset:x}=t.domSelectionRange(),v=y&&!p.contains(y.nodeType==1?y:y.parentNode)||l==y&&c==x;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let jE=null,PE=null,DE=!1;function sX(t,e,n){return jE==e&&PE==n?DE:(jE=e,PE=n,DE=n=="up"||n=="down"?nX(t,e,n):iX(t,e,n))}const $a=0,OE=1,Qf=2,gc=3;class v1{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=$a,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>is(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof fL){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof dL&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?is(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?is(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=is(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=is(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let p=0,y=0;p<this.children.length;p++){let x=this.children[p],v=y+x.size;if(s>y&&o<v)return x.setSelection(e-y-x.border,n-y-x.border,r,i);y=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Cl||no)&&e==n){let{node:p,offset:y}=a;if(p.nodeType==3){if(d=!!(y&&p.nodeValue[y-1]==`
`),d&&y==p.nodeValue.length)for(let x=p,v;x;x=x.parentNode){if(v=x.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:is(v)+1});break}let b=x.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{let x=p.childNodes[y-1];d=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(Cl&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&no)&&vh(a.node,a.offset,u.anchorNode,u.anchorOffset)&&vh(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let y=a;a=l,l=y}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Qf:OE,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=gc:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Qf:gc}r=o}this.dirty=Qf}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Qf:OE;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class dL extends v1{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==$a&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class oX extends v1{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class wh extends v1{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Th.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new wh(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&gc||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=gc&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=$a){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=$a}}slice(e,n,r){let i=wh.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=r_(s,n,o,r)),e>0&&(s=r_(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Od extends v1{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Th.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=mL(u,r,n),c?l=new aX(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new r2(e,n,r,i,u,h,s):new Od(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ft.empty)}return e}matchesNode(e,n,r){return this.dirty==$a&&e.eq(this.node)&&Gx(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new cX(this,o&&o.node,e);fX(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?vr.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Qf)&&(o&&this.protectLocalComposition(e,o),hL(this.contentDOM,this.children,e),l0&&hX(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof mn)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=pX(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new oX(this,s,n,i);e.input.compositionNodes.push(o),this.children=r_(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==gc||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=$a}updateOuterDeco(e){if(Gx(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=pL(this.dom,this.nodeDOM,n_(this.outerDeco,this.node,n),n_(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function LE(t,e,n,r,i){mL(r,e,t);let s=new Od(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class r2 extends Od{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==gc||this.dirty!=$a&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=$a||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=$a,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new r2(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=gc)}get domAtom(){return!1}isText(e){return this.node.text==e}}class fL extends v1{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==$a&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class aX extends Od{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==gc)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function hL(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=ME(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof wh){let l=r?r.previousSibling:t.lastChild;hL(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=ME(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Jm=function(t){t&&(this.nodeName=t)};Jm.prototype=Object.create(null);const eh=[new Jm];function n_(t,e,n){if(t.length==0)return eh;let r=n?eh[0]:new Jm,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Jm(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Jm(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function pL(t,e,n,r){if(n==eh&&r==eh)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=eh[0]),i=l}lX(i,a||eh[0],o)}return i}function lX(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function mL(t,e,n){return pL(t,t,eh,n_(e,n,t.nodeType!=1))}function Gx(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ME(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class cX{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=uX(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=$a,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=wh.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==gc&&o.dom==o.contentDOM&&(o.dirty=Qf),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Od){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=gc&&Gx(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Qf,d.updateChildren(i,o+1),d.dirty=$a),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Gx(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Od.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Od.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new dL(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof wh;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof r2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((no||Ls)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new fL(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function uX(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof wh)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function dX(t,e){return t.type.side-e.type.side}function fX(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(dX);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let y=s+h.nodeSize;if(h.isText){let v=y;o<i.length&&i[o].from<v&&(v=i[o].from);for(let b=0;b<a.length;b++)a[b].to<v&&(v=a[b].to);v<y&&(l=h.cut(v-s),h=h.cut(0,v-s),y=v,p=-1)}else for(;o<i.length&&i[o].to<y;)o++;let x=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,x,e.forChild(s,h),p),s=y}}function hX(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function pX(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function r_(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function o4(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(n2(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&Zt.isSelectable(d)&&i.parent&&!(d.isInline&&BK(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new Zt(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let p=0;p<n.rangeCount;p++){let y=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(y.startContainer,y.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(y.endContainer,y.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=a4(t,u,a,d)}return c}function gL(t){return t.editable?t.hasFocus():xL(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function au(t,e=!1){let n=t.state.selection;if(yL(t,n),!!gL(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Ls){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&vh(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)gX(t);else{let{anchor:r,head:i}=n,s,o;IE&&!(n instanceof mn)&&(n.$from.parent.inlineContent||(s=RE(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=RE(t,n.to))),t.docView.setSelection(r,i,t,e),IE&&(s&&FE(s),o&&FE(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&mX(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const IE=no||Ls&&iL<63;function RE(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(no&&i&&i.contentEditable=="false")return ob(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ob(i);if(s)return ob(s)}}function ob(t){return t.contentEditable="true",no&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function FE(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function mX(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!gL(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function gX(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,is(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Ao&&Dd<=11&&(r.disabled=!0,r.disabled=!1)}function yL(t,e){if(e instanceof Zt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(zE(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else zE(t)}function zE(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function a4(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||mn.between(e,n,r)}function BE(t){return t.editable&&!t.hasFocus()?!1:xL(t)}function xL(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function yX(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return vh(e.node,e.offset,n.anchorNode,n.anchorOffset)}function i_(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&wn.findFrom(s,e)}function md(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function UE(t,e,n){let r=t.state.selection;if(r instanceof mn)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return md(t,new mn(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=i_(t.state,e);return i&&i instanceof Zt?md(t,i):!1}else if(!(Ra&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?Zt.isSelectable(s)?md(t,new Zt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):x1?md(t,new mn(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Zt&&r.node.isInline)return md(t,new mn(e>0?r.$to:r.$from));{let i=i_(t.state,e);return i?md(t,i):!1}}}function Kx(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Zm(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function kp(t,e){return e<0?xX(t):vX(t)}function xX(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Cl&&n.nodeType==1&&r<Kx(n)&&Zm(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Zm(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(vL(n))break;{let a=n.previousSibling;for(;a&&Zm(a,-1);)i=n.parentNode,s=is(a),a=a.previousSibling;if(a)n=a,r=Kx(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?s_(t,n,r):i&&s_(t,i,s)}function vX(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Kx(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Zm(a,1))s=n,o=++r;else break}else{if(vL(n))break;{let a=n.nextSibling;for(;a&&Zm(a,1);)s=a.parentNode,o=is(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=Kx(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&s_(t,s,o)}function vL(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function wX(t,e){for(;t&&e==t.childNodes.length&&!y1(t);)e=is(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function bX(t,e){for(;t&&!e&&!y1(t);)e=is(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function s_(t,e,n){if(e.nodeType!=3){let s,o;(o=wX(e,n))?(e=o,n=0):(s=bX(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(n2(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&au(t)},50)}function $E(t,e){let n=t.state.doc.resolve(e);if(!(Ls||WK)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function WE(t,e,n){let r=t.state.selection;if(r instanceof mn&&!r.empty||n.indexOf("s")>-1||Ra&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=i_(t.state,e);if(o&&o instanceof Zt)return md(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof sa?wn.near(o,e):wn.findFrom(o,e);return a?md(t,a):!1}return!1}function VE(t,e){if(!(t.state.selection instanceof mn))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function HE(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function _X(t){if(!no||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;HE(t,r,"true"),setTimeout(()=>HE(t,r,"false"),20)}return!1}function SX(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function kX(t,e){let n=e.keyCode,r=SX(e);if(n==8||Ra&&n==72&&r=="c")return VE(t,-1)||kp(t,-1);if(n==46&&!e.shiftKey||Ra&&n==68&&r=="c")return VE(t,1)||kp(t,1);if(n==13||n==27)return!0;if(n==37||Ra&&n==66&&r=="c"){let i=n==37?$E(t,t.state.selection.from)=="ltr"?-1:1:-1;return UE(t,i,r)||kp(t,i)}else if(n==39||Ra&&n==70&&r=="c"){let i=n==39?$E(t,t.state.selection.from)=="ltr"?1:-1:1;return UE(t,i,r)||kp(t,i)}else{if(n==38||Ra&&n==80&&r=="c")return WE(t,-1,r)||kp(t,-1);if(n==40||Ra&&n==78&&r=="c")return _X(t)||WE(t,1,r)||kp(t,1);if(r==(Ra?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function l4(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||Th.fromSchema(t.state.schema),a=NL(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=kL[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let y=a.createElement(u[p]);for(;l.firstChild;)y.appendChild(l.firstChild);l.appendChild(y),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function wL(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new Lt(ft.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):Lt.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:p}=t.state,y=Th.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(x=>{let v=o.appendChild(document.createElement("p"));x&&v.appendChild(y.serializeNode(p.text(x,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=AX(n),x1&&TX(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Pd.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!NX.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=jX(qE(a,+u[1],+u[2]),u[4]);else if(a=Lt.maxOpen(CX(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=qE(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const NX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function CX(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&_L(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=SL(o[o.length-1],s.length));let u=bL(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return ft.from(o)}return t}function bL(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ft.from(t));return t}function _L(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=_L(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(ft.from(bL(n,t,i+1))))}}function SL(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,SL(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ft.empty,!0);return t.copy(n.append(r))}function o_(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=o_(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(ft.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function qE(t,e,n){return e<t.openStart&&(t=new Lt(o_(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Lt(o_(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const kL={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let GE=null;function NL(){return GE||(GE=document.implementation.createHTMLDocument("title"))}let ab=null;function EX(t){let e=window.trustedTypes;return e?(ab||(ab=e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ab.createHTML(t)):t}function AX(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=NL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&kL[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=EX(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function TX(t){let e=t.querySelectorAll(Ls?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function jX(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=ft.from(l.create(r[a+1],i)),s++,o++}return new Lt(i,s,o)}const ro={},io={},PX={touchstart:!0,touchmove:!0};class DX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function OX(t){for(let e in ro){let n=ro[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{MX(t,r)&&!c4(t,r)&&(t.editable||!(r.type in io))&&n(t,r)},PX[e]?{passive:!0}:void 0)}no&&t.dom.addEventListener("input",()=>null),a_(t)}function kd(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function LX(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function a_(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>c4(t,r))})}function c4(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function MX(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function IX(t,e){!c4(t,e)&&ro[e.type]&&(t.editable||!(e.type in io))&&ro[e.type](t,e)}io.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!EL(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(ru&&Ls&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),l0&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Xf(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||kX(t,n)?n.preventDefault():kd(t,"key")};io.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};io.keypress=(t,e)=>{let n=e;if(EL(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ra&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof mn)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode);!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",s=>s(t,r.$from.pos,r.$to.pos,i))&&t.dispatch(t.state.tr.insertText(i).scrollIntoView()),n.preventDefault()}};function i2(t){return{left:t.clientX,top:t.clientY}}function RX(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function u4(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Xp(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function FX(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Zt.isSelectable(r)?(Xp(t,new Zt(n)),!0):!1}function zX(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Zt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(Zt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Xp(t,Zt.create(t.state.doc,i)),!0):!1}function BX(t,e,n,r,i){return u4(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?zX(t,n):FX(t,n))}function UX(t,e,n,r){return u4(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function $X(t,e,n,r){return u4(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||WX(t,n,r)}function WX(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Xp(t,mn.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Xp(t,mn.create(r,a+1,a+1+o.content.size));else if(Zt.isSelectable(o))Xp(t,Zt.create(r,a));else continue;return!0}}function d4(t){return Xx(t)}const CL=Ra?"metaKey":"ctrlKey";ro.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=d4(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&RX(n,t.input.lastClick)&&!n[CL]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(i2(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new VX(t,o,n,!!r)):(s=="doubleClick"?UX:$X)(t,o.pos,o.inside,n)?n.preventDefault():kd(t,"pointer"))};class VX{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[CL],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof Zt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cl&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),kd(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>au(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(i2(e))),this.updateAllowDefault(e),this.allowDefault||!n?kd(this.view,"pointer"):BX(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||no&&this.mightDrag&&!this.mightDrag.node.isAtom||Ls&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Xp(this.view,wn.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):kd(this.view,"pointer")}move(e){this.updateAllowDefault(e),kd(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ro.touchstart=t=>{t.input.lastTouch=Date.now(),d4(t),kd(t,"pointer")};ro.touchmove=t=>{t.input.lastTouch=Date.now(),kd(t,"pointer")};ro.contextmenu=t=>d4(t);function EL(t,e){return t.composing?!0:no&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const HX=ru?5e3:-1;io.compositionstart=io.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof mn&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),Xx(t,!0),t.markCursor=null;else if(Xx(t,!e.selection.empty),Cl&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}AL(t,HX)};io.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,AL(t,20))};function AL(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xx(t),e))}function TL(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=GX());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function qX(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=FK(e.focusNode,e.focusOffset),r=zK(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function GX(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xx(t,e=!1){if(!(ru&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),TL(t),e||t.docView&&t.docView.dirty){let n=o4(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!t.state.selection.empty?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function KX(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Lg=Ao&&Dd<15||l0&&VK<604;ro.copy=io.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Lg?null:n.clipboardData,o=r.content(),{dom:a,text:l}=l4(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):KX(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function XX(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function YX(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Mg(t,r.value,null,i,e):Mg(t,r.textContent,r.innerHTML,i,e)},50)}function Mg(t,e,n,r,i){let s=wL(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||Lt.empty)))return!0;if(!s)return!1;let o=XX(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function jL(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}io.paste=(t,e)=>{let n=e;if(t.composing&&!ru)return;let r=Lg?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Mg(t,jL(r),r.getData("text/html"),i,n)?n.preventDefault():YX(t,n)};class PL{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const DL=Ra?"altKey":"ctrlKey";ro.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(i2(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Zt?i.to-1:i.to))){if(r&&r.mightDrag)o=Zt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=Zt.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=l4(t,a);(!n.dataTransfer.files.length||!Ls||iL>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Lg?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Lg||n.dataTransfer.setData("text/plain",c),t.dragging=new PL(u,!n[DL],o)};ro.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};io.dragover=io.dragenter=(t,e)=>e.preventDefault();io.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(i2(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",y=>{o=y(o,t)}):o=wL(t,jL(n.dataTransfer),Lg?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&!n[DL]);if(t.someProp("handleDrop",y=>y(t,n,o||Lt.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?YO(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:y}=r;y?y.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&Zt.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Zt(p));else{let y=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((x,v,b,S)=>y=S),c.setSelection(a4(t,p,c.doc.resolve(y)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};ro.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&au(t)},20))};ro.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ro.beforeinput=(t,e)=>{if(Ls&&ru&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Xf(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in io)ro[t]=io[t];function Ig(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Yx{constructor(e,n){this.toDOM=e,this.spec=n||ch,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new na(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Yx&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ig(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ld{constructor(e,n){this.attrs=e,this.spec=n||ch}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new na(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ld&&Ig(this.attrs,e.attrs)&&Ig(this.spec,e.spec)}static is(e){return e.type instanceof Ld}destroy(){}}class f4{constructor(e,n){this.attrs=e,this.spec=n||ch}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new na(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof f4&&Ig(this.attrs,e.attrs)&&Ig(this.spec,e.spec)}destroy(){}}class na{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new na(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new na(e,e,new Yx(n,r))}static inline(e,n,r,i){return new na(e,n,new Ld(r,i))}static node(e,n,r,i){return new na(e,n,new f4(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ld}get widget(){return this.type instanceof Yx}}const Op=[],ch={};class gi{constructor(e,n){this.local=e.length?e:Op,this.children=n.length?n:Op}static create(e,n){return n.length?Jx(n,e,0,ch):Ps}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Ps||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ch)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?JX(this.children,o||[],e,n,r,i,s):o?new gi(o.sort(uh),Op):Ps}add(e,n){return n.length?this==Ps?gi.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=LL(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,Jx(u,a,c+1,ch)),s+=3}});let o=OL(s?ML(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new gi(o.length?this.local.concat(o).sort(uh):this.local,i||this.children)}remove(e){return e.length==0||this==Ps?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Ps?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new gi(i,r):Ps}forChild(e,n){if(this==Ps)return this;if(n.isLeaf)return gi.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Ld){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new gi(i.sort(uh),Op);return r?new xd([a,r]):a}return r||Ps}eq(e){if(this==e)return!0;if(!(e instanceof gi)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return h4(this.localsInner(e))}localsInner(e){if(this==Ps)return Op;if(e.inlineContent||!this.local.some(Ld.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ld||n.push(this.local[r]);return n}forEachSet(e){e(this)}}gi.empty=new gi([],[]);gi.removeOverlap=h4;const Ps=gi.empty;class xd{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ch));return xd.from(r)}forChild(e,n){if(n.isLeaf)return gi.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Ps&&(s instanceof xd?r=r.concat(s.members):r.push(s))}return xd.from(r)}eq(e){if(!(e instanceof xd)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?h4(r?n:n.sort(uh)):Op}static from(e){switch(e.length){case 0:return Ps;case 1:return e[0];default:return new xd(e.every(n=>n instanceof gi)?e:e.reduce((n,r)=>n.concat(r instanceof gi?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function JX(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,y,x)=>{let v=x-y-(p-h);for(let b=0;b<a.length;b+=3){let S=a[b+1];if(S<0||h>S+u-d)continue;let k=a[b]+u-d;p>=k?a[b+1]=h<=k?-2:-1:h>=u&&v&&(a[b]+=v,a[b+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-i,{index:y,offset:x}=r.content.findIndex(d),v=r.maybeChild(y);if(v&&x==d&&x+v.nodeSize==p){let b=a[c+2].mapInner(n,v,u+1,t[c]+s+1,o);b!=Ps?(a[c]=d,a[c+1]=p,a[c+2]=b):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ZX(a,t,e,n,i,s,o),u=Jx(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new gi(e.sort(uh),a)}function OL(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new na(i.from+e,i.to+e,i.type))}return n}function ZX(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function LL(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function ML(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Jx(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=LL(t,a,l+n);if(c){s=!0;let u=Jx(c,a,n+l+1,r);u!=Ps&&i.push(l,l+a.nodeSize,u)}});let o=OL(s?ML(t):t,-n).sort(uh);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new gi(o,i):Ps}function uh(t,e){return t.from-e.from||t.to-e.to}function h4(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),KE(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),KE(e,i,r.copy(s.from,r.to)));break}}}return e}function KE(t,e,n){for(;e<t.length&&uh(n,t[e])>0;)e++;t.splice(e,0,n)}function lb(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Ps&&e.push(r)}),t.cursorWrapper&&e.push(gi.create(t.state.doc,[t.cursorWrapper.deco])),xd.from(e)}const QX={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},eY=Ao&&Dd<=11;class tY{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class nY{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new tY,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ao&&Dd<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),eY&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,QX)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(BE(this.view)){if(this.suppressingSelectionUpdates)return au(this.view);if(Ao&&Dd<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=a0(s))n.add(s);for(let s=e.anchorNode;s;s=a0(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&BE(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Cl&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||sY(e,d)!=p)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&n2(r)&&(c=o4(e))&&c.eq(wn.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,au(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),rY(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||au(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ao&&Dd<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?is(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?is(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let XE=new WeakMap,YE=!1;function rY(t){if(!XE.has(t)&&(XE.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Cl,YE)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),YE=!0}}function JE(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return vh(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function iY(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return JE(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?JE(t,n):null}function sY(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function oY(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],n2(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ls&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let b=r.childNodes[v-1],S=b.pmViewDesc;if(b.nodeName=="BR"&&!S){s=v;break}if(!S||S.size)break}let d=t.state.doc,h=t.someProp("domParser")||Pd.fromSchema(t.state.schema),p=d.resolve(o),y=null,x=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:aY,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,b=c[1]&&c[1].pos;b==null&&(b=v),y={anchor:v+o,head:b+o}}return{doc:x,sel:y,from:o,to:a}}function aY(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(no&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||no&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const lY=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function cY(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let L=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,R=o4(t,L);if(R&&!t.state.selection.eq(R)){if(Ls&&ru&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",M=>M(t,Xf(13,"Enter"))))return;let D=t.state.tr.setSelection(R);L=="pointer"?D.setMeta("pointer",!0):L=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),t.dispatch(D)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=oY(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let y=fY(d.content,c.doc.content,c.from,h,p);if(y&&t.input.domChangeCount++,(l0&&t.input.lastIOSEnter>Date.now()-225||ru)&&i.some(L=>L.nodeType==1&&!lY.test(L.nodeName))&&(!y||y.endA>=y.endB)&&t.someProp("handleKeyDown",L=>L(t,Xf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!y)if(r&&l instanceof mn&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))y={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let L=ZE(t,t.state.doc,c.sel);if(L&&!L.eq(t.state.selection)){let R=t.state.tr.setSelection(L);s&&R.setMeta("composition",s),t.dispatch(R)}}return}t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof mn&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),Ao&&Dd<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>c.from&&c.doc.textBetween(y.start-c.from-1,y.start-c.from+1)==" "&&(y.start--,y.endA--,y.endB--);let x=c.doc.resolveNoCache(y.start-c.from),v=c.doc.resolveNoCache(y.endB-c.from),b=u.resolve(y.start),S=x.sameParent(v)&&x.parent.inlineContent&&b.end()>=y.endA,k;if((l0&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(L=>L.nodeName=="DIV"||L.nodeName=="P"))||!S&&x.pos<c.doc.content.size&&!x.sameParent(v)&&(k=wn.findFrom(c.doc.resolve(x.pos+1),1,!0))&&k.head==v.pos)&&t.someProp("handleKeyDown",L=>L(t,Xf(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>y.start&&dY(u,y.start,y.endA,x,v)&&t.someProp("handleKeyDown",L=>L(t,Xf(8,"Backspace")))){ru&&Ls&&t.domObserver.suppressSelectionUpdates();return}Ls&&y.endB==y.start&&(t.input.lastChromeDelete=Date.now()),ru&&!S&&x.start()!=v.start()&&v.parentOffset==0&&x.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==y.endA&&(y.endB-=2,v=c.doc.resolveNoCache(y.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(L){return L(t,Xf(13,"Enter"))})},20));let T=y.start,j=y.endA,P,C,N;if(S){if(x.pos==v.pos)Ao&&Dd<=11&&x.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>au(t),20)),P=t.state.tr.delete(T,j),C=u.resolve(y.start).marksAcross(u.resolve(y.endA));else if(y.endA==y.endB&&(N=uY(x.parent.content.cut(x.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,y.endA-b.start()))))P=t.state.tr,N.type=="add"?P.addMark(T,j,N.mark):P.removeMark(T,j,N.mark);else if(x.parent.child(x.index()).isText&&x.index()==v.index()-(v.textOffset?0:1)){let L=x.parent.textBetween(x.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",R=>R(t,T,j,L)))return;P=t.state.tr.insertText(L,T,j)}}if(P||(P=t.state.tr.replace(T,j,c.doc.slice(y.start-c.from,y.endB-c.from))),c.sel){let L=ZE(t,P.doc,c.sel);L&&!(Ls&&t.composing&&L.empty&&(y.start!=y.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==T||L.head==P.mapping.map(j)-1)||Ao&&L.empty&&L.head==T)&&P.setSelection(L)}C&&P.ensureMarks(C),s&&P.setMeta("composition",s),t.dispatch(P.scrollIntoView())}function ZE(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:a4(t,e.resolve(n.anchor),e.resolve(n.head))}function uY(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(ft.from(c).eq(t))return{mark:a,type:o}}function dY(t,e,n,r,i){if(n-e<=i.pos-r.pos||cb(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(cb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||cb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function cb(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function fY(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&QE(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&QE(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function QE(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class hY{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new DX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(iA),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=nA(this),tA(this),this.nodeViews=rA(this),this.docView=LE(this.state.doc,eA(this),lb(this),this.dom,this),this.domObserver=new nY(this,(r,i,s,o)=>cY(this,r,i,s,o)),this.domObserver.start(),OX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&a_(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iA),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(TL(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=rA(this);mY(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&a_(this),this.editable=nA(this),tA(this);let l=lb(this),c=eA(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&GK(this);if(o){this.domObserver.stop();let p=d&&(Ao||Ls)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&pY(i.selection,e.selection);if(d){let y=Ls?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=qX(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=LE(e.doc,c,l,this.dom,this)),y&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&yX(this))?au(this,p):(yL(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&KK(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Zt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&AE(this,n.getBoundingClientRect(),e)}else AE(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new PL(e.slice,e.move,i<0?void 0:Zt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Ao){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&XK(this.dom),au(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return eX(this,e)}coordsAtPos(e,n=1){return cL(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return sX(this,n||this.state,e)}pasteHTML(e,n){return Mg(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Mg(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return l4(this,e)}destroy(){this.docView&&(LX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,IK())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return IX(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?no&&this.root.nodeType===11&&UK(this.dom.ownerDocument)==this.dom&&iY(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function eA(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[na.node(0,t.state.doc.content.size,e)]}function tA(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:na.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function nA(t){return!t.someProp("editable",e=>e(t.state)===!1)}function pY(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function rA(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function mY(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function iA(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Wd={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zx={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},gY=typeof navigator<"u"&&/Mac/.test(navigator.platform),yY=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ss=0;ss<10;ss++)Wd[48+ss]=Wd[96+ss]=String(ss);for(var ss=1;ss<=24;ss++)Wd[ss+111]="F"+ss;for(var ss=65;ss<=90;ss++)Wd[ss]=String.fromCharCode(ss+32),Zx[ss]=String.fromCharCode(ss);for(var ub in Wd)Zx.hasOwnProperty(ub)||(Zx[ub]=Wd[ub]);function xY(t){var e=gY&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||yY&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Zx:Wd)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const vY=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function wY(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))vY?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function bY(t){let e=Object.create(null);for(let n in t)e[wY(n)]=t[n];return e}function db(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function _Y(t){return new ao({props:{handleKeyDown:IL(t)}})}function IL(t){let e=bY(t);return function(n,r){let i=xY(r),s,o=e[db(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[db(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(s=Wd[r.keyCode])&&s!=i){let a=e[db(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const p4=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function RL(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const FL=(t,e,n)=>{let r=RL(t,n);if(!r)return!1;let i=m4(r);if(!i){let o=r.blockRange(),a=o&&A0(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(GL(t,i,e,-1))return!0;if(r.parent.content.size==0&&(c0(s,"end")||Zt.isSelectable(s)))for(let o=r.depth;;o--){let a=e2(t.doc,r.before(o),r.after(o),Lt.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(c0(s,"end")?wn.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):Zt.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},SY=(t,e,n)=>{let r=RL(t,n);if(!r)return!1;let i=m4(r);return i?zL(t,i,e):!1},kY=(t,e,n)=>{let r=UL(t,n);if(!r)return!1;let i=g4(r);return i?zL(t,i,e):!1};function zL(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=e2(t.doc,s,l,Lt.empty);if(!c||c.from!=s||c instanceof Mi&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(mn.create(u.doc,s)),n(u.scrollIntoView())}return!0}function c0(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const BL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=m4(r)}let o=s&&s.nodeBefore;return!o||!Zt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Zt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function m4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function UL(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const $L=(t,e,n)=>{let r=UL(t,n);if(!r)return!1;let i=g4(r);if(!i)return!1;let s=i.nodeAfter;if(GL(t,i,e,1))return!0;if(r.parent.content.size==0&&(c0(s,"start")||Zt.isSelectable(s))){let o=e2(t.doc,r.before(),r.after(),Lt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(c0(s,"start")?wn.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):Zt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},WL=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=g4(r)}let o=s&&s.nodeAfter;return!o||!Zt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(Zt.create(t.doc,s.pos)).scrollIntoView()),!0)};function g4(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const NY=(t,e)=>{let n=t.selection,r=n instanceof Zt,i;if(r){if(n.node.isTextblock||!tf(t.doc,n.from))return!1;i=n.from}else if(i=Qv(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Zt.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},CY=(t,e)=>{let n=t.selection,r;if(n instanceof Zt){if(n.node.isTextblock||!tf(t.doc,n.to))return!1;r=n.to}else if(r=Qv(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},EY=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&A0(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},VL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function y4(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const AY=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=y4(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(wn.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},HL=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof sa||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=y4(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(mn.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},qL=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(ou(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&A0(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function TY(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Zt&&e.selection.node.isBlock)return!r.parentOffset||!ou(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=y4(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof mn||e.selection instanceof sa)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=ou(u.doc,d,s.length,s);if(h||(s[0]=a?{type:a}:null,h=ou(u.doc,d,s.length,s)),u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),y=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(y.index(),y.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const jY=TY(),PY=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Zt.create(t.doc,i))),!0)};function DY(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||tf(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function GL(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&DY(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,y=ft.empty;for(let b=o.length-1;b>=0;b--)y=ft.from(o[b].create(null,y));y=ft.from(i.copy(y));let x=t.tr.step(new Ui(e.pos-1,p,e.pos,p,new Lt(y,1,0),o.length,!0)),v=x.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&tf(x.doc,v.pos)&&x.join(v.pos),n(x.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:wn.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&A0(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&c0(s,"start",!0)&&c0(i,"end")){let p=i,y=[];for(;y.push(p),!p.isTextblock;)p=p.lastChild;let x=s,v=1;for(;!x.isTextblock;x=x.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,x.content)){if(n){let b=ft.empty;for(let k=y.length-1;k>=0;k--)b=ft.from(y[k].copy(b));let S=t.tr.step(new Ui(e.pos-y.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new Lt(b,y.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function KL(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(mn.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const OY=KL(-1),LY=KL(1);function MY(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&r4(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function sA(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function x4(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}x4(p4,FL,BL);x4(p4,$L,WL);x4(VL,HL,qL,jY);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function IY(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return RY(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function RY(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new Hx(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Hx(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=r4(s,n,r,e);return a?(t&&FY(t,e,a,i,n),!0):!1}function FY(t,e,n,r,i){let s=ft.empty;for(let u=n.length-1;u>=0;u--)s=ft.from(n[u].type.create(n[u].attrs,s));t.step(new Ui(e.start-(r?2:0),e.end,e.start,e.end,new Lt(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&ou(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function zY(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?BY(e,n,t,s):UY(e,n,s):!0:!1}}function BY(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ui(s-1,o,s,o,new Lt(ft.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hx(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=A0(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return tf(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function UY(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,y=n.endIndex-1,x=n.startIndex;y>x;y--)p-=i.child(y).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?ft.empty:ft.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new Ui(d-(a?1:0),h+(l?1:0),d+1,h-1,new Lt((a?ft.empty:ft.from(i.copy(ft.empty))).append(l?ft.empty:ft.from(i.copy(ft.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function $Y(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=ft.from(c?t.create():null),d=new Lt(ft.from(t.create(null,ft.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new Ui(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function s2(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class o2{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...x)=>{const v=this.buildProps(c,n),b=p(...x)(v);return a.push(b),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:s2({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class WY{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function $t(t,e,n){return t.config[e]===void 0&&t.parent?$t(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?$t(t.parent,e,n):null}):t.config[e]}function a2(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function XL(t){const e=[],{nodeExtensions:n,markExtensions:r}=a2(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=$t(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:d,name:h,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=$t(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Hi(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function so(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function l_(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>so(n,r),{})}function YL(t){return typeof t=="function"}function En(t,e=void 0,...n){return YL(t)?e?t.bind(e)(...n):t(...n):t}function VY(t={}){return Object.keys(t).length===0&&t.constructor===Object}function HY(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function oA(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):HY(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function aA(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&VY(n)?!1:n!=null))}function qY(t,e){var n;const r=XL(t),{nodeExtensions:i,markExtensions:s}=a2(t),o=(n=i.find(c=>$t(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(b=>b.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((b,S)=>{const k=$t(S,"extendNodeSchema",d);return{...b,...k?k(c):{}}},{}),p=aA({...h,content:En($t(c,"content",d)),marks:En($t(c,"marks",d)),group:En($t(c,"group",d)),inline:En($t(c,"inline",d)),atom:En($t(c,"atom",d)),selectable:En($t(c,"selectable",d)),draggable:En($t(c,"draggable",d)),code:En($t(c,"code",d)),whitespace:En($t(c,"whitespace",d)),linebreakReplacement:En($t(c,"linebreakReplacement",d)),defining:En($t(c,"defining",d)),isolating:En($t(c,"isolating",d)),attrs:Object.fromEntries(u.map(b=>{var S;return[b.name,{default:(S=b==null?void 0:b.attribute)===null||S===void 0?void 0:S.default}]}))}),y=En($t(c,"parseHTML",d));y&&(p.parseDOM=y.map(b=>oA(b,u)));const x=$t(c,"renderHTML",d);x&&(p.toDOM=b=>x({node:b,HTMLAttributes:l_(b,u)}));const v=$t(c,"renderText",d);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,b)=>{const S=$t(b,"extendMarkSchema",d);return{...v,...S?S(c):{}}},{}),p=aA({...h,inclusive:En($t(c,"inclusive",d)),excludes:En($t(c,"excludes",d)),group:En($t(c,"group",d)),spanning:En($t(c,"spanning",d)),code:En($t(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var b;return[v.name,{default:(b=v==null?void 0:v.attribute)===null||b===void 0?void 0:b.default}]}))}),y=En($t(c,"parseHTML",d));y&&(p.parseDOM=y.map(v=>oA(v,u)));const x=$t(c,"renderHTML",d);return x&&(p.toDOM=v=>x({mark:v,HTMLAttributes:l_(v,u)})),[c.name,p]}));return new zO({topNode:o,nodes:a,marks:l})}function fb(t,e){return e.nodes[t]||e.marks[t]||null}function lA(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function v4(t,e){const n=Th.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const GY=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function w4(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class l2{constructor(e){this.find=e.find,this.handler=e.handler}}const KY=(t,e)=>{if(w4(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function ky(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=GY(c)+s;return o.forEach(h=>{if(u)return;const p=KY(d,h.find);if(!p)return;const y=l.state.tr,x=s2({state:l.state,transaction:y}),v={from:r-(p[0].length-s.length),to:i},{commands:b,chain:S,can:k}=new o2({editor:n,state:x});h.handler({state:x,range:v,match:p,commands:b,chain:S,can:k})===null||!y.steps.length||(y.setMeta(a,{transform:y,from:r,to:i,text:s}),l.dispatch(y),u=!0)}),u}function XY(t){const{editor:e,rules:n}=t,r=new ao({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=v4(ft.from(u),o.schema);const{from:d}=l,h=d+u.length;ky({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return ky({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&ky({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?ky({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function YY(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ny(t){return YY(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function c2(t,e){const n={...t};return Ny(t)&&Ny(e)&&Object.keys(e).forEach(r=>{Ny(e[r])&&Ny(t[r])?n[r]=c2(t[r],e[r]):n[r]=e[r]}),n}class Vd{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=En($t(this,"addOptions",{name:this.name}))),this.storage=En($t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Vd(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>c2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Vd(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=En($t(n,"addOptions",{name:n.name})),n.storage=En($t(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function JY(t){return typeof t=="number"}class ZY{constructor(e){this.find=e.find,this.handler=e.handler}}const QY=(t,e,n)=>{if(w4(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function eJ(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new o2({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,y)=>{if(!p.isTextblock||p.type.spec.code)return;const x=Math.max(r,y),v=Math.min(i,y+p.content.size),b=p.textBetween(x-y,v-y,void 0,"");QY(b,s.find,o).forEach(k=>{if(k.index===void 0)return;const T=x+k.index+1,j=T+k[0].length,P={from:n.tr.mapping.map(T),to:n.tr.mapping.map(j)},C=s.handler({state:n,range:P,match:k,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(C)})}),d.every(p=>p!==null)}let Cy=null;const tJ=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function nJ(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:p,pasteEvt:y})=>{const x=u.tr,v=s2({state:u,transaction:x});if(!(!eJ({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:y,dropEvent:a})||!x.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,x}};return n.map(u=>new ao({view(d){const h=y=>{var x;r=!((x=d.dom.parentElement)===null||x===void 0)&&x.contains(y.target)?d.dom.parentElement:null,r&&(Cy=e)},p=()=>{Cy&&(Cy=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const p=Cy;p&&setTimeout(()=>{const y=p.state.selection;y&&p.commands.deleteRange({from:y.from,to:y.to})},10)}return!1},paste:(d,h)=>{var p;const y=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=h,i=!!(y!=null&&y.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const y=d[0],x=y.getMeta("uiEvent")==="paste"&&!i,v=y.getMeta("uiEvent")==="drop"&&!s,b=y.getMeta("applyPasteRules"),S=!!b;if(!x&&!v&&!S)return;if(S){let{text:j}=b;typeof j=="string"?j=j:j=v4(ft.from(j),p.schema);const{from:P}=b,C=P+j.length,N=tJ(j);return l({rule:u,state:p,from:P,to:{b:C},pasteEvt:N})}const k=h.doc.content.findDiffStart(p.doc.content),T=h.doc.content.findDiffEnd(p.doc.content);if(!(!JY(k)||!T||k===T.b))return l({rule:u,state:p,from:k,to:T,pasteEvt:o})}}))}function rJ(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Wp{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Wp.resolve(e),this.schema=qY(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Wp.sort(Wp.flatten(e)),r=rJ(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=$t(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=$t(r,"priority")||100,o=$t(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:fb(n.name,this.schema)},i=$t(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Wp.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:fb(o.name,this.schema)},l=[],c=$t(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&$t(o,"exitable",a)&&(u.ArrowRight=()=>Vd.handleExit({editor:e,mark:o})),c){const x=Object.fromEntries(Object.entries(c()).map(([v,b])=>[v,()=>b({editor:e})]));u={...u,...x}}const d=_Y(u);l.push(d);const h=$t(o,"addInputRules",a);lA(o,e.options.enableInputRules)&&h&&r.push(...h());const p=$t(o,"addPasteRules",a);lA(o,e.options.enablePasteRules)&&p&&i.push(...p());const y=$t(o,"addProseMirrorPlugins",a);if(y){const x=y();l.push(...x)}return l}).flat();return[XY({editor:e,rules:r}),...nJ({editor:e,rules:i}),...s]}get attributes(){return XL(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=a2(this.extensions);return Object.fromEntries(n.filter(r=>!!$t(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Hi(r.name,this.schema)},o=$t(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const p=l_(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:fb(e.name,this.schema)};e.type==="mark"&&(!((n=En($t(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=$t(e,"onBeforeCreate",r),s=$t(e,"onCreate",r),o=$t(e,"onUpdate",r),a=$t(e,"onSelectionUpdate",r),l=$t(e,"onTransaction",r),c=$t(e,"onFocus",r),u=$t(e,"onBlur",r),d=$t(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Fs{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=En($t(this,"addOptions",{name:this.name}))),this.storage=En($t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Fs(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>c2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Fs({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=En($t(n,"addOptions",{name:n.name})),n.storage=En($t(n,"addStorage",{name:n.name,options:n.options})),n}}function JL(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function ZL(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const iJ=Fs.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ao({key:new Al("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=ZL(n);return JL(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),sJ=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),oJ=(t=!1)=>({commands:e})=>e.setContent("",t),aJ=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const y=A0(p);if(a.type.isTextblock){const{defaultType:x}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,x)}(y||y===0)&&e.lift(p,y)})}),!0},lJ=t=>e=>t(e),cJ=()=>({state:t,dispatch:e})=>HL(t,e),uJ=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new mn(r.doc.resolve(o-1))),!0},dJ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},fJ=t=>({tr:e,state:n,dispatch:r})=>{const i=Hi(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},hJ=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},pJ=()=>({state:t,dispatch:e})=>p4(t,e),mJ=()=>({commands:t})=>t.keyboardShortcut("Enter"),gJ=()=>({state:t,dispatch:e})=>AY(t,e);function Qx(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:w4(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function QL(t,e,n={}){return t.find(r=>r.type===e&&Qx(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function cA(t,e,n={}){return!!QL(t,e,n)}function b4(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!QL([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&cA([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&cA([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function rf(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const yJ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=rf(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=b4(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=mn.create(o,d.from,d.to);n.setSelection(h)}}return!0},xJ=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function e8(t){return t instanceof mn}function th(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function t8(t,e=null){if(!e)return null;const n=wn.atStart(t),r=wn.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?mn.create(t,th(0,i,s),th(t.content.size,i,s)):mn.create(t,th(e,i,s),th(e,i,s))}function vJ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function _4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const wJ=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(_4()||vJ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!e8(n.state.selection))return o(),!0;const a=t8(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},bJ=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),_J=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),n8=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&n8(r)}return t};function Ey(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return n8(n)}function ev(t,e,n){if(t instanceof jd||t instanceof ft)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ft.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),ev("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new zO({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?Pd.fromSchema(l).parseSlice(Ey(t),n.parseOptions):Pd.fromSchema(l).parse(Ey(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=Pd.fromSchema(e);return n.slice?s.parseSlice(Ey(t),n.parseOptions).content:s.parse(Ey(t),n.parseOptions)}return ev("",e,n)}function SJ(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Mi||i instanceof Ui))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(wn.near(t.doc.resolve(o),n))}const kJ=t=>!("type"in t),NJ=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;try{a=ev(e,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(y){return s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},u=!0,d=!0;if((kJ(a)?a:[a]).forEach(y=>{y.check(),u=u?y.isText&&y.marks.length===0:!1,d=d?y.isBlock:!1}),l===c&&d){const{parent:y}=r.doc.resolve(l);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(y=>y.text||"").join("");else if(e instanceof ft){let y="";e.forEach(x=>{x.text&&(y+=x.text)}),p=y}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);n.updateSelection&&SJ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},CJ=()=>({state:t,dispatch:e})=>NY(t,e),EJ=()=>({state:t,dispatch:e})=>CY(t,e),AJ=()=>({state:t,dispatch:e})=>FL(t,e),TJ=()=>({state:t,dispatch:e})=>$L(t,e),jJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Qv(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},PJ=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Qv(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},DJ=()=>({state:t,dispatch:e})=>SY(t,e),OJ=()=>({state:t,dispatch:e})=>kY(t,e);function r8(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function LJ(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))_4()||r8()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const MJ=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=LJ(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Rg(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Hi(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const p=Math.max(r,h),y=Math.min(i,h+d.nodeSize);a.push({node:d,from:p,to:y})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Qx(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const IJ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return Rg(n,i,e)?EY(n,r):!1},RJ=()=>({state:t,dispatch:e})=>qL(t,e),FJ=t=>({state:e,dispatch:n})=>{const r=Hi(t,e.schema);return zY(r)(e,n)},zJ=()=>({state:t,dispatch:e})=>VL(t,e);function u2(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function uA(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const BJ=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=u2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Hi(t,r.schema)),a==="mark"&&(o=rf(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,uA(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(uA(d.attrs,e)))})})}),!0):!1},UJ=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),$J=()=>({tr:t,dispatch:e})=>{if(e){const n=new sa(t.doc);t.setSelection(n)}return!0},WJ=()=>({state:t,dispatch:e})=>BL(t,e),VJ=()=>({state:t,dispatch:e})=>WL(t,e),HJ=()=>({state:t,dispatch:e})=>PY(t,e),qJ=()=>({state:t,dispatch:e})=>LY(t,e),GJ=()=>({state:t,dispatch:e})=>OY(t,e);function c_(t,e,n={},r={}){return ev(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const KJ=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=c_(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function i8(t,e){const n=rf(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function XJ(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function YJ(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function S4(t){return e=>YJ(e.$from,t)}function JJ(t,e){const n={from:0,to:t.content.size};return JL(t,n,e)}function ZJ(t,e){const n=Hi(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function QJ(t,e){const n=u2(typeof e=="string"?e:e.name,t.schema);return n==="node"?ZJ(t,e):n==="mark"?i8(t,e):{}}function s8(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=b4(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function hx(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function u_(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?rf(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Qx(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const p=d.pos,y=h.pos;t.doc.nodesBetween(p,y,(x,v)=>{if(!x.isText&&!x.marks.length)return;const b=Math.max(p,v),S=Math.min(y,v+x.nodeSize),k=S-b;o+=k,a.push(...x.marks.map(T=>({mark:T,from:b,to:S})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Qx(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function eZ(t,e,n={}){if(!e)return Rg(t,null,n)||u_(t,null,n);const r=u2(e,t.schema);return r==="node"?Rg(t,e,n):r==="mark"?u_(t,e,n):!1}function dA(t,e){const{nodeExtensions:n}=a2(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=En($t(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function d2(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(d2(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function tZ(t){return t instanceof Zt}function nZ(t,e,n){var r;const{selection:i}=e;let s=null;if(e8(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),y=!!n.isInSet(u.marks)||!u.marks.some(x=>x.type.excludes(n));c=p&&y}return!c}),c})}const rZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=rf(t,r.schema);if(i)if(o){const c=i8(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const y=Math.max(p,u),x=Math.min(p+h.nodeSize,d);h.marks.find(b=>b.type===l)?h.marks.forEach(b=>{l===b.type&&n.addMark(y,x,l.create({...b.attrs,...e}))}):n.addMark(y,x,l.create(e))})});return nZ(r,n,l)},iZ=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),sZ=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Hi(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>sA(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>sA(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},oZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=th(t,0,r.content.size),s=Zt.create(r,i);e.setSelection(s)}return!0},aZ=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=mn.atStart(r).from,a=mn.atEnd(r).to,l=th(i,o,a),c=th(s,o,a),u=mn.create(r,l,c);e.setSelection(u)}return!0},lZ=t=>({state:e,dispatch:n})=>{const r=Hi(t,e.schema);return $Y(r)(e,n)};function fA(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const cZ=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=hx(c,a.node().type.name,a.node().attrs);if(s instanceof Zt&&s.node.isBlock)return!a.parentOffset||!ou(o,a.pos)?!1:(r&&(t&&fA(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:XJ(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,y=ou(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!y&&ou(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(y=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(y&&(s instanceof mn&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const x=e.mapping.map(a.before()),v=e.doc.resolve(x);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&fA(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return y},uZ=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Hi(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let b=ft.empty;const S=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-S;N>=l.depth-3;N-=1)b=ft.from(l.node(N).copy(b));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,T={...hx(h,l.node().type.name,l.node().attrs),...e},j=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(T))||void 0;b=b.append(ft.from(a.createAndFill(null,j)||void 0));const P=l.before(l.depth-(S-1));n.replace(P,l.after(-k),new Lt(b,4-S,0));let C=-1;n.doc.nodesBetween(P,n.doc.content.size,(N,L)=>{if(C>-1)return!1;N.isTextblock&&N.content.size===0&&(C=L+1)}),C>-1&&n.setSelection(mn.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,y={...hx(h,d.type.name,d.attrs),...e},x={...hx(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=p?[{type:a,attrs:y},{type:p,attrs:x}]:[{type:a,attrs:y}];if(!ou(n.doc,l.pos,2))return!1;if(i){const{selection:b,storedMarks:S}=r,{splittableMarks:k}=s.extensionManager,T=S||b.$to.parentOffset&&b.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!T||!i)return!0;const j=T.filter(P=>k.includes(P.type.name));n.ensureMarks(j)}return!0},hb=(t,e)=>{const n=S4(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&tf(t.doc,n.pos)&&t.join(n.pos),!0},pb=(t,e)=>{const n=S4(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&tf(t.doc,r)&&t.join(r),!0},dZ=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,p=Hi(t,o.schema),y=Hi(e,o.schema),{selection:x,storedMarks:v}=o,{$from:b,$to:S}=x,k=b.blockRange(S),T=v||x.$to.parentOffset&&x.$from.marks();if(!k)return!1;const j=S4(P=>dA(P.type.name,d))(x);if(k.depth>=1&&j&&k.depth-j.depth<=1){if(j.node.type===p)return c.liftListItem(y);if(dA(j.node.type.name,d)&&p.validContent(j.node.content)&&a)return l().command(()=>(s.setNodeMarkup(j.pos,p),!0)).command(()=>hb(s,p)).command(()=>pb(s,p)).run()}return!n||!T||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>hb(s,p)).command(()=>pb(s,p)).run():l().command(()=>{const P=u().wrapInList(p,r),C=T.filter(N=>h.includes(N.type.name));return s.ensureMarks(C),P?!0:c.clearNodes()}).wrapInList(p,r).command(()=>hb(s,p)).command(()=>pb(s,p)).run()},fZ=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=rf(t,r.schema);return u_(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},hZ=(t,e,n={})=>({state:r,commands:i})=>{const s=Hi(t,r.schema),o=Hi(e,r.schema),a=Rg(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},pZ=(t,e={})=>({state:n,commands:r})=>{const i=Hi(t,n.schema);return Rg(n,i,e)?r.lift(i):r.wrapIn(i,e)},mZ=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},gZ=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},yZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=rf(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:p}=a;const y=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,x=b4(c,l,y);x&&(h=x.from,p=x.to),n.removeMark(h,p,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},xZ=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=u2(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Hi(t,r.schema)),a==="mark"&&(o=rf(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,y;n.selection.empty?r.doc.nodesBetween(c,u,(x,v)=>{s&&s===x.type&&(p=Math.max(v,c),y=Math.min(v+x.nodeSize,u),d=v,h=x)}):r.doc.nodesBetween(c,u,(x,v)=>{v<c&&s&&s===x.type&&(p=Math.max(v,c),y=Math.min(v+x.nodeSize,u),d=v,h=x),v>=c&&v<=u&&(s&&s===x.type&&n.setNodeMarkup(v,void 0,{...x.attrs,...e}),o&&x.marks.length&&x.marks.forEach(b=>{if(o===b.type){const S=Math.max(v,c),k=Math.min(v+x.nodeSize,u);n.addMark(S,k,o.create({...b.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(x=>{o===x.type&&n.addMark(p,y,o.create({...x.attrs,...e}))}))}),!0):!1},vZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return MY(i,e)(n,r)},wZ=(t,e={})=>({state:n,dispatch:r})=>{const i=Hi(t,n.schema);return IY(i,e)(n,r)};var bZ=Object.freeze({__proto__:null,blur:sJ,clearContent:oJ,clearNodes:aJ,command:lJ,createParagraphNear:cJ,cut:uJ,deleteCurrentNode:dJ,deleteNode:fJ,deleteRange:hJ,deleteSelection:pJ,enter:mJ,exitCode:gJ,extendMarkRange:yJ,first:xJ,focus:wJ,forEach:bJ,insertContent:_J,insertContentAt:NJ,joinBackward:AJ,joinDown:EJ,joinForward:TJ,joinItemBackward:jJ,joinItemForward:PJ,joinTextblockBackward:DJ,joinTextblockForward:OJ,joinUp:CJ,keyboardShortcut:MJ,lift:IJ,liftEmptyBlock:RJ,liftListItem:FJ,newlineInCode:zJ,resetAttributes:BJ,scrollIntoView:UJ,selectAll:$J,selectNodeBackward:WJ,selectNodeForward:VJ,selectParentNode:HJ,selectTextblockEnd:qJ,selectTextblockStart:GJ,setContent:KJ,setMark:rZ,setMeta:iZ,setNode:sZ,setNodeSelection:oZ,setTextSelection:aZ,sinkListItem:lZ,splitBlock:cZ,splitListItem:uZ,toggleList:dZ,toggleMark:fZ,toggleNode:hZ,toggleWrap:pZ,undoInputRule:mZ,unsetAllMarks:gZ,unsetMark:yZ,updateAttributes:xZ,wrapIn:vZ,wrapInList:wZ});const _Z=Fs.create({name:"commands",addCommands(){return{...bZ}}}),SZ=Fs.create({name:"drop",addProseMirrorPlugins(){return[new ao({key:new Al("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),kZ=Fs.create({name:"editable",addProseMirrorPlugins(){return[new ao({key:new Al("editable"),props:{editable:()=>this.editor.options.editable}})]}}),NZ=Fs.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ao({key:new Al("focusEvents"),props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),CZ=Fs.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:p}=d,y=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,x=y.parent.type.spec.isolating,v=d.pos-d.parentOffset,b=x&&y.parent.childCount===1?v===d.pos:wn.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!b||b&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return _4()||r8()?s:i},addProseMirrorPlugins(){return[new ao({key:new Al("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(x=>x.getMeta("composition")))return;const r=t.some(x=>x.docChanged)&&!e.doc.eq(n.doc),i=t.some(x=>x.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=wn.atStart(e.doc).from,c=wn.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!d2(n.doc))return;const h=n.tr,p=s2({state:n,transaction:h}),{commands:y}=new o2({editor:this.editor,state:p});if(y.clearNodes(),!!h.steps.length)return h}})]}}),EZ=Fs.create({name:"paste",addProseMirrorPlugins(){return[new ao({key:new Al("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),AZ=Fs.create({name:"tabindex",addProseMirrorPlugins(){return[new ao({key:new Al("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Yf{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Yf(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Yf(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Yf(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1),a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Yf(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Yf(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const TZ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function jZ(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class PZ extends WY{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=jZ(TZ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=YL(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=n.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[kZ,iJ.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),_Z,NZ,CZ,AZ,SZ,EZ].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Wp(i,this)}createCommandManager(){this.commandManager=new o2({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=c_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=c_(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=t8(n,this.options.autofocus);this.view=new hY(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:$p.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return QJ(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return eZ(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return v4(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return JJ(this.state.doc,{blockSeparator:n,textSerializers:{...ZL(this.schema),...r}})}get isEmpty(){return d2(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Yf(n,this)}get $doc(){return this.$pos(0)}}function u0(t){return new l2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=En(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(s8(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(x=>x===t.type&&x!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function DZ(t){return new l2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=En(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function d_(t){return new l2({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=En(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Fg(t){return new l2({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=En(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&r4(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,y=h||d.$to.parentOffset&&d.$from.marks();if(y){const x=y.filter(v=>p.includes(v.type.name));o.ensureMarks(x)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&tf(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class jo{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=En($t(this,"addOptions",{name:this.name}))),this.storage=En($t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new jo(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>c2(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new jo(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=En($t(n,"addOptions",{name:n.name})),n.storage=En($t(n,"addStorage",{name:n.name,options:n.options})),n}}function d0(t){return new ZY({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=En(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(s8(n.from,n.to,e.doc).filter(y=>y.mark.type.excluded.find(v=>v===t.type&&v!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function OZ(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o8={exports:{}},mb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hA;function LZ(){if(hA)return mb;hA=1;var t=Pt;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),y=r({inst:{value:p,getSnapshot:h}}),x=y[0].inst,v=y[1];return s(function(){x.value=p,x.getSnapshot=h,l(x)&&v({inst:x})},[d,p,h]),i(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return mb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,mb}o8.exports=LZ();var k4=o8.exports;const MZ=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},IZ=({contentComponent:t})=>{const e=k4.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Pt.createElement(Pt.Fragment,null,Object.values(e))};function RZ(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:z6.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class FZ extends Pt.Component{constructor(e){var n;super(e),this.editorContentRef=Pt.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=RZ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Pt.createElement(Pt.Fragment,null,Pt.createElement("div",{ref:MZ(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Pt.createElement(IZ,{contentComponent:e.contentComponent}))}}const zZ=Y.forwardRef((t,e)=>{const n=Pt.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Pt.createElement(FZ,{key:n,innerRef:e,...t})}),BZ=Pt.memo(zZ);var UZ=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},$Z=OZ(UZ),a8={exports:{}},gb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function WZ(){if(pA)return gb;pA=1;var t=Pt,e=k4;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return gb.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=a(function(){function b(P){if(!S){if(S=!0,k=P,P=h(P),p!==void 0&&x.hasValue){var C=x.value;if(p(C,P))return T=C}return T=P}if(C=T,r(k,P))return C;var N=h(P);return p!==void 0&&p(C,N)?C:(k=P,T=N)}var S=!1,k,T,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,h,p]);var v=i(c,y[0],y[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},gb}a8.exports=WZ();var VZ=a8.exports;const HZ=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;class qZ{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function GZ(t){var e;const[n]=Y.useState(()=>new qZ(t.editor)),r=VZ.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:$Z);return HZ(()=>n.watch(t.editor),[t.editor,n]),Y.useDebugValue(r),r}const KZ=!1,f_=typeof window>"u",XZ=f_||!!(typeof window<"u"&&window.next);class N4{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?f_||XZ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new PZ(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?N4.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function YZ(t={},e=[]){const n=Y.useRef(t);n.current=t;const[r]=Y.useState(()=>new N4(n)),i=k4.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return Y.useDebugValue(i),Y.useEffect(r.onRender(e)),GZ({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const JZ=Y.createContext({editor:null});JZ.Consumer;const ZZ=Y.createContext({onDragStart:void 0}),QZ=()=>Y.useContext(ZZ);Pt.forwardRef((t,e)=>{const{onDragStart:n}=QZ(),r=t.as||"div";return Pt.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const eQ=/^\s*>\s$/,tQ=jo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Fg({find:eQ,type:this.type})]}}),nQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,rQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,iQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,sQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,oQ=Vd.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[u0({find:nQ,type:this.type}),u0({find:iQ,type:this.type})]},addPasteRules(){return[d0({find:rQ,type:this.type}),d0({find:sQ,type:this.type})]}}),aQ="listItem",mA="textStyle",gA=/^\s*([-+*])\s$/,lQ=jo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",so(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(aQ,this.editor.getAttributes(mA)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Fg({find:gA,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fg({find:gA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mA),editor:this.editor})),[t]}}),cQ=/(^|[^`])`([^`]+)`(?!`)/,uQ=/(^|[^`])`([^`]+)`(?!`)/g,dQ=Vd.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[u0({find:cQ,type:this.type})]},addPasteRules(){return[d0({find:uQ,type:this.type})]}}),fQ=/^```([a-z]+)?[\s\n]$/,hQ=/^~~~([a-z]+)?[\s\n]$/,pQ=jo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",so(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(wn.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[d_({find:fQ,type:this.type,getAttributes:t=>({language:t[1]})}),d_({find:hQ,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ao({key:new Al("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(mn.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),mQ=jo.create({name:"doc",topNode:!0,content:"block+"});function gQ(t={}){return new ao({view(e){return new yQ(e,t)}})}class yQ{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r;if(n){let a=e.nodeBefore,l=e.nodeAfter;if(a||l){let c=this.editorView.nodeDOM(this.cursorPos-(a?a.nodeSize:0));if(c){let u=c.getBoundingClientRect(),d=a?u.bottom:u.top;a&&l&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:u.left,right:u.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!r){let a=this.editorView.coordsAtPos(this.cursorPos);r={left:a.left-this.width/2,right:a.left+this.width/2,top:a.top,bottom:a.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let s,o;if(!i||i==document.body&&getComputedStyle(i).position=="static")s=-pageXOffset,o=-pageYOffset;else{let a=i.getBoundingClientRect();s=a.left-i.scrollLeft,o=a.top-i.scrollTop}this.element.style.left=r.left-s+"px",this.element.style.top=r.top-o+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=YO(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){(e.target==this.editorView.dom||!this.editorView.dom.contains(e.relatedTarget))&&this.setCursor(null)}}const xQ=Fs.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[gQ(this.options)]}});class Jr extends wn{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Jr.valid(r)?new Jr(r):wn.near(r)}content(){return Lt.empty}eq(e){return e instanceof Jr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Jr(e.resolve(n.pos))}getBookmark(){return new C4(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!vQ(e)||!wQ(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Jr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Jr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Zt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Jr.valid(a))return a}return null}}}Jr.prototype.visible=!1;Jr.findFrom=Jr.findGapCursorFrom;wn.jsonID("gapcursor",Jr);class C4{constructor(e){this.pos=e}map(e){return new C4(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Jr.valid(n)?new Jr(n):wn.near(n)}}function vQ(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function wQ(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function bQ(){return new ao({props:{decorations:NQ,createSelectionBetween(t,e,n){return e.pos==n.pos&&Jr.valid(n)?new Jr(n):null},handleClick:SQ,handleKeyDown:_Q,handleDOMEvents:{beforeinput:kQ}}})}const _Q=IL({ArrowLeft:Ay("horiz",-1),ArrowRight:Ay("horiz",1),ArrowUp:Ay("vert",-1),ArrowDown:Ay("vert",1)});function Ay(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof mn){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Jr.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Jr(c))),!0):!1}}function SQ(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Jr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Zt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Jr(r))),!0)}function kQ(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Jr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=ft.empty;for(let o=r.length-1;o>=0;o--)i=ft.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Lt(i,0,0));return s.setSelection(mn.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function NQ(t){if(!(t.selection instanceof Jr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",gi.create(t.doc,[na.widget(t.selection.head,e,{key:"gapcursor"})])}const CQ=Fs.create({name:"gapCursor",addProseMirrorPlugins(){return[bQ()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=En($t(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),EQ=jo.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",so(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),AQ=jo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,so(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>d_({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var tv=200,$i=function(){};$i.prototype.append=function(e){return e.length?(e=$i.from(e),!this.length&&e||e.length<tv&&this.leafAppend(e)||this.length<tv&&e.leafPrepend(this)||this.appendInner(e)):this};$i.prototype.prepend=function(e){return e.length?$i.from(e).append(this):this};$i.prototype.appendInner=function(e){return new TQ(this,e)};$i.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?$i.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};$i.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};$i.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};$i.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};$i.from=function(e){return e instanceof $i?e:e&&e.length?new l8(e):$i.empty};var l8=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=tv)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=tv)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}($i);$i.empty=new l8([]);var TQ=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}($i);const jQ=500;class yl{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new nc(d.map));let p=d.step.map(i.slice(s)),y;p&&o.maybeStep(p).doc&&(y=o.mapping.maps[o.mapping.maps.length-1],c.push(new nc(y,void 0,void 0,c.length+u.length))),s--,y&&i.appendMap(y,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new yl(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new nc(e.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>DQ&&(a=PQ(a,c),o-=c),new yl(a.append(s),o)}remapping(e,n){let r=new Dg;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new yl(this.items.append(e.map(n=>new nc(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let y=s.maps[p];if(h.step){let x=e.steps[p].invert(e.docs[p]),v=h.selection&&h.selection.map(s.slice(l+1,p));v&&a++,r.push(new nc(y,x,v))}else r.push(new nc(y))},i);let c=[];for(let h=n;h<o;h++)c.push(new nc(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new yl(u,a);return d.emptyItemCount()>jQ&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new nc(c.invert(),l,u),h,p=i.length-1;(h=i.length&&i[p].merge(d))?i[p]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new yl($i.from(i.reverse()),s)}}yl.empty=new yl($i.empty,0);function PQ(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class nc{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new nc(n.getMap().invert(),n,this.selection)}}}class gd{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const DQ=20;function OQ(t,e,n,r){let i=n.getMeta(dh),s;if(i)return i.historyState;n.getMeta(IQ)&&(t=new gd(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(dh))return o.getMeta(dh).redo?new gd(t.done.addTransform(n,void 0,r,px(e)),t.undone,yA(n.mapping.maps),t.prevTime,t.prevComposition):new gd(t.done,t.undone.addTransform(n,void 0,r,px(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!LQ(n,t.prevRanges)),c=o?yb(t.prevRanges,n.mapping):yA(n.mapping.maps);return new gd(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,px(e)),yl.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new gd(t.done.rebased(n,s),t.undone.rebased(n,s),yb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new gd(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),yb(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function LQ(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function yA(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function yb(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function MQ(t,e,n){let r=px(e),i=dh.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new gd(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(dh,{redo:n,historyState:l})}let xb=!1,xA=null;function px(t){let e=t.plugins;if(xA!=e){xb=!1,xA=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){xb=!0;break}}return xb}const dh=new Al("history"),IQ=new Al("closeHistory");function RQ(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ao({key:dh,state:{init(){return new gd(yl.empty,yl.empty,null,0,-1)},apply(e,n,r){return OQ(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?u8:r=="historyRedo"?d8:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function c8(t,e){return(n,r)=>{let i=dh.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=MQ(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const u8=c8(!1,!0),d8=c8(!0,!0),FQ=Fs.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>u8(t,e),redo:()=>({state:t,dispatch:e})=>d8(t,e)}},addProseMirrorPlugins(){return[RQ(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zQ=jo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",so(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):tZ(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(mn.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Zt.create(o.doc,c.pos)):o.setSelection(mn.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(mn.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[DZ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),BQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,UQ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,$Q=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,WQ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,VQ=Vd.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[u0({find:BQ,type:this.type}),u0({find:$Q,type:this.type})]},addPasteRules(){return[d0({find:UQ,type:this.type}),d0({find:WQ,type:this.type})]}}),HQ=jo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",so(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),qQ="listItem",vA="textStyle",wA=/^(\d+)\.\s$/,GQ=jo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",so(this.options.HTMLAttributes,n),0]:["ol",so(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qQ,this.editor.getAttributes(vA)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Fg({find:wA,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Fg({find:wA,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(vA)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),KQ=jo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),XQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,YQ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,JQ=Vd.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",so(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[u0({find:XQ,type:this.type})]},addPasteRules(){return[d0({find:YQ,type:this.type})]}}),ZQ=jo.create({name:"text",group:"inline"}),QQ=Fs.create({name:"starterKit",addExtensions(){var t,e,n,r,i,s,o,a,l,c,u,d,h,p,y,x,v,b;const S=[];return this.options.bold!==!1&&S.push(oQ.configure((t=this.options)===null||t===void 0?void 0:t.bold)),this.options.blockquote!==!1&&S.push(tQ.configure((e=this.options)===null||e===void 0?void 0:e.blockquote)),this.options.bulletList!==!1&&S.push(lQ.configure((n=this.options)===null||n===void 0?void 0:n.bulletList)),this.options.code!==!1&&S.push(dQ.configure((r=this.options)===null||r===void 0?void 0:r.code)),this.options.codeBlock!==!1&&S.push(pQ.configure((i=this.options)===null||i===void 0?void 0:i.codeBlock)),this.options.document!==!1&&S.push(mQ.configure((s=this.options)===null||s===void 0?void 0:s.document)),this.options.dropcursor!==!1&&S.push(xQ.configure((o=this.options)===null||o===void 0?void 0:o.dropcursor)),this.options.gapcursor!==!1&&S.push(CQ.configure((a=this.options)===null||a===void 0?void 0:a.gapcursor)),this.options.hardBreak!==!1&&S.push(EQ.configure((l=this.options)===null||l===void 0?void 0:l.hardBreak)),this.options.heading!==!1&&S.push(AQ.configure((c=this.options)===null||c===void 0?void 0:c.heading)),this.options.history!==!1&&S.push(FQ.configure((u=this.options)===null||u===void 0?void 0:u.history)),this.options.horizontalRule!==!1&&S.push(zQ.configure((d=this.options)===null||d===void 0?void 0:d.horizontalRule)),this.options.italic!==!1&&S.push(VQ.configure((h=this.options)===null||h===void 0?void 0:h.italic)),this.options.listItem!==!1&&S.push(HQ.configure((p=this.options)===null||p===void 0?void 0:p.listItem)),this.options.orderedList!==!1&&S.push(GQ.configure((y=this.options)===null||y===void 0?void 0:y.orderedList)),this.options.paragraph!==!1&&S.push(KQ.configure((x=this.options)===null||x===void 0?void 0:x.paragraph)),this.options.strike!==!1&&S.push(JQ.configure((v=this.options)===null||v===void 0?void 0:v.strike)),this.options.text!==!1&&S.push(ZQ.configure((b=this.options)===null||b===void 0?void 0:b.text)),S}}),eee=Fs.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new ao({key:new Al("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&d2(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=na.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),gi.create(t,i)}}})]}});function tee(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}function f8(t,e){return new Promise(function(n,r){let i;return nee(t).then(function(s){try{return i=s,n(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(o){return r(o)}},r)})}const nee=t=>new Promise((e,n)=>{const r=new FileReader;r.addEventListener("load",({target:{result:i}})=>{const s=new DataView(i);let o=0;if(s.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const a=s.getUint16(o);if(a===65498)break;const l=s.getUint16(o+2);if(a===65505&&s.getUint32(o+4)===1165519206){const c=o+10;let u;switch(s.getUint16(c)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(s.getUint16(c+2,u)!==42)return n("TIFF header contains invalid version");const d=s.getUint32(c+4,u),h=c+d+2+12*s.getUint16(c+d,u);for(let p=c+d+2;p<h;p+=12)if(s.getUint16(p,u)==274){if(s.getUint16(p+2,u)!==3)return n("Orientation data type is invalid");if(s.getUint32(p+4,u)!==1)return n("Orientation data count is invalid");s.setUint16(p+8,1,u);break}return e(i.slice(o,o+2+l))}o+=2+l}return e(new Blob)}),r.readAsArrayBuffer(t)});var nv={},ree={get exports(){return nv},set exports(t){nv=t}};(function(t){var e,n,r={};ree.exports=r,r.parse=function(i,s){for(var o=r.bin.readUshort,a=r.bin.readUint,l=0,c={},u=new Uint8Array(i),d=u.length-4;a(u,d)!=101010256;)d--;l=d,l+=4;var h=o(u,l+=4);o(u,l+=2);var p=a(u,l+=2),y=a(u,l+=4);l+=4,l=y;for(var x=0;x<h;x++){a(u,l),l+=4,l+=4,l+=4,a(u,l+=4),p=a(u,l+=4);var v=a(u,l+=4),b=o(u,l+=4),S=o(u,l+2),k=o(u,l+4);l+=6;var T=a(u,l+=8);l+=4,l+=b+S+k,r._readLocal(u,T,c,p,v,s)}return c},r._readLocal=function(i,s,o,a,l,c){var u=r.bin.readUshort,d=r.bin.readUint;d(i,s),u(i,s+=4),u(i,s+=2);var h=u(i,s+=2);d(i,s+=2),d(i,s+=4),s+=4;var p=u(i,s+=8),y=u(i,s+=2);s+=2;var x=r.bin.readUTF8(i,s,p);if(s+=p,s+=y,c)o[x]={size:l,csize:a};else{var v=new Uint8Array(i.buffer,s);if(h==0)o[x]=new Uint8Array(v.buffer.slice(s,s+a));else{if(h!=8)throw"unknown compression method: "+h;var b=new Uint8Array(l);r.inflateRaw(v,b),o[x]=b}}},r.inflateRaw=function(i,s){return r.F.inflate(i,s)},r.inflate=function(i,s){return i[0],i[1],r.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),s)},r.deflate=function(i,s){s==null&&(s={level:6});var o=0,a=new Uint8Array(50+Math.floor(1.1*i.length));a[o]=120,a[o+1]=156,o+=2,o=r.F.deflateRaw(i,a,o,s.level);var l=r.adler(i,0,i.length);return a[o+0]=l>>>24&255,a[o+1]=l>>>16&255,a[o+2]=l>>>8&255,a[o+3]=l>>>0&255,new Uint8Array(a.buffer,0,o+4)},r.deflateRaw=function(i,s){s==null&&(s={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),a=r.F.deflateRaw(i,o,a,s.level);return new Uint8Array(o.buffer,0,a)},r.encode=function(i,s){s==null&&(s=!1);var o=0,a=r.bin.writeUint,l=r.bin.writeUshort,c={};for(var u in i){var d=!r._noNeed(u)&&!s,h=i[u],p=r.crc.crc(h,0,h.length);c[u]={cpr:d,usize:h.length,crc:p,file:d?r.deflateRaw(h):h}}for(var u in c)o+=c[u].file.length+30+46+2*r.bin.sizeUTF8(u);o+=22;var y=new Uint8Array(o),x=0,v=[];for(var u in c){var b=c[u];v.push(x),x=r._writeHeader(y,x,u,b,0)}var S=0,k=x;for(var u in c)b=c[u],v.push(x),x=r._writeHeader(y,x,u,b,1,v[S++]);var T=x-k;return a(y,x,101010256),x+=4,l(y,x+=4,S),l(y,x+=2,S),a(y,x+=2,T),a(y,x+=4,k),x+=4,x+=2,y.buffer},r._noNeed=function(i){var s=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(s)!=-1},r._writeHeader=function(i,s,o,a,l,c){var u=r.bin.writeUint,d=r.bin.writeUshort,h=a.file;return u(i,s,l==0?67324752:33639248),s+=4,l==1&&(s+=2),d(i,s,20),d(i,s+=2,0),d(i,s+=2,a.cpr?8:0),u(i,s+=2,0),u(i,s+=4,a.crc),u(i,s+=4,h.length),u(i,s+=4,a.usize),d(i,s+=4,r.bin.sizeUTF8(o)),d(i,s+=2,0),s+=2,l==1&&(s+=2,s+=2,u(i,s+=6,c),s+=4),s+=r.bin.writeUTF8(i,s,o),l==0&&(i.set(h,s),s+=h.length),s},r.crc={table:function(){for(var i=new Uint32Array(256),s=0;s<256;s++){for(var o=s,a=0;a<8;a++)1&o?o=3988292384^o>>>1:o>>>=1;i[s]=o}return i}(),update:function(i,s,o,a){for(var l=0;l<a;l++)i=r.crc.table[255&(i^s[o+l])]^i>>>8;return i},crc:function(i,s,o){return 4294967295^r.crc.update(4294967295,i,s,o)}},r.adler=function(i,s,o){for(var a=1,l=0,c=s,u=s+o;c<u;){for(var d=Math.min(c+5552,u);c<d;)l+=a+=i[c++];a%=65521,l%=65521}return l<<16|a},r.bin={readUshort:function(i,s){return i[s]|i[s+1]<<8},writeUshort:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255},readUint:function(i,s){return 16777216*i[s+3]+(i[s+2]<<16|i[s+1]<<8|i[s])},writeUint:function(i,s,o){i[s]=255&o,i[s+1]=o>>8&255,i[s+2]=o>>16&255,i[s+3]=o>>24&255},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},writeASCII:function(i,s,o){for(var a=0;a<o.length;a++)i[s+a]=o.charCodeAt(a)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,s,o){for(var a,l="",c=0;c<o;c++)l+="%"+r.bin.pad(i[s+c].toString(16));try{a=decodeURIComponent(l)}catch{return r.bin.readASCII(i,s,o)}return a},writeUTF8:function(i,s,o){for(var a=o.length,l=0,c=0;c<a;c++){var u=o.charCodeAt(c);if((4294967168&u)==0)i[s+l]=u,l++;else if((4294965248&u)==0)i[s+l]=192|u>>6,i[s+l+1]=128|u>>0&63,l+=2;else if((4294901760&u)==0)i[s+l]=224|u>>12,i[s+l+1]=128|u>>6&63,i[s+l+2]=128|u>>0&63,l+=3;else{if((4292870144&u)!=0)throw"e";i[s+l]=240|u>>18,i[s+l+1]=128|u>>12&63,i[s+l+2]=128|u>>6&63,i[s+l+3]=128|u>>0&63,l+=4}}return l},sizeUTF8:function(i){for(var s=i.length,o=0,a=0;a<s;a++){var l=i.charCodeAt(a);if((4294967168&l)==0)o++;else if((4294965248&l)==0)o+=2;else if((4294901760&l)==0)o+=3;else{if((4292870144&l)!=0)throw"e";o+=4}}return o}},r.F={},r.F.deflateRaw=function(i,s,o,a){var l=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][a],c=r.F.U,u=r.F._goodIndex;r.F._hash;var d=r.F._putsE,h=0,p=o<<3,y=0,x=i.length;if(a==0){for(;h<x;)d(s,p,h+(D=Math.min(65535,x-h))==x?1:0),p=r.F._copyExact(i,h,D,s,p+8),h+=D;return p>>>3}var v=c.lits,b=c.strt,S=c.prev,k=0,T=0,j=0,P=0,C=0,N=0;for(x>2&&(b[N=r.F._hash(i,0)]=0),h=0;h<x;h++){if(C=N,h+1<x-2){N=r.F._hash(i,h+1);var L=h+1&32767;S[L]=b[N],b[N]=L}if(y<=h){(k>14e3||T>26697)&&x-h>100&&(y<h&&(v[k]=h-y,k+=2,y=h),p=r.F._writeBlock(h==x-1||y==x?1:0,v,k,P,i,j,h-j,s,p),k=T=P=0,j=h);var R=0;h<x-2&&(R=r.F._bestMatch(i,h,S,C,Math.min(l[2],x-h),l[3]));var D=R>>>16,M=65535&R;if(R!=0){M=65535&R;var H=u(D=R>>>16,c.of0);c.lhst[257+H]++;var W=u(M,c.df0);c.dhst[W]++,P+=c.exb[H]+c.dxb[W],v[k]=D<<23|h-y,v[k+1]=M<<16|H<<8|W,k+=2,y=h+D}else c.lhst[i[h]]++;T++}}for(j==h&&i.length!=0||(y<h&&(v[k]=h-y,k+=2,y=h),p=r.F._writeBlock(1,v,k,P,i,j,h-j,s,p),k=0,T=0,k=T=P=0,j=h);(7&p)!=0;)p++;return p>>>3},r.F._bestMatch=function(i,s,o,a,l,c){var u=32767&s,d=o[u],h=u-d+32768&32767;if(d==u||a!=r.F._hash(i,s-h))return 0;for(var p=0,y=0,x=Math.min(32767,s);h<=x&&--c!=0&&d!=u;){if(p==0||i[s+p]==i[s+p-h]){var v=r.F._howLong(i,s,h);if(v>p){if(y=h,(p=v)>=l)break;h+2<v&&(v=h+2);for(var b=0,S=0;S<v-2;S++){var k=s-h+S+32768&32767,T=k-o[k]+32768&32767;T>b&&(b=T,d=k)}}}h+=(u=d)-(d=o[u])+32768&32767}return p<<16|y},r.F._howLong=function(i,s,o){if(i[s]!=i[s-o]||i[s+1]!=i[s+1-o]||i[s+2]!=i[s+2-o])return 0;var a=s,l=Math.min(i.length,s+258);for(s+=3;s<l&&i[s]==i[s-o];)s++;return s-a},r.F._hash=function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<4)&65535},r.saved=0,r.F._writeBlock=function(i,s,o,a,l,c,u,d,h){var p,y,x,v,b,S,k,T,j,P=r.F.U,C=r.F._putsF,N=r.F._putsE;P.lhst[256]++,y=(p=r.F.getTrees())[0],x=p[1],v=p[2],b=p[3],S=p[4],k=p[5],T=p[6],j=p[7];var L=32+((h+3&7)==0?0:8-(h+3&7))+(u<<3),R=a+r.F.contSize(P.fltree,P.lhst)+r.F.contSize(P.fdtree,P.dhst),D=a+r.F.contSize(P.ltree,P.lhst)+r.F.contSize(P.dtree,P.dhst);D+=14+3*k+r.F.contSize(P.itree,P.ihst)+(2*P.ihst[16]+3*P.ihst[17]+7*P.ihst[18]);for(var M=0;M<286;M++)P.lhst[M]=0;for(M=0;M<30;M++)P.dhst[M]=0;for(M=0;M<19;M++)P.ihst[M]=0;var H=L<R&&L<D?0:R<D?1:2;if(C(d,h,i),C(d,h+1,H),h+=3,H==0){for(;(7&h)!=0;)h++;h=r.F._copyExact(l,c,u,d,h)}else{var W,Z;if(H==1&&(W=P.fltree,Z=P.fdtree),H==2){r.F.makeCodes(P.ltree,y),r.F.revCodes(P.ltree,y),r.F.makeCodes(P.dtree,x),r.F.revCodes(P.dtree,x),r.F.makeCodes(P.itree,v),r.F.revCodes(P.itree,v),W=P.ltree,Z=P.dtree,N(d,h,b-257),N(d,h+=5,S-1),N(d,h+=5,k-4),h+=4;for(var B=0;B<k;B++)N(d,h+3*B,P.itree[1+(P.ordr[B]<<1)]);h+=3*k,h=r.F._codeTiny(T,P.itree,d,h),h=r.F._codeTiny(j,P.itree,d,h)}for(var F=c,Q=0;Q<o;Q+=2){for(var ee=s[Q],te=ee>>>23,re=F+(8388607&ee);F<re;)h=r.F._writeLit(l[F++],W,d,h);if(te!=0){var O=s[Q+1],X=O>>16,q=O>>8&255,V=255&O;N(d,h=r.F._writeLit(257+q,W,d,h),te-P.of0[q]),h+=P.exb[q],C(d,h=r.F._writeLit(V,Z,d,h),X-P.df0[V]),h+=P.dxb[V],F+=te}}h=r.F._writeLit(256,W,d,h)}return h},r.F._copyExact=function(i,s,o,a,l){var c=l>>>3;return a[c]=o,a[c+1]=o>>>8,a[c+2]=255-a[c],a[c+3]=255-a[c+1],c+=4,a.set(new Uint8Array(i.buffer,s,o),c),l+(o+4<<3)},r.F.getTrees=function(){for(var i=r.F.U,s=r.F._hufTree(i.lhst,i.ltree,15),o=r.F._hufTree(i.dhst,i.dtree,15),a=[],l=r.F._lenCodes(i.ltree,a),c=[],u=r.F._lenCodes(i.dtree,c),d=0;d<a.length;d+=2)i.ihst[a[d]]++;for(d=0;d<c.length;d+=2)i.ihst[c[d]]++;for(var h=r.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[s,o,h,l,u,p,a,c]},r.F.getSecond=function(i){for(var s=[],o=0;o<i.length;o+=2)s.push(i[o+1]);return s},r.F.nonZero=function(i){for(var s="",o=0;o<i.length;o+=2)i[o+1]!=0&&(s+=(o>>1)+",");return s},r.F.contSize=function(i,s){for(var o=0,a=0;a<s.length;a++)o+=s[a]*i[1+(a<<1)];return o},r.F._codeTiny=function(i,s,o,a){for(var l=0;l<i.length;l+=2){var c=i[l],u=i[l+1];a=r.F._writeLit(c,s,o,a);var d=c==16?2:c==17?3:7;c>15&&(r.F._putsE(o,a,u,d),a+=d)}return a},r.F._lenCodes=function(i,s){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var a=0;a<o;a+=2){var l=i[a+1],c=a+3<o?i[a+3]:-1,u=a+5<o?i[a+5]:-1,d=a==0?-1:i[a-1];if(l==0&&c==l&&u==l){for(var h=a+5;h+2<o&&i[h+2]==l;)h+=2;(p=Math.min(h+1-a>>>1,138))<11?s.push(17,p-3):s.push(18,p-11),a+=2*p-2}else if(l==d&&c==l&&u==l){for(h=a+5;h+2<o&&i[h+2]==l;)h+=2;var p=Math.min(h+1-a>>>1,6);s.push(16,p-3),a+=2*p-2}else s.push(l,0)}return o>>>1},r.F._hufTree=function(i,s,o){var a=[],l=i.length,c=s.length,u=0;for(u=0;u<c;u+=2)s[u]=0,s[u+1]=0;for(u=0;u<l;u++)i[u]!=0&&a.push({lit:u,f:i[u]});var d=a.length,h=a.slice(0);if(d==0)return 0;if(d==1){var p=a[0].lit;return h=p==0?1:0,s[1+(p<<1)]=1,s[1+(h<<1)]=1,1}a.sort(function(T,j){return T.f-j.f});var y=a[0],x=a[1],v=0,b=1,S=2;for(a[0]={lit:-1,f:y.f+x.f,l:y,r:x,d:0};b!=d-1;)y=v!=b&&(S==d||a[v].f<a[S].f)?a[v++]:a[S++],x=v!=b&&(S==d||a[v].f<a[S].f)?a[v++]:a[S++],a[b++]={lit:-1,f:y.f+x.f,l:y,r:x};var k=r.F.setDepth(a[b-1],0);for(k>o&&(r.F.restrictDepth(h,o,k),k=o),u=0;u<d;u++)s[1+(h[u].lit<<1)]=h[u].d;return k},r.F.setDepth=function(i,s){return i.lit!=-1?(i.d=s,s):Math.max(r.F.setDepth(i.l,s+1),r.F.setDepth(i.r,s+1))},r.F.restrictDepth=function(i,s,o){var a=0,l=1<<o-s,c=0;for(i.sort(function(d,h){return h.d==d.d?d.f-h.f:h.d-d.d}),a=0;a<i.length&&i[a].d>s;a++){var u=i[a].d;i[a].d=s,c+=l-(1<<o-u)}for(c>>>=o-s;c>0;)(u=i[a].d)<s?(i[a].d++,c-=1<<s-u-1):a++;for(;a>=0;a--)i[a].d==s&&c<0&&(i[a].d--,c++);c!=0&&console.log("debt left")},r.F._goodIndex=function(i,s){var o=0;return s[16|o]<=i&&(o|=16),s[8|o]<=i&&(o|=8),s[4|o]<=i&&(o|=4),s[2|o]<=i&&(o|=2),s[1|o]<=i&&(o|=1),o},r.F._writeLit=function(i,s,o,a){return r.F._putsF(o,a,s[i<<1]),a+s[1+(i<<1)]},r.F.inflate=function(i,s){var o=Uint8Array;if(i[0]==3&&i[1]==0)return s||new o(0);var a=r.F,l=a._bitsF,c=a._bitsE,u=a._decodeTiny,d=a.makeCodes,h=a.codes2map,p=a._get17,y=a.U,x=s==null;x&&(s=new o(i.length>>>2<<3));for(var v,b,S=0,k=0,T=0,j=0,P=0,C=0,N=0,L=0,R=0;S==0;)if(S=l(i,R,1),k=l(i,R+1,2),R+=3,k!=0){if(x&&(s=r.F._check(s,L+(1<<17))),k==1&&(v=y.flmap,b=y.fdmap,C=511,N=31),k==2){T=c(i,R,5)+257,j=c(i,R+5,5)+1,P=c(i,R+10,4)+4,R+=14;for(var D=0;D<38;D+=2)y.itree[D]=0,y.itree[D+1]=0;var M=1;for(D=0;D<P;D++){var H=c(i,R+3*D,3);y.itree[1+(y.ordr[D]<<1)]=H,H>M&&(M=H)}R+=3*P,d(y.itree,M),h(y.itree,M,y.imap),v=y.lmap,b=y.dmap,R=u(y.imap,(1<<M)-1,T+j,i,R,y.ttree);var W=a._copyOut(y.ttree,0,T,y.ltree);C=(1<<W)-1;var Z=a._copyOut(y.ttree,T,j,y.dtree);N=(1<<Z)-1,d(y.ltree,W),h(y.ltree,W,v),d(y.dtree,Z),h(y.dtree,Z,b)}for(;;){var B=v[p(i,R)&C];R+=15&B;var F=B>>>4;if(!(F>>>8))s[L++]=F;else{if(F==256)break;var Q=L+F-254;if(F>264){var ee=y.ldef[F-257];Q=L+(ee>>>3)+c(i,R,7&ee),R+=7&ee}var te=b[p(i,R)&N];R+=15&te;var re=te>>>4,O=y.ddef[re],X=(O>>>4)+l(i,R,15&O);for(R+=15&O,x&&(s=r.F._check(s,L+(1<<17)));L<Q;)s[L]=s[L++-X],s[L]=s[L++-X],s[L]=s[L++-X],s[L]=s[L++-X];L=Q}}}else{(7&R)!=0&&(R+=8-(7&R));var q=4+(R>>>3),V=i[q-4]|i[q-3]<<8;x&&(s=r.F._check(s,L+V)),s.set(new o(i.buffer,i.byteOffset+q,V),L),R=q+V<<3,L+=V}return s.length==L?s:s.slice(0,L)},r.F._check=function(i,s){var o=i.length;if(s<=o)return i;var a=new Uint8Array(Math.max(o<<1,s));return a.set(i,0),a},r.F._decodeTiny=function(i,s,o,a,l,c){for(var u=r.F._bitsE,d=r.F._get17,h=0;h<o;){var p=i[d(a,l)&s];l+=15&p;var y=p>>>4;if(y<=15)c[h]=y,h++;else{var x=0,v=0;y==16?(v=3+u(a,l,2),l+=2,x=c[h-1]):y==17?(v=3+u(a,l,3),l+=3):y==18&&(v=11+u(a,l,7),l+=7);for(var b=h+v;h<b;)c[h]=x,h++}}return l},r.F._copyOut=function(i,s,o,a){for(var l=0,c=0,u=a.length>>>1;c<o;){var d=i[c+s];a[c<<1]=0,a[1+(c<<1)]=d,d>l&&(l=d),c++}for(;c<u;)a[c<<1]=0,a[1+(c<<1)]=0,c++;return l},r.F.makeCodes=function(i,s){for(var o,a,l,c,u=r.F.U,d=i.length,h=u.bl_count,p=0;p<=s;p++)h[p]=0;for(p=1;p<d;p+=2)h[i[p]]++;var y=u.next_code;for(o=0,h[0]=0,a=1;a<=s;a++)o=o+h[a-1]<<1,y[a]=o;for(l=0;l<d;l+=2)(c=i[l+1])!=0&&(i[l]=y[c],y[c]++)},r.F.codes2map=function(i,s,o){for(var a=i.length,l=r.F.U.rev15,c=0;c<a;c+=2)if(i[c+1]!=0)for(var u=c>>1,d=i[c+1],h=u<<4|d,p=s-d,y=i[c]<<p,x=y+(1<<p);y!=x;)o[l[y]>>>15-s]=h,y++},r.F.revCodes=function(i,s){for(var o=r.F.U.rev15,a=15-s,l=0;l<i.length;l+=2){var c=i[l]<<s-i[l+1];i[l]=o[c]>>>a}},r.F._putsE=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8},r.F._putsF=function(i,s,o){o<<=7&s;var a=s>>>3;i[a]|=o,i[a+1]|=o>>>8,i[a+2]|=o>>>16},r.F._bitsE=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8)>>>(7&s)&(1<<o)-1},r.F._bitsF=function(i,s,o){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)&(1<<o)-1},r.F._get17=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16)>>>(7&s)},r.F._get25=function(i,s){return(i[s>>>3]|i[1+(s>>>3)]<<8|i[2+(s>>>3)]<<16|i[3+(s>>>3)]<<24)>>>(7&s)},r.F.U=(e=Uint16Array,n=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=r.F.U,s=0;s<32768;s++){var o=s;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[s]=(o>>>16|o<<16)>>>17}function a(l,c,u){for(;c--!=0;)l.push(0,u)}for(s=0;s<32;s++)i.ldef[s]=i.of0[s]<<3|i.exb[s],i.ddef[s]=i.df0[s]<<4|i.dxb[s];a(i.fltree,144,8),a(i.fltree,112,9),a(i.fltree,24,7),a(i.fltree,8,8),r.F.makeCodes(i.fltree,9),r.F.codes2map(i.fltree,9,i.flmap),r.F.revCodes(i.fltree,9),a(i.fdtree,32,5),r.F.makeCodes(i.fdtree,5),r.F.codes2map(i.fdtree,5,i.fdmap),r.F.revCodes(i.fdtree,5),a(i.itree,19,0),a(i.ltree,286,0),a(i.dtree,30,0),a(i.ttree,320,0)}()})();var iee=tee({__proto__:null,default:nv},[nv]);const pl=function(){var t={nextZero(u,d){for(;u[d]!=0;)d++;return d},readUshort:(u,d)=>u[d]<<8|u[d+1],writeUshort(u,d,h){u[d]=h>>8&255,u[d+1]=255&h},readUint:(u,d)=>16777216*u[d]+(u[d+1]<<16|u[d+2]<<8|u[d+3]),writeUint(u,d,h){u[d]=h>>24&255,u[d+1]=h>>16&255,u[d+2]=h>>8&255,u[d+3]=255&h},readASCII(u,d,h){let p="";for(let y=0;y<h;y++)p+=String.fromCharCode(u[d+y]);return p},writeASCII(u,d,h){for(let p=0;p<h.length;p++)u[d+p]=h.charCodeAt(p)},readBytes(u,d,h){const p=[];for(let y=0;y<h;y++)p.push(u[d+y]);return p},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,d,h){let p,y="";for(let x=0;x<h;x++)y+=`%${t.pad(u[d+x].toString(16))}`;try{p=decodeURIComponent(y)}catch{return t.readASCII(u,d,h)}return p}};function e(u,d,h,p){const y=d*h,x=s(p),v=Math.ceil(d*x/8),b=new Uint8Array(4*y),S=new Uint32Array(b.buffer),{ctype:k}=p,{depth:T}=p,j=t.readUshort;if(k==6){const ee=y<<2;if(T==8)for(var P=0;P<ee;P+=4)b[P]=u[P],b[P+1]=u[P+1],b[P+2]=u[P+2],b[P+3]=u[P+3];if(T==16)for(P=0;P<ee;P++)b[P]=u[P<<1]}else if(k==2){const ee=p.tabs.tRNS;if(ee==null){if(T==8)for(P=0;P<y;P++){var C=3*P;S[P]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C]}if(T==16)for(P=0;P<y;P++)C=6*P,S[P]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C]}else{var N=ee[0];const te=ee[1],re=ee[2];if(T==8)for(P=0;P<y;P++){var L=P<<2;C=3*P,S[P]=255<<24|u[C+2]<<16|u[C+1]<<8|u[C],u[C]==N&&u[C+1]==te&&u[C+2]==re&&(b[L+3]=0)}if(T==16)for(P=0;P<y;P++)L=P<<2,C=6*P,S[P]=255<<24|u[C+4]<<16|u[C+2]<<8|u[C],j(u,C)==N&&j(u,C+2)==te&&j(u,C+4)==re&&(b[L+3]=0)}}else if(k==3){const ee=p.tabs.PLTE,te=p.tabs.tRNS,re=te?te.length:0;if(T==1)for(var R=0;R<h;R++){var D=R*v,M=R*d;for(P=0;P<d;P++){L=M+P<<2;var H=3*(W=u[D+(P>>3)]>>7-((7&P)<<0)&1);b[L]=ee[H],b[L+1]=ee[H+1],b[L+2]=ee[H+2],b[L+3]=W<re?te[W]:255}}if(T==2)for(R=0;R<h;R++)for(D=R*v,M=R*d,P=0;P<d;P++)L=M+P<<2,H=3*(W=u[D+(P>>2)]>>6-((3&P)<<1)&3),b[L]=ee[H],b[L+1]=ee[H+1],b[L+2]=ee[H+2],b[L+3]=W<re?te[W]:255;if(T==4)for(R=0;R<h;R++)for(D=R*v,M=R*d,P=0;P<d;P++)L=M+P<<2,H=3*(W=u[D+(P>>1)]>>4-((1&P)<<2)&15),b[L]=ee[H],b[L+1]=ee[H+1],b[L+2]=ee[H+2],b[L+3]=W<re?te[W]:255;if(T==8)for(P=0;P<y;P++){var W;L=P<<2,H=3*(W=u[P]),b[L]=ee[H],b[L+1]=ee[H+1],b[L+2]=ee[H+2],b[L+3]=W<re?te[W]:255}}else if(k==4){if(T==8)for(P=0;P<y;P++){L=P<<2;var Z=u[B=P<<1];b[L]=Z,b[L+1]=Z,b[L+2]=Z,b[L+3]=u[B+1]}if(T==16)for(P=0;P<y;P++){var B;L=P<<2,Z=u[B=P<<2],b[L]=Z,b[L+1]=Z,b[L+2]=Z,b[L+3]=u[B+2]}}else if(k==0)for(N=p.tabs.tRNS?p.tabs.tRNS:-1,R=0;R<h;R++){const ee=R*v,te=R*d;if(T==1)for(var F=0;F<d;F++){var Q=(Z=255*(u[ee+(F>>>3)]>>>7-(7&F)&1))==255*N?0:255;S[te+F]=Q<<24|Z<<16|Z<<8|Z}else if(T==2)for(F=0;F<d;F++)Q=(Z=85*(u[ee+(F>>>2)]>>>6-((3&F)<<1)&3))==85*N?0:255,S[te+F]=Q<<24|Z<<16|Z<<8|Z;else if(T==4)for(F=0;F<d;F++)Q=(Z=17*(u[ee+(F>>>1)]>>>4-((1&F)<<2)&15))==17*N?0:255,S[te+F]=Q<<24|Z<<16|Z<<8|Z;else if(T==8)for(F=0;F<d;F++)Q=(Z=u[ee+F])==N?0:255,S[te+F]=Q<<24|Z<<16|Z<<8|Z;else if(T==16)for(F=0;F<d;F++)Z=u[ee+(F<<1)],Q=j(u,ee+(F<<1))==N?0:255,S[te+F]=Q<<24|Z<<16|Z<<8|Z}return b}function n(u,d,h,p){const y=s(u),x=Math.ceil(h*y/8),v=new Uint8Array((x+1+u.interlace)*p);return d=u.tabs.CgBI?i(d,v):r(d,v),u.interlace==0?d=o(d,u,0,h,p):u.interlace==1&&(d=function(S,k){const T=k.width,j=k.height,P=s(k),C=P>>3,N=Math.ceil(T*P/8),L=new Uint8Array(j*N);let R=0;const D=[0,0,4,0,2,0,1],M=[0,4,0,2,0,1,0],H=[8,8,8,4,4,2,2],W=[8,8,4,4,2,2,1];let Z=0;for(;Z<7;){const F=H[Z],Q=W[Z];let ee=0,te=0,re=D[Z];for(;re<j;)re+=F,te++;let O=M[Z];for(;O<T;)O+=Q,ee++;const X=Math.ceil(ee*P/8);o(S,k,R,ee,te);let q=0,V=D[Z];for(;V<j;){let ne=M[Z],ge=R+q*X<<3;for(;ne<T;){var B;if(P==1&&(B=(B=S[ge>>3])>>7-(7&ge)&1,L[V*N+(ne>>3)]|=B<<7-((7&ne)<<0)),P==2&&(B=(B=S[ge>>3])>>6-(7&ge)&3,L[V*N+(ne>>2)]|=B<<6-((3&ne)<<1)),P==4&&(B=(B=S[ge>>3])>>4-(7&ge)&15,L[V*N+(ne>>1)]|=B<<4-((1&ne)<<2)),P>=8){const ye=V*N+ne*C;for(let xe=0;xe<C;xe++)L[ye+xe]=S[(ge>>3)+xe]}ge+=P,ne+=Q}q++,V+=F}ee*te!=0&&(R+=te*(1+X)),Z+=1}return L}(d,u)),d}function r(u,d){return i(new Uint8Array(u.buffer,2,u.length-6),d)}var i=function(){const u={H:{}};return u.H.N=function(d,h){const p=Uint8Array;let y,x,v=0,b=0,S=0,k=0,T=0,j=0,P=0,C=0,N=0;if(d[0]==3&&d[1]==0)return h||new p(0);const L=u.H,R=L.b,D=L.e,M=L.R,H=L.n,W=L.A,Z=L.Z,B=L.m,F=h==null;for(F&&(h=new p(d.length>>>2<<5));v==0;)if(v=R(d,N,1),b=R(d,N+1,2),N+=3,b!=0){if(F&&(h=u.H.W(h,C+(1<<17))),b==1&&(y=B.J,x=B.h,j=511,P=31),b==2){S=D(d,N,5)+257,k=D(d,N+5,5)+1,T=D(d,N+10,4)+4,N+=14;let ee=1;for(var Q=0;Q<38;Q+=2)B.Q[Q]=0,B.Q[Q+1]=0;for(Q=0;Q<T;Q++){const O=D(d,N+3*Q,3);B.Q[1+(B.X[Q]<<1)]=O,O>ee&&(ee=O)}N+=3*T,H(B.Q,ee),W(B.Q,ee,B.u),y=B.w,x=B.d,N=M(B.u,(1<<ee)-1,S+k,d,N,B.v);const te=L.V(B.v,0,S,B.C);j=(1<<te)-1;const re=L.V(B.v,S,k,B.D);P=(1<<re)-1,H(B.C,te),W(B.C,te,y),H(B.D,re),W(B.D,re,x)}for(;;){const ee=y[Z(d,N)&j];N+=15&ee;const te=ee>>>4;if(!(te>>>8))h[C++]=te;else{if(te==256)break;{let re=C+te-254;if(te>264){const ne=B.q[te-257];re=C+(ne>>>3)+D(d,N,7&ne),N+=7&ne}const O=x[Z(d,N)&P];N+=15&O;const X=O>>>4,q=B.c[X],V=(q>>>4)+R(d,N,15&q);for(N+=15&q;C<re;)h[C]=h[C++-V],h[C]=h[C++-V],h[C]=h[C++-V],h[C]=h[C++-V];C=re}}}}else{(7&N)!=0&&(N+=8-(7&N));const ee=4+(N>>>3),te=d[ee-4]|d[ee-3]<<8;F&&(h=u.H.W(h,C+te)),h.set(new p(d.buffer,d.byteOffset+ee,te),C),N=ee+te<<3,C+=te}return h.length==C?h:h.slice(0,C)},u.H.W=function(d,h){const p=d.length;if(h<=p)return d;const y=new Uint8Array(p<<1);return y.set(d,0),y},u.H.R=function(d,h,p,y,x,v){const b=u.H.e,S=u.H.Z;let k=0;for(;k<p;){const T=d[S(y,x)&h];x+=15&T;const j=T>>>4;if(j<=15)v[k]=j,k++;else{let P=0,C=0;j==16?(C=3+b(y,x,2),x+=2,P=v[k-1]):j==17?(C=3+b(y,x,3),x+=3):j==18&&(C=11+b(y,x,7),x+=7);const N=k+C;for(;k<N;)v[k]=P,k++}}return x},u.H.V=function(d,h,p,y){let x=0,v=0;const b=y.length>>>1;for(;v<p;){const S=d[v+h];y[v<<1]=0,y[1+(v<<1)]=S,S>x&&(x=S),v++}for(;v<b;)y[v<<1]=0,y[1+(v<<1)]=0,v++;return x},u.H.n=function(d,h){const p=u.H.m,y=d.length;let x,v,b,S;const k=p.j;for(var T=0;T<=h;T++)k[T]=0;for(T=1;T<y;T+=2)k[d[T]]++;const j=p.K;for(x=0,k[0]=0,v=1;v<=h;v++)x=x+k[v-1]<<1,j[v]=x;for(b=0;b<y;b+=2)S=d[b+1],S!=0&&(d[b]=j[S],j[S]++)},u.H.A=function(d,h,p){const y=d.length,x=u.H.m.r;for(let v=0;v<y;v+=2)if(d[v+1]!=0){const b=v>>1,S=d[v+1],k=b<<4|S,T=h-S;let j=d[v]<<T;const P=j+(1<<T);for(;j!=P;)p[x[j]>>>15-h]=k,j++}},u.H.l=function(d,h){const p=u.H.m.r,y=15-h;for(let x=0;x<d.length;x+=2){const v=d[x]<<h-d[x+1];d[x]=p[v]>>>y}},u.H.M=function(d,h,p){p<<=7&h;const y=h>>>3;d[y]|=p,d[y+1]|=p>>>8},u.H.I=function(d,h,p){p<<=7&h;const y=h>>>3;d[y]|=p,d[y+1]|=p>>>8,d[y+2]|=p>>>16},u.H.e=function(d,h,p){return(d[h>>>3]|d[1+(h>>>3)]<<8)>>>(7&h)&(1<<p)-1},u.H.b=function(d,h,p){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)&(1<<p)-1},u.H.Z=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16)>>>(7&h)},u.H.i=function(d,h){return(d[h>>>3]|d[1+(h>>>3)]<<8|d[2+(h>>>3)]<<16|d[3+(h>>>3)]<<24)>>>(7&h)},u.H.m=function(){const d=Uint16Array,h=Uint32Array;return{K:new d(16),j:new d(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new d(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new d(512),_:[],h:new d(32),$:[],w:new d(32768),C:[],v:[],d:new d(32768),D:[],u:new d(512),Q:[],r:new d(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new d(65536),g:new d(32768)}}(),function(){const d=u.H.m;for(var h=0;h<32768;h++){let y=h;y=(2863311530&y)>>>1|(1431655765&y)<<1,y=(3435973836&y)>>>2|(858993459&y)<<2,y=(4042322160&y)>>>4|(252645135&y)<<4,y=(4278255360&y)>>>8|(16711935&y)<<8,d.r[h]=(y>>>16|y<<16)>>>17}function p(y,x,v){for(;x--!=0;)y.push(0,v)}for(h=0;h<32;h++)d.q[h]=d.S[h]<<3|d.T[h],d.c[h]=d.p[h]<<4|d.z[h];p(d._,144,8),p(d._,112,9),p(d._,24,7),p(d._,8,8),u.H.n(d._,9),u.H.A(d._,9,d.J),u.H.l(d._,9),p(d.$,32,5),u.H.n(d.$,5),u.H.A(d.$,5,d.h),u.H.l(d.$,5),p(d.Q,19,0),p(d.C,286,0),p(d.D,30,0),p(d.v,320,0)}(),u.H.N}();function s(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,d,h,p,y){let x=s(d);const v=Math.ceil(p*x/8);let b,S;x=Math.ceil(x/8);let k=u[h],T=0;if(k>1&&(u[h]=[0,0,1][k-2]),k==3)for(T=x;T<v;T++)u[T+1]=u[T+1]+(u[T+1-x]>>>1)&255;for(let j=0;j<y;j++)if(b=h+j*v,S=b+j+1,k=u[S-1],T=0,k==0)for(;T<v;T++)u[b+T]=u[S+T];else if(k==1){for(;T<x;T++)u[b+T]=u[S+T];for(;T<v;T++)u[b+T]=u[S+T]+u[b+T-x]}else if(k==2)for(;T<v;T++)u[b+T]=u[S+T]+u[b+T-v];else if(k==3){for(;T<x;T++)u[b+T]=u[S+T]+(u[b+T-v]>>>1);for(;T<v;T++)u[b+T]=u[S+T]+(u[b+T-v]+u[b+T-x]>>>1)}else{for(;T<x;T++)u[b+T]=u[S+T]+a(0,u[b+T-v],0);for(;T<v;T++)u[b+T]=u[S+T]+a(u[b+T-x],u[b+T-v],u[b+T-x-v])}return u}function a(u,d,h){const p=u+d-h,y=p-u,x=p-d,v=p-h;return y*y<=x*x&&y*y<=v*v?u:x*x<=v*v?d:h}function l(u,d,h){h.width=t.readUint(u,d),d+=4,h.height=t.readUint(u,d),d+=4,h.depth=u[d],d++,h.ctype=u[d],d++,h.compress=u[d],d++,h.filter=u[d],d++,h.interlace=u[d],d++}function c(u,d,h,p,y,x,v,b,S){const k=Math.min(d,y),T=Math.min(h,x);let j=0,P=0;for(let Z=0;Z<T;Z++)for(let B=0;B<k;B++)if(v>=0&&b>=0?(j=Z*d+B<<2,P=(b+Z)*y+v+B<<2):(j=(-b+Z)*d-v+B<<2,P=Z*y+B<<2),S==0)p[P]=u[j],p[P+1]=u[j+1],p[P+2]=u[j+2],p[P+3]=u[j+3];else if(S==1){var C=u[j+3]*.00392156862745098,N=u[j]*C,L=u[j+1]*C,R=u[j+2]*C,D=p[P+3]*(1/255),M=p[P]*D,H=p[P+1]*D,W=p[P+2]*D;const F=1-C,Q=C+D*F,ee=Q==0?0:1/Q;p[P+3]=255*Q,p[P+0]=(N+M*F)*ee,p[P+1]=(L+H*F)*ee,p[P+2]=(R+W*F)*ee}else if(S==2)C=u[j+3],N=u[j],L=u[j+1],R=u[j+2],D=p[P+3],M=p[P],H=p[P+1],W=p[P+2],C==D&&N==M&&L==H&&R==W?(p[P]=0,p[P+1]=0,p[P+2]=0,p[P+3]=0):(p[P]=N,p[P+1]=L,p[P+2]=R,p[P+3]=C);else if(S==3){if(C=u[j+3],N=u[j],L=u[j+1],R=u[j+2],D=p[P+3],M=p[P],H=p[P+1],W=p[P+2],C==D&&N==M&&L==H&&R==W)continue;if(C<220&&D>20)return!1}return!0}return{decode:function(d){const h=new Uint8Array(d);let p=8;const y=t,x=y.readUshort,v=y.readUint,b={tabs:{},frames:[]},S=new Uint8Array(h.length);let k,T=0,j=0;const P=[137,80,78,71,13,10,26,10];for(var C=0;C<8;C++)if(h[C]!=P[C])throw"The input is not a PNG file!";for(;p<h.length;){const Z=y.readUint(h,p);p+=4;const B=y.readASCII(h,p,4);if(p+=4,B=="IHDR")l(h,p,b);else if(B=="iCCP"){for(var N=p;h[N]!=0;)N++;y.readASCII(h,p,N-p),h[N+1];const F=h.slice(N+2,p+Z);let Q=null;try{Q=r(F)}catch{Q=i(F)}b.tabs[B]=Q}else if(B=="CgBI")b.tabs[B]=h.slice(p,p+4);else if(B=="IDAT"){for(C=0;C<Z;C++)S[T+C]=h[p+C];T+=Z}else if(B=="acTL")b.tabs[B]={num_frames:v(h,p),num_plays:v(h,p+4)},k=new Uint8Array(h.length);else if(B=="fcTL"){j!=0&&((W=b.frames[b.frames.length-1]).data=n(b,k.slice(0,j),W.rect.width,W.rect.height),j=0);const F={x:v(h,p+12),y:v(h,p+16),width:v(h,p+4),height:v(h,p+8)};let Q=x(h,p+22);Q=x(h,p+20)/(Q==0?100:Q);const ee={rect:F,delay:Math.round(1e3*Q),dispose:h[p+24],blend:h[p+25]};b.frames.push(ee)}else if(B=="fdAT"){for(C=0;C<Z-4;C++)k[j+C]=h[p+C+4];j+=Z-4}else if(B=="pHYs")b.tabs[B]=[y.readUint(h,p),y.readUint(h,p+4),h[p+8]];else if(B=="cHRM")for(b.tabs[B]=[],C=0;C<8;C++)b.tabs[B].push(y.readUint(h,p+4*C));else if(B=="tEXt"||B=="zTXt"){b.tabs[B]==null&&(b.tabs[B]={});var L=y.nextZero(h,p),R=y.readASCII(h,p,L-p),D=p+Z-L-1;if(B=="tEXt")H=y.readASCII(h,L+1,D);else{var M=r(h.slice(L+2,L+2+D));H=y.readUTF8(M,0,M.length)}b.tabs[B][R]=H}else if(B=="iTXt"){b.tabs[B]==null&&(b.tabs[B]={}),L=0,N=p,L=y.nextZero(h,N),R=y.readASCII(h,N,L-N);const F=h[N=L+1];var H;h[N+1],N+=2,L=y.nextZero(h,N),y.readASCII(h,N,L-N),N=L+1,L=y.nextZero(h,N),y.readUTF8(h,N,L-N),D=Z-((N=L+1)-p),F==0?H=y.readUTF8(h,N,D):(M=r(h.slice(N,N+D)),H=y.readUTF8(M,0,M.length)),b.tabs[B][R]=H}else if(B=="PLTE")b.tabs[B]=y.readBytes(h,p,Z);else if(B=="hIST"){const F=b.tabs.PLTE.length/3;for(b.tabs[B]=[],C=0;C<F;C++)b.tabs[B].push(x(h,p+2*C))}else if(B=="tRNS")b.ctype==3?b.tabs[B]=y.readBytes(h,p,Z):b.ctype==0?b.tabs[B]=x(h,p):b.ctype==2&&(b.tabs[B]=[x(h,p),x(h,p+2),x(h,p+4)]);else if(B=="gAMA")b.tabs[B]=y.readUint(h,p)/1e5;else if(B=="sRGB")b.tabs[B]=h[p];else if(B=="bKGD")b.ctype==0||b.ctype==4?b.tabs[B]=[x(h,p)]:b.ctype==2||b.ctype==6?b.tabs[B]=[x(h,p),x(h,p+2),x(h,p+4)]:b.ctype==3&&(b.tabs[B]=h[p]);else if(B=="IEND")break;p+=Z,y.readUint(h,p),p+=4}var W;return j!=0&&((W=b.frames[b.frames.length-1]).data=n(b,k.slice(0,j),W.rect.width,W.rect.height)),b.data=n(b,S,b.width,b.height),delete b.compress,delete b.interlace,delete b.filter,b},toRGBA8:function(d){const h=d.width,p=d.height;if(d.tabs.acTL==null)return[e(d.data,h,p,d).buffer];const y=[];d.frames[0].data==null&&(d.frames[0].data=d.data);const x=h*p*4,v=new Uint8Array(x),b=new Uint8Array(x),S=new Uint8Array(x);for(let T=0;T<d.frames.length;T++){const j=d.frames[T],P=j.rect.x,C=j.rect.y,N=j.rect.width,L=j.rect.height,R=e(j.data,N,L,d);if(T!=0)for(var k=0;k<x;k++)S[k]=v[k];if(j.blend==0?c(R,N,L,v,h,p,P,C,0):j.blend==1&&c(R,N,L,v,h,p,P,C,1),y.push(v.buffer.slice(0)),j.dispose!=0){if(j.dispose==1)c(b,N,L,v,h,p,P,C,0);else if(j.dispose==2)for(k=0;k<x;k++)v[k]=S[k]}}return y},_paeth:a,_copyTile:c,_bin:t}}();(function(){const{_copyTile:t}=pl,{_bin:e}=pl,n=pl._paeth;var r={table:function(){const N=new Uint32Array(256);for(let L=0;L<256;L++){let R=L;for(let D=0;D<8;D++)1&R?R=3988292384^R>>>1:R>>>=1;N[L]=R}return N}(),update(N,L,R,D){for(let M=0;M<D;M++)N=r.table[255&(N^L[R+M])]^N>>>8;return N},crc:(N,L,R)=>4294967295^r.update(4294967295,N,L,R)};function i(N,L,R,D){L[R]+=N[0]*D>>4,L[R+1]+=N[1]*D>>4,L[R+2]+=N[2]*D>>4,L[R+3]+=N[3]*D>>4}function s(N){return Math.max(0,Math.min(255,N))}function o(N,L){const R=N[0]-L[0],D=N[1]-L[1],M=N[2]-L[2],H=N[3]-L[3];return R*R+D*D+M*M+H*H}function a(N,L,R,D,M,H,W){W==null&&(W=1);const Z=D.length,B=[];for(var F=0;F<Z;F++){const V=D[F];B.push([V>>>0&255,V>>>8&255,V>>>16&255,V>>>24&255])}for(F=0;F<Z;F++){let V=4294967295;for(var Q=0,ee=0;ee<Z;ee++){var te=o(B[F],B[ee]);ee!=F&&te<V&&(V=te,Q=ee)}}const re=new Uint32Array(M.buffer),O=new Int16Array(L*R*4),X=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(F=0;F<X.length;F++)X[F]=255*((X[F]+.5)/16-.5);for(let V=0;V<R;V++)for(let ne=0;ne<L;ne++){var q;F=4*(V*L+ne),W!=2?q=[s(N[F]+O[F]),s(N[F+1]+O[F+1]),s(N[F+2]+O[F+2]),s(N[F+3]+O[F+3])]:(te=X[4*(3&V)+(3&ne)],q=[s(N[F]+te),s(N[F+1]+te),s(N[F+2]+te),s(N[F+3]+te)]),Q=0;let ge=16777215;for(ee=0;ee<Z;ee++){const Se=o(q,B[ee]);Se<ge&&(ge=Se,Q=ee)}const ye=B[Q],xe=[q[0]-ye[0],q[1]-ye[1],q[2]-ye[2],q[3]-ye[3]];W==1&&(ne!=L-1&&i(xe,O,F+4,7),V!=R-1&&(ne!=0&&i(xe,O,F+4*L-4,3),i(xe,O,F+4*L,5),ne!=L-1&&i(xe,O,F+4*L+4,1))),H[F>>2]=Q,re[F>>2]=D[Q]}}function l(N,L,R,D,M){M==null&&(M={});const{crc:H}=r,W=e.writeUint,Z=e.writeUshort,B=e.writeASCII;let F=8;const Q=N.frames.length>1;let ee,te=!1,re=33+(Q?20:0);if(M.sRGB!=null&&(re+=13),M.pHYs!=null&&(re+=21),M.iCCP!=null&&(ee=pako.deflate(M.iCCP),re+=21+ee.length+4),N.ctype==3){for(var O=N.plte.length,X=0;X<O;X++)N.plte[X]>>>24!=255&&(te=!0);re+=8+3*O+4+(te?8+1*O+4:0)}for(var q=0;q<N.frames.length;q++)Q&&(re+=38),re+=(ye=N.frames[q]).cimg.length+12,q!=0&&(re+=4);re+=12;const V=new Uint8Array(re),ne=[137,80,78,71,13,10,26,10];for(X=0;X<8;X++)V[X]=ne[X];if(W(V,F,13),F+=4,B(V,F,"IHDR"),F+=4,W(V,F,L),F+=4,W(V,F,R),F+=4,V[F]=N.depth,F++,V[F]=N.ctype,F++,V[F]=0,F++,V[F]=0,F++,V[F]=0,F++,W(V,F,H(V,F-17,17)),F+=4,M.sRGB!=null&&(W(V,F,1),F+=4,B(V,F,"sRGB"),F+=4,V[F]=M.sRGB,F++,W(V,F,H(V,F-5,5)),F+=4),M.iCCP!=null){const xe=13+ee.length;W(V,F,xe),F+=4,B(V,F,"iCCP"),F+=4,B(V,F,"ICC profile"),F+=11,F+=2,V.set(ee,F),F+=ee.length,W(V,F,H(V,F-(xe+4),xe+4)),F+=4}if(M.pHYs!=null&&(W(V,F,9),F+=4,B(V,F,"pHYs"),F+=4,W(V,F,M.pHYs[0]),F+=4,W(V,F,M.pHYs[1]),F+=4,V[F]=M.pHYs[2],F++,W(V,F,H(V,F-13,13)),F+=4),Q&&(W(V,F,8),F+=4,B(V,F,"acTL"),F+=4,W(V,F,N.frames.length),F+=4,W(V,F,M.loop!=null?M.loop:0),F+=4,W(V,F,H(V,F-12,12)),F+=4),N.ctype==3){for(W(V,F,3*(O=N.plte.length)),F+=4,B(V,F,"PLTE"),F+=4,X=0;X<O;X++){const xe=3*X,Se=N.plte[X],He=255&Se,$e=Se>>>8&255,Ge=Se>>>16&255;V[F+xe+0]=He,V[F+xe+1]=$e,V[F+xe+2]=Ge}if(F+=3*O,W(V,F,H(V,F-3*O-4,3*O+4)),F+=4,te){for(W(V,F,O),F+=4,B(V,F,"tRNS"),F+=4,X=0;X<O;X++)V[F+X]=N.plte[X]>>>24&255;F+=O,W(V,F,H(V,F-O-4,O+4)),F+=4}}let ge=0;for(q=0;q<N.frames.length;q++){var ye=N.frames[q];Q&&(W(V,F,26),F+=4,B(V,F,"fcTL"),F+=4,W(V,F,ge++),F+=4,W(V,F,ye.rect.width),F+=4,W(V,F,ye.rect.height),F+=4,W(V,F,ye.rect.x),F+=4,W(V,F,ye.rect.y),F+=4,Z(V,F,D[q]),F+=2,Z(V,F,1e3),F+=2,V[F]=ye.dispose,F++,V[F]=ye.blend,F++,W(V,F,H(V,F-30,30)),F+=4);const xe=ye.cimg;W(V,F,(O=xe.length)+(q==0?0:4)),F+=4;const Se=F;B(V,F,q==0?"IDAT":"fdAT"),F+=4,q!=0&&(W(V,F,ge++),F+=4),V.set(xe,F),F+=O,W(V,F,H(V,Se,F-Se)),F+=4}return W(V,F,0),F+=4,B(V,F,"IEND"),F+=4,W(V,F,H(V,F-4,4)),F+=4,V.buffer}function c(N,L,R){for(let D=0;D<N.frames.length;D++){const M=N.frames[D];M.rect.width;const H=M.rect.height,W=new Uint8Array(H*M.bpl+H);M.cimg=p(M.img,H,M.bpp,M.bpl,W,L,R)}}function u(N,L,R,D,M){const H=M[0],W=M[1],Z=M[2],B=M[3],F=M[4],Q=M[5];let ee=6,te=8,re=255;for(var O=0;O<N.length;O++){const pe=new Uint8Array(N[O]);for(var X=pe.length,q=0;q<X;q+=4)re&=pe[q+3]}const V=re!=255,ne=function(qe,Ze,Me,ke,We,it){const gt=[];for(var xt=0;xt<qe.length;xt++){const Mt=new Uint8Array(qe[xt]),ot=new Uint32Array(Mt.buffer);var Tt;let Nn=0,Qt=0,Wn=Ze,cn=Me,bn=ke?1:0;if(xt!=0){const $r=it||ke||xt==1||gt[xt-2].dispose!=0?1:2;let dn=0,Qr=1e9;for(let _n=0;_n<$r;_n++){var Bt=new Uint8Array(qe[xt-1-_n]);const gr=new Uint32Array(qe[xt-1-_n]);let fn=Ze,Yt=Me,Ot=-1,Jt=-1;for(let hn=0;hn<Me;hn++)for(let Cn=0;Cn<Ze;Cn++)ot[Rt=hn*Ze+Cn]!=gr[Rt]&&(Cn<fn&&(fn=Cn),Cn>Ot&&(Ot=Cn),hn<Yt&&(Yt=hn),hn>Jt&&(Jt=hn));Ot==-1&&(fn=Yt=Ot=Jt=0),We&&((1&fn)==1&&fn--,(1&Yt)==1&&Yt--);const Yn=(Ot-fn+1)*(Jt-Yt+1);Yn<Qr&&(Qr=Yn,dn=_n,Nn=fn,Qt=Yt,Wn=Ot-fn+1,cn=Jt-Yt+1)}Bt=new Uint8Array(qe[xt-1-dn]),dn==1&&(gt[xt-1].dispose=2),Tt=new Uint8Array(Wn*cn*4),t(Bt,Ze,Me,Tt,Wn,cn,-Nn,-Qt,0),bn=t(Mt,Ze,Me,Tt,Wn,cn,-Nn,-Qt,3)?1:0,bn==1?h(Mt,Ze,Me,Tt,{x:Nn,y:Qt,width:Wn,height:cn}):t(Mt,Ze,Me,Tt,Wn,cn,-Nn,-Qt,0)}else Tt=Mt.slice(0);gt.push({rect:{x:Nn,y:Qt,width:Wn,height:cn},img:Tt,blend:bn,dispose:0})}if(ke)for(xt=0;xt<gt.length;xt++){if((Dt=gt[xt]).blend==1)continue;const Mt=Dt.rect,ot=gt[xt-1].rect,Nn=Math.min(Mt.x,ot.x),Qt=Math.min(Mt.y,ot.y),Wn={x:Nn,y:Qt,width:Math.max(Mt.x+Mt.width,ot.x+ot.width)-Nn,height:Math.max(Mt.y+Mt.height,ot.y+ot.height)-Qt};gt[xt-1].dispose=1,xt-1!=0&&d(qe,Ze,Me,gt,xt-1,Wn,We),d(qe,Ze,Me,gt,xt,Wn,We)}let qt=0;if(qe.length!=1)for(var Rt=0;Rt<gt.length;Rt++){var Dt;qt+=(Dt=gt[Rt]).rect.width*Dt.rect.height}return gt}(N,L,R,H,W,Z),ge={},ye=[],xe=[];if(D!=0){const pe=[];for(q=0;q<ne.length;q++)pe.push(ne[q].img.buffer);const qe=function(We){let it=0;for(var gt=0;gt<We.length;gt++)it+=We[gt].byteLength;const xt=new Uint8Array(it);let Tt=0;for(gt=0;gt<We.length;gt++){const Bt=new Uint8Array(We[gt]),qt=Bt.length;for(let Rt=0;Rt<qt;Rt+=4){let Dt=Bt[Rt],Mt=Bt[Rt+1],ot=Bt[Rt+2];const Nn=Bt[Rt+3];Nn==0&&(Dt=Mt=ot=0),xt[Tt+Rt]=Dt,xt[Tt+Rt+1]=Mt,xt[Tt+Rt+2]=ot,xt[Tt+Rt+3]=Nn}Tt+=qt}return xt.buffer}(pe),Ze=x(qe,D);for(q=0;q<Ze.plte.length;q++)ye.push(Ze.plte[q].est.rgba);let Me=0;for(q=0;q<ne.length;q++){const ke=(He=ne[q]).img.length;var Se=new Uint8Array(Ze.inds.buffer,Me>>2,ke>>2);xe.push(Se);const We=new Uint8Array(Ze.abuf,Me,ke);Q&&a(He.img,He.rect.width,He.rect.height,ye,We,Se),He.img.set(We),Me+=ke}}else for(O=0;O<ne.length;O++){var He=ne[O];const pe=new Uint32Array(He.img.buffer);var $e=He.rect.width;for(X=pe.length,Se=new Uint8Array(X),xe.push(Se),q=0;q<X;q++){const qe=pe[q];if(q!=0&&qe==pe[q-1])Se[q]=Se[q-1];else if(q>$e&&qe==pe[q-$e])Se[q]=Se[q-$e];else{let Ze=ge[qe];if(Ze==null&&(ge[qe]=Ze=ye.length,ye.push(qe),ye.length>=300))break;Se[q]=Ze}}}const Ge=ye.length;for(Ge<=256&&F==0&&(te=Ge<=2?1:Ge<=4?2:Ge<=16?4:8,te=Math.max(te,B)),O=0;O<ne.length;O++){(He=ne[O]).rect.x,He.rect.y,$e=He.rect.width;const pe=He.rect.height;let qe=He.img;new Uint32Array(qe.buffer);let Ze=4*$e,Me=4;if(Ge<=256&&F==0){Ze=Math.ceil(te*$e/8);var ze=new Uint8Array(Ze*pe);const ke=xe[O];for(let We=0;We<pe;We++){q=We*Ze;const it=We*$e;if(te==8)for(var Ne=0;Ne<$e;Ne++)ze[q+Ne]=ke[it+Ne];else if(te==4)for(Ne=0;Ne<$e;Ne++)ze[q+(Ne>>1)]|=ke[it+Ne]<<4-4*(1&Ne);else if(te==2)for(Ne=0;Ne<$e;Ne++)ze[q+(Ne>>2)]|=ke[it+Ne]<<6-2*(3&Ne);else if(te==1)for(Ne=0;Ne<$e;Ne++)ze[q+(Ne>>3)]|=ke[it+Ne]<<7-1*(7&Ne)}qe=ze,ee=3,Me=1}else if(V==0&&ne.length==1){ze=new Uint8Array($e*pe*3);const ke=$e*pe;for(q=0;q<ke;q++){const We=3*q,it=4*q;ze[We]=qe[it],ze[We+1]=qe[it+1],ze[We+2]=qe[it+2]}qe=ze,ee=2,Me=3,Ze=3*$e}He.img=qe,He.bpl=Ze,He.bpp=Me}return{ctype:ee,depth:te,plte:ye,frames:ne}}function d(N,L,R,D,M,H,W){const Z=Uint8Array,B=Uint32Array,F=new Z(N[M-1]),Q=new B(N[M-1]),ee=M+1<N.length?new Z(N[M+1]):null,te=new Z(N[M]),re=new B(te.buffer);let O=L,X=R,q=-1,V=-1;for(let ge=0;ge<H.height;ge++)for(let ye=0;ye<H.width;ye++){const xe=H.x+ye,Se=H.y+ge,He=Se*L+xe,$e=re[He];$e==0||D[M-1].dispose==0&&Q[He]==$e&&(ee==null||ee[4*He+3]!=0)||(xe<O&&(O=xe),xe>q&&(q=xe),Se<X&&(X=Se),Se>V&&(V=Se))}q==-1&&(O=X=q=V=0),W&&((1&O)==1&&O--,(1&X)==1&&X--),H={x:O,y:X,width:q-O+1,height:V-X+1};const ne=D[M];ne.rect=H,ne.blend=1,ne.img=new Uint8Array(H.width*H.height*4),D[M-1].dispose==0?(t(F,L,R,ne.img,H.width,H.height,-H.x,-H.y,0),h(te,L,R,ne.img,H)):t(te,L,R,ne.img,H.width,H.height,-H.x,-H.y,0)}function h(N,L,R,D,M){t(N,L,R,D,M.width,M.height,-M.x,-M.y,2)}function p(N,L,R,D,M,H,W){const Z=[];let B,F=[0,1,2,3,4];H!=-1?F=[H]:(L*D>5e5||R==1)&&(F=[0]),W&&(B={level:0});const Q=iee;for(var ee=0;ee<F.length;ee++){for(let O=0;O<L;O++)y(M,N,O,D,R,F[ee]);Z.push(Q.deflate(M,B))}let te,re=1e9;for(ee=0;ee<Z.length;ee++)Z[ee].length<re&&(te=ee,re=Z[ee].length);return Z[te]}function y(N,L,R,D,M,H){const W=R*D;let Z=W+R;if(N[Z]=H,Z++,H==0)if(D<500)for(var B=0;B<D;B++)N[Z+B]=L[W+B];else N.set(new Uint8Array(L.buffer,W,D),Z);else if(H==1){for(B=0;B<M;B++)N[Z+B]=L[W+B];for(B=M;B<D;B++)N[Z+B]=L[W+B]-L[W+B-M]+256&255}else if(R==0){for(B=0;B<M;B++)N[Z+B]=L[W+B];if(H==2)for(B=M;B<D;B++)N[Z+B]=L[W+B];if(H==3)for(B=M;B<D;B++)N[Z+B]=L[W+B]-(L[W+B-M]>>1)+256&255;if(H==4)for(B=M;B<D;B++)N[Z+B]=L[W+B]-n(L[W+B-M],0,0)+256&255}else{if(H==2)for(B=0;B<D;B++)N[Z+B]=L[W+B]+256-L[W+B-D]&255;if(H==3){for(B=0;B<M;B++)N[Z+B]=L[W+B]+256-(L[W+B-D]>>1)&255;for(B=M;B<D;B++)N[Z+B]=L[W+B]+256-(L[W+B-D]+L[W+B-M]>>1)&255}if(H==4){for(B=0;B<M;B++)N[Z+B]=L[W+B]+256-n(0,L[W+B-D],0)&255;for(B=M;B<D;B++)N[Z+B]=L[W+B]+256-n(L[W+B-M],L[W+B-D],L[W+B-M-D])&255}}}function x(N,L){const R=new Uint8Array(N),D=R.slice(0),M=new Uint32Array(D.buffer),H=v(D,L),W=H[0],Z=H[1],B=R.length,F=new Uint8Array(B>>2);let Q;if(R.length<2e7)for(var ee=0;ee<B;ee+=4)Q=b(W,te=R[ee]*(1/255),re=R[ee+1]*(1/255),O=R[ee+2]*(1/255),X=R[ee+3]*(1/255)),F[ee>>2]=Q.ind,M[ee>>2]=Q.est.rgba;else for(ee=0;ee<B;ee+=4){var te=R[ee]*.00392156862745098,re=R[ee+1]*(1/255),O=R[ee+2]*(1/255),X=R[ee+3]*(1/255);for(Q=W;Q.left;)Q=S(Q.est,te,re,O,X)<=0?Q.left:Q.right;F[ee>>2]=Q.ind,M[ee>>2]=Q.est.rgba}return{abuf:D.buffer,inds:F,plte:Z}}function v(N,L,R){R==null&&(R=1e-4);const D=new Uint32Array(N.buffer),M={i0:0,i1:N.length,bst:null,est:null,tdst:0,left:null,right:null};M.bst=j(N,M.i0,M.i1),M.est=P(M.bst);const H=[M];for(;H.length<L;){let Z=0,B=0;for(var W=0;W<H.length;W++)H[W].est.L>Z&&(Z=H[W].est.L,B=W);if(Z<R)break;const F=H[B],Q=k(N,D,F.i0,F.i1,F.est.e,F.est.eMq255);if(F.i0>=Q||F.i1<=Q){F.est.L=0;continue}const ee={i0:F.i0,i1:Q,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=j(N,ee.i0,ee.i1),ee.est=P(ee.bst);const te={i0:Q,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};for(te.bst={R:[],m:[],N:F.bst.N-ee.bst.N},W=0;W<16;W++)te.bst.R[W]=F.bst.R[W]-ee.bst.R[W];for(W=0;W<4;W++)te.bst.m[W]=F.bst.m[W]-ee.bst.m[W];te.est=P(te.bst),F.left=ee,F.right=te,H[B]=ee,H.push(te)}for(H.sort((Z,B)=>B.bst.N-Z.bst.N),W=0;W<H.length;W++)H[W].ind=W;return[M,H]}function b(N,L,R,D,M){if(N.left==null)return N.tdst=function(ee,te,re,O,X){const q=te-ee[0],V=re-ee[1],ne=O-ee[2],ge=X-ee[3];return q*q+V*V+ne*ne+ge*ge}(N.est.q,L,R,D,M),N;const H=S(N.est,L,R,D,M);let W=N.left,Z=N.right;H>0&&(W=N.right,Z=N.left);const B=b(W,L,R,D,M);if(B.tdst<=H*H)return B;const F=b(Z,L,R,D,M);return F.tdst<B.tdst?F:B}function S(N,L,R,D,M){const{e:H}=N;return H[0]*L+H[1]*R+H[2]*D+H[3]*M-N.eMq}function k(N,L,R,D,M,H){for(D-=4;R<D;){for(;T(N,R,M)<=H;)R+=4;for(;T(N,D,M)>H;)D-=4;if(R>=D)break;const W=L[R>>2];L[R>>2]=L[D>>2],L[D>>2]=W,R+=4,D-=4}for(;T(N,R,M)>H;)R-=4;return R+4}function T(N,L,R){return N[L]*R[0]+N[L+1]*R[1]+N[L+2]*R[2]+N[L+3]*R[3]}function j(N,L,R){const D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],M=[0,0,0,0],H=R-L>>2;for(let W=L;W<R;W+=4){const Z=N[W]*.00392156862745098,B=N[W+1]*(1/255),F=N[W+2]*(1/255),Q=N[W+3]*(1/255);M[0]+=Z,M[1]+=B,M[2]+=F,M[3]+=Q,D[0]+=Z*Z,D[1]+=Z*B,D[2]+=Z*F,D[3]+=Z*Q,D[5]+=B*B,D[6]+=B*F,D[7]+=B*Q,D[10]+=F*F,D[11]+=F*Q,D[15]+=Q*Q}return D[4]=D[1],D[8]=D[2],D[9]=D[6],D[12]=D[3],D[13]=D[7],D[14]=D[11],{R:D,m:M,N:H}}function P(N){const{R:L}=N,{m:R}=N,{N:D}=N,M=R[0],H=R[1],W=R[2],Z=R[3],B=D==0?0:1/D,F=[L[0]-M*M*B,L[1]-M*H*B,L[2]-M*W*B,L[3]-M*Z*B,L[4]-H*M*B,L[5]-H*H*B,L[6]-H*W*B,L[7]-H*Z*B,L[8]-W*M*B,L[9]-W*H*B,L[10]-W*W*B,L[11]-W*Z*B,L[12]-Z*M*B,L[13]-Z*H*B,L[14]-Z*W*B,L[15]-Z*Z*B],Q=F,ee=C;let te=[Math.random(),Math.random(),Math.random(),Math.random()],re=0,O=0;if(D!=0)for(let q=0;q<16&&(te=ee.multVec(Q,te),O=Math.sqrt(ee.dot(te,te)),te=ee.sml(1/O,te),!(q!=0&&Math.abs(O-re)<1e-9));q++)re=O;const X=[M*B,H*B,W*B,Z*B];return{Cov:F,q:X,e:te,L:re,eMq255:ee.dot(ee.sml(255,X),te),eMq:ee.dot(te,X),rgba:(Math.round(255*X[3])<<24|Math.round(255*X[2])<<16|Math.round(255*X[1])<<8|Math.round(255*X[0])<<0)>>>0}}var C={multVec:(N,L)=>[N[0]*L[0]+N[1]*L[1]+N[2]*L[2]+N[3]*L[3],N[4]*L[0]+N[5]*L[1]+N[6]*L[2]+N[7]*L[3],N[8]*L[0]+N[9]*L[1]+N[10]*L[2]+N[11]*L[3],N[12]*L[0]+N[13]*L[1]+N[14]*L[2]+N[15]*L[3]],dot:(N,L)=>N[0]*L[0]+N[1]*L[1]+N[2]*L[2]+N[3]*L[3],sml:(N,L)=>[N*L[0],N*L[1],N*L[2],N*L[3]]};pl.encode=function(L,R,D,M,H,W,Z){M==null&&(M=0),Z==null&&(Z=!1);const B=u(L,R,D,M,[!1,!1,!1,0,Z,!1]);return c(B,-1),l(B,R,D,H,W)},pl.encodeLL=function(L,R,D,M,H,W,Z,B){const F={ctype:0+(M==1?0:2)+(H==0?0:4),depth:W,frames:[]},Q=(M+H)*W,ee=Q*R;for(let te=0;te<L.length;te++)F.frames.push({rect:{x:0,y:0,width:R,height:D},img:new Uint8Array(L[te]),blend:0,dispose:1,bpp:Math.ceil(Q/8),bpl:Math.ceil(ee/8)});return c(F,0,!0),l(F,R,D,Z,B)},pl.encode.compress=u,pl.encode.dither=a,pl.quantize=x,pl.quantize.getKDtree=v,pl.quantize.getNearest=b})();const h8={toArrayBuffer(t,e){const n=t.width,r=t.height,i=n<<2,s=t.getContext("2d").getImageData(0,0,n,r),o=new Uint32Array(s.data.buffer),a=(32*n+31)/32<<2,l=a*r,c=122+l,u=new ArrayBuffer(c),d=new DataView(u),h=1<<20;let p,y,x,v,b=h,S=0,k=0,T=0;function j(N){d.setUint16(k,N,!0),k+=2}function P(N){d.setUint32(k,N,!0),k+=4}function C(N){k+=N}j(19778),P(c),C(4),P(122),P(108),P(n),P(-r>>>0),j(1),j(32),P(3),P(l),P(2835),P(2835),C(8),P(16711680),P(65280),P(255),P(4278190080),P(1466527264),function N(){for(;S<r&&b>0;){for(v=122+S*a,p=0;p<i;)b--,y=o[T++],x=y>>>24,d.setUint32(v+p,y<<8|x),p+=4;S++}T<o.length?(b=h,setTimeout(N,h8._dly)):e(u)}()},toBlob(t,e){this.toArrayBuffer(t,n=>{e(new Blob([n],{type:"image/bmp"}))})},_dly:9};var No={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},see={[No.CHROME]:16384,[No.FIREFOX]:11180,[No.DESKTOP_SAFARI]:16384,[No.IE]:8192,[No.IOS]:4096,[No.ETC]:8192};const E4=typeof window<"u",p8=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,rv=E4&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),oee=(E4||p8)&&(rv&&rv.getOriginalSymbol(window,"File")||typeof File<"u"&&File),m8=(E4||p8)&&(rv&&rv.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function A4(t,e,n=Date.now()){return new Promise(r=>{const i=t.split(","),s=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let a=o.length;const l=new Uint8Array(a);for(;a--;)l[a]=o.charCodeAt(a);const c=new Blob([l],{type:s});c.name=e,c.lastModified=n,r(c)})}function g8(t){return new Promise((e,n)=>{const r=new m8;r.onload=()=>e(r.result),r.onerror=i=>n(i),r.readAsDataURL(t)})}function y8(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.src=t})}function nh(){if(nh.cachedResult!==void 0)return nh.cachedResult;let t=No.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=No.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=No.IOS:/Safari/i.test(e)?t=No.DESKTOP_SAFARI:/Firefox/i.test(e)?t=No.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=No.IE),nh.cachedResult=t,nh.cachedResult}function x8(t,e){const n=nh(),r=see[n];let i=t,s=e,o=i*s;const a=i>s?s/i:i/s;for(;o>r*r;){const l=(r+i)/2,c=(r+s)/2;l<c?(s=c,i=c*a):(s=l*a,i=l),o=i*s}return{width:i,height:s}}function f2(t,e){let n,r;try{if(n=new OffscreenCanvas(t,e),r=n.getContext("2d"),r===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),r=n.getContext("2d")}return n.width=t,n.height=e,[n,r]}function v8(t,e){const{width:n,height:r}=x8(t.width,t.height),[i,s]=f2(n,r);return e&&/jpe?g/.test(e)&&(s.fillStyle="white",s.fillRect(0,0,i.width,i.height)),s.drawImage(t,0,0,i.width,i.height),i}function mx(){return mx.cachedResult!==void 0||(mx.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),mx.cachedResult}function iv(t,e={}){return new Promise(function(n,r){let i,s;var o=function(){try{return s=v8(i,e.fileType||t.type),n([i,s])}catch(l){return r(l)}},a=function(l){try{var c=function(u){try{throw u}catch(d){return r(d)}};try{let u;return g8(t).then(function(d){try{return u=d,y8(u).then(function(h){try{return i=h,function(){try{return o()}catch(p){return r(p)}}()}catch(p){return c(p)}},c)}catch(h){return c(h)}},c)}catch(u){c(u)}}catch(u){return r(u)}};try{if(mx()||[No.DESKTOP_SAFARI,No.MOBILE_SAFARI].includes(nh()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(l){try{return i=l,o()}catch{return a()}},a)}catch{a()}})}function sv(t,e,n,r,i=1){return new Promise(function(s,o){let a;if(e==="image/png"){let c,u,d;return c=t.getContext("2d"),{data:u}=c.getImageData(0,0,t.width,t.height),d=pl.encode([u.buffer],t.width,t.height,4096*i),a=new Blob([d],{type:e}),a.name=n,a.lastModified=r,l.call(this)}{let c=function(){return l.call(this)};if(e==="image/bmp")return new Promise(u=>h8.toBlob(t,u)).then((function(u){try{return a=u,a.name=n,a.lastModified=r,c.call(this)}catch(d){return o(d)}}).bind(this),o);{let u=function(){return c.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(d){try{return a=d,a.name=n,a.lastModified=r,u.call(this)}catch(h){return o(h)}}).bind(this),o);{let d;return d=t.toDataURL(e,i),A4(d,n,r).then((function(h){try{return a=h,u.call(this)}catch(p){return o(p)}}).bind(this),o)}}}function l(){return s(a)}})}function ic(t){t.width=0,t.height=0}function Vp(){return new Promise(function(t,e){let n,r,i,s;return Vp.cachedResult!==void 0?t(Vp.cachedResult):A4("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,iv(n).then(function(a){try{return r=a[1],sv(r,n.type,n.name,n.lastModified).then(function(l){try{return i=l,ic(r),iv(i).then(function(c){try{return s=c[0],Vp.cachedResult=s.width===1&&s.height===2,t(Vp.cachedResult)}catch(u){return e(u)}},e)}catch(c){return e(c)}},e)}catch(l){return e(l)}},e)}catch(a){return e(a)}},e)})}function w8(t){return new Promise((e,n)=>{const r=new m8;r.onload=i=>{const s=new DataView(i.target.result);if(s.getUint16(0,!1)!=65496)return e(-2);const o=s.byteLength;let a=2;for(;a<o;){if(s.getUint16(a+2,!1)<=8)return e(-1);const l=s.getUint16(a,!1);if(a+=2,l==65505){if(s.getUint32(a+=2,!1)!=1165519206)return e(-1);const c=s.getUint16(a+=6,!1)==18761;a+=s.getUint32(a+4,c);const u=s.getUint16(a,c);a+=2;for(let d=0;d<u;d++)if(s.getUint16(a+12*d,c)==274)return e(s.getUint16(a+12*d+8,c))}else{if((65280&l)!=65280)break;a+=s.getUint16(a,!1)}}return e(-1)},r.onerror=i=>n(i),r.readAsArrayBuffer(t)})}function b8(t,e){const{width:n}=t,{height:r}=t,{maxWidthOrHeight:i}=e;let s,o=t;return isFinite(i)&&(n>i||r>i)&&([o,s]=f2(n,r),n>r?(o.width=i,o.height=r/n*i):(o.width=n/r*i,o.height=i),s.drawImage(t,0,0,o.width,o.height),ic(t)),o}function _8(t,e){const{width:n}=t,{height:r}=t,[i,s]=f2(n,r);switch(e>4&&e<9?(i.width=r,i.height=n):(i.width=n,i.height=r),e){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,r);break;case 4:s.transform(1,0,0,-1,0,r);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,r,0);break;case 7:s.transform(0,-1,-1,0,r,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(t,0,0,n,r),ic(t),i}function bA(t,e,n=0){return new Promise(function(r,i){let s,o,a,l,c,u,d,h,p,y,x,v,b,S,k,T,j,P,C,N;function L(D=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;s+=D,e.onProgress(Math.min(s,100))}function R(D){if(e.signal&&e.signal.aborted)throw e.signal.reason;s=Math.min(Math.max(D,s),100),e.onProgress(s)}return s=n,o=e.maxIteration||10,a=1024*e.maxSizeMB*1024,L(),iv(t,e).then((function(D){try{return[,l]=D,L(),c=b8(l,e),L(),new Promise(function(M,H){var W;if(!(W=e.exifOrientation))return w8(t).then((function(B){try{return W=B,Z.call(this)}catch(F){return H(F)}}).bind(this),H);function Z(){return M(W)}return Z.call(this)}).then((function(M){try{return u=M,L(),Vp().then((function(H){try{return d=H?c:_8(c,u),L(),h=e.initialQuality||1,p=e.fileType||t.type,sv(d,p,t.name,t.lastModified,h).then((function(W){try{{let B=function(){if(o--&&(k>a||k>b)){let Q,ee;return Q=N?.95*C.width:C.width,ee=N?.95*C.height:C.height,[j,P]=f2(Q,ee),P.drawImage(C,0,0,Q,ee),h*=p==="image/png"?.85:.95,sv(j,p,t.name,t.lastModified,h).then(function(te){try{return T=te,ic(C),C=j,k=T.size,R(Math.min(99,Math.floor((S-k)/(S-a)*100))),B}catch(re){return i(re)}},i)}return[1]},F=function(){return ic(C),ic(j),ic(c),ic(d),ic(l),R(100),r(T)};if(y=W,L(),x=y.size>a,v=y.size>t.size,!x&&!v)return R(100),r(y);var Z;return b=t.size,S=y.size,k=S,C=d,N=!e.alwaysKeepResolution&&x,(Z=(function(Q){for(;Q;){if(Q.then)return void Q.then(Z,i);try{if(Q.pop){if(Q.length)return Q.pop()?F.call(this):Q;Q=B}else Q=Q.call(this)}catch(ee){return i(ee)}}}).bind(this))(B)}}catch(B){return i(B)}}).bind(this),i)}catch(W){return i(W)}}).bind(this),i)}catch(H){return i(H)}}).bind(this),i)}catch(M){return i(M)}}).bind(this),i)})}const aee=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let vb;function lee(t,e){return new Promise((n,r)=>{vb||(vb=function(o){const a=[];return a.push(o),URL.createObjectURL(new Blob(a))}(aee));const i=new Worker(vb);i.addEventListener("message",function(o){if(e.signal&&e.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return r(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else e.onProgress(o.data.progress)}),i.addEventListener("error",r),e.signal&&e.signal.addEventListener("abort",()=>{r(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function As(t,e){return new Promise(function(n,r){let i,s,o,a,l,c;if(i={...e},o=0,{onProgress:a}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,l=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{o=p,typeof a=="function"&&a(o)},!(t instanceof Blob||t instanceof oee))return r(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return r(new Error("The file given is not an image"));if(c=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!l||typeof Worker!="function"||c)return bA(t,i).then((function(p){try{return s=p,h.call(this)}catch(y){return r(y)}}).bind(this),r);var u=(function(){try{return h.call(this)}catch(p){return r(p)}}).bind(this),d=function(p){try{return bA(t,i).then(function(y){try{return s=y,u()}catch(x){return r(x)}},r)}catch(y){return r(y)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",lee(t,i).then(function(p){try{return s=p,u()}catch{return d()}},d)}catch{d()}function h(){try{s.name=t.name,s.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(s=f8(t,s))}catch{}return n(s)}})}As.getDataUrlFromFile=g8,As.getFilefromDataUrl=A4,As.loadImage=y8,As.drawImageInCanvas=v8,As.drawFileInCanvas=iv,As.canvasToFile=sv,As.getExifOrientation=w8,As.handleMaxWidthOrHeight=b8,As.followExifOrientation=_8,As.cleanupCanvasMemory=ic,As.isAutoOrientationInBrowser=Vp,As.approximateBelowMaximumCanvasSizeOfBrowser=x8,As.copyExifWithoutOrientation=f8,As.getBrowserName=nh,As.version="2.0.2";function Xn(t){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(t)}function cee(t,e){if(Xn(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xn(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uee(t){var e=cee(t,"string");return Xn(e)=="symbol"?e:e+""}function dee(t,e,n){return(e=uee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_A(Object(n),!0).forEach(function(r){dee(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ko(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var kA=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),NA=function(){return Math.random().toString(36).substring(7).split("").join(".")},CA={INIT:"@@redux/INIT"+NA(),REPLACE:"@@redux/REPLACE"+NA()};function fee(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function S8(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ko(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ko(1));return n(S8)(t,e)}if(typeof t!="function")throw new Error(ko(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(ko(3));return s}function d(x){if(typeof x!="function")throw new Error(ko(4));if(l)throw new Error(ko(5));var v=!0;return c(),a.push(x),function(){if(v){if(l)throw new Error(ko(6));v=!1,c();var S=a.indexOf(x);a.splice(S,1),o=null}}}function h(x){if(!fee(x))throw new Error(ko(7));if(typeof x.type>"u")throw new Error(ko(8));if(l)throw new Error(ko(9));try{l=!0,s=i(s,x)}finally{l=!1}for(var v=o=a,b=0;b<v.length;b++){var S=v[b];S()}return x}function p(x){if(typeof x!="function")throw new Error(ko(10));i=x,h({type:CA.REPLACE})}function y(){var x,v=d;return x={subscribe:function(S){if(typeof S!="object"||S===null)throw new Error(ko(11));function k(){S.next&&S.next(u())}k();var T=v(k);return{unsubscribe:T}}},x[kA]=function(){return this},x}return h({type:CA.INIT}),r={dispatch:h,subscribe:d,getState:u,replaceReducer:p},r[kA]=y,r}function EA(t,e){return function(){return e(t.apply(this,arguments))}}function AA(t,e){if(typeof t=="function")return EA(t,e);if(typeof t!="object"||t===null)throw new Error(ko(16));var n={};for(var r in t){var i=t[r];typeof i=="function"&&(n[r]=EA(i,e))}return n}function k8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function hee(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ko(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(l){return l(o)});return s=k8.apply(void 0,a)(i.dispatch),SA(SA({},i),{},{dispatch:s})}}}var wb={exports:{}},bb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function pee(){if(TA)return bb;TA=1;var t=l1();function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),y=r({inst:{value:p,getSnapshot:h}}),x=y[0].inst,v=y[1];return s(function(){x.value=p,x.getSnapshot=h,l(x)&&v({inst:x})},[d,p,h]),i(function(){return l(x)&&v({inst:x}),d(function(){l(x)&&v({inst:x})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return bb.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,bb}var jA;function N8(){return jA||(jA=1,wb.exports=pee()),wb.exports}var mee=N8(),_b={exports:{}},Sb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PA;function gee(){if(PA)return Sb;PA=1;var t=l1(),e=N8();function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return Sb.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var y=s(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=a(function(){function b(P){if(!S){if(S=!0,k=P,P=h(P),p!==void 0&&x.hasValue){var C=x.value;if(p(C,P))return T=C}return T=P}if(C=T,r(k,P))return C;var N=h(P);return p!==void 0&&p(C,N)?(k=P,C):(k=P,T=N)}var S=!1,k,T,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,h,p]);var v=i(c,y[0],y[1]);return o(function(){x.hasValue=!0,x.value=v},[v]),l(v),v},Sb}var DA;function yee(){return DA||(DA=1,_b.exports=gee()),_b.exports}yee();function xee(t){t()}let C8=xee;const vee=t=>C8=t,wee=()=>C8,OA=Symbol.for("react-redux-context"),LA=typeof globalThis<"u"?globalThis:{};function bee(){var t;if(!Y.createContext)return{};const e=(t=LA[OA])!=null?t:LA[OA]=new Map;let n=e.get(Y.createContext);return n||(n=Y.createContext(null),e.set(Y.createContext,n)),n}const E8=bee(),_ee=()=>{throw new Error("uSES not initialized!")};function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(null,arguments)}function A8(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kb={exports:{}},or={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function See(){if(MA)return or;MA=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,a=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,c=t?Symbol.for("react.concurrent_mode"):60111,u=t?Symbol.for("react.forward_ref"):60112,d=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,p=t?Symbol.for("react.memo"):60115,y=t?Symbol.for("react.lazy"):60116,x=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function k(j){if(typeof j=="object"&&j!==null){var P=j.$$typeof;switch(P){case e:switch(j=j.type,j){case l:case c:case r:case s:case i:case d:return j;default:switch(j=j&&j.$$typeof,j){case a:case u:case y:case p:case o:return j;default:return P}}case n:return P}}}function T(j){return k(j)===c}return or.AsyncMode=l,or.ConcurrentMode=c,or.ContextConsumer=a,or.ContextProvider=o,or.Element=e,or.ForwardRef=u,or.Fragment=r,or.Lazy=y,or.Memo=p,or.Portal=n,or.Profiler=s,or.StrictMode=i,or.Suspense=d,or.isAsyncMode=function(j){return T(j)||k(j)===l},or.isConcurrentMode=T,or.isContextConsumer=function(j){return k(j)===a},or.isContextProvider=function(j){return k(j)===o},or.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},or.isForwardRef=function(j){return k(j)===u},or.isFragment=function(j){return k(j)===r},or.isLazy=function(j){return k(j)===y},or.isMemo=function(j){return k(j)===p},or.isPortal=function(j){return k(j)===n},or.isProfiler=function(j){return k(j)===s},or.isStrictMode=function(j){return k(j)===i},or.isSuspense=function(j){return k(j)===d},or.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===c||j===s||j===i||j===d||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===y||j.$$typeof===p||j.$$typeof===o||j.$$typeof===a||j.$$typeof===u||j.$$typeof===v||j.$$typeof===b||j.$$typeof===S||j.$$typeof===x)},or.typeOf=k,or}var IA;function kee(){return IA||(IA=1,kb.exports=See()),kb.exports}var Nb,RA;function Nee(){if(RA)return Nb;RA=1;var t=kee(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[t.ForwardRef]=r,s[t.Memo]=i;function o(y){return t.isMemo(y)?i:s[y.$$typeof]||e}var a=Object.defineProperty,l=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,h=Object.prototype;function p(y,x,v){if(typeof x!="string"){if(h){var b=d(x);b&&b!==h&&p(y,b,v)}var S=l(x);c&&(S=S.concat(c(x)));for(var k=o(y),T=o(x),j=0;j<S.length;++j){var P=S[j];if(!n[P]&&!(v&&v[P])&&!(T&&T[P])&&!(k&&k[P])){var C=u(x,P);try{a(y,P,C)}catch{}}}}return y}return Nb=p,Nb}var Cee=Nee();const FA=Rv(Cee);var Cb={exports:{}},ar={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zA;function Eee(){if(zA)return ar;zA=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function x(v){if(typeof v=="object"&&v!==null){var b=v.$$typeof;switch(b){case t:switch(v=v.type,v){case n:case i:case r:case c:case u:return v;default:switch(v=v&&v.$$typeof,v){case a:case o:case l:case h:case d:case s:return v;default:return b}}case e:return b}}}return ar.ContextConsumer=o,ar.ContextProvider=s,ar.Element=t,ar.ForwardRef=l,ar.Fragment=n,ar.Lazy=h,ar.Memo=d,ar.Portal=e,ar.Profiler=i,ar.StrictMode=r,ar.Suspense=c,ar.SuspenseList=u,ar.isAsyncMode=function(){return!1},ar.isConcurrentMode=function(){return!1},ar.isContextConsumer=function(v){return x(v)===o},ar.isContextProvider=function(v){return x(v)===s},ar.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===t},ar.isForwardRef=function(v){return x(v)===l},ar.isFragment=function(v){return x(v)===n},ar.isLazy=function(v){return x(v)===h},ar.isMemo=function(v){return x(v)===d},ar.isPortal=function(v){return x(v)===e},ar.isProfiler=function(v){return x(v)===i},ar.isStrictMode=function(v){return x(v)===r},ar.isSuspense=function(v){return x(v)===c},ar.isSuspenseList=function(v){return x(v)===u},ar.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===n||v===i||v===r||v===c||v===u||v===p||typeof v=="object"&&v!==null&&(v.$$typeof===h||v.$$typeof===d||v.$$typeof===s||v.$$typeof===o||v.$$typeof===l||v.$$typeof===y||v.getModuleId!==void 0)},ar.typeOf=x,ar}var BA;function Aee(){return BA||(BA=1,Cb.exports=Eee()),Cb.exports}var Tee=Aee();const jee=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Pee(t,e,n,r,{areStatesEqual:i,areOwnPropsEqual:s,areStatePropsEqual:o}){let a=!1,l,c,u,d,h;function p(S,k){return l=S,c=k,u=t(l,c),d=e(r,c),h=n(u,d,c),a=!0,h}function y(){return u=t(l,c),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function x(){return t.dependsOnOwnProps&&(u=t(l,c)),e.dependsOnOwnProps&&(d=e(r,c)),h=n(u,d,c),h}function v(){const S=t(l,c),k=!o(S,u);return u=S,k&&(h=n(u,d,c)),h}function b(S,k){const T=!s(k,c),j=!i(S,l,k,c);return l=S,c=k,T&&j?y():T?x():j?v():h}return function(k,T){return a?b(k,T):p(k,T)}}function Dee(t,e){let{initMapStateToProps:n,initMapDispatchToProps:r,initMergeProps:i}=e,s=A8(e,jee);const o=n(t,s),a=r(t,s),l=i(t,s);return Pee(o,a,l,t,s)}function Oee(t,e){const n={};for(const r in t){const i=t[r];typeof i=="function"&&(n[r]=(...s)=>e(i(...s)))}return n}function h_(t){return function(n){const r=t(n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function UA(t){return t.dependsOnOwnProps?!!t.dependsOnOwnProps:t.length!==1}function T8(t,e){return function(r,{displayName:i}){const s=function(a,l){return s.dependsOnOwnProps?s.mapToProps(a,l):s.mapToProps(a,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(a,l){s.mapToProps=t,s.dependsOnOwnProps=UA(t);let c=s(a,l);return typeof c=="function"&&(s.mapToProps=c,s.dependsOnOwnProps=UA(c),c=s(a,l)),c},s}}function T4(t,e){return(n,r)=>{throw new Error(`Invalid value of type ${typeof t} for ${e} argument when connecting component ${r.wrappedComponentName}.`)}}function Lee(t){return t&&typeof t=="object"?h_(e=>Oee(t,e)):t?typeof t=="function"?T8(t):T4(t,"mapDispatchToProps"):h_(e=>({dispatch:e}))}function Mee(t){return t?typeof t=="function"?T8(t):T4(t,"mapStateToProps"):h_(()=>({}))}function Iee(t,e,n){return Md({},n,t,e)}function Ree(t){return function(n,{displayName:r,areMergedPropsEqual:i}){let s=!1,o;return function(l,c,u){const d=t(l,c,u);return s?i(d,o)||(o=d):(s=!0,o=d),o}}}function Fee(t){return t?typeof t=="function"?Ree(t):T4(t,"mergeProps"):()=>Iee}function zee(){const t=wee();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],i=e;for(;i;)r.push(i),i=i.next;return r},subscribe(r){let i=!0,s=n={callback:r,next:null,prev:n};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:n=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const $A={notify(){},get:()=>[]};function j8(t,e){let n,r=$A,i=0,s=!1;function o(x){u();const v=r.subscribe(x);let b=!1;return()=>{b||(b=!0,v(),d())}}function a(){r.notify()}function l(){y.onStateChange&&y.onStateChange()}function c(){return s}function u(){i++,n||(n=e?e.addNestedSub(l):t.subscribe(l),r=zee())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$A)}function h(){s||(s=!0,u())}function p(){s&&(s=!1,d())}const y={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>r};return y}const Bee=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ov=Bee?Y.useLayoutEffect:Y.useEffect;function WA(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Eb(t,e){if(WA(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!WA(t[n[i]],e[n[i]]))return!1;return!0}const Uee=["reactReduxForwardedRef"];let P8=_ee;const $ee=t=>{P8=t},Wee=[null,null];function Vee(t,e,n){ov(()=>t(...e),n)}function Hee(t,e,n,r,i,s){t.current=r,n.current=!1,i.current&&(i.current=null,s())}function qee(t,e,n,r,i,s,o,a,l,c,u){if(!t)return()=>{};let d=!1,h=null;const p=()=>{if(d||!a.current)return;const x=e.getState();let v,b;try{v=r(x,i.current)}catch(S){b=S,h=S}b||(h=null),v===s.current?o.current||c():(s.current=v,l.current=v,o.current=!0,u())};return n.onStateChange=p,n.trySubscribe(),p(),()=>{if(d=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function Gee(t,e){return t===e}function D8(t,e,n,{pure:r,areStatesEqual:i=Gee,areOwnPropsEqual:s=Eb,areStatePropsEqual:o=Eb,areMergedPropsEqual:a=Eb,forwardRef:l=!1,context:c=E8}={}){const u=c,d=Mee(t),h=Lee(e),p=Fee(n),y=!!t;return v=>{const b=v.displayName||v.name||"Component",S=`Connect(${b})`,k={shouldHandleStateChanges:y,displayName:S,wrappedComponentName:b,WrappedComponent:v,initMapStateToProps:d,initMapDispatchToProps:h,initMergeProps:p,areStatesEqual:i,areStatePropsEqual:o,areOwnPropsEqual:s,areMergedPropsEqual:a};function T(C){const[N,L,R]=Y.useMemo(()=>{const{reactReduxForwardedRef:$e}=C,Ge=A8(C,Uee);return[C.context,$e,Ge]},[C]),D=Y.useMemo(()=>N&&N.Consumer&&Tee.isContextConsumer(Y.createElement(N.Consumer,null))?N:u,[N,u]),M=Y.useContext(D),H=!!C.store&&!!C.store.getState&&!!C.store.dispatch,W=!!M&&!!M.store,Z=H?C.store:M.store,B=W?M.getServerState:Z.getState,F=Y.useMemo(()=>Dee(Z.dispatch,k),[Z]),[Q,ee]=Y.useMemo(()=>{if(!y)return Wee;const $e=j8(Z,H?void 0:M.subscription),Ge=$e.notifyNestedSubs.bind($e);return[$e,Ge]},[Z,H,M]),te=Y.useMemo(()=>H?M:Md({},M,{subscription:Q}),[H,M,Q]),re=Y.useRef(),O=Y.useRef(R),X=Y.useRef(),q=Y.useRef(!1);Y.useRef(!1);const V=Y.useRef(!1),ne=Y.useRef();ov(()=>(V.current=!0,()=>{V.current=!1}),[]);const ge=Y.useMemo(()=>()=>X.current&&R===O.current?X.current:F(Z.getState(),R),[Z,R]),ye=Y.useMemo(()=>Ge=>Q?qee(y,Z,Q,F,O,re,q,V,X,ee,Ge):()=>{},[Q]);Vee(Hee,[O,re,q,R,X,ee]);let xe;try{xe=P8(ye,ge,B?()=>F(B(),R):ge)}catch($e){throw ne.current&&($e.message+=`
The error may be correlated with this previous error:
${ne.current.stack}

`),$e}ov(()=>{ne.current=void 0,X.current=void 0,re.current=xe});const Se=Y.useMemo(()=>Y.createElement(v,Md({},xe,{ref:L})),[L,v,xe]);return Y.useMemo(()=>y?Y.createElement(D.Provider,{value:te},Se):Se,[D,Se,te])}const P=Y.memo(T);if(P.WrappedComponent=v,P.displayName=T.displayName=S,l){const N=Y.forwardRef(function(R,D){return Y.createElement(P,Md({},R,{reactReduxForwardedRef:D}))});return N.displayName=S,N.WrappedComponent=v,FA(N,v)}return FA(P,v)}}function Kee({store:t,context:e,children:n,serverState:r,stabilityCheck:i="once",noopCheck:s="once"}){const o=Y.useMemo(()=>{const c=j8(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:i,noopCheck:s}},[t,r,i,s]),a=Y.useMemo(()=>t.getState(),[t]);ov(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||E8;return Y.createElement(l.Provider,{value:o},n)}$ee(mee.useSyncExternalStore);vee(nu.unstable_batchedUpdates);function Xee(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function O8(t,e){var n=Y.useState(function(){return{inputs:e,result:t()}})[0],r=Y.useRef(!0),i=Y.useRef(n),s=r.current||!!(e&&i.current.inputs&&Xee(e,i.current.inputs)),o=s?i.current:{inputs:e,result:t()};return Y.useEffect(function(){r.current=!1,i.current=o},[o]),o.result}function Yee(t,e){return O8(function(){return t},e)}var Mn=O8,Gt=Yee,Jee="Invariant failed";function Zee(t,e){throw new Error(Jee)}var vl=function(e){var n=e.top,r=e.right,i=e.bottom,s=e.left,o=r-s,a=i-n,l={top:n,right:r,bottom:i,left:s,width:o,height:a,x:s,y:n,center:{x:(r+s)/2,y:(i+n)/2}};return l},j4=function(e,n){return{top:e.top-n.top,left:e.left-n.left,bottom:e.bottom+n.bottom,right:e.right+n.right}},VA=function(e,n){return{top:e.top+n.top,left:e.left+n.left,bottom:e.bottom-n.bottom,right:e.right-n.right}},Qee=function(e,n){return{top:e.top+n.y,left:e.left+n.x,bottom:e.bottom+n.y,right:e.right+n.x}},Ab={top:0,right:0,bottom:0,left:0},P4=function(e){var n=e.borderBox,r=e.margin,i=r===void 0?Ab:r,s=e.border,o=s===void 0?Ab:s,a=e.padding,l=a===void 0?Ab:a,c=vl(j4(n,i)),u=vl(VA(n,o)),d=vl(VA(u,l));return{marginBox:c,borderBox:vl(n),paddingBox:u,contentBox:d,margin:i,border:o,padding:l}},Pa=function(e){var n=e.slice(0,-2),r=e.slice(-2);if(r!=="px")return 0;var i=Number(n);return isNaN(i)&&Zee(),i},ete=function(){return{x:window.pageXOffset,y:window.pageYOffset}},av=function(e,n){var r=e.borderBox,i=e.border,s=e.margin,o=e.padding,a=Qee(r,n);return P4({borderBox:a,border:i,margin:s,padding:o})},lv=function(e,n){return n===void 0&&(n=ete()),av(e,n)},L8=function(e,n){var r={top:Pa(n.marginTop),right:Pa(n.marginRight),bottom:Pa(n.marginBottom),left:Pa(n.marginLeft)},i={top:Pa(n.paddingTop),right:Pa(n.paddingRight),bottom:Pa(n.paddingBottom),left:Pa(n.paddingLeft)},s={top:Pa(n.borderTopWidth),right:Pa(n.borderRightWidth),bottom:Pa(n.borderBottomWidth),left:Pa(n.borderLeftWidth)};return P4({borderBox:e,margin:r,padding:i,border:s})},M8=function(e){var n=e.getBoundingClientRect(),r=window.getComputedStyle(e);return L8(n,r)},HA=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function tte(t,e){return!!(t===e||HA(t)&&HA(e))}function nte(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!tte(t[n],e[n]))return!1;return!0}function Wi(t,e){e===void 0&&(e=nte);var n=null;function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var o=t.apply(this,i);return n={lastResult:o,lastArgs:i,lastThis:this},o}return r.clear=function(){n=null},r}var zg=function(e){var n=[],r=null,i=function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];n=a,!r&&(r=requestAnimationFrame(function(){r=null,e.apply(void 0,n)}))};return i.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},i};function I8(t,e){}I8.bind(null,"warn");I8.bind(null,"error");function Id(){}function rte(t,e){return{...t,...e}}function za(t,e,n){const r=e.map(i=>{const s=rte(n,i.options);return t.addEventListener(i.eventName,i.fn,s),function(){t.removeEventListener(i.eventName,i.fn,s)}});return function(){r.forEach(s=>{s()})}}const ite="Invariant failed";class cv extends Error{}cv.prototype.toString=function(){return this.message};function St(t,e){throw new cv(ite)}class ste extends Pt.Component{constructor(...e){super(...e),this.callbacks=null,this.unbind=Id,this.onWindowError=n=>{const r=this.getCallbacks();r.isDragging()&&r.tryAbort(),n.error instanceof cv&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=za(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(e){if(e instanceof cv){this.setState({});return}throw e}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const ote=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,uv=t=>t+1,ate=t=>`
  You have lifted an item in position ${uv(t.source.index)}
`,R8=(t,e)=>{const n=t.droppableId===e.droppableId,r=uv(t.index),i=uv(e.index);return n?`
      You have moved the item from position ${r}
      to position ${i}
    `:`
    You have moved the item from position ${r}
    in list ${t.droppableId}
    to list ${e.droppableId}
    in position ${i}
  `},F8=(t,e,n)=>e.droppableId===n.droppableId?`
      The item ${t}
      has been combined with ${n.draggableId}`:`
      The item ${t}
      in list ${e.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,lte=t=>{const e=t.destination;if(e)return R8(t.source,e);const n=t.combine;return n?F8(t.draggableId,t.source,n):"You are over an area that cannot be dropped on"},qA=t=>`
  The item has returned to its starting position
  of ${uv(t.index)}
`,cte=t=>{if(t.reason==="CANCEL")return`
      Movement cancelled.
      ${qA(t.source)}
    `;const e=t.destination,n=t.combine;return e?`
      You have dropped the item.
      ${R8(t.source,e)}
    `:n?`
      You have dropped the item.
      ${F8(t.draggableId,t.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${qA(t.source)}
  `},ute={dragHandleUsageInstructions:ote,onDragStart:ate,onDragUpdate:lte,onDragEnd:cte};var gx=ute;const qi={x:0,y:0},cs=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),ra=(t,e)=>({x:t.x-e.x,y:t.y-e.y}),Rd=(t,e)=>t.x===e.x&&t.y===e.y,T0=t=>({x:t.x!==0?-t.x:0,y:t.y!==0?-t.y:0}),bh=(t,e,n=0)=>t==="x"?{x:e,y:n}:{x:n,y:e},Bg=(t,e)=>Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2),GA=(t,e)=>Math.min(...e.map(n=>Bg(t,n))),z8=t=>e=>({x:t(e.x),y:t(e.y)});var dte=(t,e)=>{const n=vl({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return n.width<=0||n.height<=0?null:n};const w1=(t,e)=>({top:t.top+e.y,left:t.left+e.x,bottom:t.bottom+e.y,right:t.right+e.x}),KA=t=>[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.left,y:t.bottom},{x:t.right,y:t.bottom}],fte={top:0,right:0,bottom:0,left:0},hte=(t,e)=>e?w1(t,e.scroll.diff.displacement):t,pte=(t,e,n)=>n&&n.increasedBy?{...t,[e.end]:t[e.end]+n.increasedBy[e.line]}:t,mte=(t,e)=>e&&e.shouldClipSubject?dte(e.pageMarginBox,t):vl(t);var f0=({page:t,withPlaceholder:e,axis:n,frame:r})=>{const i=hte(t.marginBox,r),s=pte(i,n,e),o=mte(s,r);return{page:t,withPlaceholder:e,active:o}},D4=(t,e)=>{t.frame||St();const n=t.frame,r=ra(e,n.scroll.initial),i=T0(r),s={...n,scroll:{initial:n.scroll.initial,current:e,diff:{value:r,displacement:i},max:n.scroll.max}},o=f0({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:s});return{...t,frame:s,subject:o}};const B8=Wi(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),U8=Wi(t=>t.reduce((e,n)=>(e[n.descriptor.id]=n,e),{})),h2=Wi(t=>Object.values(t)),gte=Wi(t=>Object.values(t));var j0=Wi((t,e)=>gte(e).filter(r=>t===r.descriptor.droppableId).sort((r,i)=>r.descriptor.index-i.descriptor.index));function O4(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function p2(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var m2=Wi((t,e)=>e.filter(n=>n.descriptor.id!==t.descriptor.id)),yte=({isMovingForward:t,draggable:e,destination:n,insideDestination:r,previousImpact:i})=>{if(!n.isCombineEnabled||!O4(i))return null;function o(p){const y={type:"COMBINE",combine:{draggableId:p,droppableId:n.descriptor.id}};return{...i,at:y}}const a=i.displaced.all,l=a.length?a[0]:null;if(t)return l?o(l):null;const c=m2(e,r);if(!l){if(!c.length)return null;const p=c[c.length-1];return o(p.descriptor.id)}const u=c.findIndex(p=>p.descriptor.id===l);u===-1&&St();const d=u-1;if(d<0)return null;const h=c[d];return o(h.descriptor.id)},P0=(t,e)=>t.descriptor.droppableId===e.descriptor.id;const $8={point:qi,value:0},Ug={invisible:{},visible:{},all:[]},xte={displaced:Ug,displacedBy:$8,at:null};var vte=xte,Wa=(t,e)=>n=>t<=n&&n<=e,W8=t=>{const e=Wa(t.top,t.bottom),n=Wa(t.left,t.right);return r=>{if(e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right))return!0;const s=e(r.top)||e(r.bottom),o=n(r.left)||n(r.right);if(s&&o)return!0;const l=r.top<t.top&&r.bottom>t.bottom,c=r.left<t.left&&r.right>t.right;return l&&c?!0:l&&o||c&&s}},wte=t=>{const e=Wa(t.top,t.bottom),n=Wa(t.left,t.right);return r=>e(r.top)&&e(r.bottom)&&n(r.left)&&n(r.right)};const L4={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},V8={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var bte=t=>e=>{const n=Wa(e.top,e.bottom),r=Wa(e.left,e.right);return i=>t===L4?n(i.top)&&n(i.bottom):r(i.left)&&r(i.right)};const _te=(t,e)=>{const n=e.frame?e.frame.scroll.diff.displacement:qi;return w1(t,n)},Ste=(t,e,n)=>e.subject.active?n(e.subject.active)(t):!1,kte=(t,e,n)=>n(e)(t),M4=({target:t,destination:e,viewport:n,withDroppableDisplacement:r,isVisibleThroughFrameFn:i})=>{const s=r?_te(t,e):t;return Ste(s,e,i)&&kte(s,n,i)},Nte=t=>M4({...t,isVisibleThroughFrameFn:W8}),H8=t=>M4({...t,isVisibleThroughFrameFn:wte}),Cte=t=>M4({...t,isVisibleThroughFrameFn:bte(t.destination.axis)}),Ete=(t,e,n)=>{if(typeof n=="boolean")return n;if(!e)return!0;const{invisible:r,visible:i}=e;if(r[t])return!1;const s=i[t];return s?s.shouldAnimate:!0};function Ate(t,e){const n=t.page.marginBox,r={top:e.point.y,right:0,bottom:0,left:e.point.x};return vl(j4(n,r))}function $g({afterDragging:t,destination:e,displacedBy:n,viewport:r,forceShouldAnimate:i,last:s}){return t.reduce(function(a,l){const c=Ate(l,n),u=l.descriptor.id;if(a.all.push(u),!Nte({target:c,destination:e,viewport:r,withDroppableDisplacement:!0}))return a.invisible[l.descriptor.id]=!0,a;const h=Ete(u,s,i),p={draggableId:u,shouldAnimate:h};return a.visible[u]=p,a},{all:[],visible:{},invisible:{}})}function Tte(t,e){if(!t.length)return 0;const n=t[t.length-1].descriptor.index;return e.inHomeList?n:n+1}function XA({insideDestination:t,inHomeList:e,displacedBy:n,destination:r}){const i=Tte(t,{inHomeList:e});return{displaced:Ug,displacedBy:n,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function dv({draggable:t,insideDestination:e,destination:n,viewport:r,displacedBy:i,last:s,index:o,forceShouldAnimate:a}){const l=P0(t,n);if(o==null)return XA({insideDestination:e,inHomeList:l,displacedBy:i,destination:n});const c=e.find(y=>y.descriptor.index===o);if(!c)return XA({insideDestination:e,inHomeList:l,displacedBy:i,destination:n});const u=m2(t,e),d=e.indexOf(c),h=u.slice(d);return{displaced:$g({afterDragging:h,destination:n,displacedBy:i,last:s,viewport:r.frame,forceShouldAnimate:a}),displacedBy:i,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function Hd(t,e){return!!e.effected[t]}var jte=({isMovingForward:t,destination:e,draggables:n,combine:r,afterCritical:i})=>{if(!e.isCombineEnabled)return null;const s=r.draggableId,a=n[s].descriptor.index;return Hd(s,i)?t?a:a-1:t?a+1:a},Pte=({isMovingForward:t,isInHomeList:e,insideDestination:n,location:r})=>{if(!n.length)return null;const i=r.index,s=t?i+1:i-1,o=n[0].descriptor.index,a=n[n.length-1].descriptor.index,l=e?a:a+1;return s<o||s>l?null:s},Dte=({isMovingForward:t,isInHomeList:e,draggable:n,draggables:r,destination:i,insideDestination:s,previousImpact:o,viewport:a,afterCritical:l})=>{const c=o.at;if(c||St(),c.type==="REORDER"){const d=Pte({isMovingForward:t,isInHomeList:e,location:c.destination,insideDestination:s});return d==null?null:dv({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:d})}const u=jte({isMovingForward:t,destination:i,displaced:o.displaced,draggables:r,combine:c.combine,afterCritical:l});return u==null?null:dv({draggable:n,insideDestination:s,destination:i,viewport:a,last:o.displaced,displacedBy:o.displacedBy,index:u})},Ote=({displaced:t,afterCritical:e,combineWith:n,displacedBy:r})=>{const i=!!(t.visible[n]||t.invisible[n]);return Hd(n,e)?i?qi:T0(r.point):i?r.point:qi},Lte=({afterCritical:t,impact:e,draggables:n})=>{const r=p2(e);r||St();const i=r.draggableId,s=n[i].page.borderBox.center,o=Ote({displaced:e.displaced,afterCritical:t,combineWith:i,displacedBy:e.displacedBy});return cs(s,o)};const q8=(t,e)=>e.margin[t.start]+e.borderBox[t.size]/2,Mte=(t,e)=>e.margin[t.end]+e.borderBox[t.size]/2,I4=(t,e,n)=>e[t.crossAxisStart]+n.margin[t.crossAxisStart]+n.borderBox[t.crossAxisSize]/2,YA=({axis:t,moveRelativeTo:e,isMoving:n})=>bh(t.line,e.marginBox[t.end]+q8(t,n),I4(t,e.marginBox,n)),JA=({axis:t,moveRelativeTo:e,isMoving:n})=>bh(t.line,e.marginBox[t.start]-Mte(t,n),I4(t,e.marginBox,n)),Ite=({axis:t,moveInto:e,isMoving:n})=>bh(t.line,e.contentBox[t.start]+q8(t,n),I4(t,e.contentBox,n));var Rte=({impact:t,draggable:e,draggables:n,droppable:r,afterCritical:i})=>{const s=j0(r.descriptor.id,n),o=e.page,a=r.axis;if(!s.length)return Ite({axis:a,moveInto:r.page,isMoving:o});const{displaced:l,displacedBy:c}=t,u=l.all[0];if(u){const h=n[u];if(Hd(u,i))return JA({axis:a,moveRelativeTo:h.page,isMoving:o});const p=av(h.page,c.point);return JA({axis:a,moveRelativeTo:p,isMoving:o})}const d=s[s.length-1];if(d.descriptor.id===e.descriptor.id)return o.borderBox.center;if(Hd(d.descriptor.id,i)){const h=av(d.page,T0(i.displacedBy.point));return YA({axis:a,moveRelativeTo:h,isMoving:o})}return YA({axis:a,moveRelativeTo:d.page,isMoving:o})},p_=(t,e)=>{const n=t.frame;return n?cs(e,n.scroll.diff.displacement):e};const Fte=({impact:t,draggable:e,droppable:n,draggables:r,afterCritical:i})=>{const s=e.page.borderBox.center,o=t.at;return!n||!o?s:o.type==="REORDER"?Rte({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:i}):Lte({impact:t,draggables:r,afterCritical:i})};var g2=t=>{const e=Fte(t),n=t.droppable;return n?p_(n,e):e},G8=(t,e)=>{const n=ra(e,t.scroll.initial),r=T0(n);return{frame:vl({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:n,displacement:r}}}};function ZA(t,e){return t.map(n=>e[n])}function zte(t,e){for(let n=0;n<e.length;n++){const r=e[n].visible[t];if(r)return r}return null}var Bte=({impact:t,viewport:e,destination:n,draggables:r,maxScrollChange:i})=>{const s=G8(e,cs(e.scroll.current,i)),o=n.frame?D4(n,cs(n.frame.scroll.current,i)):n,a=t.displaced,l=$g({afterDragging:ZA(a.all,r),destination:n,displacedBy:t.displacedBy,viewport:s.frame,last:a,forceShouldAnimate:!1}),c=$g({afterDragging:ZA(a.all,r),destination:o,displacedBy:t.displacedBy,viewport:e.frame,last:a,forceShouldAnimate:!1}),u={},d={},h=[a,l,c];return a.all.forEach(y=>{const x=zte(y,h);if(x){d[y]=x;return}u[y]=!0}),{...t,displaced:{all:a.all,invisible:u,visible:d}}},Ute=(t,e)=>cs(t.scroll.diff.displacement,e),R4=({pageBorderBoxCenter:t,draggable:e,viewport:n})=>{const r=Ute(n,t),i=ra(r,e.page.borderBox.center);return cs(e.client.borderBox.center,i)},K8=({draggable:t,destination:e,newPageBorderBoxCenter:n,viewport:r,withDroppableDisplacement:i,onlyOnMainAxis:s=!1})=>{const o=ra(n,t.page.borderBox.center),l={target:w1(t.page.borderBox,o),destination:e,withDroppableDisplacement:i,viewport:r};return s?Cte(l):H8(l)},$te=({isMovingForward:t,draggable:e,destination:n,draggables:r,previousImpact:i,viewport:s,previousPageBorderBoxCenter:o,previousClientSelection:a,afterCritical:l})=>{if(!n.isEnabled)return null;const c=j0(n.descriptor.id,r),u=P0(e,n),d=yte({isMovingForward:t,draggable:e,destination:n,insideDestination:c,previousImpact:i})||Dte({isMovingForward:t,isInHomeList:u,draggable:e,draggables:r,destination:n,insideDestination:c,previousImpact:i,viewport:s,afterCritical:l});if(!d)return null;const h=g2({impact:d,draggable:e,droppable:n,draggables:r,afterCritical:l});if(K8({draggable:e,destination:n,newPageBorderBoxCenter:h,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:R4({pageBorderBoxCenter:h,draggable:e,viewport:s}),impact:d,scrollJumpRequest:null};const y=ra(h,o),x=Bte({impact:d,viewport:s,destination:n,draggables:r,maxScrollChange:y});return{clientSelection:a,impact:x,scrollJumpRequest:y}};const Ys=t=>{const e=t.subject.active;return e||St(),e};var Wte=({isMovingForward:t,pageBorderBoxCenter:e,source:n,droppables:r,viewport:i})=>{const s=n.subject.active;if(!s)return null;const o=n.axis,a=Wa(s[o.start],s[o.end]),l=h2(r).filter(u=>u!==n).filter(u=>u.isEnabled).filter(u=>!!u.subject.active).filter(u=>W8(i.frame)(Ys(u))).filter(u=>{const d=Ys(u);return t?s[o.crossAxisEnd]<d[o.crossAxisEnd]:d[o.crossAxisStart]<s[o.crossAxisStart]}).filter(u=>{const d=Ys(u),h=Wa(d[o.start],d[o.end]);return a(d[o.start])||a(d[o.end])||h(s[o.start])||h(s[o.end])}).sort((u,d)=>{const h=Ys(u)[o.crossAxisStart],p=Ys(d)[o.crossAxisStart];return t?h-p:p-h}).filter((u,d,h)=>Ys(u)[o.crossAxisStart]===Ys(h[0])[o.crossAxisStart]);if(!l.length)return null;if(l.length===1)return l[0];const c=l.filter(u=>Wa(Ys(u)[o.start],Ys(u)[o.end])(e[o.line]));return c.length===1?c[0]:c.length>1?c.sort((u,d)=>Ys(u)[o.start]-Ys(d)[o.start])[0]:l.sort((u,d)=>{const h=GA(e,KA(Ys(u))),p=GA(e,KA(Ys(d)));return h!==p?h-p:Ys(u)[o.start]-Ys(d)[o.start]})[0]};const QA=(t,e)=>{const n=t.page.borderBox.center;return Hd(t.descriptor.id,e)?ra(n,e.displacedBy.point):n},Vte=(t,e)=>{const n=t.page.borderBox;return Hd(t.descriptor.id,e)?w1(n,T0(e.displacedBy.point)):n};var Hte=({pageBorderBoxCenter:t,viewport:e,destination:n,insideDestination:r,afterCritical:i})=>r.filter(o=>H8({target:Vte(o,i),destination:n,viewport:e.frame,withDroppableDisplacement:!0})).sort((o,a)=>{const l=Bg(t,p_(n,QA(o,i))),c=Bg(t,p_(n,QA(a,i)));return l<c?-1:c<l?1:o.descriptor.index-a.descriptor.index})[0]||null,b1=Wi(function(e,n){const r=n[e.line];return{value:r,point:bh(e.line,r)}});const qte=(t,e,n)=>{const r=t.axis;if(t.descriptor.mode==="virtual")return bh(r.line,e[r.line]);const i=t.subject.page.contentBox[r.size],l=j0(t.descriptor.id,n).reduce((c,u)=>c+u.client.marginBox[r.size],0)+e[r.line]-i;return l<=0?null:bh(r.line,l)},X8=(t,e)=>({...t,scroll:{...t.scroll,max:e}}),Y8=(t,e,n)=>{const r=t.frame;P0(e,t)&&St(),t.subject.withPlaceholder&&St();const i=b1(t.axis,e.displaceBy).point,s=qte(t,i,n),o={placeholderSize:i,increasedBy:s,oldFrameMaxScroll:t.frame?t.frame.scroll.max:null};if(!r){const u=f0({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:t.frame});return{...t,subject:u}}const a=s?cs(r.scroll.max,s):r.scroll.max,l=X8(r,a),c=f0({page:t.subject.page,withPlaceholder:o,axis:t.axis,frame:l});return{...t,subject:c,frame:l}},Gte=t=>{const e=t.subject.withPlaceholder;e||St();const n=t.frame;if(!n){const o=f0({page:t.subject.page,axis:t.axis,frame:null,withPlaceholder:null});return{...t,subject:o}}const r=e.oldFrameMaxScroll;r||St();const i=X8(n,r),s=f0({page:t.subject.page,axis:t.axis,frame:i,withPlaceholder:null});return{...t,subject:s,frame:i}};var Kte=({previousPageBorderBoxCenter:t,moveRelativeTo:e,insideDestination:n,draggable:r,draggables:i,destination:s,viewport:o,afterCritical:a})=>{if(!e){if(n.length)return null;const d={displaced:Ug,displacedBy:$8,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},h=g2({impact:d,draggable:r,droppable:s,draggables:i,afterCritical:a}),p=P0(r,s)?s:Y8(s,r,i);return K8({draggable:r,destination:p,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const l=t[s.axis.line]<=e.page.borderBox.center[s.axis.line],c=(()=>{const d=e.descriptor.index;return e.descriptor.id===r.descriptor.id||l?d:d+1})(),u=b1(s.axis,r.displaceBy);return dv({draggable:r,insideDestination:n,destination:s,viewport:o,displacedBy:u,last:Ug,index:c})},Xte=({isMovingForward:t,previousPageBorderBoxCenter:e,draggable:n,isOver:r,draggables:i,droppables:s,viewport:o,afterCritical:a})=>{const l=Wte({isMovingForward:t,pageBorderBoxCenter:e,source:r,droppables:s,viewport:o});if(!l)return null;const c=j0(l.descriptor.id,i),u=Hte({pageBorderBoxCenter:e,viewport:o,destination:l,insideDestination:c,afterCritical:a}),d=Kte({previousPageBorderBoxCenter:e,destination:l,draggable:n,draggables:i,moveRelativeTo:u,insideDestination:c,viewport:o,afterCritical:a});if(!d)return null;const h=g2({impact:d,draggable:n,droppable:l,draggables:i,afterCritical:a});return{clientSelection:R4({pageBorderBoxCenter:h,draggable:n,viewport:o}),impact:d,scrollJumpRequest:null}},oa=t=>{const e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null};const Yte=(t,e)=>{const n=oa(t);return n?e[n]:null};var Jte=({state:t,type:e})=>{const n=Yte(t.impact,t.dimensions.droppables),r=!!n,i=t.dimensions.droppables[t.critical.droppable.id],s=n||i,o=s.axis.direction,a=o==="vertical"&&(e==="MOVE_UP"||e==="MOVE_DOWN")||o==="horizontal"&&(e==="MOVE_LEFT"||e==="MOVE_RIGHT");if(a&&!r)return null;const l=e==="MOVE_DOWN"||e==="MOVE_RIGHT",c=t.dimensions.draggables[t.critical.draggable.id],u=t.current.page.borderBoxCenter,{draggables:d,droppables:h}=t.dimensions;return a?$te({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,destination:s,draggables:d,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):Xte({isMovingForward:l,previousPageBorderBoxCenter:u,draggable:c,isOver:s,draggables:d,droppables:h,viewport:t.viewport,afterCritical:t.afterCritical})};function Vf(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function J8(t){const e=Wa(t.top,t.bottom),n=Wa(t.left,t.right);return function(i){return e(i.y)&&n(i.x)}}function Zte(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Qte({pageBorderBox:t,draggable:e,candidates:n}){const r=e.page.borderBox.center,i=n.map(s=>{const o=s.axis,a=bh(s.axis.line,t.center[o.line],s.page.borderBox.center[o.crossAxisLine]);return{id:s.descriptor.id,distance:Bg(r,a)}}).sort((s,o)=>o.distance-s.distance);return i[0]?i[0].id:null}function ene({pageBorderBox:t,draggable:e,droppables:n}){const r=h2(n).filter(i=>{if(!i.isEnabled)return!1;const s=i.subject.active;if(!s||!Zte(t,s))return!1;if(J8(s)(t.center))return!0;const o=i.axis,a=s.center[o.crossAxisLine],l=t[o.crossAxisStart],c=t[o.crossAxisEnd],u=Wa(s[o.crossAxisStart],s[o.crossAxisEnd]),d=u(l),h=u(c);return!d&&!h?!0:d?l<a:c>a});return r.length?r.length===1?r[0].descriptor.id:Qte({pageBorderBox:t,draggable:e,candidates:r}):null}const Z8=(t,e)=>vl(w1(t,e));var tne=(t,e)=>{const n=t.frame;return n?Z8(e,n.scroll.diff.value):e};function Q8({displaced:t,id:e}){return!!(t.visible[e]||t.invisible[e])}function nne({draggable:t,closest:e,inHomeList:n}){return e?n&&e.descriptor.index>t.descriptor.index?e.descriptor.index-1:e.descriptor.index:null}var rne=({pageBorderBoxWithDroppableScroll:t,draggable:e,destination:n,insideDestination:r,last:i,viewport:s,afterCritical:o})=>{const a=n.axis,l=b1(n.axis,e.displaceBy),c=l.value,u=t[a.start],d=t[a.end],p=m2(e,r).find(x=>{const v=x.descriptor.id,b=x.page.borderBox.center[a.line],S=Hd(v,o),k=Q8({displaced:i,id:v});return S?k?d<=b:u<b-c:k?d<=b+c:u<b})||null,y=nne({draggable:e,closest:p,inHomeList:P0(e,n)});return dv({draggable:e,insideDestination:r,destination:n,viewport:s,last:i,displacedBy:l,index:y})};const ine=4;var sne=({draggable:t,pageBorderBoxWithDroppableScroll:e,previousImpact:n,destination:r,insideDestination:i,afterCritical:s})=>{if(!r.isCombineEnabled)return null;const o=r.axis,a=b1(r.axis,t.displaceBy),l=a.value,c=e[o.start],u=e[o.end],h=m2(t,i).find(y=>{const x=y.descriptor.id,v=y.page.borderBox,S=v[o.size]/ine,k=Hd(x,s),T=Q8({displaced:n.displaced,id:x});return k?T?u>v[o.start]+S&&u<v[o.end]-S:c>v[o.start]-l+S&&c<v[o.end]-l-S:T?u>v[o.start]+l+S&&u<v[o.end]+l-S:c>v[o.start]+S&&c<v[o.end]-S});return h?{displacedBy:a,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:r.descriptor.id}}}:null},eM=({pageOffset:t,draggable:e,draggables:n,droppables:r,previousImpact:i,viewport:s,afterCritical:o})=>{const a=Z8(e.page.borderBox,t),l=ene({pageBorderBox:a,draggable:e,droppables:r});if(!l)return vte;const c=r[l],u=j0(c.descriptor.id,n),d=tne(c,a);return sne({pageBorderBoxWithDroppableScroll:d,draggable:e,previousImpact:i,destination:c,insideDestination:u,afterCritical:o})||rne({pageBorderBoxWithDroppableScroll:d,draggable:e,destination:c,insideDestination:u,last:i.displaced,viewport:s,afterCritical:o})},F4=(t,e)=>({...t,[e.descriptor.id]:e});const one=({previousImpact:t,impact:e,droppables:n})=>{const r=oa(t),i=oa(e);if(!r||r===i)return n;const s=n[r];if(!s.subject.withPlaceholder)return n;const o=Gte(s);return F4(n,o)};var ane=({draggable:t,draggables:e,droppables:n,previousImpact:r,impact:i})=>{const s=one({previousImpact:r,impact:i,droppables:n}),o=oa(i);if(!o)return s;const a=n[o];if(P0(t,a)||a.subject.withPlaceholder)return s;const l=Y8(a,t,e);return F4(s,l)},Qm=({state:t,clientSelection:e,dimensions:n,viewport:r,impact:i,scrollJumpRequest:s})=>{const o=r||t.viewport,a=n||t.dimensions,l=e||t.current.client.selection,c=ra(l,t.initial.client.selection),u={offset:c,selection:l,borderBoxCenter:cs(t.initial.client.borderBoxCenter,c)},d={selection:cs(u.selection,o.scroll.current),borderBoxCenter:cs(u.borderBoxCenter,o.scroll.current),offset:cs(u.offset,o.scroll.diff.value)},h={client:u,page:d};if(t.phase==="COLLECTING")return{...t,dimensions:a,viewport:o,current:h};const p=a.draggables[t.critical.draggable.id],y=i||eM({pageOffset:d.offset,draggable:p,draggables:a.draggables,droppables:a.droppables,previousImpact:t.impact,viewport:o,afterCritical:t.afterCritical}),x=ane({draggable:p,impact:y,previousImpact:t.impact,draggables:a.draggables,droppables:a.droppables});return{...t,current:h,dimensions:{draggables:a.draggables,droppables:x},impact:y,viewport:o,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function lne(t,e){return t.map(n=>e[n])}var tM=({impact:t,viewport:e,draggables:n,destination:r,forceShouldAnimate:i})=>{const s=t.displaced,o=lne(s.all,n),a=$g({afterDragging:o,destination:r,displacedBy:t.displacedBy,viewport:e.frame,forceShouldAnimate:i,last:s});return{...t,displaced:a}},nM=({impact:t,draggable:e,droppable:n,draggables:r,viewport:i,afterCritical:s})=>{const o=g2({impact:t,draggable:e,draggables:r,droppable:n,afterCritical:s});return R4({pageBorderBoxCenter:o,draggable:e,viewport:i})},rM=({state:t,dimensions:e,viewport:n})=>{t.movementMode!=="SNAP"&&St();const r=t.impact,i=n||t.viewport,s=e||t.dimensions,{draggables:o,droppables:a}=s,l=o[t.critical.draggable.id],c=oa(r);c||St();const u=a[c],d=tM({impact:r,viewport:i,destination:u,draggables:o}),h=nM({impact:d,draggable:l,droppable:u,draggables:o,viewport:i,afterCritical:t.afterCritical});return Qm({impact:d,clientSelection:h,state:t,dimensions:s,viewport:i})},cne=t=>({index:t.index,droppableId:t.droppableId}),iM=({draggable:t,home:e,draggables:n,viewport:r})=>{const i=b1(e.axis,t.displaceBy),s=j0(e.descriptor.id,n),o=s.indexOf(t);o===-1&&St();const a=s.slice(o+1),l=a.reduce((h,p)=>(h[p.descriptor.id]=!0,h),{}),c={inVirtualList:e.descriptor.mode==="virtual",displacedBy:i,effected:l};return{impact:{displaced:$g({afterDragging:a,destination:e,displacedBy:i,last:null,viewport:r.frame,forceShouldAnimate:!1}),displacedBy:i,at:{type:"REORDER",destination:cne(t.descriptor)}},afterCritical:c}},une=(t,e)=>({draggables:t.draggables,droppables:F4(t.droppables,e)}),dne=({draggable:t,offset:e,initialWindowScroll:n})=>{const r=av(t.client,e),i=lv(r,n);return{...t,placeholder:{...t.placeholder,client:r},client:r,page:i}},fne=t=>{const e=t.frame;return e||St(),e},hne=({additions:t,updatedDroppables:e,viewport:n})=>{const r=n.scroll.diff.value;return t.map(i=>{const s=i.descriptor.droppableId,o=e[s],l=fne(o).scroll.diff.value,c=cs(r,l);return dne({draggable:i,offset:c,initialWindowScroll:n.scroll.initial})})},pne=({state:t,published:e})=>{const n=e.modified.map(b=>{const S=t.dimensions.droppables[b.droppableId];return D4(S,b.scroll)}),r={...t.dimensions.droppables,...B8(n)},i=U8(hne({additions:e.additions,updatedDroppables:r,viewport:t.viewport})),s={...t.dimensions.draggables,...i};e.removals.forEach(b=>{delete s[b]});const o={droppables:r,draggables:s},a=oa(t.impact),l=a?o.droppables[a]:null,c=o.draggables[t.critical.draggable.id],u=o.droppables[t.critical.droppable.id],{impact:d,afterCritical:h}=iM({draggable:c,home:u,draggables:s,viewport:t.viewport}),p=l&&l.isCombineEnabled?t.impact:d,y=eM({pageOffset:t.current.page.offset,draggable:o.draggables[t.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:p,viewport:t.viewport,afterCritical:h}),x={...t,phase:"DRAGGING",impact:y,onLiftImpact:d,dimensions:o,afterCritical:h,forceShouldAnimate:!1};return t.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:t.reason,isWaiting:!1}};const m_=t=>t.movementMode==="SNAP",Tb=(t,e,n)=>{const r=une(t.dimensions,e);return!m_(t)||n?Qm({state:t,dimensions:r}):rM({state:t,dimensions:r})};function jb(t){return t.isDragging&&t.movementMode==="SNAP"?{...t,scrollJumpRequest:null}:t}const eT={phase:"IDLE",completed:null,shouldFlush:!1};var mne=(t=eT,e)=>{if(e.type==="FLUSH")return{...eT,shouldFlush:!0};if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&St();const{critical:n,clientSelection:r,viewport:i,dimensions:s,movementMode:o}=e.payload,a=s.draggables[n.draggable.id],l=s.droppables[n.droppable.id],c={selection:r,borderBoxCenter:a.client.borderBox.center,offset:qi},u={client:c,page:{selection:cs(c.selection,i.scroll.initial),borderBoxCenter:cs(c.selection,i.scroll.initial),offset:cs(c.selection,i.scroll.diff.value)}},d=h2(s.droppables).every(x=>!x.isFixedOnPage),{impact:h,afterCritical:p}=iM({draggable:a,home:l,draggables:s.draggables,viewport:i});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:s,initial:u,current:u,isWindowScrollAllowed:d,impact:h,afterCritical:p,onLiftImpact:h,viewport:i,scrollJumpRequest:null,forceShouldAnimate:null}}if(e.type==="COLLECTION_STARTING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"?t:(t.phase!=="DRAGGING"&&St(),{...t,phase:"COLLECTING"});if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||St(),pne({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Vf(t)||St();const{client:n}=e.payload;return Rd(n,t.current.client.selection)?t:Qm({state:t,clientSelection:n,impact:m_(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return jb(t);Vf(t)||St();const{id:n,newScroll:r}=e.payload,i=t.dimensions.droppables[n];if(!i)return t;const s=D4(i,r);return Tb(t,s,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Vf(t)||St();const{id:n,isEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||St(),i.isEnabled===r&&St();const s={...i,isEnabled:r};return Tb(t,s,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Vf(t)||St();const{id:n,isCombineEnabled:r}=e.payload,i=t.dimensions.droppables[n];i||St(),i.isCombineEnabled===r&&St();const s={...i,isCombineEnabled:r};return Tb(t,s,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Vf(t)||St(),t.isWindowScrollAllowed||St();const n=e.payload.newScroll;if(Rd(t.viewport.scroll.current,n))return jb(t);const r=G8(t.viewport,n);return m_(t)?rM({state:t,viewport:r}):Qm({state:t,viewport:r})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Vf(t))return t;const n=e.payload.maxScroll;if(Rd(n,t.viewport.scroll.max))return t;const r={...t.viewport,scroll:{...t.viewport.scroll,max:n}};return{...t,viewport:r}}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&St();const n=Jte({state:t,type:e.type});return n?Qm({state:t,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){const n=e.payload.reason;return t.phase!=="COLLECTING"&&St(),{...t,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(e.type==="DROP_ANIMATE"){const{completed:n,dropDuration:r,newHomeClientOffset:i}=e.payload;return t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||St(),{phase:"DROP_ANIMATING",completed:n,dropDuration:r,newHomeClientOffset:i,dimensions:t.dimensions}}if(e.type==="DROP_COMPLETE"){const{completed:n}=e.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return t};const gne=t=>({type:"BEFORE_INITIAL_CAPTURE",payload:t}),yne=t=>({type:"LIFT",payload:t}),xne=t=>({type:"INITIAL_PUBLISH",payload:t}),vne=t=>({type:"PUBLISH_WHILE_DRAGGING",payload:t}),wne=()=>({type:"COLLECTION_STARTING",payload:null}),bne=t=>({type:"UPDATE_DROPPABLE_SCROLL",payload:t}),_ne=t=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:t}),Sne=t=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:t}),sM=t=>({type:"MOVE",payload:t}),kne=t=>({type:"MOVE_BY_WINDOW_SCROLL",payload:t}),Nne=t=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:t}),Cne=()=>({type:"MOVE_UP",payload:null}),Ene=()=>({type:"MOVE_DOWN",payload:null}),Ane=()=>({type:"MOVE_RIGHT",payload:null}),Tne=()=>({type:"MOVE_LEFT",payload:null}),z4=()=>({type:"FLUSH",payload:null}),jne=t=>({type:"DROP_ANIMATE",payload:t}),B4=t=>({type:"DROP_COMPLETE",payload:t}),oM=t=>({type:"DROP",payload:t}),Pne=t=>({type:"DROP_PENDING",payload:t}),aM=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Dne=t=>({getState:e,dispatch:n})=>r=>i=>{if(i.type!=="LIFT"){r(i);return}const{id:s,clientSelection:o,movementMode:a}=i.payload,l=e();l.phase==="DROP_ANIMATING"&&n(B4({completed:l.completed})),e().phase!=="IDLE"&&St(),n(z4()),n(gne({draggableId:s,movementMode:a}));const u={draggableId:s,scrollOptions:{shouldPublishImmediately:a==="SNAP"}},{critical:d,dimensions:h,viewport:p}=t.startPublishing(u);n(xne({critical:d,dimensions:h,clientSelection:o,movementMode:a,viewport:p}))},One=t=>()=>e=>n=>{n.type==="INITIAL_PUBLISH"&&t.dragging(),n.type==="DROP_ANIMATE"&&t.dropping(n.payload.completed.result.reason),(n.type==="FLUSH"||n.type==="DROP_COMPLETE")&&t.resting(),e(n)};const U4={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wg={opacity:{drop:0,combining:.7},scale:{drop:.75}},lM={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Rf=`${lM.outOfTheWay}s ${U4.outOfTheWay}`,eg={fluid:`opacity ${Rf}`,snap:`transform ${Rf}, opacity ${Rf}`,drop:t=>{const e=`${t}s ${U4.drop}`;return`transform ${e}, opacity ${e}`},outOfTheWay:`transform ${Rf}`,placeholder:`height ${Rf}, width ${Rf}, margin ${Rf}`},tT=t=>Rd(t,qi)?void 0:`translate(${t.x}px, ${t.y}px)`,g_={moveTo:tT,drop:(t,e)=>{const n=tT(t);if(n)return e?`${n} scale(${Wg.scale.drop})`:n}},{minDropTime:y_,maxDropTime:cM}=lM,Lne=cM-y_,nT=1500,Mne=.6;var Ine=({current:t,destination:e,reason:n})=>{const r=Bg(t,e);if(r<=0)return y_;if(r>=nT)return cM;const i=r/nT,s=y_+Lne*i,o=n==="CANCEL"?s*Mne:s;return Number(o.toFixed(2))},Rne=({impact:t,draggable:e,dimensions:n,viewport:r,afterCritical:i})=>{const{draggables:s,droppables:o}=n,a=oa(t),l=a?o[a]:null,c=o[e.descriptor.droppableId],u=nM({impact:t,draggable:e,draggables:s,afterCritical:i,droppable:l||c,viewport:r});return ra(u,e.client.borderBox.center)},Fne=({draggables:t,reason:e,lastImpact:n,home:r,viewport:i,onLiftImpact:s})=>!n.at||e!=="DROP"?{impact:tM({draggables:t,impact:s,destination:r,viewport:i,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:Ug},didDropInsideDroppable:!0};const zne=({getState:t,dispatch:e})=>n=>r=>{if(r.type!=="DROP"){n(r);return}const i=t(),s=r.payload.reason;if(i.phase==="COLLECTING"){e(Pne({reason:s}));return}if(i.phase==="IDLE")return;i.phase==="DROP_PENDING"&&i.isWaiting&&St(),i.phase==="DRAGGING"||i.phase==="DROP_PENDING"||St();const a=i.critical,l=i.dimensions,c=l.draggables[i.critical.draggable.id],{impact:u,didDropInsideDroppable:d}=Fne({reason:s,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),h=d?O4(u):null,p=d?p2(u):null,y={index:a.draggable.index,droppableId:a.droppable.id},x={draggableId:c.descriptor.id,type:c.descriptor.type,source:y,reason:s,mode:i.movementMode,destination:h,combine:p},v=Rne({impact:u,draggable:c,dimensions:l,viewport:i.viewport,afterCritical:i.afterCritical}),b={critical:i.critical,afterCritical:i.afterCritical,result:x,impact:u};if(!(!Rd(i.current.client.offset,v)||!!x.combine)){e(B4({completed:b}));return}const k=Ine({current:i.current.client.offset,destination:v,reason:s});e(jne({newHomeClientOffset:v,dropDuration:k,completed:b}))};var Bne=zne,uM=()=>({x:window.pageXOffset,y:window.pageYOffset});function Une(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:e=>{e.target!==window&&e.target!==window.document||t()}}}function $ne({onWindowScroll:t}){function e(){t(uM())}const n=zg(e),r=Une(n);let i=Id;function s(){return i!==Id}function o(){s()&&St(),i=za(window,[r])}function a(){s()||St(),n.cancel(),i(),i=Id}return{start:o,stop:a,isActive:s}}const Wne=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH",Vne=t=>{const e=$ne({onWindowScroll:n=>{t.dispatch(kne({newScroll:n}))}});return n=>r=>{!e.isActive()&&r.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&Wne(r)&&e.stop(),n(r)}};var Hne=Vne,qne=t=>{let e=!1,n=!1;const r=setTimeout(()=>{n=!0}),i=s=>{e||n||(e=!0,t(s),clearTimeout(r))};return i.wasCalled=()=>e,i},Gne=()=>{const t=[],e=i=>{const s=t.findIndex(a=>a.timerId===i);s===-1&&St();const[o]=t.splice(s,1);o.callback()};return{add:i=>{const s=setTimeout(()=>e(s)),o={timerId:s,callback:i};t.push(o)},flush:()=>{if(!t.length)return;const i=[...t];t.length=0,i.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Kne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.droppableId===e.droppableId&&t.index===e.index,Xne=(t,e)=>t==null&&e==null?!0:t==null||e==null?!1:t.draggableId===e.draggableId&&t.droppableId===e.droppableId,Yne=(t,e)=>{if(t===e)return!0;const n=t.draggable.id===e.draggable.id&&t.draggable.droppableId===e.draggable.droppableId&&t.draggable.type===e.draggable.type&&t.draggable.index===e.draggable.index,r=t.droppable.id===e.droppable.id&&t.droppable.type===e.droppable.type;return n&&r},pm=(t,e)=>{e()},Ty=(t,e)=>({draggableId:t.draggable.id,type:t.droppable.type,source:{droppableId:t.droppable.id,index:t.draggable.index},mode:e});function Pb(t,e,n,r){if(!t){n(r(e));return}const i=qne(n);t(e,{announce:i}),i.wasCalled()||n(r(e))}var Jne=(t,e)=>{const n=Gne();let r=null;const i=(d,h)=>{r&&St(),pm("onBeforeCapture",()=>{const p=t().onBeforeCapture;p&&p({draggableId:d,mode:h})})},s=(d,h)=>{r&&St(),pm("onBeforeDragStart",()=>{const p=t().onBeforeDragStart;p&&p(Ty(d,h))})},o=(d,h)=>{r&&St();const p=Ty(d,h);r={mode:h,lastCritical:d,lastLocation:p.source,lastCombine:null},n.add(()=>{pm("onDragStart",()=>Pb(t().onDragStart,p,e,gx.onDragStart))})},a=(d,h)=>{const p=O4(h),y=p2(h);r||St();const x=!Yne(d,r.lastCritical);x&&(r.lastCritical=d);const v=!Kne(r.lastLocation,p);v&&(r.lastLocation=p);const b=!Xne(r.lastCombine,y);if(b&&(r.lastCombine=y),!x&&!v&&!b)return;const S={...Ty(d,r.mode),combine:y,destination:p};n.add(()=>{pm("onDragUpdate",()=>Pb(t().onDragUpdate,S,e,gx.onDragUpdate))})},l=()=>{r||St(),n.flush()},c=d=>{r||St(),r=null,pm("onDragEnd",()=>Pb(t().onDragEnd,d,e,gx.onDragEnd))};return{beforeCapture:i,beforeStart:s,start:o,update:a,flush:l,drop:c,abort:()=>{if(!r)return;const d={...Ty(r.lastCritical,r.mode),combine:null,destination:null,reason:"CANCEL"};c(d)}}},Zne=(t,e)=>{const n=Jne(t,e);return r=>i=>s=>{if(s.type==="BEFORE_INITIAL_CAPTURE"){n.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(s.type==="INITIAL_PUBLISH"){const a=s.payload.critical;n.beforeStart(a,s.payload.movementMode),i(s),n.start(a,s.payload.movementMode);return}if(s.type==="DROP_COMPLETE"){const a=s.payload.completed.result;n.flush(),i(s),n.drop(a);return}if(i(s),s.type==="FLUSH"){n.abort();return}const o=r.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const Qne=t=>e=>n=>{if(n.type!=="DROP_ANIMATION_FINISHED"){e(n);return}const r=t.getState();r.phase!=="DROP_ANIMATING"&&St(),t.dispatch(B4({completed:r.completed}))};var ere=Qne;const tre=t=>{let e=null,n=null;function r(){n&&(cancelAnimationFrame(n),n=null),e&&(e(),e=null)}return i=>s=>{if((s.type==="FLUSH"||s.type==="DROP_COMPLETE"||s.type==="DROP_ANIMATION_FINISHED")&&r(),i(s),s.type!=="DROP_ANIMATE")return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){t.getState().phase==="DROP_ANIMATING"&&t.dispatch(aM())}};n=requestAnimationFrame(()=>{n=null,e=za(window,[o])})}};var nre=tre,rre=t=>()=>e=>n=>{(n.type==="DROP_COMPLETE"||n.type==="FLUSH"||n.type==="DROP_ANIMATE")&&t.stopPublishing(),e(n)},ire=t=>{let e=!1;return()=>n=>r=>{if(r.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(r.payload.critical.draggable.id),n(r),t.tryRestoreFocusRecorded();return}if(n(r),!!e){if(r.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(r.type==="DROP_COMPLETE"){e=!1;const i=r.payload.completed.result;i.combine&&t.tryShiftRecord(i.draggableId,i.combine.draggableId),t.tryRestoreFocusRecorded()}}}};const sre=t=>t.type==="DROP_COMPLETE"||t.type==="DROP_ANIMATE"||t.type==="FLUSH";var ore=t=>e=>n=>r=>{if(sre(r)){t.stop(),n(r);return}if(r.type==="INITIAL_PUBLISH"){n(r);const i=e.getState();i.phase!=="DRAGGING"&&St(),t.start(i);return}n(r),t.scroll(e.getState())};const are=t=>e=>n=>{if(e(n),n.type!=="PUBLISH_WHILE_DRAGGING")return;const r=t.getState();r.phase==="DROP_PENDING"&&(r.isWaiting||t.dispatch(oM({reason:r.reason})))};var lre=are;const cre=k8;var ure=({dimensionMarshal:t,focusMarshal:e,styleMarshal:n,getResponders:r,announce:i,autoScroller:s})=>S8(mne,cre(hee(One(n),rre(t),Dne(t),Bne,ere,nre,lre,ore(s),Hne,ire(e),Zne(r,i))));const Db=()=>({additions:{},removals:{},modified:{}});function dre({registry:t,callbacks:e}){let n=Db(),r=null;const i=()=>{r||(e.collectionStarting(),r=requestAnimationFrame(()=>{r=null;const{additions:l,removals:c,modified:u}=n,d=Object.keys(l).map(y=>t.draggable.getById(y).getDimension(qi)).sort((y,x)=>y.descriptor.index-x.descriptor.index),h=Object.keys(u).map(y=>{const v=t.droppable.getById(y).callbacks.getScrollWhileDragging();return{droppableId:y,scroll:v}}),p={additions:d,removals:Object.keys(c),modified:h};n=Db(),e.publish(p)}))};return{add:l=>{const c=l.descriptor.id;n.additions[c]=l,n.modified[l.descriptor.droppableId]=!0,n.removals[c]&&delete n.removals[c],i()},remove:l=>{const c=l.descriptor;n.removals[c.id]=!0,n.modified[c.droppableId]=!0,n.additions[c.id]&&delete n.additions[c.id],i()},stop:()=>{r&&(cancelAnimationFrame(r),r=null,n=Db())}}}var dM=({scrollHeight:t,scrollWidth:e,height:n,width:r})=>{const i=ra({x:e,y:t},{x:r,y:n});return{x:Math.max(0,i.x),y:Math.max(0,i.y)}},fM=()=>{const t=document.documentElement;return t||St(),t},hM=()=>{const t=fM();return dM({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight})},fre=()=>{const t=uM(),e=hM(),n=t.y,r=t.x,i=fM(),s=i.clientWidth,o=i.clientHeight,a=r+s,l=n+o;return{frame:vl({top:n,left:r,right:a,bottom:l}),scroll:{initial:t,current:t,max:e,diff:{value:qi,displacement:qi}}}},hre=({critical:t,scrollOptions:e,registry:n})=>{const r=fre(),i=r.scroll.current,s=t.droppable,o=n.droppable.getAllByType(s.type).map(u=>u.callbacks.getDimensionAndWatchScroll(i,e)),a=n.draggable.getAllByType(t.draggable.type).map(u=>u.getDimension(i));return{dimensions:{draggables:U8(a),droppables:B8(o)},critical:t,viewport:r}};function rT(t,e,n){return!(n.descriptor.id===e.id||n.descriptor.type!==e.type||t.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var pre=(t,e)=>{let n=null;const r=dre({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),i=(h,p)=>{t.droppable.exists(h)||St(),n&&e.updateDroppableIsEnabled({id:h,isEnabled:p})},s=(h,p)=>{n&&(t.droppable.exists(h)||St(),e.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:p}))},o=(h,p)=>{n&&(t.droppable.exists(h)||St(),e.updateDroppableScroll({id:h,newScroll:p}))},a=(h,p)=>{n&&t.droppable.getById(h).callbacks.scroll(p)},l=()=>{if(!n)return;r.stop();const h=n.critical.droppable;t.droppable.getAllByType(h.type).forEach(p=>p.callbacks.dragStopped()),n.unsubscribe(),n=null},c=h=>{n||St();const p=n.critical.draggable;h.type==="ADDITION"&&rT(t,p,h.value)&&r.add(h.value),h.type==="REMOVAL"&&rT(t,p,h.value)&&r.remove(h.value)};return{updateDroppableIsEnabled:i,updateDroppableIsCombineEnabled:s,scrollDroppable:a,updateDroppableScroll:o,startPublishing:h=>{n&&St();const p=t.draggable.getById(h.draggableId),y=t.droppable.getById(p.descriptor.droppableId),x={draggable:p.descriptor,droppable:y.descriptor},v=t.subscribe(c);return n={critical:x,unsubscribe:v},hre({critical:x,registry:t,scrollOptions:h.scrollOptions})},stopPublishing:l}},pM=(t,e)=>t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP",mre=t=>{window.scrollBy(t.x,t.y)};const gre=Wi(t=>h2(t).filter(e=>!(!e.isEnabled||!e.frame))),yre=(t,e)=>gre(e).find(r=>(r.frame||St(),J8(r.frame.pageMarginBox)(t)))||null;var xre=({center:t,destination:e,droppables:n})=>{if(e){const i=n[e];return i.frame?i:null}return yre(t,n)};const Vg={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:t=>t**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var vre=(t,e,n=()=>Vg)=>{const r=n(),i=t[e.size]*r.startFromPercentage,s=t[e.size]*r.maxScrollAtPercentage;return{startScrollingFrom:i,maxScrollValueAt:s}},mM=({startOfRange:t,endOfRange:e,current:n})=>{const r=e-t;return r===0?0:(n-t)/r},$4=1,wre=(t,e,n=()=>Vg)=>{const r=n();if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return r.maxPixelScroll;if(t===e.startScrollingFrom)return $4;const s=1-mM({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),o=r.maxPixelScroll*r.ease(s);return Math.ceil(o)},bre=(t,e,n)=>{const r=n(),i=r.durationDampening.accelerateAt,s=r.durationDampening.stopDampeningAt,o=e,a=s,c=Date.now()-o;if(c>=s)return t;if(c<i)return $4;const u=mM({startOfRange:i,endOfRange:a,current:c}),d=t*r.ease(u);return Math.ceil(d)},iT=({distanceToEdge:t,thresholds:e,dragStartTime:n,shouldUseTimeDampening:r,getAutoScrollerOptions:i})=>{const s=wre(t,e,i);return s===0?0:r?Math.max(bre(s,n,i),$4):s},sT=({container:t,distanceToEdges:e,dragStartTime:n,axis:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=vre(t,r,s);return e[r.end]<e[r.start]?iT({distanceToEdge:e[r.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s}):-1*iT({distanceToEdge:e[r.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s})},_re=({container:t,subject:e,proposedScroll:n})=>{const r=e.height>t.height,i=e.width>t.width;return!i&&!r?n:i&&r?null:{x:i?0:n.x,y:r?0:n.y}};const Sre=z8(t=>t===0?0:t);var gM=({dragStartTime:t,container:e,subject:n,center:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o={top:r.y-e.top,right:e.right-r.x,bottom:e.bottom-r.y,left:r.x-e.left},a=sT({container:e,distanceToEdges:o,dragStartTime:t,axis:L4,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),l=sT({container:e,distanceToEdges:o,dragStartTime:t,axis:V8,shouldUseTimeDampening:i,getAutoScrollerOptions:s}),c=Sre({x:l,y:a});if(Rd(c,qi))return null;const u=_re({container:e,subject:n,proposedScroll:c});return u?Rd(u,qi)?null:u:null};const kre=z8(t=>t===0?0:t>0?1:-1),W4=(()=>{const t=(e,n)=>e<0?e:e>n?e-n:0;return({current:e,max:n,change:r})=>{const i=cs(e,r),s={x:t(i.x,n.x),y:t(i.y,n.y)};return Rd(s,qi)?null:s}})(),yM=({max:t,current:e,change:n})=>{const r={x:Math.max(e.x,t.x),y:Math.max(e.y,t.y)},i=kre(n),s=W4({max:r,current:e,change:i});return!s||i.x!==0&&s.x===0||i.y!==0&&s.y===0},V4=(t,e)=>yM({current:t.scroll.current,max:t.scroll.max,change:e}),Nre=(t,e)=>{if(!V4(t,e))return null;const n=t.scroll.max,r=t.scroll.current;return W4({current:r,max:n,change:e})},H4=(t,e)=>{const n=t.frame;return n?yM({current:n.scroll.current,max:n.scroll.max,change:e}):!1},Cre=(t,e)=>{const n=t.frame;return!n||!H4(t,e)?null:W4({current:n.scroll.current,max:n.scroll.max,change:e})};var Ere=({viewport:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=gM({dragStartTime:r,container:t.frame,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return o&&V4(t,o)?o:null},Are=({droppable:t,subject:e,center:n,dragStartTime:r,shouldUseTimeDampening:i,getAutoScrollerOptions:s})=>{const o=t.frame;if(!o)return null;const a=gM({dragStartTime:r,container:o.pageMarginBox,subject:e,center:n,shouldUseTimeDampening:i,getAutoScrollerOptions:s});return a&&H4(t,a)?a:null},oT=({state:t,dragStartTime:e,shouldUseTimeDampening:n,scrollWindow:r,scrollDroppable:i,getAutoScrollerOptions:s})=>{const o=t.current.page.borderBoxCenter,l=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){const d=t.viewport,h=Ere({dragStartTime:e,viewport:d,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});if(h){r(h);return}}const c=xre({center:o,destination:oa(t.impact),droppables:t.dimensions.droppables});if(!c)return;const u=Are({dragStartTime:e,droppable:c,subject:l,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:s});u&&i(c.descriptor.id,u)},Tre=({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n=()=>Vg})=>{const r=zg(t),i=zg(e);let s=null;const o=c=>{s||St();const{shouldUseTimeDampening:u,dragStartTime:d}=s;oT({state:c,scrollWindow:r,scrollDroppable:i,dragStartTime:d,shouldUseTimeDampening:u,getAutoScrollerOptions:n})};return{start:c=>{s&&St();const u=Date.now();let d=!1;const h=()=>{d=!0};oT({state:c,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),s={dragStartTime:u,shouldUseTimeDampening:d},d&&o(c)},stop:()=>{s&&(r.cancel(),i.cancel(),s=null)},scroll:o}},jre=({move:t,scrollDroppable:e,scrollWindow:n})=>{const r=(a,l)=>{const c=cs(a.current.client.selection,l);t({client:c})},i=(a,l)=>{if(!H4(a,l))return l;const c=Cre(a,l);if(!c)return e(a.descriptor.id,l),null;const u=ra(l,c);return e(a.descriptor.id,u),ra(l,u)},s=(a,l,c)=>{if(!a||!V4(l,c))return c;const u=Nre(l,c);if(!u)return n(c),null;const d=ra(c,u);return n(d),ra(c,d)};return a=>{const l=a.scrollJumpRequest;if(!l)return;const c=oa(a.impact);c||St();const u=i(a.dimensions.droppables[c],l);if(!u)return;const d=a.viewport,h=s(a.isWindowScrollAllowed,d,u);h&&r(a,h)}},Pre=({scrollDroppable:t,scrollWindow:e,move:n,getAutoScrollerOptions:r})=>{const i=Tre({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r}),s=jre({move:n,scrollWindow:e,scrollDroppable:t});return{scroll:l=>{if(!(r().disabled||l.phase!=="DRAGGING")){if(l.movementMode==="FLUID"){i.scroll(l);return}l.scrollJumpRequest&&s(l)}},start:i.start,stop:i.stop}};const h0="data-rfd",p0=(()=>{const t=`${h0}-drag-handle`;return{base:t,draggableId:`${t}-draggable-id`,contextId:`${t}-context-id`}})(),x_=(()=>{const t=`${h0}-draggable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),Dre=(()=>{const t=`${h0}-droppable`;return{base:t,contextId:`${t}-context-id`,id:`${t}-id`}})(),aT={contextId:`${h0}-scroll-container-context-id`},Ore=t=>e=>`[${e}="${t}"]`,mm=(t,e)=>t.map(n=>{const r=n.styles[e];return r?`${n.selector} { ${r} }`:""}).join(" "),Lre="pointer-events: none;";var Mre=t=>{const e=Ore(t),n=(()=>{const a=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(p0.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:a,dragging:Lre,dropAnimating:a}}})(),r=(()=>{const a=`
      transition: ${eg.outOfTheWay};
    `;return{selector:e(x_.contextId),styles:{dragging:a,dropAnimating:a,userCancel:a}}})(),i={selector:e(Dre.contextId),styles:{always:"overflow-anchor: none;"}},o=[r,n,i,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:mm(o,"always"),resting:mm(o,"resting"),dragging:mm(o,"dragging"),dropAnimating:mm(o,"dropAnimating"),userCancel:mm(o,"userCancel")}};const Ire=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Y.useLayoutEffect:Y.useEffect;var aa=Ire;const Ob=()=>{const t=document.querySelector("head");return t||St(),t},lT=t=>{const e=document.createElement("style");return t&&e.setAttribute("nonce",t),e.type="text/css",e};function Rre(t,e){const n=Mn(()=>Mre(t),[t]),r=Y.useRef(null),i=Y.useRef(null),s=Gt(Wi(d=>{const h=i.current;h||St(),h.textContent=d}),[]),o=Gt(d=>{const h=r.current;h||St(),h.textContent=d},[]);aa(()=>{!r.current&&!i.current||St();const d=lT(e),h=lT(e);return r.current=d,i.current=h,d.setAttribute(`${h0}-always`,t),h.setAttribute(`${h0}-dynamic`,t),Ob().appendChild(d),Ob().appendChild(h),o(n.always),s(n.resting),()=>{const p=y=>{const x=y.current;x||St(),Ob().removeChild(x),y.current=null};p(r),p(i)}},[e,o,s,n.always,n.resting,t]);const a=Gt(()=>s(n.dragging),[s,n.dragging]),l=Gt(d=>{if(d==="DROP"){s(n.dropAnimating);return}s(n.userCancel)},[s,n.dropAnimating,n.userCancel]),c=Gt(()=>{i.current&&s(n.resting)},[s,n.resting]);return Mn(()=>({dragging:a,dropping:l,resting:c}),[a,l,c])}function xM(t,e){return Array.from(t.querySelectorAll(e))}var vM=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView?t.ownerDocument.defaultView:window;function y2(t){return t instanceof vM(t).HTMLElement}function Fre(t,e){const n=`[${p0.contextId}="${t}"]`,r=xM(document,n);if(!r.length)return null;const i=r.find(s=>s.getAttribute(p0.draggableId)===e);return!i||!y2(i)?null:i}function zre(t){const e=Y.useRef({}),n=Y.useRef(null),r=Y.useRef(null),i=Y.useRef(!1),s=Gt(function(h,p){const y={id:h,focus:p};return e.current[h]=y,function(){const v=e.current;v[h]!==y&&delete v[h]}},[]),o=Gt(function(h){const p=Fre(t,h);p&&p!==document.activeElement&&p.focus()},[t]),a=Gt(function(h,p){n.current===h&&(n.current=p)},[]),l=Gt(function(){r.current||i.current&&(r.current=requestAnimationFrame(()=>{r.current=null;const h=n.current;h&&o(h)}))},[o]),c=Gt(function(h){n.current=null;const p=document.activeElement;p&&p.getAttribute(p0.draggableId)===h&&(n.current=h)},[]);return aa(()=>(i.current=!0,function(){i.current=!1;const h=r.current;h&&cancelAnimationFrame(h)}),[]),Mn(()=>({register:s,tryRecordFocus:c,tryRestoreFocusRecorded:l,tryShiftRecord:a}),[s,c,l,a])}function Bre(){const t={draggables:{},droppables:{}},e=[];function n(d){return e.push(d),function(){const p=e.indexOf(d);p!==-1&&e.splice(p,1)}}function r(d){e.length&&e.forEach(h=>h(d))}function i(d){return t.draggables[d]||null}function s(d){const h=i(d);return h||St(),h}const o={register:d=>{t.draggables[d.descriptor.id]=d,r({type:"ADDITION",value:d})},update:(d,h)=>{const p=t.draggables[h.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete t.draggables[h.descriptor.id],t.draggables[d.descriptor.id]=d)},unregister:d=>{const h=d.descriptor.id,p=i(h);p&&d.uniqueId===p.uniqueId&&(delete t.draggables[h],t.droppables[d.descriptor.droppableId]&&r({type:"REMOVAL",value:d}))},getById:s,findById:i,exists:d=>!!i(d),getAllByType:d=>Object.values(t.draggables).filter(h=>h.descriptor.type===d)};function a(d){return t.droppables[d]||null}function l(d){const h=a(d);return h||St(),h}const c={register:d=>{t.droppables[d.descriptor.id]=d},unregister:d=>{const h=a(d.descriptor.id);h&&d.uniqueId===h.uniqueId&&delete t.droppables[d.descriptor.id]},getById:l,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(t.droppables).filter(h=>h.descriptor.type===d)};function u(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:n,clean:u}}function Ure(){const t=Mn(Bre,[]);return Y.useEffect(()=>function(){Pt.version.startsWith("16")||Pt.version.startsWith("17")?requestAnimationFrame(t.clean):t.clean()},[t]),t}var q4=Pt.createContext(null),fv=()=>{const t=document.body;return t||St(),t};const $re={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var Wre=$re;const Vre=t=>`rfd-announcement-${t}`;function Hre(t){const e=Mn(()=>Vre(t),[t]),n=Y.useRef(null);return Y.useEffect(function(){const s=document.createElement("div");return n.current=s,s.id=e,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Md(s.style,Wre),fv().appendChild(s),function(){setTimeout(function(){const l=fv();l.contains(s)&&l.removeChild(s),s===n.current&&(n.current=null)})}},[e]),Gt(i=>{const s=n.current;if(s){s.textContent=i;return}},[])}let qre=0;const wM={separator:"::"};function Gre(t,e=wM){return Mn(()=>`${t}${e.separator}${qre++}`,[e.separator,t])}function Kre(t,e=wM){const n=Pt.useId();return Mn(()=>`${t}${e.separator}${n}`,[e.separator,t,n])}var G4="useId"in Pt?Kre:Gre;function Xre({contextId:t,uniqueId:e}){return`rfd-hidden-text-${t}-${e}`}function Yre({contextId:t,text:e}){const n=G4("hidden-text",{separator:"-"}),r=Mn(()=>Xre({contextId:t,uniqueId:n}),[n,t]);return Y.useEffect(function(){const s=document.createElement("div");return s.id=r,s.textContent=e,s.style.display="none",fv().appendChild(s),function(){const a=fv();a.contains(s)&&a.removeChild(s)}},[r,e]),r}var x2=Pt.createContext(null);function bM(t){const e=Y.useRef(t);return Y.useEffect(()=>{e.current=t}),e}function Jre(){let t=null;function e(){return!!t}function n(o){return o===t}function r(o){t&&St();const a={abandon:o};return t=a,a}function i(){t||St(),t=null}function s(){t&&(t.abandon(),i())}return{isClaimed:e,isActive:n,claim:r,release:i,tryAbandon:s}}function Hg(t){return t.phase==="IDLE"||t.phase==="DROP_ANIMATING"?!1:t.isDragging}const Zre=9,Qre=13,K4=27,_M=32,eie=33,tie=34,nie=35,rie=36,iie=37,sie=38,oie=39,aie=40,lie={[Qre]:!0,[Zre]:!0};var SM=t=>{lie[t.keyCode]&&t.preventDefault()};const cie=(()=>{const t="visibilitychange";return typeof document>"u"?t:[t,`ms${t}`,`webkit${t}`,`moz${t}`,`o${t}`].find(r=>`on${r}`in document)||t})();var v2=cie;const kM=0,cT=5;function uie(t,e){return Math.abs(e.x-t.x)>=cT||Math.abs(e.y-t.y)>=cT}const uT={type:"IDLE"};function die({cancel:t,completed:e,getPhase:n,setPhase:r}){return[{eventName:"mousemove",fn:i=>{const{button:s,clientX:o,clientY:a}=i;if(s!==kM)return;const l={x:o,y:a},c=n();if(c.type==="DRAGGING"){i.preventDefault(),c.actions.move(l);return}c.type!=="PENDING"&&St();const u=c.point;if(!uie(u,l))return;i.preventDefault();const d=c.actions.fluidLift(l);r({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:i=>{const s=n();if(s.type!=="DRAGGING"){t();return}i.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"mousedown",fn:i=>{n().type==="DRAGGING"&&i.preventDefault(),t()}},{eventName:"keydown",fn:i=>{if(n().type==="PENDING"){t();return}if(i.keyCode===K4){i.preventDefault(),t();return}SM(i)}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&t()}},{eventName:"webkitmouseforcedown",fn:i=>{const s=n();if(s.type==="IDLE"&&St(),s.actions.shouldRespectForcePress()){t();return}i.preventDefault()}},{eventName:v2,fn:t}]}function fie(t){const e=Y.useRef(uT),n=Y.useRef(Id),r=Mn(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==kM||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const h=t.findClosestDraggableId(d);if(!h)return;const p=t.tryGetLock(h,o,{sourceEvent:d});if(!p)return;d.preventDefault();const y={x:d.clientX,y:d.clientY};n.current(),c(p,y)}}),[t]),i=Mn(()=>({eventName:"webkitmouseforcewillbegin",fn:u=>{if(u.defaultPrevented)return;const d=t.findClosestDraggableId(u);if(!d)return;const h=t.findOptionsForDraggable(d);h&&(h.shouldRespectForcePress||t.canGetLock(d)&&u.preventDefault())}}),[t]),s=Gt(function(){const d={passive:!1,capture:!0};n.current=za(window,[i,r],d)},[i,r]),o=Gt(()=>{e.current.type!=="IDLE"&&(e.current=uT,n.current(),s())},[s]),a=Gt(()=>{const u=e.current;o(),u.type==="DRAGGING"&&u.actions.cancel({shouldBlockNextClick:!0}),u.type==="PENDING"&&u.actions.abort()},[o]),l=Gt(function(){const d={capture:!0,passive:!1},h=die({cancel:a,completed:o,getPhase:()=>e.current,setPhase:p=>{e.current=p}});n.current=za(window,h,d)},[a,o]),c=Gt(function(d,h){e.current.type!=="IDLE"&&St(),e.current={type:"PENDING",point:h,actions:d},l()},[l]);aa(function(){return s(),function(){n.current()}},[s])}function hie(){}const pie={[tie]:!0,[eie]:!0,[rie]:!0,[nie]:!0};function mie(t,e){function n(){e(),t.cancel()}function r(){e(),t.drop()}return[{eventName:"keydown",fn:i=>{if(i.keyCode===K4){i.preventDefault(),n();return}if(i.keyCode===_M){i.preventDefault(),r();return}if(i.keyCode===aie){i.preventDefault(),t.moveDown();return}if(i.keyCode===sie){i.preventDefault(),t.moveUp();return}if(i.keyCode===oie){i.preventDefault(),t.moveRight();return}if(i.keyCode===iie){i.preventDefault(),t.moveLeft();return}if(pie[i.keyCode]){i.preventDefault();return}SM(i)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:v2,fn:n}]}function gie(t){const e=Y.useRef(hie),n=Mn(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==_M)return;const o=t.findClosestDraggableId(s);if(!o)return;const a=t.tryGetLock(o,u,{sourceEvent:s});if(!a)return;s.preventDefault();let l=!0;const c=a.snapLift();e.current();function u(){l||St(),l=!1,e.current(),r()}e.current=za(window,mie(c,u),{capture:!0,passive:!1})}}),[t]),r=Gt(function(){const s={passive:!1,capture:!0};e.current=za(window,[n],s)},[n]);aa(function(){return r(),function(){e.current()}},[r])}const Lb={type:"IDLE"},yie=120,xie=.15;function vie({cancel:t,getPhase:e}){return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(e().type!=="DRAGGING"){t();return}n.keyCode===K4&&n.preventDefault(),t()}},{eventName:v2,fn:t}]}function wie({cancel:t,completed:e,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}i.hasMoved=!0;const{clientX:s,clientY:o}=r.touches[0],a={x:s,y:o};r.preventDefault(),i.actions.move(a)}},{eventName:"touchend",fn:r=>{const i=n();if(i.type!=="DRAGGING"){t();return}r.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),e()}},{eventName:"touchcancel",fn:r=>{if(n().type!=="DRAGGING"){t();return}r.preventDefault(),t()}},{eventName:"touchforcechange",fn:r=>{const i=n();i.type==="IDLE"&&St();const s=r.touches[0];if(!s||!(s.force>=xie))return;const a=i.actions.shouldRespectForcePress();if(i.type==="PENDING"){a&&t();return}if(a){if(i.hasMoved){r.preventDefault();return}t();return}r.preventDefault()}},{eventName:v2,fn:t}]}function bie(t){const e=Y.useRef(Lb),n=Y.useRef(Id),r=Gt(function(){return e.current},[]),i=Gt(function(p){e.current=p},[]),s=Mn(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const y=t.findClosestDraggableId(p);if(!y)return;const x=t.tryGetLock(y,a,{sourceEvent:p});if(!x)return;const v=p.touches[0],{clientX:b,clientY:S}=v,k={x:b,y:S};n.current(),d(x,k)}}),[t]),o=Gt(function(){const p={capture:!0,passive:!1};n.current=za(window,[s],p)},[s]),a=Gt(()=>{const h=e.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),i(Lb),n.current(),o())},[o,i]),l=Gt(()=>{const h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),c=Gt(function(){const p={capture:!0,passive:!1},y={cancel:l,completed:a,getPhase:r},x=za(window,wie(y),p),v=za(window,vie(y),p);n.current=function(){x(),v()}},[l,r,a]),u=Gt(function(){const p=r();p.type!=="PENDING"&&St();const y=p.actions.fluidLift(p.point);i({type:"DRAGGING",actions:y,hasMoved:!1})},[r,i]),d=Gt(function(p,y){r().type!=="IDLE"&&St();const x=setTimeout(u,yie);i({type:"PENDING",point:y,actions:p,longPressTimerId:x}),c()},[c,r,i,u]);aa(function(){return o(),function(){n.current();const y=r();y.type==="PENDING"&&(clearTimeout(y.longPressTimerId),i(Lb))}},[r,o,i]),aa(function(){return za(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const _ie=["input","button","textarea","select","option","optgroup","video","audio"];function NM(t,e){if(e==null)return!1;if(_ie.includes(e.tagName.toLowerCase()))return!0;const r=e.getAttribute("contenteditable");return r==="true"||r===""?!0:e===t?!1:NM(t,e.parentElement)}function Sie(t,e){const n=e.target;return y2(n)?NM(t,n):!1}var kie=t=>vl(t.getBoundingClientRect()).center;function Nie(t){return t instanceof vM(t).Element}const Cie=(()=>{const t="matches";return typeof document>"u"?t:[t,"msMatchesSelector","webkitMatchesSelector"].find(r=>r in Element.prototype)||t})();function CM(t,e){return t==null?null:t[Cie](e)?t:CM(t.parentElement,e)}function Eie(t,e){return t.closest?t.closest(e):CM(t,e)}function Aie(t){return`[${p0.contextId}="${t}"]`}function Tie(t,e){const n=e.target;if(!Nie(n))return null;const r=Aie(t),i=Eie(n,r);return!i||!y2(i)?null:i}function jie(t,e){const n=Tie(t,e);return n?n.getAttribute(p0.draggableId):null}function Pie(t,e){const n=`[${x_.contextId}="${t}"]`,i=xM(document,n).find(s=>s.getAttribute(x_.id)===e);return!i||!y2(i)?null:i}function Die(t){t.preventDefault()}function jy({expected:t,phase:e,isLockActive:n,shouldWarn:r}){return!(!n()||t!==e)}function EM({lockAPI:t,store:e,registry:n,draggableId:r}){if(t.isClaimed())return!1;const i=n.draggable.findById(r);return!(!i||!i.options.isEnabled||!pM(e.getState(),r))}function Oie({lockAPI:t,contextId:e,store:n,registry:r,draggableId:i,forceSensorStop:s,sourceEvent:o}){if(!EM({lockAPI:t,store:n,registry:r,draggableId:i}))return null;const l=r.draggable.getById(i),c=Pie(e,l.descriptor.id);if(!c||o&&!l.options.canDragInteractiveElements&&Sie(c,o))return null;const u=t.claim(s||Id);let d="PRE_DRAG";function h(){return l.options.shouldRespectForcePress}function p(){return t.isActive(u)}function y(j,P){jy({expected:j,phase:d,isLockActive:p,shouldWarn:!0})&&n.dispatch(P())}const x=y.bind(null,"DRAGGING");function v(j){function P(){t.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(P(),St()),n.dispatch(yne(j.liftActionArgs)),d="DRAGGING";function C(N,L={shouldBlockNextClick:!1}){if(j.cleanup(),L.shouldBlockNextClick){const R=za(window,[{eventName:"click",fn:Die,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(R)}P(),n.dispatch(oM({reason:N}))}return{isActive:()=>jy({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,drop:N=>C("DROP",N),cancel:N=>C("CANCEL",N),...j.actions}}function b(j){const P=zg(N=>{x(()=>sM({client:N}))});return{...v({liftActionArgs:{id:i,clientSelection:j,movementMode:"FLUID"},cleanup:()=>P.cancel(),actions:{move:P}}),move:P}}function S(){const j={moveUp:()=>x(Cne),moveRight:()=>x(Ane),moveDown:()=>x(Ene),moveLeft:()=>x(Tne)};return v({liftActionArgs:{id:i,clientSelection:kie(c),movementMode:"SNAP"},cleanup:Id,actions:j})}function k(){jy({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&t.release()}return{isActive:()=>jy({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:b,snapLift:S,abort:k}}const Lie=[fie,gie,bie];function Mie({contextId:t,store:e,registry:n,customSensors:r,enableDefaultSensors:i}){const s=[...i?Lie:[],...r||[]],o=Y.useState(()=>Jre())[0],a=Gt(function(v,b){Hg(v)&&!Hg(b)&&o.tryAbandon()},[o]);aa(function(){let v=e.getState();return e.subscribe(()=>{const S=e.getState();a(v,S),v=S})},[o,e,a]),aa(()=>o.tryAbandon,[o.tryAbandon]);const l=Gt(x=>EM({lockAPI:o,registry:n,store:e,draggableId:x}),[o,n,e]),c=Gt((x,v,b)=>Oie({lockAPI:o,registry:n,contextId:t,store:e,draggableId:x,forceSensorStop:v||null,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null}),[t,o,n,e]),u=Gt(x=>jie(t,x),[t]),d=Gt(x=>{const v=n.draggable.findById(x);return v?v.options:null},[n.draggable]),h=Gt(function(){o.isClaimed()&&(o.tryAbandon(),e.getState().phase!=="IDLE"&&e.dispatch(z4()))},[o,e]),p=Gt(()=>o.isClaimed(),[o]),y=Mn(()=>({canGetLock:l,tryGetLock:c,findClosestDraggableId:u,findOptionsForDraggable:d,tryReleaseLock:h,isLockClaimed:p}),[l,c,u,d,h,p]);for(let x=0;x<s.length;x++)s[x](y)}const Iie=t=>({onBeforeCapture:e=>{const n=()=>{t.onBeforeCapture&&t.onBeforeCapture(e)};Pt.version.startsWith("16")||Pt.version.startsWith("17")?n():nu.flushSync(n)},onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDragUpdate:t.onDragUpdate}),Rie=t=>({...Vg,...t.autoScrollerOptions,durationDampening:{...Vg.durationDampening,...t.autoScrollerOptions}});function gm(t){return t.current||St(),t.current}function Fie(t){const{contextId:e,setCallbacks:n,sensors:r,nonce:i,dragHandleUsageInstructions:s}=t,o=Y.useRef(null),a=bM(t),l=Gt(()=>Iie(a.current),[a]),c=Gt(()=>Rie(a.current),[a]),u=Hre(e),d=Yre({contextId:e,text:s}),h=Rre(e,i),p=Gt(R=>{gm(o).dispatch(R)},[]),y=Mn(()=>AA({publishWhileDragging:vne,updateDroppableScroll:bne,updateDroppableIsEnabled:_ne,updateDroppableIsCombineEnabled:Sne,collectionStarting:wne},p),[p]),x=Ure(),v=Mn(()=>pre(x,y),[x,y]),b=Mn(()=>Pre({scrollWindow:mre,scrollDroppable:v.scrollDroppable,getAutoScrollerOptions:c,...AA({move:sM},p)}),[v.scrollDroppable,p,c]),S=zre(e),k=Mn(()=>ure({announce:u,autoScroller:b,dimensionMarshal:v,focusMarshal:S,getResponders:l,styleMarshal:h}),[u,b,v,S,l,h]);o.current=k;const T=Gt(()=>{const R=gm(o);R.getState().phase!=="IDLE"&&R.dispatch(z4())},[]),j=Gt(()=>{const R=gm(o).getState();return R.phase==="DROP_ANIMATING"?!0:R.phase==="IDLE"?!1:R.isDragging},[]),P=Mn(()=>({isDragging:j,tryAbort:T}),[j,T]);n(P);const C=Gt(R=>pM(gm(o).getState(),R),[]),N=Gt(()=>Vf(gm(o).getState()),[]),L=Mn(()=>({marshal:v,focus:S,contextId:e,canLift:C,isMovementAllowed:N,dragHandleUsageInstructionsId:d,registry:x}),[e,v,d,S,C,N,x]);return Mie({contextId:e,store:k,registry:x,customSensors:r||null,enableDefaultSensors:t.enableDefaultSensors!==!1}),Y.useEffect(()=>T,[T]),Pt.createElement(x2.Provider,{value:L},Pt.createElement(Kee,{context:q4,store:k},t.children))}let zie=0;function Bie(){return Mn(()=>`${zie++}`,[])}function Uie(){return Pt.useId()}var $ie="useId"in Pt?Uie:Bie;function Mb(t){const e=$ie(),n=t.dragHandleUsageInstructions||gx.dragHandleUsageInstructions;return Pt.createElement(ste,null,r=>Pt.createElement(Fie,{nonce:t.nonce,contextId:e,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd,autoScrollerOptions:t.autoScrollerOptions},t.children))}const dT={dragging:5e3,dropAnimating:4500},Wie=(t,e)=>e?eg.drop(e.duration):t?eg.snap:eg.fluid,Vie=(t,e)=>{if(t)return e?Wg.opacity.drop:Wg.opacity.combining},Hie=t=>t.forceShouldAnimate!=null?t.forceShouldAnimate:t.mode==="SNAP";function qie(t){const n=t.dimension.client,{offset:r,combineWith:i,dropping:s}=t,o=!!i,a=Hie(t),l=!!s,c=l?g_.drop(r,o):g_.moveTo(r);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:Wie(a,s),transform:c,opacity:Vie(o,l),zIndex:l?dT.dropAnimating:dT.dragging,pointerEvents:"none"}}function Gie(t){return{transform:g_.moveTo(t.offset),transition:t.shouldAnimateDisplacement?void 0:"none"}}function Kie(t){return t.type==="DRAGGING"?qie(t):Gie(t)}function Xie(t,e,n=qi){const r=window.getComputedStyle(e),i=e.getBoundingClientRect(),s=L8(i,r),o=lv(s,n),a={client:s,tagName:e.tagName.toLowerCase(),display:r.display},l={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:t,placeholder:a,displaceBy:l,client:s,page:o}}function Yie(t){const e=G4("draggable"),{descriptor:n,registry:r,getDraggableRef:i,canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}=t,l=Mn(()=>({canDragInteractiveElements:s,shouldRespectForcePress:o,isEnabled:a}),[s,a,o]),c=Gt(p=>{const y=i();return y||St(),Xie(n,y,p)},[n,i]),u=Mn(()=>({uniqueId:e,descriptor:n,options:l,getDimension:c}),[n,c,l,e]),d=Y.useRef(u),h=Y.useRef(!0);aa(()=>(r.draggable.register(d.current),()=>r.draggable.unregister(d.current)),[r.draggable]),aa(()=>{if(h.current){h.current=!1;return}const p=d.current;d.current=u,r.draggable.update(u,p)},[u,r.draggable])}var X4=Pt.createContext(null);function hv(t){const e=Y.useContext(t);return e||St(),e}function Jie(t){t.preventDefault()}const Zie=t=>{const e=Y.useRef(null),n=Gt((P=null)=>{e.current=P},[]),r=Gt(()=>e.current,[]),{contextId:i,dragHandleUsageInstructionsId:s,registry:o}=hv(x2),{type:a,droppableId:l}=hv(X4),c=Mn(()=>({id:t.draggableId,index:t.index,type:a,droppableId:l}),[t.draggableId,t.index,a,l]),{children:u,draggableId:d,isEnabled:h,shouldRespectForcePress:p,canDragInteractiveElements:y,isClone:x,mapped:v,dropAnimationFinished:b}=t;if(!x){const P=Mn(()=>({descriptor:c,registry:o,getDraggableRef:r,canDragInteractiveElements:y,shouldRespectForcePress:p,isEnabled:h}),[c,o,r,y,p,h]);Yie(P)}const S=Mn(()=>h?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":i,draggable:!1,onDragStart:Jie}:null,[i,s,d,h]),k=Gt(P=>{v.type==="DRAGGING"&&v.dropping&&P.propertyName==="transform"&&(Pt.version.startsWith("16")||Pt.version.startsWith("17")?b():nu.flushSync(b))},[b,v]),T=Mn(()=>{const P=Kie(v),C=v.type==="DRAGGING"&&v.dropping?k:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":i,"data-rfd-draggable-id":d,style:P,onTransitionEnd:C},dragHandleProps:S}},[i,S,d,v,k,n]),j=Mn(()=>({draggableId:c.id,type:c.type,source:{index:c.index,droppableId:c.droppableId}}),[c.droppableId,c.id,c.index,c.type]);return Pt.createElement(Pt.Fragment,null,u(T,v.snapshot,j))};var Qie=Zie,AM=(t,e)=>t===e,TM=t=>{const{combine:e,destination:n}=t;return n?n.droppableId:e?e.droppableId:null};const ese=t=>t.combine?t.combine.draggableId:null,tse=t=>t.at&&t.at.type==="COMBINE"?t.at.combine.draggableId:null;function nse(){const t=Wi((i,s)=>({x:i,y:s})),e=Wi((i,s,o=null,a=null,l=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!l,dropAnimation:l,mode:i,draggingOver:o,combineWith:a,combineTargetFor:null})),n=Wi((i,s,o,a,l=null,c=null,u=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:l,combineWith:c,mode:s,offset:i,dimension:o,forceShouldAnimate:u,snapshot:e(s,a,l,c,null)}}));return(i,s)=>{if(Hg(i)){if(i.critical.draggable.id!==s.draggableId)return null;const o=i.current.client.offset,a=i.dimensions.draggables[s.draggableId],l=oa(i.impact),c=tse(i.impact),u=i.forceShouldAnimate;return n(t(o.x,o.y),i.movementMode,a,s.isClone,l,c,u)}if(i.phase==="DROP_ANIMATING"){const o=i.completed;if(o.result.draggableId!==s.draggableId)return null;const a=s.isClone,l=i.dimensions.draggables[s.draggableId],c=o.result,u=c.mode,d=TM(c),h=ese(c),y={duration:i.dropDuration,curve:U4.drop,moveTo:i.newHomeClientOffset,opacity:h?Wg.opacity.drop:null,scale:h?Wg.scale.drop:null};return{mapped:{type:"DRAGGING",offset:i.newHomeClientOffset,dimension:l,dropping:y,draggingOver:d,combineWith:h,mode:u,forceShouldAnimate:null,snapshot:e(u,a,d,h,y)}}}return null}}function jM(t=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}const rse={mapped:{type:"SECONDARY",offset:qi,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:jM(null)}};function ise(){const t=Wi((o,a)=>({x:o,y:a})),e=Wi(jM),n=Wi((o,a=null,l)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:a,shouldAnimateDisplacement:l,snapshot:e(a)}})),r=o=>o?n(qi,o,!0):null,i=(o,a,l,c)=>{const u=l.displaced.visible[o],d=!!(c.inVirtualList&&c.effected[o]),h=p2(l),p=h&&h.draggableId===o?a:null;if(!u){if(!d)return r(p);if(l.displaced.invisible[o])return null;const v=T0(c.displacedBy.point),b=t(v.x,v.y);return n(b,p,!0)}if(d)return r(p);const y=l.displacedBy.point,x=t(y.x,y.y);return n(x,p,u.shouldAnimate)};return(o,a)=>{if(Hg(o))return o.critical.draggable.id===a.draggableId?null:i(a.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const l=o.completed;return l.result.draggableId===a.draggableId?null:i(a.draggableId,l.result.draggableId,l.impact,l.afterCritical)}return null}}const sse=()=>{const t=nse(),e=ise();return(r,i)=>t(r,i)||e(r,i)||rse},ose={dropAnimationFinished:aM},ase=D8(sse,ose,null,{context:q4,areStatePropsEqual:AM})(Qie);var lse=ase;function PM(t){return hv(X4).isUsingCloneFor===t.draggableId&&!t.isClone?null:Pt.createElement(lse,t)}function Ib(t){const e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,n=!!t.disableInteractiveElementBlocking,r=!!t.shouldRespectForcePress;return Pt.createElement(PM,Md({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:n,shouldRespectForcePress:r}))}const DM=t=>e=>t===e,cse=DM("scroll"),use=DM("auto"),fT=(t,e)=>e(t.overflowX)||e(t.overflowY),dse=t=>{const e=window.getComputedStyle(t),n={overflowX:e.overflowX,overflowY:e.overflowY};return fT(n,cse)||fT(n,use)},fse=()=>!1,OM=t=>t==null?null:t===document.body?fse()?t:null:t===document.documentElement?null:dse(t)?t:OM(t.parentElement);var v_=t=>({x:t.scrollLeft,y:t.scrollTop});const LM=t=>t?window.getComputedStyle(t).position==="fixed"?!0:LM(t.parentElement):!1;var hse=t=>{const e=OM(t),n=LM(t);return{closestScrollable:e,isFixedOnPage:n}},pse=({descriptor:t,isEnabled:e,isCombineEnabled:n,isFixedOnPage:r,direction:i,client:s,page:o,closest:a})=>{const l=(()=>{if(!a)return null;const{scrollSize:h,client:p}=a,y=dM({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:a.page.marginBox,frameClient:p,scrollSize:h,shouldClipSubject:a.shouldClipSubject,scroll:{initial:a.scroll,current:a.scroll,max:y,diff:{value:qi,displacement:qi}}}})(),c=i==="vertical"?L4:V8,u=f0({page:o,withPlaceholder:null,axis:c,frame:l});return{descriptor:t,isCombineEnabled:n,isFixedOnPage:r,axis:c,isEnabled:e,client:s,page:o,frame:l,subject:u}};const mse=(t,e)=>{const n=M8(t);if(!e||t!==e)return n;const r=n.paddingBox.top-e.scrollTop,i=n.paddingBox.left-e.scrollLeft,s=r+e.scrollHeight,o=i+e.scrollWidth,l=j4({top:r,right:o,bottom:s,left:i},n.border);return P4({borderBox:l,margin:n.margin,border:n.border,padding:n.padding})};var gse=({ref:t,descriptor:e,env:n,windowScroll:r,direction:i,isDropDisabled:s,isCombineEnabled:o,shouldClipSubject:a})=>{const l=n.closestScrollable,c=mse(t,l),u=lv(c,r),d=(()=>{if(!l)return null;const p=M8(l),y={scrollHeight:l.scrollHeight,scrollWidth:l.scrollWidth};return{client:p,page:lv(p,r),scroll:v_(l),scrollSize:y,shouldClipSubject:a}})();return pse({descriptor:e,isEnabled:!s,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:i,client:c,page:u,closest:d})};const yse={passive:!1},xse={passive:!0};var hT=t=>t.shouldPublishImmediately?yse:xse;const Py=t=>t&&t.env.closestScrollable||null;function vse(t){const e=Y.useRef(null),n=hv(x2),r=G4("droppable"),{registry:i,marshal:s}=n,o=bM(t),a=Mn(()=>({id:t.droppableId,type:t.type,mode:t.mode}),[t.droppableId,t.mode,t.type]),l=Y.useRef(a),c=Mn(()=>Wi((T,j)=>{e.current||St();const P={x:T,y:j};s.updateDroppableScroll(a.id,P)}),[a.id,s]),u=Gt(()=>{const T=e.current;return!T||!T.env.closestScrollable?qi:v_(T.env.closestScrollable)},[]),d=Gt(()=>{const T=u();c(T.x,T.y)},[u,c]),h=Mn(()=>zg(d),[d]),p=Gt(()=>{const T=e.current,j=Py(T);if(T&&j||St(),T.scrollOptions.shouldPublishImmediately){d();return}h()},[h,d]),y=Gt((T,j)=>{e.current&&St();const P=o.current,C=P.getDroppableRef();C||St();const N=hse(C),L={ref:C,descriptor:a,env:N,scrollOptions:j};e.current=L;const R=gse({ref:C,descriptor:a,env:N,windowScroll:T,direction:P.direction,isDropDisabled:P.isDropDisabled,isCombineEnabled:P.isCombineEnabled,shouldClipSubject:!P.ignoreContainerClipping}),D=N.closestScrollable;return D&&(D.setAttribute(aT.contextId,n.contextId),D.addEventListener("scroll",p,hT(L.scrollOptions))),R},[n.contextId,a,p,o]),x=Gt(()=>{const T=e.current,j=Py(T);return T&&j||St(),v_(j)},[]),v=Gt(()=>{const T=e.current;T||St();const j=Py(T);e.current=null,j&&(h.cancel(),j.removeAttribute(aT.contextId),j.removeEventListener("scroll",p,hT(T.scrollOptions)))},[p,h]),b=Gt(T=>{const j=e.current;j||St();const P=Py(j);P||St(),P.scrollTop+=T.y,P.scrollLeft+=T.x},[]),S=Mn(()=>({getDimensionAndWatchScroll:y,getScrollWhileDragging:x,dragStopped:v,scroll:b}),[v,y,x,b]),k=Mn(()=>({uniqueId:r,descriptor:a,callbacks:S}),[S,a,r]);aa(()=>(l.current=k.descriptor,i.droppable.register(k),()=>{e.current&&v(),i.droppable.unregister(k)}),[S,a,v,k,s,i.droppable]),aa(()=>{e.current&&s.updateDroppableIsEnabled(l.current.id,!t.isDropDisabled)},[t.isDropDisabled,s]),aa(()=>{e.current&&s.updateDroppableIsCombineEnabled(l.current.id,t.isCombineEnabled)},[t.isCombineEnabled,s])}function Rb(){}const pT={width:0,height:0,margin:fte},wse=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>t||n==="close"?pT:{height:e.client.borderBox.height,width:e.client.borderBox.width,margin:e.client.margin},bse=({isAnimatingOpenOnMount:t,placeholder:e,animate:n})=>{const r=wse({isAnimatingOpenOnMount:t,placeholder:e,animate:n});return{display:e.display,boxSizing:"border-box",width:r.width,height:r.height,marginTop:r.margin.top,marginRight:r.margin.right,marginBottom:r.margin.bottom,marginLeft:r.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?eg.placeholder:null}},_se=t=>{const e=Y.useRef(null),n=Gt(()=>{e.current&&(clearTimeout(e.current),e.current=null)},[]),{animate:r,onTransitionEnd:i,onClose:s,contextId:o}=t,[a,l]=Y.useState(t.animate==="open");Y.useEffect(()=>a?r!=="open"?(n(),l(!1),Rb):e.current?Rb:(e.current=setTimeout(()=>{e.current=null,l(!1)}),n):Rb,[r,a,n]);const c=Gt(d=>{d.propertyName==="height"&&(i(),r==="close"&&s())},[r,s,i]),u=bse({isAnimatingOpenOnMount:a,animate:t.animate,placeholder:t.placeholder});return Pt.createElement(t.placeholder.tagName,{style:u,"data-rfd-placeholder-context-id":o,onTransitionEnd:c,ref:t.innerRef})};var Sse=Pt.memo(_se);class kse extends Pt.PureComponent{constructor(...e){super(...e),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(e,n){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!e.on,data:e.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)}}const Nse=t=>{const e=Y.useContext(x2);e||St();const{contextId:n,isMovementAllowed:r}=e,i=Y.useRef(null),s=Y.useRef(null),{children:o,droppableId:a,type:l,mode:c,direction:u,ignoreContainerClipping:d,isDropDisabled:h,isCombineEnabled:p,snapshot:y,useClone:x,updateViewportMaxScroll:v,getContainerForClone:b}=t,S=Gt(()=>i.current,[]),k=Gt((D=null)=>{i.current=D},[]);Gt(()=>s.current,[]);const T=Gt((D=null)=>{s.current=D},[]),j=Gt(()=>{r()&&v({maxScroll:hM()})},[r,v]);vse({droppableId:a,type:l,mode:c,direction:u,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:S});const P=Mn(()=>Pt.createElement(kse,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},({onClose:D,data:M,animate:H})=>Pt.createElement(Sse,{placeholder:M,onClose:D,innerRef:T,animate:H,contextId:n,onTransitionEnd:j})),[n,j,t.placeholder,t.shouldAnimatePlaceholder,T]),C=Mn(()=>({innerRef:k,placeholder:P,droppableProps:{"data-rfd-droppable-id":a,"data-rfd-droppable-context-id":n}}),[n,a,P,k]),N=x?x.dragging.draggableId:null,L=Mn(()=>({droppableId:a,type:l,isUsingCloneFor:N}),[a,N,l]);function R(){if(!x)return null;const{dragging:D,render:M}=x,H=Pt.createElement(PM,{draggableId:D.draggableId,index:D.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(W,Z)=>M(W,Z,D));return z6.createPortal(H,b())}return Pt.createElement(X4.Provider,{value:L},o(C,y),R())};var Cse=Nse;function Ese(){return document.body||St(),document.body}const mT={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Ese},MM=t=>{let e={...t},n;for(n in mT)t[n]===void 0&&(e={...e,[n]:mT[n]});return e},Fb=(t,e)=>t===e.droppable.type,gT=(t,e)=>e.draggables[t.draggable.id],Ase=()=>{const t={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},e={...t,shouldAnimatePlaceholder:!1},n=Wi(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),r=Wi((s,o,a,l,c,u)=>{const d=c.descriptor.id;if(c.descriptor.droppableId===s){const y=u?{render:u,dragging:n(c.descriptor)}:null,x={isDraggingOver:a,draggingOverWith:a?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:y}}if(!o)return e;if(!l)return t;const p={isDraggingOver:a,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:c.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(s,o)=>{const a=MM(o),l=a.droppableId,c=a.type,u=!a.isDropDisabled,d=a.renderClone;if(Hg(s)){const h=s.critical;if(!Fb(c,h))return e;const p=gT(h,s.dimensions),y=oa(s.impact)===l;return r(l,u,y,y,p,d)}if(s.phase==="DROP_ANIMATING"){const h=s.completed;if(!Fb(c,h.critical))return e;const p=gT(h.critical,s.dimensions);return r(l,u,TM(h.result)===l,oa(h.impact)===l,p,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const h=s.completed;if(!Fb(c,h.critical))return e;const p=oa(h.impact)===l,y=!!(h.impact.at&&h.impact.at.type==="COMBINE"),x=h.critical.droppable.id===l;return p?y?t:e:x?t:e}return e}},Tse={updateViewportMaxScroll:Nne},jse=D8(Ase,Tse,(t,e,n)=>({...MM(n),...t,...e}),{context:q4,areStatePropsEqual:AM})(Cse);var zb=jse;const Pse=({product:t,isOpen:e,onClose:n,onSave:r})=>{const[i,s]=Y.useState({name:"",description:"",price:0,deposit:0,image:"",categories:["budowlany"],quantity:1,specifications:[],features:[],variants:[],technical_details:{}}),[o,a]=Y.useState(!1),[l,c]=Y.useState(!1),[u,d]=Y.useState(null),[h,p]=Y.useState({}),y=Y.useRef(null),x=Y.useRef(null),v=YZ({extensions:[QQ,eee.configure({placeholder:"Wprowad opis produktu..."})],content:i.description,onUpdate:({editor:W})=>{s(Z=>({...Z,description:W.getHTML()}))}});Y.useEffect(()=>{t&&(s({...t,specifications:t.specifications||[],features:t.features||[],variants:t.variants||[],technical_details:t.technical_details||{}}),d(t.image))},[t]);const b=async W=>{W.preventDefault(),a(!1);const Z=W.dataTransfer.files[0];Z&&await S(Z)},S=async W=>{try{const B=await As(W,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),F=new FileReader;F.onloadend=()=>{d(F.result),s(Q=>({...Q,image:F.result}))},F.readAsDataURL(B)}catch(Z){console.error("Error compressing image:",Z)}},k=(W,Z,B)=>{s(F=>({...F,specifications:F.specifications.map(Q=>Q.id===W?{...Q,[Z]:B}:Q)}))},T=()=>{s(W=>({...W,specifications:[...W.specifications,{id:crypto.randomUUID(),key:"",value:""}]}))},j=W=>{s(Z=>({...Z,specifications:Z.specifications.filter(B=>B.id!==W)}))},P=(W,Z)=>{s(B=>({...B,features:B.features.map(F=>F.id===W?{...F,text:Z}:F)}))},C=()=>{s(W=>({...W,features:[...W.features,{id:crypto.randomUUID(),text:""}]}))},N=W=>{s(Z=>({...Z,features:Z.features.filter(B=>B.id!==W)}))},L=(W,Z,B)=>{s(F=>({...F,variants:F.variants.map(Q=>Q.id===W?{...Q,[Z]:B}:Q)}))},R=()=>{s(W=>({...W,variants:[...W.variants,{id:crypto.randomUUID(),name:"",price:0}]}))},D=W=>{s(Z=>({...Z,variants:Z.variants.filter(B=>B.id!==W)}))},M=()=>{const W={};return i.name.trim()||(W.name="Nazwa produktu jest wymagana"),i.description.trim()||(W.description="Opis produktu jest wymagany"),i.price<=0&&(W.price="Cena musi by wiksza od 0"),i.quantity<0&&(W.quantity="Ilo nie moe by ujemna"),i.image||(W.image="Zdjcie produktu jest wymagane"),p(W),Object.keys(W).length===0},H=async W=>{if(W.preventDefault(),!!M()){c(!0);try{await r(i),n()}catch(Z){console.error("Error saving product:",Z)}finally{c(!1)}}};return e?m.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50",children:m.jsx("div",{className:"min-h-screen px-4 text-center",children:m.jsx("div",{className:"inline-block w-full max-w-6xl my-8 text-left align-middle",children:m.jsx(Ii.div,{ref:x,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-lg shadow-xl overflow-hidden",children:m.jsxs("form",{onSubmit:H,children:[m.jsxs("div",{className:"px-6 py-4 border-b flex items-center justify-between",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:t?"Edytuj produkt":"Dodaj nowy produkt"}),m.jsx("button",{type:"button",onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:m.jsx(du,{className:"w-6 h-6"})})]}),m.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nazwa produktu"}),m.jsx("input",{type:"text",value:i.name,onChange:W=>s(Z=>({...Z,name:W.target.value})),className:`mt-1 block w-full rounded-md border ${h.name?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.name&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.name})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kategoria"}),m.jsxs("select",{value:i.categories[0],onChange:W=>s(Z=>({...Z,categories:[W.target.value]})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"budowlany",children:"Sprzt budowlany"}),m.jsx("option",{value:"ogrodniczy",children:"Sprzt ogrodniczy"})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cena (z/dzie)"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:i.price,onChange:W=>s(Z=>({...Z,price:parseFloat(W.target.value)})),className:`mt-1 block w-full rounded-md border ${h.price?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.price&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.price})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kaucja (z)"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:i.deposit,onChange:W=>s(Z=>({...Z,deposit:parseFloat(W.target.value)})),className:"mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dostpna ilo"}),m.jsx("input",{type:"number",min:"0",value:i.quantity,onChange:W=>s(Z=>({...Z,quantity:parseInt(W.target.value)})),className:`mt-1 block w-full rounded-md border ${h.quantity?"border-red-500":"border-gray-300"} px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500`}),h.quantity&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.quantity})]})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zdjcie produktu"}),m.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 text-center ${o?"border-blue-500 bg-blue-50":"border-gray-300"} ${h.image?"border-red-500":""}`,onDragOver:W=>{W.preventDefault(),a(!0)},onDragLeave:()=>a(!1),onDrop:b,children:[u?m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:u,alt:"Preview",className:"max-h-48 mx-auto object-contain"}),m.jsx("button",{type:"button",onClick:()=>{d(null),s(W=>({...W,image:""}))},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:m.jsx(du,{className:"w-4 h-4"})})]}):m.jsxs("div",{className:"cursor-pointer",onClick:()=>{var W;return(W=y.current)==null?void 0:W.click()},children:[m.jsx(Tz,{className:"w-12 h-12 mx-auto text-gray-400"}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Przecignij i upu zdjcie lub kliknij, aby wybra"})]}),m.jsx("input",{ref:y,type:"file",accept:"image/*",className:"hidden",onChange:W=>{var B;const Z=(B=W.target.files)==null?void 0:B[0];Z&&S(Z)}})]}),h.image&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.image})]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Opis produktu"}),m.jsx(BZ,{editor:v,className:`prose max-w-none border rounded-lg p-4 min-h-[200px] ${h.description?"border-red-500":"border-gray-300"}`}),h.description&&m.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.description})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Specyfikacja techniczna"}),m.jsxs("button",{type:"button",onClick:T,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[m.jsx(_l,{className:"w-4 h-4 mr-1"}),"Dodaj parametr"]})]}),m.jsx(Mb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.specifications),[B]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,B),s(F=>({...F,specifications:Z}))},children:m.jsx(zb,{droppableId:"specifications",children:W=>m.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.specifications.map((Z,B)=>m.jsx(Ib,{draggableId:Z.id,index:B,children:F=>m.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:Z.key,onChange:Q=>k(Z.id,"key",Q.target.value),placeholder:"Parametr",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),m.jsx("input",{type:"text",value:Z.value,onChange:Q=>k(Z.id,"value",Q.target.value),placeholder:"Warto",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),m.jsx("button",{type:"button",onClick:()=>j(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:m.jsx(lc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gwne cechy"}),m.jsxs("button",{type:"button",onClick:C,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[m.jsx(_l,{className:"w-4 h-4 mr-1"}),"Dodaj cech"]})]}),m.jsx(Mb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.features),[B]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,B),s(F=>({...F,features:Z}))},children:m.jsx(zb,{droppableId:"features",children:W=>m.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.features.map((Z,B)=>m.jsx(Ib,{draggableId:Z.id,index:B,children:F=>m.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:Z.text,onChange:Q=>P(Z.id,Q.target.value),placeholder:"Cecha produktu",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),m.jsx("button",{type:"button",onClick:()=>N(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:m.jsx(lc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Warianty produktu"}),m.jsxs("button",{type:"button",onClick:R,className:"text-blue-600 hover:text-blue-700 text-sm flex items-center",children:[m.jsx(_l,{className:"w-4 h-4 mr-1"}),"Dodaj wariant"]})]}),m.jsx(Mb,{onDragEnd:W=>{if(!W.destination)return;const Z=Array.from(i.variants),[B]=Z.splice(W.source.index,1);Z.splice(W.destination.index,0,B),s(F=>({...F,variants:Z}))},children:m.jsx(zb,{droppableId:"variants",children:W=>m.jsxs("div",{ref:W.innerRef,...W.droppableProps,className:"space-y-2",children:[i.variants.map((Z,B)=>m.jsx(Ib,{draggableId:Z.id,index:B,children:F=>m.jsxs("div",{ref:F.innerRef,...F.draggableProps,...F.dragHandleProps,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:Z.name,onChange:Q=>L(Z.id,"name",Q.target.value),placeholder:"Nazwa wariantu",className:"flex-1 rounded-md border border-gray-300 px-3 py-2"}),m.jsx("input",{type:"number",min:"0",step:"0.01",value:Z.price,onChange:Q=>L(Z.id,"price",parseFloat(Q.target.value)),placeholder:"Cena",className:"w-32 rounded-md border border-gray-300 px-3 py-2"}),m.jsx("button",{type:"button",onClick:()=>D(Z.id),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:m.jsx(lc,{className:"w-5 h-5"})})]})},Z.id)),W.placeholder]})})})]})]})]})}),m.jsxs("div",{className:"px-6 py-4 border-t bg-gray-50 flex justify-end space-x-4",children:[m.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Anuluj"}),m.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center",children:l?m.jsxs(m.Fragment,{children:[m.jsx(b0,{className:"w-5 h-5 mr-2 animate-spin"}),"Zapisywanie..."]}):m.jsxs(m.Fragment,{children:[m.jsx(eS,{className:"w-5 h-5 mr-2"}),"Zapisz produkt"]})})]})]})})})})}):null},Dse=({onExport:t})=>m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:()=>t("csv"),className:"px-3 py-1.5 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-1.5 text-sm",children:[m.jsx(Ch,{className:"w-4 h-4"}),"Eksportuj CSV"]}),m.jsxs("button",{onClick:()=>t("pdf"),className:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-1.5 text-sm",children:[m.jsx(Uv,{className:"w-4 h-4"}),"Eksportuj PDF"]})]}),Ose=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState(!0),[i,s]=Y.useState(null),[o,a]=Y.useState(null),[l,c]=Y.useState(!1);Y.useEffect(()=>{u()},[]);const u=async()=>{try{r(!0);const{data:p,error:y}=await ct.from("equipment").select(`
          *,
          specifications (*),
          features (*),
          variants (*)
        `).order("name");if(y)throw y;e(p||[]),s(null)}catch(p){console.error("Error loading equipment:",p),s("Nie udao si zaadowa sprztu")}finally{r(!1)}},d=async p=>{var y,x,v;try{if(r(!0),s(null),p.id){const{error:b}=await ct.from("equipment").update({name:p.name,description:p.description,price:p.price,promotional_price:p.promotional_price,deposit:p.deposit,image:p.image,categories:p.categories,quantity:p.quantity,purchase_date:p.purchase_date,purchase_price:p.purchase_price}).eq("id",p.id);if(b)throw b;p.specifications&&(await ct.from("specifications").delete().eq("equipment_id",p.id),await ct.from("specifications").insert(p.specifications.map(S=>({...S,equipment_id:p.id})))),p.features&&(await ct.from("features").delete().eq("equipment_id",p.id),await ct.from("features").insert(p.features.map(S=>({...S,equipment_id:p.id})))),p.variants&&(await ct.from("variants").delete().eq("equipment_id",p.id),await ct.from("variants").insert(p.variants.map(S=>({...S,equipment_id:p.id}))))}else{const{data:b,error:S}=await ct.from("equipment").insert({name:p.name,description:p.description,price:p.price,promotional_price:p.promotional_price,deposit:p.deposit,image:p.image,categories:p.categories,quantity:p.quantity,purchase_date:p.purchase_date,purchase_price:p.purchase_price}).select().single();if(S)throw S;(y=p.specifications)!=null&&y.length&&await ct.from("specifications").insert(p.specifications.map(k=>({...k,equipment_id:b.id}))),(x=p.features)!=null&&x.length&&await ct.from("features").insert(p.features.map(k=>({...k,equipment_id:b.id}))),(v=p.variants)!=null&&v.length&&await ct.from("variants").insert(p.variants.map(k=>({...k,equipment_id:b.id})))}await u(),c(!1)}catch(b){console.error("Error saving product:",b),s("Nie udao si zapisa produktu")}finally{r(!1)}},h=async p=>{if(window.confirm("Czy na pewno chcesz usun ten produkt?"))try{r(!0);const{error:y}=await ct.from("equipment").delete().eq("id",p);if(y)throw y;await u()}catch(y){console.error("Error deleting product:",y),s("Nie udao si usun produktu")}finally{r(!1)}};return n?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})}):i?m.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:m.jsx("p",{children:i})}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Zarzdzanie sprztem"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx(Dse,{equipmentData:t}),m.jsxs("button",{onClick:()=>{a(null),c(!0)},className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[m.jsx(_l,{className:"w-5 h-5"}),"Dodaj sprzt"]})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>m.jsxs(Ii.div,{layout:!0,className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsx("div",{className:"h-48 bg-gray-200 relative",children:m.jsx("img",{src:p.image,alt:p.name,className:"w-full h-full object-contain"})}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:p.name}),m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:p.description}),m.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"text-lg font-bold text-solrent-orange",children:[p.price," z/dzie"]}),p.deposit>0&&m.jsxs("p",{className:"text-sm text-gray-600",children:["Kaucja: ",p.deposit," z"]})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>{a(p),c(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:m.jsx(_0,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>h(p.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:m.jsx(lc,{className:"w-5 h-5"})})]})]})]})]},p.id))}),m.jsx(Pse,{product:o,isOpen:l,onClose:()=>c(!1),onSave:d})]})},Lse=()=>{const[t,e]=Y.useState([]),[n,r]=Y.useState(null),[i,s]=Y.useState([]),[o,a]=Y.useState(!1);Y.useEffect(()=>{l(),c()},[]);const l=async()=>{const{data:h,error:p}=await ct.from("advertisements").select("*").order("display_order",{ascending:!0});if(p){console.error("Error fetching ads:",p);return}e(h||[])},c=async()=>{const{data:h,error:p}=await ct.from("equipment").select("id, name");if(p){console.error("Error fetching products:",p);return}s(h||[])},u=async h=>{a(!0);try{if(h.id){const{error:p}=await ct.from("advertisements").update({title:h.title,content:h.content,image_url:h.image_url,product_id:h.product_id,start_date:h.start_date,end_date:h.end_date,is_active:h.is_active,device_type:h.device_type,display_order:h.display_order}).eq("id",h.id);if(p)throw p}else{const{error:p}=await ct.from("advertisements").insert([{...h,display_order:t.length}]);if(p)throw p}await l(),r(null)}catch(p){console.error("Error saving ad:",p)}finally{a(!1)}},d=async h=>{if(!window.confirm("Czy na pewno chcesz usun t reklam?"))return;const{error:p}=await ct.from("advertisements").delete().eq("id",h);if(p){console.error("Error deleting ad:",p);return}await l()};return m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Zarzdzanie reklamami"}),m.jsxs("button",{onClick:()=>r({id:"",title:"",content:"",image_url:"",product_id:"",start_date:new Date().toISOString(),end_date:new Date(Date.now()+7*24*60*60*1e3).toISOString(),is_active:!0,display_order:t.length,device_type:"all"}),className:"flex items-center px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:[m.jsx(_l,{className:"w-5 h-5 mr-2"}),"Dodaj reklam"]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(h=>m.jsxs(Ii.div,{layout:!0,className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[h.image_url&&m.jsx("img",{src:h.image_url,alt:h.title,className:"w-full h-48 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-medium text-lg mb-2",children:h.title}),m.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h.content}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[m.jsx(kl,{className:"w-4 h-4 mr-2"}),m.jsxs("span",{children:[new Date(h.start_date).toLocaleDateString()," - ",new Date(h.end_date).toLocaleDateString()]})]}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[m.jsx(Dz,{className:"w-4 h-4 mr-2"}),m.jsx("span",{children:h.device_type==="all"?"Wszystkie urzdzenia":h.device_type==="desktop"?"Tylko desktop":"Tylko mobile"})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>r(h),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:m.jsx(_0,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>d(h.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:m.jsx(lc,{className:"w-5 h-5"})})]})]})]},h.id))}),n&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-xl font-medium mb-4",children:n.id?"Edytuj reklam":"Dodaj now reklam"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tytu"}),m.jsx("input",{type:"text",value:n.title,onChange:h=>r({...n,title:h.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tre"}),m.jsx("textarea",{value:n.content,onChange:h=>r({...n,content:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",rows:3})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL obrazu"}),m.jsx("input",{type:"text",value:n.image_url,onChange:h=>r({...n,image_url:h.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data rozpoczcia"}),m.jsx("input",{type:"datetime-local",value:n.start_date.slice(0,16),onChange:h=>r({...n,start_date:new Date(h.target.value).toISOString()}),className:"w-full px-3 py-2 border rounded-lg"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data zakoczenia"}),m.jsx("input",{type:"datetime-local",value:n.end_date.slice(0,16),onChange:h=>r({...n,end_date:new Date(h.target.value).toISOString()}),className:"w-full px-3 py-2 border rounded-lg"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Powizany produkt"}),m.jsxs("select",{value:n.product_id,onChange:h=>r({...n,product_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[m.jsx("option",{value:"",children:"Brak"}),i.map(h=>m.jsx("option",{value:h.id,children:h.name},h.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Typ urzdzenia"}),m.jsxs("select",{value:n.device_type,onChange:h=>r({...n,device_type:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[m.jsx("option",{value:"all",children:"Wszystkie urzdzenia"}),m.jsx("option",{value:"desktop",children:"Tylko desktop"}),m.jsx("option",{value:"mobile",children:"Tylko mobile"})]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:n.is_active,onChange:h=>r({...n,is_active:h.target.checked}),className:"h-4 w-4 text-solrent-orange rounded border-gray-300"}),m.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Aktywna"})]})]}),m.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Anuluj"}),m.jsxs("button",{onClick:()=>u(n),disabled:o,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center",children:[m.jsx(eS,{className:"w-5 h-5 mr-2"}),o?"Zapisywanie...":"Zapisz"]})]})]})})})]})},Mse=[{value:"pending",label:"Oczekujca",color:"bg-yellow-100 text-yellow-800",icon:m.jsx(Q_,{className:"w-5 h-5"})},{value:"confirmed",label:"Potwierdzona",color:"bg-green-100 text-green-800",icon:m.jsx(ac,{className:"w-5 h-5"})},{value:"picked_up",label:"Odbierana",color:"bg-blue-100 text-blue-800",icon:m.jsx(Mz,{className:"w-5 h-5"})},{value:"completed",label:"Zakoczona",color:"bg-gray-100 text-gray-800",icon:m.jsx(_z,{className:"w-5 h-5"})},{value:"cancelled",label:"Anulowana",color:"bg-red-100 text-red-800",icon:m.jsx(Cx,{className:"w-5 h-5"})}],IM=({isOpen:t,onClose:e,selectedDate:n,selectedEquipment:r,onSuccess:i})=>{const s=ua(),o=El(),[a]=mz(),{id:l}=zv(),c=a.get("date"),u=a.get("equipmentId"),d=n||(c?new Date(c):void 0),h=r||(u?{id:u,name:""}:void 0),[p,y]=Y.useState(!1),[x,v]=Y.useState(!1),[b,S]=Y.useState(""),[k,T]=Y.useState(""),[j,P]=Y.useState({first_name:"",last_name:"",email:"",phone:"",company_name:"",company_nip:"",company_address:"",company_city:"",company_postal_code:""}),[C,N]=Y.useState([]),[L,R]=Y.useState([{id:"gas",name:"Butla gazowa",price:50,quantity:0},{id:"vacuum",name:"Odkurzacz do yrafy",price:25,quantity:0},{id:"powder",name:"Proszek piorcy Krcher 100g",price:10,quantity:0},{id:"scaffold",name:"RUSZTOWANIE",price:100,quantity:0},{id:"disc",name:"Tarcza do gipsu",price:15,quantity:0},{id:"drill152",name:"Wierto do wiertnicy 152 mm",price:40,quantity:0},{id:"drill202",name:"Wierto do wiertnicy 202 mm",price:80,quantity:0},{id:"drill82",name:"Wierto do wiertnicy 82, 112, 132 mm",price:30,quantity:0}]),[D,M]=Y.useState([]),[H,W]=Y.useState(""),[Z,B]=Y.useState(!1),[F,Q]=Y.useState(!1);Y.useEffect(()=>{(async()=>{try{const{data:ne,error:ge}=await ct.from("equipment").select("*").order("name");if(ge)throw ge;ne&&M(ne)}catch(ne){console.error("Error loading equipment:",ne)}})()},[]),Y.useEffect(()=>{if(h){const V=D.find(ne=>ne.id===h.id);V&&N([{id:V.id,name:V.name,quantity:1,price:V.price_per_day,deposit:V.deposit}])}},[h,D]);const ee=async V=>{V.preventDefault(),v(!0);try{const{data:ne}=await ct.from("customers").select("id").eq("email",j.email).single();let ge;if(ne){const{error:xe}=await ct.from("customers").update({first_name:j.first_name,last_name:j.last_name,phone:j.phone,is_company:j.company_name?!0:null,company_name:j.company_name,nip:j.company_nip,street:j.company_address,city:j.company_city,postal_code:j.company_postal_code}).eq("id",ne.id);if(xe)throw xe;ge=ne.id}else{const{data:xe,error:Se}=await ct.from("customers").insert({first_name:j.first_name,last_name:j.last_name,email:j.email,phone:j.phone,is_company:j.company_name?!0:null,company_name:j.company_name,nip:j.company_nip,street:j.company_address,city:j.company_city,postal_code:j.company_postal_code}).select().single();if(Se)throw Se;ge=xe.id}let ye;if(d&&C.length>0){const{data:xe,error:Se}=await ct.from("reservations").insert({customer_id:ge,start_date:d.toISOString(),end_date:d.toISOString(),start_time:"08:00",end_time:"16:00",status:"pending",reservation_items:C.map($e=>({equipment_id:$e.id,quantity:$e.quantity}))}).select().single();if(Se)throw Se;ye=xe.id;const He=L.filter($e=>$e.quantity>0).map($e=>({reservation_id:xe.id,service_id:$e.id,quantity:$e.quantity,price:$e.price}));if(He.length>0){const{error:$e}=await ct.from("reservation_services").insert(He);if($e)throw $e}await ct.functions.invoke("notify-new-reservation",{body:{reservation_id:xe.id,customer_id:ge}})}T("Rezerwacja zostaa utworzona"),ye&&s(`/reservations/${ye}`),i&&i()}catch(ne){console.error("Error saving changes:",ne),S("Wystpi bd podczas zapisywania rezerwacji")}finally{v(!1)}},te=V=>{const{name:ne,value:ge,type:ye,checked:xe}=V.target;P(Se=>({...Se,[ne]:ye==="checkbox"?xe:ge}))},re=(V,ne)=>{R(ge=>{const ye=ge.find(Se=>Se.id===V);if(!ye)return ge;const xe=Math.max(0,ye.quantity+ne);return xe===0?window.confirm("Czy na pewno chcesz usun t usug?")?ge.filter(Se=>Se.id!==V):ge:ge.map(Se=>Se.id===V?{...Se,quantity:xe}:Se)})},O=V=>{W(V.target.value),B(!0)},X=V=>{N(ne=>ne.find(ye=>ye.id===V.id)?ne.map(ye=>ye.id===V.id?{...ye,quantity:ye.quantity+1}:ye):[...ne,{id:V.id,name:V.name,quantity:1,price:V.price_per_day,deposit:V.deposit}]),W(""),B(!1)},q=()=>{let V=0;return C.forEach(ne=>{V+=ne.price*ne.quantity}),L.forEach(ne=>{V+=ne.price*ne.quantity}),V};return p?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-solrent-orange"})}):m.jsxs("div",{className:"p-6",children:[m.jsxs("button",{onClick:()=>{var V;(V=o.state)!=null&&V.from?s(o.state.from):s(-1)},className:"mb-6 flex items-center text-gray-600 hover:text-gray-900",children:[m.jsx(Sx,{className:"w-5 h-5 mr-2"}),"Powrt do listy"]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Status rezerwacji"}),m.jsx(Q_,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Mse.map(V=>{const ne=V.value==="pending";return m.jsxs("button",{disabled:x||V.value!=="pending",className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${ne?`${V.color} ring-2 ring-offset-2 ring-${V.color.split(" ")[0]}`:`hover:${V.color} bg-white border border-gray-200`}`,children:[V.icon,V.label]},V.value)})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[m.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dane klienta"}),m.jsx(wg,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Imi*"}),m.jsx("input",{type:"text",name:"first_name",value:j.first_name,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko*"}),m.jsx("input",{type:"text",name:"last_name",value:j.last_name,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email*"}),m.jsx("input",{type:"email",name:"email",value:j.email,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon*"}),m.jsx("input",{type:"tel",name:"phone",value:j.phone,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",name:"isCompanyCustomer",checked:F,onChange:V=>Q(V.target.checked),className:"h-4 w-4 text-solrent-orange focus:ring-solrent-orange border-gray-300 rounded"}),m.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Klient firmowy"})]}),F&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa firmy*"}),m.jsx("input",{type:"text",name:"company_name",value:j.company_name,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP*"}),m.jsx("input",{type:"text",name:"company_nip",value:j.company_nip,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres*"}),m.jsx("input",{type:"text",name:"company_address",value:j.company_address,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto*"}),m.jsx("input",{type:"text",name:"company_city",value:j.company_city,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy*"}),m.jsx("input",{type:"text",name:"company_postal_code",value:j.company_postal_code,onChange:te,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Szczegy rezerwacji"}),m.jsx(kl,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Data rozpoczcia"}),m.jsx("p",{className:"font-medium",children:d?d.toLocaleDateString("pl-PL"):"Nie wybrano daty"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),m.jsx("p",{className:"font-medium",children:"08:00"})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Data zakoczenia"}),m.jsx("p",{className:"font-medium",children:d?d.toLocaleDateString("pl-PL"):"Nie wybrano daty"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),m.jsx("p",{className:"font-medium",children:"16:00"})]}),m.jsxs("div",{className:"pt-4 border-t",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Cakowita warto"}),m.jsxs("p",{className:"text-xl font-bold text-solrent-orange",children:[q()," z"]})]})]})]})]}),m.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Zarezerwowany sprzt"}),m.jsx(Qs,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("div",{className:"space-y-4",children:[C.map((V,ne)=>m.jsxs("div",{className:"flex justify-between items-start pb-4 border-b last:border-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:V.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Ilo: ",V.quantity]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"font-medium",children:[V.price," z/dzie"]}),V.deposit>0&&m.jsxs("p",{className:"text-sm text-orange-600",children:["Kaucja: ",V.deposit," z"]})]})]},ne)),C.length===0&&m.jsx("p",{className:"text-gray-500 text-center",children:"Brak zarezerwowanego sprztu"})]}),m.jsx("div",{className:"mt-4",children:m.jsx("input",{type:"text",value:H,onChange:O,placeholder:"Wyszukaj sprzt...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})}),Z&&m.jsx("div",{className:"mt-2 max-h-60 overflow-y-auto",children:D.filter(V=>V.name.toLowerCase().includes(H.toLowerCase())).map(V=>m.jsxs("button",{onClick:()=>X(V),className:"w-full text-left px-3 py-2 hover:bg-gray-100 rounded-lg",children:[m.jsx("p",{className:"font-medium",children:V.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:[V.price_per_day," z/dzie",V.deposit>0&&`  Kaucja: ${V.deposit} z`]})]},V.id))})]}),L.some(V=>V.quantity>0)&&m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usugi dodatkowe"}),m.jsx(Qs,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:L.filter(V=>V.quantity>0).map((V,ne)=>m.jsxs("div",{className:"flex justify-between items-center pb-4 border-b last:border-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:V.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Cena: ",V.price," z"]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>re(V.id,-1),className:"p-1 rounded-full hover:bg-gray-100",children:m.jsx(Nx,{className:"w-5 h-5"})}),m.jsx("span",{className:"w-8 text-center",children:V.quantity}),m.jsx("button",{onClick:()=>re(V.id,1),className:"p-1 rounded-full hover:bg-gray-100",children:m.jsx(_l,{className:"w-5 h-5"})})]})]},ne))})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Komentarze"}),m.jsx(x5,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:m.jsx("p",{className:"text-gray-500 text-center",children:"Brak komentarzy"})})]})]})]}),m.jsx("div",{className:"mt-6 flex justify-end",children:m.jsx("button",{onClick:ee,disabled:x,className:"px-6 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Zapisywanie...":"Zapisz rezerwacj"})})]})},Ise=["PON","WT","R","CZW","PT","SOB","NIEDZ"],Rse=()=>{const t=ua(),[e,n]=Y.useState([]),[r,i]=Y.useState([]),[s,o]=Y.useState(new Date),[a,l]=Y.useState(!0),[c,u]=Y.useState(null),[d,h]=Y.useState(!1),[p,y]=Y.useState(null);Y.useEffect(()=>{x(),v()},[s]);const x=async()=>{const{data:R,error:D}=await ct.from("equipment").select("id, name").order("name");if(D){console.error("Error loading equipment:",D);return}n(R||[])},v=async()=>{const R=new Date(s.getFullYear(),s.getMonth(),1),D=new Date(s.getFullYear(),s.getMonth()+1,0),{data:M,error:H}=await ct.from("reservations").select(`
        id,
        customer:customers (
          first_name,
          last_name
        ),
        start_date,
        end_date,
        start_time,
        end_time,
        status,
        reservation_items!inner (
          equipment_id
        )
      `).gte("start_date",R.toISOString()).lte("end_date",D.toISOString()).neq("status","cancelled");if(H){console.error("Error loading reservations:",H);return}const W=(M||[]).map(Z=>{var B,F;return{id:Z.id,customer:{first_name:((B=Z.customer)==null?void 0:B.first_name)||"",last_name:((F=Z.customer)==null?void 0:F.last_name)||""},start_date:Z.start_date,end_date:Z.end_date,start_time:Z.start_time,end_time:Z.end_time,status:Z.status,reservation_items:Z.reservation_items||[]}});i(W),l(!1)},b=()=>{const R=s.getFullYear(),D=s.getMonth();return new Date(R,D+1,0).getDate()},S=(R,D,M)=>{const H=new Date(R.start_date),W=new Date(R.end_date),Z=H<D?1:H.getDate(),B=W>M?M.getDate():W.getDate();return{startDay:Z,endDay:B,span:B-Z+1}},k=(R,D)=>`${D} ${R}`,T=(R,D,M,H)=>{const W=new Date(R),Z=new Date(D);return Math.ceil((Z.getTime()-W.getTime())/(1e3*60*60*24))>=4?`${W.getDate()}.${W.getMonth()+1} ${M} - ${Z.getDate()}.${Z.getMonth()+1} ${H}`:`${W.getDate()}-${Z.getDate()}`},j=(R,D,M)=>{const H=R.customer.last_name,W=R.customer.first_name,Z=new Date(R.start_date),B=new Date(R.end_date),F=Math.ceil((B.getTime()-Z.getTime())/(1e3*60*60*24));if(F>=4){const Q=k(W,H),ee=T(R.start_date,R.end_date,R.start_time,R.end_time);return`${Q}
${ee}`}if(F>=2&&F<=3){const Q=T(R.start_date,R.end_date,R.start_time,R.end_time);return`${D<100?`${H} ${W[0]}.`:`${H} ${W}`}
${Q}`}return`${H}
${Z.getDate()}`},P=(R,D)=>{const M="absolute inset-1 rounded p-1.5 cursor-pointer transition-all duration-300 text-sm flex flex-col items-center justify-center",H=Math.ceil((new Date(R.end_date).getTime()-new Date(R.start_date).getTime())/864e5);return H>=4?`${M} bg-gradient-to-r from-indigo-100 to-blue-50 hover:from-indigo-200 hover:to-blue-100 text-center font-medium`:H>=2?`${M} bg-gradient-to-r from-blue-100 to-blue-50 hover:from-blue-200 hover:to-blue-100 text-center font-medium`:`${M} bg-blue-50 hover:bg-blue-100 font-medium text-center`},C=()=>{const R=Array.from({length:b()},(D,M)=>M+1);return m.jsxs("div",{className:"grid grid-cols-[200px_1fr] border-b",children:[m.jsx("div",{className:"p-4 font-medium text-gray-700 border-r",children:"Nazwa sprztu"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsx("div",{className:"grid grid-cols-31 min-w-[1240px]",children:R.map(D=>{const M=new Date(s.getFullYear(),s.getMonth(),D),H=Ise[M.getDay()===0?6:M.getDay()-1];return m.jsxs("div",{className:"p-2 text-center border-r last:border-r-0",children:[m.jsx("div",{className:"font-bold text-lg",children:D}),m.jsx("div",{className:"text-sm text-gray-500",children:H})]},D)})})})]})},N=(R,D)=>{const M=new Date(s.getFullYear(),s.getMonth(),D),H=e.find(W=>W.id===R);H&&t(`/admin/panel/reservations/new?date=${M.toISOString()}&equipmentId=${H.id}`)},L=()=>{v()};return m.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[m.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{onClick:()=>o(new Date(s.setMonth(s.getMonth()-1))),className:"p-3 md:p-2 hover:bg-gray-100 rounded-full touch-manipulation",children:m.jsx(Bv,{className:"w-5 h-5"})}),m.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:s.toLocaleString("pl-PL",{month:"long",year:"numeric"})}),m.jsx("button",{onClick:()=>o(new Date(s.setMonth(s.getMonth()+1))),className:"p-3 md:p-2 hover:bg-gray-100 rounded-full touch-manipulation",children:m.jsx(Z_,{className:"w-5 h-5"})})]}),m.jsxs("button",{onClick:()=>{},className:"hidden md:flex items-center px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:[m.jsx(Ch,{className:"w-5 h-5 mr-2"}),"Eksportuj"]})]}),a?m.jsxs("div",{className:"p-8 text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange mx-auto"}),m.jsx("p",{className:"mt-4 text-gray-500",children:"adowanie kalendarza..."})]}):m.jsxs("div",{className:"overflow-x-auto relative touch-pan-x",children:[C(),m.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[200px_1fr] relative",children:[m.jsx("div",{className:"border-r",children:e.map(R=>m.jsx("div",{className:"p-2 md:p-4 border-b last:border-b-0 h-[60px] flex items-center",children:m.jsx("div",{className:"text-xs md:text-base line-clamp-2 break-words min-w-[100px] md:min-w-[180px] max-w-full",children:R.name})},R.id))}),m.jsx("div",{className:"overflow-x-auto relative",children:m.jsx("div",{className:"min-w-[calc(100vw-120px)] md:min-w-[1240px]",children:e.map(R=>m.jsx("div",{className:"grid grid-cols-31 border-b last:border-b-0 h-[60px]",children:Array.from({length:b()}).map((D,M)=>{const H=r.filter(F=>F.reservation_items.some(Q=>Q.equipment_id===R.id)),W=new Date(s.getFullYear(),s.getMonth(),1),Z=new Date(s.getFullYear(),s.getMonth()+1,0),B=H.find(F=>{const{startDay:Q,endDay:ee}=S(F,W,Z);return M+1>=Q&&M+1<=ee});if(B){const{startDay:F,span:Q}=S(B,W,Z),ee=Q>1,te=Math.floor(1240/b());return M+1===F?m.jsx("div",{className:"relative",style:{gridColumn:`span ${Q}`},children:m.jsxs("div",{onClick:()=>t(`/admin/panel/reservations/${B.id}`),className:`${P(B)} min-h-[44px] touch-manipulation`,children:[m.jsx("div",{className:"text-[10px] md:text-xs whitespace-pre-line font-medium",children:j(B,te)}),ee&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-1",children:m.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full"})}),m.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 -mr-1",children:m.jsx("div",{className:"w-2 h-2 bg-blue-300 rounded-full"})})]})]})},M):null}return m.jsx("div",{className:"border-r last:border-r-0 h-[60px] relative group",onMouseEnter:()=>u({equipmentId:R.id,day:M+1}),onMouseLeave:()=>u(null),onClick:()=>N(R.id,M+1),children:(c==null?void 0:c.equipmentId)===R.id&&(c==null?void 0:c.day)===M+1&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-50/50 opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:m.jsx("div",{className:"w-8 h-8 rounded-full bg-solrent-orange text-white flex items-center justify-center text-xl font-bold shadow-lg transform group-hover:scale-110 transition-transform",children:"+"})})},M)})},R.id))})})]})]}),d&&p&&m.jsx(IM,{isOpen:d,onClose:()=>h(!1),selectedDate:p.date,selectedEquipment:p.equipment,onSuccess:L})]})};var Eo=Uint8Array,eo=Uint16Array,qg=Uint32Array,w2=new Eo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),b2=new Eo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),w_=new Eo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),RM=function(t,e){for(var n=new eo(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new qg(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},FM=RM(w2,2),zM=FM[0],b_=FM[1];zM[28]=258,b_[258]=28;var BM=RM(b2,0),Fse=BM[0],yT=BM[1],__=new eo(32768);for(var Pr=0;Pr<32768;++Pr){var id=(Pr&43690)>>>1|(Pr&21845)<<1;id=(id&52428)>>>2|(id&13107)<<2,id=(id&61680)>>>4|(id&3855)<<4,__[Pr]=((id&65280)>>>8|(id&255)<<8)>>>1}var dc=function(t,e,n){for(var r=t.length,i=0,s=new eo(e);i<r;++i)++s[t[i]-1];var o=new eo(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new eo(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],u=e-t[i],d=o[t[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[__[d]>>>l]=c}else for(a=new eo(r),i=0;i<r;++i)a[i]=__[o[t[i]-1]++]>>>15-t[i];return a},qd=new Eo(288);for(var Pr=0;Pr<144;++Pr)qd[Pr]=8;for(var Pr=144;Pr<256;++Pr)qd[Pr]=9;for(var Pr=256;Pr<280;++Pr)qd[Pr]=7;for(var Pr=280;Pr<288;++Pr)qd[Pr]=8;var Gg=new Eo(32);for(var Pr=0;Pr<32;++Pr)Gg[Pr]=5;var zse=dc(qd,9,0),Bse=dc(qd,9,1),Use=dc(Gg,5,0),$se=dc(Gg,5,1),Bb=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ul=function(t,e,n){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(e&7)&n},Ub=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(e&7)},Y4=function(t){return(t/8>>0)+(t&7&&1)},UM=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof eo?eo:t instanceof qg?qg:Eo)(n-e);return r.set(t.subarray(e,n)),r},Wse=function(t,e,n){var r=t.length,i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Eo(r*3));var o=function(ne){var ge=e.length;if(ne>ge){var ye=new Eo(Math.max(ge*2,ne));ye.set(e),e=ye}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,d=n.d,h=n.m,p=n.n,y=r*8;do{if(!u){n.f=a=ul(t,l,1);var x=ul(t,l+1,3);if(l+=3,x)if(x==1)u=Bse,d=$se,h=9,p=5;else if(x==2){var k=ul(t,l,31)+257,T=ul(t,l+10,15)+4,j=k+ul(t,l+5,31)+1;l+=14;for(var P=new Eo(j),C=new Eo(19),N=0;N<T;++N)C[w_[N]]=ul(t,l+N*3,7);l+=T*3;var L=Bb(C),R=(1<<L)-1;if(!s&&l+j*(L+7)>y)break;for(var D=dc(C,L,1),N=0;N<j;){var M=D[ul(t,l,R)];l+=M&15;var v=M>>>4;if(v<16)P[N++]=v;else{var H=0,W=0;for(v==16?(W=3+ul(t,l,3),l+=2,H=P[N-1]):v==17?(W=3+ul(t,l,7),l+=3):v==18&&(W=11+ul(t,l,127),l+=7);W--;)P[N++]=H}}var Z=P.subarray(0,k),B=P.subarray(k);h=Bb(Z),p=Bb(B),u=dc(Z,h,1),d=dc(B,p,1)}else throw"invalid block type";else{var v=Y4(l)+4,b=t[v-4]|t[v-3]<<8,S=v+b;if(S>r){if(s)throw"unexpected EOF";break}i&&o(c+b),e.set(t.subarray(v,S),c),n.b=c+=b,n.p=l=S*8;continue}if(l>y)throw"unexpected EOF"}i&&o(c+131072);for(var F=(1<<h)-1,Q=(1<<p)-1,ee=h+p+18;s||l+ee<y;){var H=u[Ub(t,l)&F],te=H>>>4;if(l+=H&15,l>y)throw"unexpected EOF";if(!H)throw"invalid length/literal";if(te<256)e[c++]=te;else if(te==256){u=null;break}else{var re=te-254;if(te>264){var N=te-257,O=w2[N];re=ul(t,l,(1<<O)-1)+zM[N],l+=O}var X=d[Ub(t,l)&Q],q=X>>>4;if(!X)throw"invalid distance";l+=X&15;var B=Fse[q];if(q>3){var O=b2[q];B+=Ub(t,l)&(1<<O)-1,l+=O}if(l>y)throw"unexpected EOF";i&&o(c+131072);for(var V=c+re;c<V;c+=4)e[c]=e[c-B],e[c+1]=e[c+1-B],e[c+2]=e[c+2-B],e[c+3]=e[c+3-B];c=V}}n.l=u,n.p=l,n.b=c,u&&(a=1,n.m=h,n.d=d,n.n=p)}while(!a);return c==e.length?e:UM(e,0,c)},Kc=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8},ym=function(t,e,n){n<<=e&7;var r=e/8>>0;t[r]|=n,t[r+1]|=n>>>8,t[r+2]|=n>>>16},$b=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return[new Eo(0),0];if(i==1){var o=new Eo(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(j,P){return j.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=i-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};for(var h=s[0].s,r=1;r<i;++r)s[r].s>h&&(h=s[r].s);var p=new eo(h+1),y=S_(n[u-1],p,0);if(y>e){var r=0,x=0,v=y-e,b=1<<v;for(s.sort(function(P,C){return p[C.s]-p[P.s]||P.f-C.f});r<i;++r){var S=s[r].s;if(p[S]>e)x+=b-(1<<y-p[S]),p[S]=e;else break}for(x>>>=v;x>0;){var k=s[r].s;p[k]<e?x-=1<<e-p[k]++-1:++r}for(;r>=0&&x;--r){var T=s[r].s;p[T]==e&&(--p[T],++x)}y=e}return[new Eo(p),y]},S_=function(t,e,n){return t.s==-1?Math.max(S_(t.l,e,n+1),S_(t.r,e,n+1)):e[t.s]=n},xT=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new eo(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return[n.subarray(0,r),e]},xm=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},k_=function(t,e,n){var r=n.length,i=Y4(e+2);t[i]=r&255,t[i+1]=r>>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},vT=function(t,e,n,r,i,s,o,a,l,c,u){Kc(e,u++,n),++i[256];for(var d=$b(i,15),h=d[0],p=d[1],y=$b(s,15),x=y[0],v=y[1],b=xT(h),S=b[0],k=b[1],T=xT(x),j=T[0],P=T[1],C=new eo(19),N=0;N<S.length;++N)C[S[N]&31]++;for(var N=0;N<j.length;++N)C[j[N]&31]++;for(var L=$b(C,7),R=L[0],D=L[1],M=19;M>4&&!R[w_[M-1]];--M);var H=c+5<<3,W=xm(i,qd)+xm(s,Gg)+o,Z=xm(i,h)+xm(s,x)+o+14+3*M+xm(C,R)+(2*C[16]+3*C[17]+7*C[18]);if(H<=W&&H<=Z)return k_(e,u,t.subarray(l,l+c));var B,F,Q,ee;if(Kc(e,u,1+(Z<W)),u+=2,Z<W){B=dc(h,p,0),F=h,Q=dc(x,v,0),ee=x;var te=dc(R,D,0);Kc(e,u,k-257),Kc(e,u+5,P-1),Kc(e,u+10,M-4),u+=14;for(var N=0;N<M;++N)Kc(e,u+3*N,R[w_[N]]);u+=3*M;for(var re=[S,j],O=0;O<2;++O)for(var X=re[O],N=0;N<X.length;++N){var q=X[N]&31;Kc(e,u,te[q]),u+=R[q],q>15&&(Kc(e,u,X[N]>>>5&127),u+=X[N]>>>12)}}else B=zse,F=qd,Q=Use,ee=Gg;for(var N=0;N<a;++N)if(r[N]>255){var q=r[N]>>>18&31;ym(e,u,B[q+257]),u+=F[q+257],q>7&&(Kc(e,u,r[N]>>>23&31),u+=w2[q]);var V=r[N]&31;ym(e,u,Q[V]),u+=ee[V],V>3&&(ym(e,u,r[N]>>>5&8191),u+=b2[V])}else ym(e,u,B[r[N]]),u+=F[r[N]];return ym(e,u,B[256]),u+F[256]},Vse=new qg([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hse=function(t,e,n,r,i,s){var o=t.length,a=new Eo(r+o+5*(1+Math.floor(o/7e3))+i),l=a.subarray(r,a.length-i),c=0;if(!e||o<8)for(var u=0;u<=o;u+=65535){var d=u+65535;d<o?c=k_(l,c,t.subarray(u,d)):(l[u]=s,c=k_(l,c,t.subarray(u,o)))}else{for(var h=Vse[e-1],p=h>>>13,y=h&8191,x=(1<<n)-1,v=new eo(32768),b=new eo(x+1),S=Math.ceil(n/3),k=2*S,T=function(ze){return(t[ze]^t[ze+1]<<S^t[ze+2]<<k)&x},j=new qg(25e3),P=new eo(288),C=new eo(32),N=0,L=0,u=0,R=0,D=0,M=0;u<o;++u){var H=T(u),W=u&32767,Z=b[H];if(v[W]=Z,b[H]=W,D<=u){var B=o-u;if((N>7e3||R>24576)&&B>423){c=vT(t,l,0,j,P,C,L,R,M,u-M,c),R=N=L=0,M=u;for(var F=0;F<286;++F)P[F]=0;for(var F=0;F<30;++F)C[F]=0}var Q=2,ee=0,te=y,re=W-Z&32767;if(B>2&&H==T(u-re))for(var O=Math.min(p,B)-1,X=Math.min(32767,u),q=Math.min(258,B);re<=X&&--te&&W!=Z;){if(t[u+Q]==t[u+Q-re]){for(var V=0;V<q&&t[u+V]==t[u+V-re];++V);if(V>Q){if(Q=V,ee=re,V>O)break;for(var ne=Math.min(re,V-2),ge=0,F=0;F<ne;++F){var ye=u-re+F+32768&32767,xe=v[ye],Se=ye-xe+32768&32767;Se>ge&&(ge=Se,Z=ye)}}}W=Z,Z=v[W],re+=W-Z+32768&32767}if(ee){j[R++]=268435456|b_[Q]<<18|yT[ee];var He=b_[Q]&31,$e=yT[ee]&31;L+=w2[He]+b2[$e],++P[257+He],++C[$e],D=u+Q,++N}else j[R++]=t[u],++P[t[u]]}}c=vT(t,l,s,j,P,C,L,R,M,u-M,c)}return UM(a,0,r+Y4(c)+i)},qse=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)r+=n[o],i+=r;r%=65521,i%=65521}t=r,e=i},d:function(){return(t>>>8<<16|(e&255)<<8|e>>>8)+((t&255)<<23)*2}}},Gse=function(t,e,n,r,i){return Hse(t,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):12+e.mem,n,r,!0)},Kse=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},Xse=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},Yse=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function N_(t,e){e===void 0&&(e={});var n=qse();n.p(t);var r=Gse(t,e,2,4);return Xse(r,e),Kse(r,r.length-4,n.d()),r}function Jse(t,e){return Wse((Yse(t),t.subarray(2,-4)),e)}var an=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Wb(){an.console&&typeof an.console.log=="function"&&an.console.log.apply(an.console,arguments)}var xr={log:Wb,warn:function(t){an.console&&(typeof an.console.warn=="function"?an.console.warn.apply(an.console,arguments):Wb.call(null,arguments))},error:function(t){an.console&&(typeof an.console.error=="function"?an.console.error.apply(an.console,arguments):Wb(t))}};function Vb(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Hf(r.response,e,n)},r.onerror=function(){xr.error("could not download file")},r.send()}function wT(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dy(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var tg,C_,Hf=an.saveAs||((typeof window>"u"?"undefined":Xn(window))!=="object"||window!==an?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=an.URL||an.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?wT(i.href)?Vb(t,e,n):Dy(i,i.target="_blank"):Dy(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Dy(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(wT(t))Vb(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){Dy(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Xn(s)!=="object"&&(xr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Vb(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(an.HTMLElement)||an.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Xn(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var u=a.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=u:location=u,r=null},a.readAsDataURL(t)}else{var l=an.URL||an.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function $M(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Hb(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ks(n,r,i,s,e[0],7,-680876936),s=ks(s,n,r,i,e[1],12,-389564586),i=ks(i,s,n,r,e[2],17,606105819),r=ks(r,i,s,n,e[3],22,-1044525330),n=ks(n,r,i,s,e[4],7,-176418897),s=ks(s,n,r,i,e[5],12,1200080426),i=ks(i,s,n,r,e[6],17,-1473231341),r=ks(r,i,s,n,e[7],22,-45705983),n=ks(n,r,i,s,e[8],7,1770035416),s=ks(s,n,r,i,e[9],12,-1958414417),i=ks(i,s,n,r,e[10],17,-42063),r=ks(r,i,s,n,e[11],22,-1990404162),n=ks(n,r,i,s,e[12],7,1804603682),s=ks(s,n,r,i,e[13],12,-40341101),i=ks(i,s,n,r,e[14],17,-1502002290),n=Ns(n,r=ks(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ns(s,n,r,i,e[6],9,-1069501632),i=Ns(i,s,n,r,e[11],14,643717713),r=Ns(r,i,s,n,e[0],20,-373897302),n=Ns(n,r,i,s,e[5],5,-701558691),s=Ns(s,n,r,i,e[10],9,38016083),i=Ns(i,s,n,r,e[15],14,-660478335),r=Ns(r,i,s,n,e[4],20,-405537848),n=Ns(n,r,i,s,e[9],5,568446438),s=Ns(s,n,r,i,e[14],9,-1019803690),i=Ns(i,s,n,r,e[3],14,-187363961),r=Ns(r,i,s,n,e[8],20,1163531501),n=Ns(n,r,i,s,e[13],5,-1444681467),s=Ns(s,n,r,i,e[2],9,-51403784),i=Ns(i,s,n,r,e[7],14,1735328473),n=Cs(n,r=Ns(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Cs(s,n,r,i,e[8],11,-2022574463),i=Cs(i,s,n,r,e[11],16,1839030562),r=Cs(r,i,s,n,e[14],23,-35309556),n=Cs(n,r,i,s,e[1],4,-1530992060),s=Cs(s,n,r,i,e[4],11,1272893353),i=Cs(i,s,n,r,e[7],16,-155497632),r=Cs(r,i,s,n,e[10],23,-1094730640),n=Cs(n,r,i,s,e[13],4,681279174),s=Cs(s,n,r,i,e[0],11,-358537222),i=Cs(i,s,n,r,e[3],16,-722521979),r=Cs(r,i,s,n,e[6],23,76029189),n=Cs(n,r,i,s,e[9],4,-640364487),s=Cs(s,n,r,i,e[12],11,-421815835),i=Cs(i,s,n,r,e[15],16,530742520),n=Es(n,r=Cs(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Es(s,n,r,i,e[7],10,1126891415),i=Es(i,s,n,r,e[14],15,-1416354905),r=Es(r,i,s,n,e[5],21,-57434055),n=Es(n,r,i,s,e[12],6,1700485571),s=Es(s,n,r,i,e[3],10,-1894986606),i=Es(i,s,n,r,e[10],15,-1051523),r=Es(r,i,s,n,e[1],21,-2054922799),n=Es(n,r,i,s,e[8],6,1873313359),s=Es(s,n,r,i,e[15],10,-30611744),i=Es(i,s,n,r,e[6],15,-1560198380),r=Es(r,i,s,n,e[13],21,1309151649),n=Es(n,r,i,s,e[4],6,-145523070),s=Es(s,n,r,i,e[11],10,-1120210379),i=Es(i,s,n,r,e[2],15,718787259),r=Es(r,i,s,n,e[9],21,-343485551),t[0]=Nd(n,t[0]),t[1]=Nd(r,t[1]),t[2]=Nd(i,t[2]),t[3]=Nd(s,t[3])}function _2(t,e,n,r,i,s){return e=Nd(Nd(e,t),Nd(r,s)),Nd(e<<i|e>>>32-i,n)}function ks(t,e,n,r,i,s,o){return _2(e&n|~e&r,t,e,i,s,o)}function Ns(t,e,n,r,i,s,o){return _2(e&r|n&~r,t,e,i,s,o)}function Cs(t,e,n,r,i,s,o){return _2(e^n^r,t,e,i,s,o)}function Es(t,e,n,r,i,s,o){return _2(n^(e|~r),t,e,i,s,o)}function WM(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Hb(r,Zse(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Hb(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Hb(r,i),r}function Zse(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}tg=an.atob.bind(an),C_=an.btoa.bind(an);var bT="0123456789abcdef".split("");function Qse(t){for(var e="",n=0;n<4;n++)e+=bT[t>>8*n+4&15]+bT[t>>8*n&15];return e}function eoe(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function E_(t){return WM(t).map(eoe).join("")}var toe=function(t){for(var e=0;e<t.length;e++)t[e]=Qse(t[e]);return t.join("")}(WM("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nd(t,e){if(toe){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function A_(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,r=a}else a=r;var d=e.length,h=0,p=0,y="";for(l=0;l<d;l++)p=(p+(u=a[h=(h+1)%256]))%256,a[h]=a[p],a[p]=u,o=a[(a[h]+a[p])%256],y+=String.fromCharCode(e.charCodeAt(l)^o);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _T={print:4,modify:8,copy:16,"annot-forms":32};function Lp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(_T.perm!==void 0)throw new Error("Invalid permission: "+a);i+=_T[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=E_(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=A_(this.encryptionKey,this.padding)}function Mp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function ST(t){if(Xn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){an.console&&xr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kg(t){if(!(this instanceof Kg))return new Kg(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function VM(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function vd(t,e,n,r,i){if(!(this instanceof vd))return new vd(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,VM.call(this,r,i)}function rh(t,e,n,r,i){if(!(this instanceof rh))return new rh(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,VM.call(this,r,i)}function nn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;Xn(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(u=t.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=ST;var y="1.3",x=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(I){y=I};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return v};var b=p.__private__.getPageFormat=function(I){return v[I]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},k=S.COMPAT;function T(){this.saveGraphicsState(),pe(new Et(ot,0,0,-ot,0,zl()*ot).toString()+" cm"),this.setFontSize(this.getFontSize()/ot),c="n",k=S.ADVANCED}function j(){this.restoreGraphicsState(),c="S",k=S.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(I,oe){if(I=="bold"&&oe=="normal"||I=="bold"&&oe==400||I=="normal"&&oe=="italic"||I=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(I=oe==400||oe==="normal"?I==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||I!=="normal"?(oe==700?"bold":oe)+""+I:"bold"),I};p.advancedAPI=function(I){var oe=k===S.COMPAT;return oe&&T.call(this),typeof I!="function"||(I(this),oe&&j.call(this)),this},p.compatAPI=function(I){var oe=k===S.ADVANCED;return oe&&j.call(this),typeof I!="function"||(I(this),oe&&T.call(this)),this},p.isAdvancedAPI=function(){return k===S.ADVANCED};var C,N=function(I){if(k!==S.ADVANCED)throw new Error(I+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=p.roundToPrecision=p.__private__.roundToPrecision=function(I,oe){var be=e||oe;if(isNaN(I)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return I.toFixed(be).replace(/0+$/,"")};C=p.hpf=p.__private__.hpf=typeof l=="number"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return L(I,l)}:l==="smart"?function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return L(I,I>-1&&I<1?16:5)}:function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.hpf");return L(I,16)};var R=p.f2=p.__private__.f2=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f2");return L(I,2)},D=p.__private__.f3=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.f3");return L(I,3)},M=p.scale=p.__private__.scale=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.scale");return k===S.COMPAT?I*ot:k===S.ADVANCED?I:void 0},H=function(I){return k===S.COMPAT?zl()-I:k===S.ADVANCED?I:void 0},W=function(I){return M(H(I))};p.__private__.setPrecision=p.setPrecision=function(I){typeof parseInt(I,10)=="number"&&(e=parseInt(I,10))};var Z,B="00000000000000000000000000000000",F=p.__private__.getFileId=function(){return B},Q=p.__private__.setFileId=function(I){return B=I!==void 0&&/^[a-fA-F0-9]{32}$/.test(I)?I.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Nr=new Lp(u.userPermissions,u.userPassword,u.ownerPassword,B)),B};p.setFileId=function(I){return Q(I),this},p.getFileId=function(){return F()};var ee=p.__private__.convertDateToPDFDate=function(I){var oe=I.getTimezoneOffset(),be=oe<0?"+":"-",Ce=Math.floor(Math.abs(oe/60)),Fe=Math.abs(oe%60),Qe=[be,q(Ce),"'",q(Fe),"'"].join("");return["D:",I.getFullYear(),q(I.getMonth()+1),q(I.getDate()),q(I.getHours()),q(I.getMinutes()),q(I.getSeconds()),Qe].join("")},te=p.__private__.convertPDFDateToDate=function(I){var oe=parseInt(I.substr(2,4),10),be=parseInt(I.substr(6,2),10)-1,Ce=parseInt(I.substr(8,2),10),Fe=parseInt(I.substr(10,2),10),Qe=parseInt(I.substr(12,2),10),ht=parseInt(I.substr(14,2),10);return new Date(oe,be,Ce,Fe,Qe,ht,0)},re=p.__private__.setCreationDate=function(I){var oe;if(I===void 0&&(I=new Date),I instanceof Date)oe=ee(I);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(I))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=I}return Z=oe},O=p.__private__.getCreationDate=function(I){var oe=Z;return I==="jsDate"&&(oe=te(Z)),oe};p.setCreationDate=function(I){return re(I),this},p.getCreationDate=function(I){return O(I)};var X,q=p.__private__.padd2=function(I){return("0"+parseInt(I)).slice(-2)},V=p.__private__.padd2Hex=function(I){return("00"+(I=I.toString())).substr(I.length)},ne=0,ge=[],ye=[],xe=0,Se=[],He=[],$e=!1,Ge=ye,ze=function(){ne=0,xe=0,ye=[],ge=[],Se=[],G=On(),se=On()};p.__private__.setCustomOutputDestination=function(I){$e=!0,Ge=I};var Ne=function(I){$e||(Ge=I)};p.__private__.resetCustomOutputDestination=function(){$e=!1,Ge=ye};var pe=p.__private__.out=function(I){return I=I.toString(),xe+=I.length+1,Ge.push(I),Ge},qe=p.__private__.write=function(I){return pe(arguments.length===1?I.toString():Array.prototype.join.call(arguments," "))},Ze=p.__private__.getArrayBuffer=function(I){for(var oe=I.length,be=new ArrayBuffer(oe),Ce=new Uint8Array(be);oe--;)Ce[oe]=I.charCodeAt(oe);return be},Me=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Me};var ke=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(I){return ke=k===S.ADVANCED?I/ot:I,this};var We,it=p.__private__.getFontSize=p.getFontSize=function(){return k===S.COMPAT?ke:ke*ot},gt=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(I){return gt=I,this},p.__private__.getR2L=p.getR2L=function(){return gt};var xt,Tt=p.__private__.setZoomMode=function(I){var oe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(I))We=I;else if(isNaN(I)){if(oe.indexOf(I)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+I+'" is not recognized.');We=I}else We=parseInt(I,10)};p.__private__.getZoomMode=function(){return We};var Bt,qt=p.__private__.setPageMode=function(I){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(I)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+I+'" is not recognized.');xt=I};p.__private__.getPageMode=function(){return xt};var Rt=p.__private__.setLayoutMode=function(I){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(I)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+I+'" is not recognized.');Bt=I};p.__private__.getLayoutMode=function(){return Bt},p.__private__.setDisplayMode=p.setDisplayMode=function(I,oe,be){return Tt(I),Rt(oe),qt(be),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(I){if(Object.keys(Dt).indexOf(I)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[I]},p.__private__.getDocumentProperties=function(){return Dt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(I){for(var oe in Dt)Dt.hasOwnProperty(oe)&&I[oe]&&(Dt[oe]=I[oe]);return this},p.__private__.setDocumentProperty=function(I,oe){if(Object.keys(Dt).indexOf(I)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[I]=oe};var Mt,ot,Nn,Qt,Wn,cn={},bn={},$r=[],dn={},Qr={},_n={},gr={},fn=null,Yt=0,Ot=[],Jt=new ST(p),Yn=t.hotfixes||[],hn={},Cn={},Lr=[],Et=function I(oe,be,Ce,Fe,Qe,ht){if(!(this instanceof I))return new I(oe,be,Ce,Fe,Qe,ht);isNaN(oe)&&(oe=1),isNaN(be)&&(be=0),isNaN(Ce)&&(Ce=0),isNaN(Fe)&&(Fe=1),isNaN(Qe)&&(Qe=0),isNaN(ht)&&(ht=0),this._matrix=[oe,be,Ce,Fe,Qe,ht]};Object.defineProperty(Et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Et.prototype,"a",{get:function(){return this._matrix[0]},set:function(I){this._matrix[0]=I}}),Object.defineProperty(Et.prototype,"b",{get:function(){return this._matrix[1]},set:function(I){this._matrix[1]=I}}),Object.defineProperty(Et.prototype,"c",{get:function(){return this._matrix[2]},set:function(I){this._matrix[2]=I}}),Object.defineProperty(Et.prototype,"d",{get:function(){return this._matrix[3]},set:function(I){this._matrix[3]=I}}),Object.defineProperty(Et.prototype,"e",{get:function(){return this._matrix[4]},set:function(I){this._matrix[4]=I}}),Object.defineProperty(Et.prototype,"f",{get:function(){return this._matrix[5]},set:function(I){this._matrix[5]=I}}),Object.defineProperty(Et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Et.prototype.join=function(I){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(I)},Et.prototype.multiply=function(I){var oe=I.sx*this.sx+I.shy*this.shx,be=I.sx*this.shy+I.shy*this.sy,Ce=I.shx*this.sx+I.sy*this.shx,Fe=I.shx*this.shy+I.sy*this.sy,Qe=I.tx*this.sx+I.ty*this.shx+this.tx,ht=I.tx*this.shy+I.ty*this.sy+this.ty;return new Et(oe,be,Ce,Fe,Qe,ht)},Et.prototype.decompose=function(){var I=this.sx,oe=this.shy,be=this.shx,Ce=this.sy,Fe=this.tx,Qe=this.ty,ht=Math.sqrt(I*I+oe*oe),At=(I/=ht)*be+(oe/=ht)*Ce;be-=I*At,Ce-=oe*At;var Kt=Math.sqrt(be*be+Ce*Ce);return At/=Kt,I*(Ce/=Kt)<oe*(be/=Kt)&&(I=-I,oe=-oe,At=-At,ht=-ht),{scale:new Et(ht,0,0,Kt,0,0),translate:new Et(1,0,0,1,Fe,Qe),rotate:new Et(I,oe,-oe,I,0,0),skew:new Et(1,0,At,1,0,0)}},Et.prototype.toString=function(I){return this.join(" ")},Et.prototype.inversed=function(){var I=this.sx,oe=this.shy,be=this.shx,Ce=this.sy,Fe=this.tx,Qe=this.ty,ht=1/(I*Ce-oe*be),At=Ce*ht,Kt=-oe*ht,pn=-be*ht,xn=I*ht;return new Et(At,Kt,pn,xn,-At*Fe-pn*Qe,-Kt*Fe-xn*Qe)},Et.prototype.applyToPoint=function(I){var oe=I.x*this.sx+I.y*this.shx+this.tx,be=I.x*this.shy+I.y*this.sy+this.ty;return new ya(oe,be)},Et.prototype.applyToRectangle=function(I){var oe=this.applyToPoint(I),be=this.applyToPoint(new ya(I.x+I.w,I.y+I.h));return new Fl(oe.x,oe.y,be.x-oe.x,be.y-oe.y)},Et.prototype.clone=function(){var I=this.sx,oe=this.shy,be=this.shx,Ce=this.sy,Fe=this.tx,Qe=this.ty;return new Et(I,oe,be,Ce,Fe,Qe)},p.Matrix=Et;var lr=p.matrixMult=function(I,oe){return oe.multiply(I)},Bn=new Et(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Bn;var nr=function(I,oe){if(!Qr[I]){var be=(oe instanceof vd?"Sh":"P")+(Object.keys(dn).length+1).toString(10);oe.id=be,Qr[I]=be,dn[be]=oe,Jt.publish("addPattern",oe)}};p.ShadingPattern=vd,p.TilingPattern=rh,p.addShadingPattern=function(I,oe){return N("addShadingPattern()"),nr(I,oe),this},p.beginTilingPattern=function(I){N("beginTilingPattern()"),Vh(I.boundingBox[0],I.boundingBox[1],I.boundingBox[2]-I.boundingBox[0],I.boundingBox[3]-I.boundingBox[1],I.matrix)},p.endTilingPattern=function(I,oe){N("endTilingPattern()"),oe.stream=He[X].join(`
`),nr(I,oe),Jt.publish("endTilingPattern",oe),Lr.pop().restore()};var jn=p.__private__.newObject=function(){var I=On();return ae(I,!0),I},On=p.__private__.newObjectDeferred=function(){return ne++,ge[ne]=function(){return xe},ne},ae=function(I,oe){return oe=typeof oe=="boolean"&&oe,ge[I]=xe,oe&&pe(I+" 0 obj"),I},we=p.__private__.newAdditionalObject=function(){var I={objId:On(),content:""};return Se.push(I),I},G=On(),se=On(),fe=p.__private__.decodeColorString=function(I){var oe=I.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length===5&&(oe[4]==="k"||oe[4]==="K")&&(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var be=parseFloat(oe[0]);oe=[be,be,be,"r"]}for(var Ce="#",Fe=0;Fe<3;Fe++)Ce+=("0"+Math.floor(255*parseFloat(oe[Fe])).toString(16)).slice(-2);return Ce},me=p.__private__.encodeColorString=function(I){var oe;typeof I=="string"&&(I={ch1:I});var be=I.ch1,Ce=I.ch2,Fe=I.ch3,Qe=I.ch4,ht=I.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var At=new $M(be);if(At.ok)be=At.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var Kt=parseInt(be.substr(1),16);be=Kt>>16&255,Ce=Kt>>8&255,Fe=255&Kt}if(Ce===void 0||Qe===void 0&&be===Ce&&Ce===Fe)if(typeof be=="string")oe=be+" "+ht[0];else switch(I.precision){case 2:oe=R(be/255)+" "+ht[0];break;case 3:default:oe=D(be/255)+" "+ht[0]}else if(Qe===void 0||Xn(Qe)==="object"){if(Qe&&!isNaN(Qe.a)&&Qe.a===0)return oe=["1.","1.","1.",ht[1]].join(" ");if(typeof be=="string")oe=[be,Ce,Fe,ht[1]].join(" ");else switch(I.precision){case 2:oe=[R(be/255),R(Ce/255),R(Fe/255),ht[1]].join(" ");break;default:case 3:oe=[D(be/255),D(Ce/255),D(Fe/255),ht[1]].join(" ")}}else if(typeof be=="string")oe=[be,Ce,Fe,Qe,ht[2]].join(" ");else switch(I.precision){case 2:oe=[R(be),R(Ce),R(Fe),R(Qe),ht[2]].join(" ");break;case 3:default:oe=[D(be),D(Ce),D(Fe),D(Qe),ht[2]].join(" ")}return oe},Ae=p.__private__.getFilters=function(){return o},De=p.__private__.putStream=function(I){var oe=(I=I||{}).data||"",be=I.filters||Ae(),Ce=I.alreadyAppliedFilters||[],Fe=I.addLength1||!1,Qe=oe.length,ht=I.objectId,At=function(Ci){return Ci};if(u!==null&&ht===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(At=Nr.encryptor(ht,0));var Kt={};be===!0&&(be=["FlateEncode"]);var pn=I.additionalKeyValues||[],xn=(Kt=nn.API.processDataByFilters!==void 0?nn.API.processDataByFilters(oe,be):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(Ce)?Ce.join(" "):Ce.toString());if(Kt.data.length!==0&&(pn.push({key:"Length",value:Kt.data.length}),Fe===!0&&pn.push({key:"Length1",value:Qe})),xn.length!=0)if(xn.split("/").length-1==1)pn.push({key:"Filter",value:xn});else{pn.push({key:"Filter",value:"["+xn+"]"});for(var Tn=0;Tn<pn.length;Tn+=1)if(pn[Tn].key==="DecodeParms"){for(var Cr=[],Mr=0;Mr<Kt.reverseChain.split("/").length-1;Mr+=1)Cr.push("null");Cr.push(pn[Tn].value),pn[Tn].value="["+Cr.join(" ")+"]"}}pe("<<");for(var Vr=0;Vr<pn.length;Vr++)pe("/"+pn[Vr].key+" "+pn[Vr].value);pe(">>"),Kt.data.length!==0&&(pe("stream"),pe(At(Kt.data)),pe("endstream"))},Ie=p.__private__.putPage=function(I){var oe=I.number,be=I.data,Ce=I.objId,Fe=I.contentsObjId;ae(Ce,!0),pe("<</Type /Page"),pe("/Parent "+I.rootDictionaryObjId+" 0 R"),pe("/Resources "+I.resourceDictionaryObjId+" 0 R"),pe("/MediaBox ["+parseFloat(C(I.mediaBox.bottomLeftX))+" "+parseFloat(C(I.mediaBox.bottomLeftY))+" "+C(I.mediaBox.topRightX)+" "+C(I.mediaBox.topRightY)+"]"),I.cropBox!==null&&pe("/CropBox ["+C(I.cropBox.bottomLeftX)+" "+C(I.cropBox.bottomLeftY)+" "+C(I.cropBox.topRightX)+" "+C(I.cropBox.topRightY)+"]"),I.bleedBox!==null&&pe("/BleedBox ["+C(I.bleedBox.bottomLeftX)+" "+C(I.bleedBox.bottomLeftY)+" "+C(I.bleedBox.topRightX)+" "+C(I.bleedBox.topRightY)+"]"),I.trimBox!==null&&pe("/TrimBox ["+C(I.trimBox.bottomLeftX)+" "+C(I.trimBox.bottomLeftY)+" "+C(I.trimBox.topRightX)+" "+C(I.trimBox.topRightY)+"]"),I.artBox!==null&&pe("/ArtBox ["+C(I.artBox.bottomLeftX)+" "+C(I.artBox.bottomLeftY)+" "+C(I.artBox.topRightX)+" "+C(I.artBox.topRightY)+"]"),typeof I.userUnit=="number"&&I.userUnit!==1&&pe("/UserUnit "+I.userUnit),Jt.publish("putPage",{objId:Ce,pageContext:Ot[oe],pageNumber:oe,page:be}),pe("/Contents "+Fe+" 0 R"),pe(">>"),pe("endobj");var Qe=be.join(`
`);return k===S.ADVANCED&&(Qe+=`
Q`),ae(Fe,!0),De({data:Qe,filters:Ae(),objectId:Fe}),pe("endobj"),Ce},Re=p.__private__.putPages=function(){var I,oe,be=[];for(I=1;I<=Yt;I++)Ot[I].objId=On(),Ot[I].contentsObjId=On();for(I=1;I<=Yt;I++)be.push(Ie({number:I,data:He[I],objId:Ot[I].objId,contentsObjId:Ot[I].contentsObjId,mediaBox:Ot[I].mediaBox,cropBox:Ot[I].cropBox,bleedBox:Ot[I].bleedBox,trimBox:Ot[I].trimBox,artBox:Ot[I].artBox,userUnit:Ot[I].userUnit,rootDictionaryObjId:G,resourceDictionaryObjId:se}));ae(G,!0),pe("<</Type /Pages");var Ce="/Kids [";for(oe=0;oe<Yt;oe++)Ce+=be[oe]+" 0 R ";pe(Ce+"]"),pe("/Count "+Yt),pe(">>"),pe("endobj"),Jt.publish("postPutPages")},Ve=function(I){Jt.publish("putFont",{font:I,out:pe,newObject:jn,putStream:De}),I.isAlreadyPutted!==!0&&(I.objectNumber=jn(),pe("<<"),pe("/Type /Font"),pe("/BaseFont /"+Mp(I.postScriptName)),pe("/Subtype /Type1"),typeof I.encoding=="string"&&pe("/Encoding /"+I.encoding),pe("/FirstChar 32"),pe("/LastChar 255"),pe(">>"),pe("endobj"))},lt=function(){for(var I in cn)cn.hasOwnProperty(I)&&(d===!1||d===!0&&h.hasOwnProperty(I))&&Ve(cn[I])},vt=function(I){I.objectNumber=jn();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[C(I.x),C(I.y),C(I.x+I.width),C(I.y+I.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+I.matrix.toString()+"]"});var be=I.pages[1].join(`
`);De({data:be,additionalKeyValues:oe,objectId:I.objectNumber}),pe("endobj")},Ct=function(){for(var I in hn)hn.hasOwnProperty(I)&&vt(hn[I])},yt=function(I,oe){var be,Ce=[],Fe=1/(oe-1);for(be=0;be<1;be+=Fe)Ce.push(be);if(Ce.push(1),I[0].offset!=0){var Qe={offset:0,color:I[0].color};I.unshift(Qe)}if(I[I.length-1].offset!=1){var ht={offset:1,color:I[I.length-1].color};I.push(ht)}for(var At="",Kt=0,pn=0;pn<Ce.length;pn++){for(be=Ce[pn];be>I[Kt+1].offset;)Kt++;var xn=I[Kt].offset,Tn=(be-xn)/(I[Kt+1].offset-xn),Cr=I[Kt].color,Mr=I[Kt+1].color;At+=V(Math.round((1-Tn)*Cr[0]+Tn*Mr[0]).toString(16))+V(Math.round((1-Tn)*Cr[1]+Tn*Mr[1]).toString(16))+V(Math.round((1-Tn)*Cr[2]+Tn*Mr[2]).toString(16))}return At.trim()},pt=function(I,oe){oe||(oe=21);var be=jn(),Ce=yt(I.colors,oe),Fe=[];Fe.push({key:"FunctionType",value:"0"}),Fe.push({key:"Domain",value:"[0.0 1.0]"}),Fe.push({key:"Size",value:"["+oe+"]"}),Fe.push({key:"BitsPerSample",value:"8"}),Fe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Fe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),De({data:Ce,additionalKeyValues:Fe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),pe("endobj"),I.objectNumber=jn(),pe("<< /ShadingType "+I.type),pe("/ColorSpace /DeviceRGB");var Qe="/Coords ["+C(parseFloat(I.coords[0]))+" "+C(parseFloat(I.coords[1]))+" ";I.type===2?Qe+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3])):Qe+=C(parseFloat(I.coords[2]))+" "+C(parseFloat(I.coords[3]))+" "+C(parseFloat(I.coords[4]))+" "+C(parseFloat(I.coords[5])),pe(Qe+="]"),I.matrix&&pe("/Matrix ["+I.matrix.toString()+"]"),pe("/Function "+be+" 0 R"),pe("/Extend [true true]"),pe(">>"),pe("endobj")},on=function(I,oe){var be=On(),Ce=jn();oe.push({resourcesOid:be,objectOid:Ce}),I.objectNumber=Ce;var Fe=[];Fe.push({key:"Type",value:"/Pattern"}),Fe.push({key:"PatternType",value:"1"}),Fe.push({key:"PaintType",value:"1"}),Fe.push({key:"TilingType",value:"1"}),Fe.push({key:"BBox",value:"["+I.boundingBox.map(C).join(" ")+"]"}),Fe.push({key:"XStep",value:C(I.xStep)}),Fe.push({key:"YStep",value:C(I.yStep)}),Fe.push({key:"Resources",value:be+" 0 R"}),I.matrix&&Fe.push({key:"Matrix",value:"["+I.matrix.toString()+"]"}),De({data:I.stream,additionalKeyValues:Fe,objectId:I.objectNumber}),pe("endobj")},In=function(I){var oe;for(oe in dn)dn.hasOwnProperty(oe)&&(dn[oe]instanceof vd?pt(dn[oe]):dn[oe]instanceof rh&&on(dn[oe],I))},Jn=function(I){for(var oe in I.objectNumber=jn(),pe("<<"),I)switch(oe){case"opacity":pe("/ca "+R(I[oe]));break;case"stroke-opacity":pe("/CA "+R(I[oe]))}pe(">>"),pe("endobj")},Sr=function(){var I;for(I in _n)_n.hasOwnProperty(I)&&Jn(_n[I])},Lo=function(){for(var I in pe("/XObject <<"),hn)hn.hasOwnProperty(I)&&hn[I].objectNumber>=0&&pe("/"+I+" "+hn[I].objectNumber+" 0 R");Jt.publish("putXobjectDict"),pe(">>")},da=function(){Nr.oid=jn(),pe("<<"),pe("/Filter /Standard"),pe("/V "+Nr.v),pe("/R "+Nr.r),pe("/U <"+Nr.toHexString(Nr.U)+">"),pe("/O <"+Nr.toHexString(Nr.O)+">"),pe("/P "+Nr.P),pe(">>"),pe("endobj")},Bs=function(){for(var I in pe("/Font <<"),cn)cn.hasOwnProperty(I)&&(d===!1||d===!0&&h.hasOwnProperty(I))&&pe("/"+I+" "+cn[I].objectNumber+" 0 R");pe(">>")},Wr=function(){if(Object.keys(dn).length>0){for(var I in pe("/Shading <<"),dn)dn.hasOwnProperty(I)&&dn[I]instanceof vd&&dn[I].objectNumber>=0&&pe("/"+I+" "+dn[I].objectNumber+" 0 R");Jt.publish("putShadingPatternDict"),pe(">>")}},fa=function(I){if(Object.keys(dn).length>0){for(var oe in pe("/Pattern <<"),dn)dn.hasOwnProperty(oe)&&dn[oe]instanceof p.TilingPattern&&dn[oe].objectNumber>=0&&dn[oe].objectNumber<I&&pe("/"+oe+" "+dn[oe].objectNumber+" 0 R");Jt.publish("putTilingPatternDict"),pe(">>")}},kr=function(){if(Object.keys(_n).length>0){var I;for(I in pe("/ExtGState <<"),_n)_n.hasOwnProperty(I)&&_n[I].objectNumber>=0&&pe("/"+I+" "+_n[I].objectNumber+" 0 R");Jt.publish("putGStateDict"),pe(">>")}},Fr=function(I){ae(I.resourcesOid,!0),pe("<<"),pe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Bs(),Wr(),fa(I.objectOid),kr(),Lo(),pe(">>"),pe("endobj")},Fh=function(){var I=[];lt(),Sr(),Ct(),In(I),Jt.publish("putResources"),I.forEach(Fr),Fr({resourcesOid:se,objectOid:Number.MAX_SAFE_INTEGER}),Jt.publish("postPutResources")},zh=function(){Jt.publish("putAdditionalObjects");for(var I=0;I<Se.length;I++){var oe=Se[I];ae(oe.objId,!0),pe(oe.content),pe("endobj")}Jt.publish("postPutAdditionalObjects")},wc=function(I){bn[I.fontName]=bn[I.fontName]||{},bn[I.fontName][I.fontStyle]=I.id},Pl=function(I,oe,be,Ce,Fe){var Qe={id:"F"+(Object.keys(cn).length+1).toString(10),postScriptName:I,fontName:oe,fontStyle:be,encoding:Ce,isStandardFont:Fe||!1,metadata:{}};return Jt.publish("addFont",{font:Qe,instance:this}),cn[Qe.id]=Qe,wc(Qe),Qe.id},bc=function(I){for(var oe=0,be=Me.length;oe<be;oe++){var Ce=Pl.call(this,I[oe][0],I[oe][1],I[oe][2],Me[oe][3],!0);d===!1&&(h[Ce]=!0);var Fe=I[oe][0].split("-");wc({id:Ce,fontName:Fe[0],fontStyle:Fe[1]||""})}Jt.publish("addFonts",{fonts:cn,dictionary:bn})},fs=function(I){return I.foo=function(){try{return I.apply(this,arguments)}catch(Ce){var oe=Ce.stack||"";~oe.indexOf(" at ")&&(oe=oe.split(" at ")[1]);var be="Error in function "+oe.split(`
`)[0].split("<")[0]+": "+Ce.message;if(!an.console)throw new Error(be);an.console.error(be,Ce),an.alert&&alert(be)}},I.foo.bar=I,I.foo},xu=function(I,oe){var be,Ce,Fe,Qe,ht,At,Kt,pn,xn;if(Fe=(oe=oe||{}).sourceEncoding||"Unicode",ht=oe.outputEncoding,(oe.autoencode||ht)&&cn[Mt].metadata&&cn[Mt].metadata[Fe]&&cn[Mt].metadata[Fe].encoding&&(Qe=cn[Mt].metadata[Fe].encoding,!ht&&cn[Mt].encoding&&(ht=cn[Mt].encoding),!ht&&Qe.codePages&&(ht=Qe.codePages[0]),typeof ht=="string"&&(ht=Qe[ht]),ht)){for(Kt=!1,At=[],be=0,Ce=I.length;be<Ce;be++)(pn=ht[I.charCodeAt(be)])?At.push(String.fromCharCode(pn)):At.push(I[be]),At[be].charCodeAt(0)>>8&&(Kt=!0);I=At.join("")}for(be=I.length;Kt===void 0&&be!==0;)I.charCodeAt(be-1)>>8&&(Kt=!0),be--;if(!Kt)return I;for(At=oe.noBOM?[]:[254,255],be=0,Ce=I.length;be<Ce;be++){if((xn=(pn=I.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+I+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");At.push(xn),At.push(pn-(xn<<8))}return String.fromCharCode.apply(void 0,At)},hs=p.__private__.pdfEscape=p.pdfEscape=function(I,oe){return xu(I,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_c=p.__private__.beginPage=function(I){He[++Yt]=[],Ot[Yt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(I[0]),topRightY:Number(I[1])}},Dl(Yt),Ne(He[X])},of=function(I,oe){var be,Ce,Fe;switch(n=oe||n,typeof I=="string"&&(be=b(I.toLowerCase()),Array.isArray(be)&&(Ce=be[0],Fe=be[1])),Array.isArray(I)&&(Ce=I[0]*ot,Fe=I[1]*ot),isNaN(Ce)&&(Ce=i[0],Fe=i[1]),(Ce>14400||Fe>14400)&&(xr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ce=Math.min(14400,Ce),Fe=Math.min(14400,Fe)),i=[Ce,Fe],n.substr(0,1)){case"l":Fe>Ce&&(i=[Fe,Ce]);break;case"p":Ce>Fe&&(i=[Fe,Ce])}_c(i),Ec(uf),pe(ps),ff!==0&&pe(ff+" J"),Tc!==0&&pe(Tc+" j"),Jt.publish("addPage",{pageNumber:Yt})},af=function(I){I>0&&I<=Yt&&(He.splice(I,1),Ot.splice(I,1),Yt--,X>Yt&&(X=Yt),this.setPage(X))},Dl=function(I){I>0&&I<=Yt&&(X=I)},R0=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return He.length-1},vu=function(I,oe,be){var Ce,Fe=void 0;return be=be||{},I=I!==void 0?I:cn[Mt].fontName,oe=oe!==void 0?oe:cn[Mt].fontStyle,Ce=I.toLowerCase(),bn[Ce]!==void 0&&bn[Ce][oe]!==void 0?Fe=bn[Ce][oe]:bn[I]!==void 0&&bn[I][oe]!==void 0?Fe=bn[I][oe]:be.disableWarning===!1&&xr.warn("Unable to look up font label for font '"+I+"', '"+oe+"'. Refer to getFontList() for available fonts."),Fe||be.noFallback||(Fe=bn.times[oe])==null&&(Fe=bn.times.normal),Fe},Un=p.__private__.putInfo=function(){var I=jn(),oe=function(Ce){return Ce};for(var be in u!==null&&(oe=Nr.encryptor(I,0)),pe("<<"),pe("/Producer ("+hs(oe("jsPDF "+nn.version))+")"),Dt)Dt.hasOwnProperty(be)&&Dt[be]&&pe("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+hs(oe(Dt[be]))+")");pe("/CreationDate ("+hs(oe(Z))+")"),pe(">>"),pe("endobj")},wu=p.__private__.putCatalog=function(I){var oe=(I=I||{}).rootDictionaryObjId||G;switch(jn(),pe("<<"),pe("/Type /Catalog"),pe("/Pages "+oe+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":pe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":pe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":pe("/OpenAction [3 0 R /Fit]");break;case"original":pe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+We;be.substr(be.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&pe("/OpenAction [3 0 R /XYZ null null "+R(We)+"]")}switch(Bt||(Bt="continuous"),Bt){case"continuous":pe("/PageLayout /OneColumn");break;case"single":pe("/PageLayout /SinglePage");break;case"two":case"twoleft":pe("/PageLayout /TwoColumnLeft");break;case"tworight":pe("/PageLayout /TwoColumnRight")}xt&&pe("/PageMode /"+xt),Jt.publish("putCatalog"),pe(">>"),pe("endobj")},Bh=p.__private__.putTrailer=function(){pe("trailer"),pe("<<"),pe("/Size "+(ne+1)),pe("/Root "+ne+" 0 R"),pe("/Info "+(ne-1)+" 0 R"),u!==null&&pe("/Encrypt "+Nr.oid+" 0 R"),pe("/ID [ <"+B+"> <"+B+"> ]"),pe(">>")},lf=p.__private__.putHeader=function(){pe("%PDF-"+y),pe("%")},Uh=p.__private__.putXRef=function(){var I="0000000000";pe("xref"),pe("0 "+(ne+1)),pe("0000000000 65535 f ");for(var oe=1;oe<=ne;oe++)typeof ge[oe]=="function"?pe((I+ge[oe]()).slice(-10)+" 00000 n "):ge[oe]!==void 0?pe((I+ge[oe]).slice(-10)+" 00000 n "):pe("0000000000 00000 n ")},ha=p.__private__.buildDocument=function(){ze(),Ne(ye),Jt.publish("buildDocument"),lf(),Re(),zh(),Fh(),u!==null&&da(),Un(),wu();var I=xe;return Uh(),Bh(),pe("startxref"),pe(""+I),pe("%%EOF"),Ne(He[X]),ye.join(`
`)},Sc=p.__private__.getBlob=function(I){return new Blob([Ze(I)],{type:"application/pdf"})},Ol=p.output=p.__private__.output=fs(function(I,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",I){case void 0:return ha();case"save":p.save(oe.filename);break;case"arraybuffer":return Ze(ha());case"blob":return Sc(ha());case"bloburi":case"bloburl":if(an.URL!==void 0&&typeof an.URL.createObjectURL=="function")return an.URL&&an.URL.createObjectURL(Sc(ha()))||void 0;xr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",Ce=ha();try{be=C_(Ce)}catch{be=C_(unescape(encodeURIComponent(Ce)))}return"data:application/pdf;filename="+oe.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(an)==="[object Window]"){var Fe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(Fe=oe.pdfObjectUrl,Qe="");var ht='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Fe+'"'+Qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",At=an.open();return At!==null&&At.document.write(ht),At}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(an)==="[object Window]"){var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',pn=an.open();if(pn!==null){pn.document.write(Kt);var xn=this;pn.document.documentElement.querySelector("#pdfViewer").onload=function(){pn.document.title=oe.filename,pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xn.output("bloburl"))}}return pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(an)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',Cr=an.open();if(Cr!==null&&(Cr.document.write(Tn),Cr.document.title=oe.filename),Cr||typeof safari>"u")return Cr;break;case"datauri":case"dataurl":return an.document.location.href=this.output("datauristring",oe);default:return null}}),kc=function(I){return Array.isArray(Yn)===!0&&Yn.indexOf(I)>-1};switch(r){case"pt":ot=1;break;case"mm":ot=72/25.4;break;case"cm":ot=72/2.54;break;case"in":ot=72;break;case"px":ot=kc("px_scaling")==1?.75:96/72;break;case"pc":case"em":ot=12;break;case"ex":ot=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ot=r}var Nr=null;re(),Q();var pa=function(I){return u!==null?Nr.encryptor(I,0):function(oe){return oe}},Mo=p.__private__.getPageInfo=p.getPageInfo=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ot[I].objId,pageNumber:I,pageContext:Ot[I]}},rn=p.__private__.getPageInfoByObjId=function(I){if(isNaN(I)||I%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in Ot)if(Ot[oe].objId===I)break;return Mo(oe)},Nc=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ot[X].objId,pageNumber:X,pageContext:Ot[X]}};p.addPage=function(){return of.apply(this,arguments),this},p.setPage=function(){return Dl.apply(this,arguments),Ne.call(this,He[X]),this},p.insertPage=function(I){return this.addPage(),this.movePage(X,I),this},p.movePage=function(I,oe){var be,Ce;if(I>oe){be=He[I],Ce=Ot[I];for(var Fe=I;Fe>oe;Fe--)He[Fe]=He[Fe-1],Ot[Fe]=Ot[Fe-1];He[oe]=be,Ot[oe]=Ce,this.setPage(oe)}else if(I<oe){be=He[I],Ce=Ot[I];for(var Qe=I;Qe<oe;Qe++)He[Qe]=He[Qe+1],Ot[Qe]=Ot[Qe+1];He[oe]=be,Ot[oe]=Ce,this.setPage(oe)}return this},p.deletePage=function(){return af.apply(this,arguments),this},p.__private__.text=p.text=function(I,oe,be,Ce,Fe){var Qe,ht,At,Kt,pn,xn,Tn,Cr,Mr,Vr=(Ce=Ce||{}).scope||this;if(typeof I=="number"&&typeof oe=="number"&&(typeof be=="string"||Array.isArray(be))){var Ci=be;be=oe,oe=I,I=Ci}if(arguments[3]instanceof Et?(N("The transform parameter of text() with a Matrix value"),Mr=Fe):(At=arguments[4],Kt=arguments[5],Xn(Tn=arguments[3])==="object"&&Tn!==null||(typeof At=="string"&&(Kt=At,At=null),typeof Tn=="string"&&(Kt=Tn,Tn=null),typeof Tn=="number"&&(At=Tn,Tn=null),Ce={flags:Tn,angle:At,align:Kt})),isNaN(oe)||isNaN(be)||I==null)throw new Error("Invalid arguments passed to jsPDF.text");if(I.length===0)return Vr;var hi="",Uo=!1,$s=typeof Ce.lineHeightFactor=="number"?Ce.lineHeightFactor:Cc,$o=Vr.internal.scaleFactor;function Bl(Vn){return Vn=Vn.split("	").join(Array(Ce.TabLen||9).join(" ")),hs(Vn,Tn)}function mf(Vn){for(var rr,Ir=Vn.concat(),Rr=[],gs=Ir.length;gs--;)typeof(rr=Ir.shift())=="string"?Rr.push(rr):Array.isArray(Vn)&&(rr.length===1||rr[1]===void 0&&rr[2]===void 0)?Rr.push(rr[0]):Rr.push([rr[0],rr[1],rr[2]]);return Rr}function ju(Vn,rr){var Ir;if(typeof Vn=="string")Ir=rr(Vn)[0];else if(Array.isArray(Vn)){for(var Rr,gs,ba=Vn.concat(),Lc=[],Mc=ba.length;Mc--;)typeof(Rr=ba.shift())=="string"?Lc.push(rr(Rr)[0]):Array.isArray(Rr)&&typeof Rr[0]=="string"&&(gs=rr(Rr[0],Rr[1],Rr[2]),Lc.push([gs[0],gs[1],gs[2]]));Ir=Lc}return Ir}var jc=!1,Pu=!0;if(typeof I=="string")jc=!0;else if(Array.isArray(I)){var Du=I.concat();ht=[];for(var Pc,ti=Du.length;ti--;)(typeof(Pc=Du.shift())!="string"||Array.isArray(Pc)&&typeof Pc[0]!="string")&&(Pu=!1);jc=Pu}if(jc===!1)throw new Error('Type of text must be string or Array. "'+I+'" is not recognized.');typeof I=="string"&&(I=I.match(/[\r?\n]/)?I.split(/\r\n|\r|\n/g):[I]);var Ou=ke/Vr.internal.scaleFactor,Lu=Ou*($s-1);switch(Ce.baseline){case"bottom":be-=Lu;break;case"top":be+=Ou-Lu;break;case"hanging":be+=Ou-2*Lu;break;case"middle":be+=Ou/2-Lu}if((xn=Ce.maxWidth||0)>0&&(typeof I=="string"?I=Vr.splitTextToSize(I,xn):Object.prototype.toString.call(I)==="[object Array]"&&(I=I.reduce(function(Vn,rr){return Vn.concat(Vr.splitTextToSize(rr,xn))},[]))),Qe={text:I,x:oe,y:be,options:Ce,mutex:{pdfEscape:hs,activeFontKey:Mt,fonts:cn,activeFontSize:ke}},Jt.publish("preProcessText",Qe),I=Qe.text,At=(Ce=Qe.options).angle,!(Mr instanceof Et)&&At&&typeof At=="number"){At*=Math.PI/180,Ce.rotationDirection===0&&(At=-At),k===S.ADVANCED&&(At=-At);var Mu=Math.cos(At),Iu=Math.sin(At);Mr=new Et(Mu,Iu,-Iu,Mu,0,0)}else At&&At instanceof Et&&(Mr=At);k!==S.ADVANCED||Mr||(Mr=Bn),(pn=Ce.charSpace||Rl)!==void 0&&(hi+=C(M(pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cr=Ce.horizontalScale)!==void 0&&(hi+=C(100*Cr)+` Tz
`),Ce.lang;var Gi=-1,Dc=Ce.renderingMode!==void 0?Ce.renderingMode:Ce.stroke,Xa=Vr.internal.getCurrentPageInfo().pageContext;switch(Dc){case 0:case!1:case"fill":Gi=0;break;case 1:case!0:case"stroke":Gi=1;break;case 2:case"fillThenStroke":Gi=2;break;case 3:case"invisible":Gi=3;break;case 4:case"fillAndAddForClipping":Gi=4;break;case 5:case"strokeAndAddPathForClipping":Gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gi=6;break;case 7:case"addToPathForClipping":Gi=7}var Hh=Xa.usedRenderingMode!==void 0?Xa.usedRenderingMode:-1;Gi!==-1?hi+=Gi+` Tr
`:Hh!==-1&&(hi+=`0 Tr
`),Gi!==-1&&(Xa.usedRenderingMode=Gi),Kt=Ce.align||"left";var ms,gf=ke*$s,qh=Vr.internal.pageSize.getWidth(),yf=cn[Mt];pn=Ce.charSpace||Rl,xn=Ce.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},Ce.flags);var xa=[];if(Object.prototype.toString.call(I)==="[object Array]"){var Ws;ht=mf(I),Kt!=="left"&&(ms=ht.map(function(Vn){return Vr.getStringUnitWidth(Vn,{font:yf,charSpace:pn,fontSize:ke,doKerning:!1})*ke/$o}));var lo,Ya=0;if(Kt==="right"){oe-=ms[0],I=[],ti=ht.length;for(var va=0;va<ti;va++)va===0?(lo=Fo(oe),Ws=zo(be)):(lo=M(Ya-ms[va]),Ws=-gf),I.push([ht[va],lo,Ws]),Ya=ms[va]}else if(Kt==="center"){oe-=ms[0]/2,I=[],ti=ht.length;for(var Ja=0;Ja<ti;Ja++)Ja===0?(lo=Fo(oe),Ws=zo(be)):(lo=M((Ya-ms[Ja])/2),Ws=-gf),I.push([ht[Ja],lo,Ws]),Ya=ms[Ja]}else if(Kt==="left"){I=[],ti=ht.length;for(var Ru=0;Ru<ti;Ru++)I.push(ht[Ru])}else{if(Kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');I=[],ti=ht.length,xn=xn!==0?xn:qh;for(var Wo=0;Wo<ti;Wo++)Ws=Wo===0?zo(be):-gf,lo=Wo===0?Fo(oe):0,Wo<ti-1?xa.push(C(M((xn-ms[Wo])/(ht[Wo].split(" ").length-1)))):xa.push(0),I.push([ht[Wo],lo,Ws])}}var Fu=typeof Ce.R2L=="boolean"?Ce.R2L:gt;Fu===!0&&(I=ju(I,function(Vn,rr,Ir){return[Vn.split("").reverse().join(""),rr,Ir]})),Qe={text:I,x:oe,y:be,options:Ce,mutex:{pdfEscape:hs,activeFontKey:Mt,fonts:cn,activeFontSize:ke}},Jt.publish("postProcessText",Qe),I=Qe.text,Uo=Qe.mutex.isHex||!1;var Ki=cn[Mt].encoding;Ki!=="WinAnsiEncoding"&&Ki!=="StandardEncoding"||(I=ju(I,function(Vn,rr,Ir){return[Bl(Vn),rr,Ir]})),ht=mf(I),I=[];for(var co,uo,wa,Ul=0,Oc=1,Za=Array.isArray(ht[0])?Oc:Ul,$l="",xf=function(Vn,rr,Ir){var Rr="";return Ir instanceof Et?(Ir=typeof Ce.angle=="number"?lr(Ir,new Et(1,0,0,1,Vn,rr)):lr(new Et(1,0,0,1,Vn,rr),Ir),k===S.ADVANCED&&(Ir=lr(new Et(1,0,0,-1,0,0),Ir)),Rr=Ir.join(" ")+` Tm
`):Rr=C(Vn)+" "+C(rr)+` Td
`,Rr},wi=0;wi<ht.length;wi++){switch($l="",Za){case Oc:wa=(Uo?"<":"(")+ht[wi][0]+(Uo?">":")"),co=parseFloat(ht[wi][1]),uo=parseFloat(ht[wi][2]);break;case Ul:wa=(Uo?"<":"(")+ht[wi]+(Uo?">":")"),co=Fo(oe),uo=zo(be)}xa!==void 0&&xa[wi]!==void 0&&($l=xa[wi]+` Tw
`),wi===0?I.push($l+xf(co,uo,Mr)+wa):Za===Ul?I.push($l+wa):Za===Oc&&I.push($l+xf(co,uo,Mr)+wa)}I=Za===Ul?I.join(` Tj
T* `):I.join(` Tj
`),I+=` Tj
`;var Vo=`BT
/`;return Vo+=Mt+" "+ke+` Tf
`,Vo+=C(ke*$s)+` TL
`,Vo+=ei+`
`,Vo+=hi,Vo+=I,pe(Vo+="ET"),h[Mt]=!0,Vr};var ma=p.__private__.clip=p.clip=function(I){return pe(I==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return ma("evenodd")},p.__private__.discardPath=p.discardPath=function(){return pe("n"),this};var ga=p.__private__.isValidStyle=function(I){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(I)!==-1&&(oe=!0),oe};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(I){return ga(I)&&(c=I),this};var cf=p.__private__.getStyle=p.getStyle=function(I){var oe=c;switch(I){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=I}return oe},Ll=p.close=function(){return pe("h"),this};p.stroke=function(){return pe("S"),this},p.fill=function(I){return bu("f",I),this},p.fillEvenOdd=function(I){return bu("f*",I),this},p.fillStroke=function(I){return bu("B",I),this},p.fillStrokeEvenOdd=function(I){return bu("B*",I),this};var bu=function(I,oe){Xn(oe)==="object"?$h(oe,I):pe(I)},_u=function(I){I===null||k===S.ADVANCED&&I===void 0||(I=cf(I),pe(I))};function Su(I,oe,be,Ce,Fe){var Qe=new rh(oe||this.boundingBox,be||this.xStep,Ce||this.yStep,this.gState,Fe||this.matrix);Qe.stream=this.stream;var ht=I+"$$"+this.cloneIndex+++"$$";return nr(ht,Qe),Qe}var $h=function(I,oe){var be=Qr[I.key],Ce=dn[be];if(Ce instanceof vd)pe("q"),pe(F0(oe)),Ce.gState&&p.setGState(Ce.gState),pe(I.matrix.toString()+" cm"),pe("/"+be+" sh"),pe("Q");else if(Ce instanceof rh){var Fe=new Et(1,0,0,-1,0,zl());I.matrix&&(Fe=Fe.multiply(I.matrix||Bn),be=Su.call(Ce,I.key,I.boundingBox,I.xStep,I.yStep,Fe).id),pe("q"),pe("/Pattern cs"),pe("/"+be+" scn"),Ce.gState&&p.setGState(Ce.gState),pe(oe),pe("Q")}},F0=function(I){switch(I){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ga=p.moveTo=function(I,oe){return pe(C(M(I))+" "+C(W(oe))+" m"),this},Io=p.lineTo=function(I,oe){return pe(C(M(I))+" "+C(W(oe))+" l"),this},Us=p.curveTo=function(I,oe,be,Ce,Fe,Qe){return pe([C(M(I)),C(W(oe)),C(M(be)),C(W(Ce)),C(M(Fe)),C(W(Qe)),"c"].join(" ")),this};p.__private__.line=p.line=function(I,oe,be,Ce,Fe){if(isNaN(I)||isNaN(oe)||isNaN(be)||isNaN(Ce)||!ga(Fe))throw new Error("Invalid arguments passed to jsPDF.line");return k===S.COMPAT?this.lines([[be-I,Ce-oe]],I,oe,[1,1],Fe||"S"):this.lines([[be-I,Ce-oe]],I,oe,[1,1]).stroke()},p.__private__.lines=p.lines=function(I,oe,be,Ce,Fe,Qe){var ht,At,Kt,pn,xn,Tn,Cr,Mr,Vr,Ci,hi,Uo;if(typeof I=="number"&&(Uo=be,be=oe,oe=I,I=Uo),Ce=Ce||[1,1],Qe=Qe||!1,isNaN(oe)||isNaN(be)||!Array.isArray(I)||!Array.isArray(Ce)||!ga(Fe)||typeof Qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ga(oe,be),ht=Ce[0],At=Ce[1],pn=I.length,Ci=oe,hi=be,Kt=0;Kt<pn;Kt++)(xn=I[Kt]).length===2?(Ci=xn[0]*ht+Ci,hi=xn[1]*At+hi,Io(Ci,hi)):(Tn=xn[0]*ht+Ci,Cr=xn[1]*At+hi,Mr=xn[2]*ht+Ci,Vr=xn[3]*At+hi,Ci=xn[4]*ht+Ci,hi=xn[5]*At+hi,Us(Tn,Cr,Mr,Vr,Ci,hi));return Qe&&Ll(),_u(Fe),this},p.path=function(I){for(var oe=0;oe<I.length;oe++){var be=I[oe],Ce=be.c;switch(be.op){case"m":Ga(Ce[0],Ce[1]);break;case"l":Io(Ce[0],Ce[1]);break;case"c":Us.apply(this,Ce);break;case"h":Ll()}}return this},p.__private__.rect=p.rect=function(I,oe,be,Ce,Fe){if(isNaN(I)||isNaN(oe)||isNaN(be)||isNaN(Ce)||!ga(Fe))throw new Error("Invalid arguments passed to jsPDF.rect");return k===S.COMPAT&&(Ce=-Ce),pe([C(M(I)),C(W(oe)),C(M(be)),C(M(Ce)),"re"].join(" ")),_u(Fe),this},p.__private__.triangle=p.triangle=function(I,oe,be,Ce,Fe,Qe,ht){if(isNaN(I)||isNaN(oe)||isNaN(be)||isNaN(Ce)||isNaN(Fe)||isNaN(Qe)||!ga(ht))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-I,Ce-oe],[Fe-be,Qe-Ce],[I-Fe,oe-Qe]],I,oe,[1,1],ht,!0),this},p.__private__.roundedRect=p.roundedRect=function(I,oe,be,Ce,Fe,Qe,ht){if(isNaN(I)||isNaN(oe)||isNaN(be)||isNaN(Ce)||isNaN(Fe)||isNaN(Qe)||!ga(ht))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var At=4/3*(Math.SQRT2-1);return Fe=Math.min(Fe,.5*be),Qe=Math.min(Qe,.5*Ce),this.lines([[be-2*Fe,0],[Fe*At,0,Fe,Qe-Qe*At,Fe,Qe],[0,Ce-2*Qe],[0,Qe*At,-Fe*At,Qe,-Fe,Qe],[2*Fe-be,0],[-Fe*At,0,-Fe,-Qe*At,-Fe,-Qe],[0,2*Qe-Ce],[0,-Qe*At,Fe*At,-Qe,Fe,-Qe]],I+Fe,oe,[1,1],ht,!0),this},p.__private__.ellipse=p.ellipse=function(I,oe,be,Ce,Fe){if(isNaN(I)||isNaN(oe)||isNaN(be)||isNaN(Ce)||!ga(Fe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Qe=4/3*(Math.SQRT2-1)*be,ht=4/3*(Math.SQRT2-1)*Ce;return Ga(I+be,oe),Us(I+be,oe-ht,I+Qe,oe-Ce,I,oe-Ce),Us(I-Qe,oe-Ce,I-be,oe-ht,I-be,oe),Us(I-be,oe+ht,I-Qe,oe+Ce,I,oe+Ce),Us(I+Qe,oe+Ce,I+be,oe+ht,I+be,oe),_u(Fe),this},p.__private__.circle=p.circle=function(I,oe,be,Ce){if(isNaN(I)||isNaN(oe)||isNaN(be)||!ga(Ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(I,oe,be,be,Ce)},p.setFont=function(I,oe,be){return be&&(oe=P(oe,be)),Mt=vu(I,oe,{disableWarning:!1}),this};var ku=p.__private__.getFont=p.getFont=function(){return cn[vu.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var I,oe,be={};for(I in bn)if(bn.hasOwnProperty(I))for(oe in be[I]=[],bn[I])bn[I].hasOwnProperty(oe)&&be[I].push(oe);return be},p.addFont=function(I,oe,be,Ce,Fe){var Qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Qe.indexOf(arguments[3])!==-1?Fe=arguments[3]:arguments[3]&&Qe.indexOf(arguments[3])==-1&&(be=P(be,Ce)),Fe=Fe||"Identity-H",Pl.call(this,I,oe,be,Fe)};var Cc,uf=t.lineWidth||.200025,Ml=p.__private__.getLineWidth=p.getLineWidth=function(){return uf},Ec=p.__private__.setLineWidth=p.setLineWidth=function(I){return uf=I,pe(C(M(I))+" w"),this};p.__private__.setLineDash=nn.API.setLineDash=nn.API.setLineDashPattern=function(I,oe){if(I=I||[],oe=oe||0,isNaN(oe)||!Array.isArray(I))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return I=I.map(function(be){return C(M(be))}).join(" "),oe=C(M(oe)),pe("["+I+"] "+oe+" d"),this};var Nu=p.__private__.getLineHeight=p.getLineHeight=function(){return ke*Cc};p.__private__.getLineHeight=p.getLineHeight=function(){return ke*Cc};var df=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(I){return typeof(I=I||1.15)=="number"&&(Cc=I),this},Ro=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Cc};df(t.lineHeight);var Fo=p.__private__.getHorizontalCoordinate=function(I){return M(I)},zo=p.__private__.getVerticalCoordinate=function(I){return k===S.ADVANCED?I:Ot[X].mediaBox.topRightY-Ot[X].mediaBox.bottomLeftY-M(I)},Wh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(I){return C(Fo(I))},Bo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(I){return C(zo(I))},ps=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return fe(ps)},p.__private__.setStrokeColor=p.setDrawColor=function(I,oe,be,Ce){return ps=me({ch1:I,ch2:oe,ch3:be,ch4:Ce,pdfColorType:"draw",precision:2}),pe(ps),this};var Cu=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return fe(Cu)},p.__private__.setFillColor=p.setFillColor=function(I,oe,be,Ce){return Cu=me({ch1:I,ch2:oe,ch3:be,ch4:Ce,pdfColorType:"fill",precision:2}),pe(Cu),this};var ei=t.textColor||"0 g",Il=p.__private__.getTextColor=p.getTextColor=function(){return fe(ei)};p.__private__.setTextColor=p.setTextColor=function(I,oe,be,Ce){return ei=me({ch1:I,ch2:oe,ch3:be,ch4:Ce,pdfColorType:"text",precision:3}),this};var Rl=t.charSpace,Ac=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Rl||0)};p.__private__.setCharSpace=p.setCharSpace=function(I){if(isNaN(I))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Rl=I,this};var ff=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(I){var oe=p.CapJoinStyles[I];if(oe===void 0)throw new Error("Line cap style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ff=oe,pe(oe+" J"),this};var Tc=0;p.__private__.setLineJoin=p.setLineJoin=function(I){var oe=p.CapJoinStyles[I];if(oe===void 0)throw new Error("Line join style of '"+I+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Tc=oe,pe(oe+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(I){if(I=I||0,isNaN(I))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return pe(C(M(I))+" M"),this},p.GState=Kg,p.setGState=function(I){(I=typeof I=="string"?_n[gr[I]]:Eu(null,I)).equals(fn)||(pe("/"+I.id+" gs"),fn=I)};var Eu=function(I,oe){if(!I||!gr[I]){var be=!1;for(var Ce in _n)if(_n.hasOwnProperty(Ce)&&_n[Ce].equals(oe)){be=!0;break}if(be)oe=_n[Ce];else{var Fe="GS"+(Object.keys(_n).length+1).toString(10);_n[Fe]=oe,oe.id=Fe}return I&&(gr[I]=oe.id),Jt.publish("addGState",oe),oe}};p.addGState=function(I,oe){return Eu(I,oe),this},p.saveGraphicsState=function(){return pe("q"),$r.push({key:Mt,size:ke,color:ei}),this},p.restoreGraphicsState=function(){pe("Q");var I=$r.pop();return Mt=I.key,ke=I.size,ei=I.color,fn=null,this},p.setCurrentTransformationMatrix=function(I){return pe(I.toString()+" cm"),this},p.comment=function(I){return pe("#"+I),this};var ya=function(I,oe){var be=I||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(Qe){isNaN(Qe)||(be=parseFloat(Qe))}});var Ce=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ce},set:function(Qe){isNaN(Qe)||(Ce=parseFloat(Qe))}});var Fe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Fe},set:function(Qe){Fe=Qe.toString()}}),this},Fl=function(I,oe,be,Ce){ya.call(this,I,oe),this.type="rect";var Fe=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Fe},set:function(ht){isNaN(ht)||(Fe=parseFloat(ht))}});var Qe=Ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Qe},set:function(ht){isNaN(ht)||(Qe=parseFloat(ht))}}),this},Au=function(){this.page=Yt,this.currentPage=X,this.pages=He.slice(0),this.pagesContext=Ot.slice(0),this.x=Nn,this.y=Qt,this.matrix=Wn,this.width=Ka(X),this.height=zl(X),this.outputDestination=Ge,this.id="",this.objectNumber=-1};Au.prototype.restore=function(){Yt=this.page,X=this.currentPage,Ot=this.pagesContext,He=this.pages,Nn=this.x,Qt=this.y,Wn=this.matrix,hf(X,this.width),pf(X,this.height),Ge=this.outputDestination};var Vh=function(I,oe,be,Ce,Fe){Lr.push(new Au),Yt=X=0,He=[],Nn=I,Qt=oe,Wn=Fe,_c([be,Ce])},z0=function(I){if(Cn[I])Lr.pop().restore();else{var oe=new Au,be="Xo"+(Object.keys(hn).length+1).toString(10);oe.id=be,Cn[I]=be,hn[be]=oe,Jt.publish("addFormObject",oe),Lr.pop().restore()}};for(var Tu in p.beginFormObject=function(I,oe,be,Ce,Fe){return Vh(I,oe,be,Ce,Fe),this},p.endFormObject=function(I){return z0(I),this},p.doFormObject=function(I,oe){var be=hn[Cn[I]];return pe("q"),pe(oe.toString()+" cm"),pe("/"+be.id+" Do"),pe("Q"),this},p.getFormObject=function(I){var oe=hn[Cn[I]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},p.save=function(I,oe){return I=I||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Hf(Sc(ha()),I),typeof Hf.unload=="function"&&an.setTimeout&&setTimeout(Hf.unload,911),this):new Promise(function(be,Ce){try{var Fe=Hf(Sc(ha()),I);typeof Hf.unload=="function"&&an.setTimeout&&setTimeout(Hf.unload,911),be(Fe)}catch(Qe){Ce(Qe.message)}})},nn.API)nn.API.hasOwnProperty(Tu)&&(Tu==="events"&&nn.API.events.length?function(I,oe){var be,Ce,Fe;for(Fe=oe.length-1;Fe!==-1;Fe--)be=oe[Fe][0],Ce=oe[Fe][1],I.subscribe.apply(I,[be].concat(typeof Ce=="function"?[Ce]:Ce))}(Jt,nn.API.events):p[Tu]=nn.API[Tu]);var Ka=p.getPageWidth=function(I){return(Ot[I=I||X].mediaBox.topRightX-Ot[I].mediaBox.bottomLeftX)/ot},hf=p.setPageWidth=function(I,oe){Ot[I].mediaBox.topRightX=oe*ot+Ot[I].mediaBox.bottomLeftX},zl=p.getPageHeight=function(I){return(Ot[I=I||X].mediaBox.topRightY-Ot[I].mediaBox.bottomLeftY)/ot},pf=p.setPageHeight=function(I,oe){Ot[I].mediaBox.topRightY=oe*ot+Ot[I].mediaBox.bottomLeftY};return p.internal={pdfEscape:hs,getStyle:cf,getFont:ku,getFontSize:it,getCharSpace:Ac,getTextColor:Il,getLineHeight:Nu,getLineHeightFactor:Ro,getLineWidth:Ml,write:qe,getHorizontalCoordinate:Fo,getVerticalCoordinate:zo,getCoordinateString:Wh,getVerticalCoordinateString:Bo,collections:{},newObject:jn,newAdditionalObject:we,newObjectDeferred:On,newObjectDeferredBegin:ae,getFilters:Ae,putStream:De,events:Jt,scaleFactor:ot,pageSize:{getWidth:function(){return Ka(X)},setWidth:function(I){hf(X,I)},getHeight:function(){return zl(X)},setHeight:function(I){pf(X,I)}},encryptionOptions:u,encryption:Nr,getEncryptor:pa,output:Ol,getNumberOfPages:R0,pages:He,out:pe,f2:R,f3:D,getPageInfo:Mo,getPageInfoByObjId:rn,getCurrentPageInfo:Nc,getPDFVersion:x,Point:ya,Rectangle:Fl,Matrix:Et,hasHotfix:kc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Ka(X)},set:function(I){hf(X,I)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return zl(X)},set:function(I){pf(X,I)},enumerable:!0,configurable:!0}),bc.call(p,Me),Mt="F1",of(i,n),Jt.publish("initialized"),p}Lp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Lp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Lp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Lp.prototype.processOwnerPassword=function(t,e){return A_(E_(e).substr(0,5),t)},Lp.prototype.encryptor=function(t,e){var n=E_(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return A_(n,r)}},Kg.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Xn(t)!==Xn(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},nn.API={events:[]},nn.version="2.5.1";var Kr=nn.API,J4=1,jh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Np=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},gn=function(t){return t.toFixed(2)},sd=function(t){return t.toFixed(5)};Kr.__acroform__={};var Oo=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},kT=function(t){return t*J4},Zl=function(t){var e=new qM,n=zt.internal.getHeight(t)||0,r=zt.internal.getWidth(t)||0;return e.BBox=[0,0,Number(gn(r)),Number(gn(n))],e},noe=Kr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},roe=Kr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},ioe=Kr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},li=Kr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ioe(t,e-1)},ci=Kr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return noe(t,e-1)},ui=Kr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return roe(t,e-1)},soe=Kr.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(gn(l.lowerLeft_X)),Number(gn(l.lowerLeft_Y)),Number(gn(l.upperRight_X)),Number(gn(l.upperRight_Y))]},ooe=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=T_(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+gn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Zl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},T_=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var s=n,o=zt.internal.getHeight(t)||0;o=o<0?-o:o;var a=zt.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(D,M,H){if(D+1<i.length){var W=M+" "+i[D+1][0];return Oy(W,t,H).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,u,d=Oy("3",t,s).height,h=t.multiline?o-s:(o-d)/2,p=h+=2,y=0,x=0,v=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Oy(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var b="",S=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var T=!1;if(i[k].length!==1&&v!==i[k].length-1){if((d+2)*(S+2)+2>o)continue e;b+=i[k][v],T=!0,x=k,k--}else{b=(b+=i[k][v]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var j=parseInt(k),P=l(j,b,s),C=k>=i.length-1;if(P&&!C){b+=" ",v=0;continue}if(P||C){if(C)x=j;else if(t.multiline&&(d+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(S+2)+2>o)continue e;x=j}}for(var N="",L=y;L<=x;L++){var R=i[L];if(t.multiline){if(L===x){N+=R[v]+" ",v=(v+1)%R.length;continue}if(L===y){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,u=Oy(N,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=gn(c)+" "+gn(p)+` Td
`,e+="("+jh(N)+`) Tj
`,e+=-gn(c)+` 0 Td
`,p=-(s+2),u=0,y=T?x:x+1,S++,b=""}break}return r.text=e,r.fontSize=s,r},Oy=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},aoe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},loe=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},coe=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Xn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},uoe=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Tl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(aoe)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");J4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new GM,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&loe(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=soe(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=zt.createDefaultAppearanceStream(a),Xn(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var u=ooe(a);l.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(a.appearanceStreamContent){var d="";for(var h in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(h)){var p=a.appearanceStreamContent[h];if(d+="/"+h+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(i,a)),d+="/"+o+" "+y+" ",i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(i,a)),d+="/"+o+" "+y,i.internal.acroformPlugin.xForms.indexOf(y)>=0||i.internal.acroformPlugin.xForms.push(y);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&coe(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},HM=Kr.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Xn(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+jh(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qb=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+jh(r(t))+")"},oc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oc.prototype.toString=function(){return this.objId+" 0 R"},oc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},oc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:HM(i,this.objId,this.scope)}):i instanceof oc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var qM=function(){oc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Oo(qM,oc);var GM=function(){oc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+jh(n(t))+")"}},set:function(n){t=n}})};Oo(GM,oc);var Tl=function t(){oc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!li(e,3)},set:function(b){b?this.F=ci(e,3):this.F=ui(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof pv)return;s="FieldObject"+t.FieldNum++}var b=function(S){return S};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+jh(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/J4:c},set:function(b){c=b}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(b){u=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof pv||this instanceof Fd))return qb(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Ni?h:qb(h,this.objId,this.scope)},set:function(b){b=b.toString(),h=this instanceof Ni?b:b.substr(0,1)==="("?Np(b.substr(1,b.length-2)):Np(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni?Np(h.substr(1,h.length-1)):h},set:function(b){b=b.toString(),h=this instanceof Ni?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ni?p:qb(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof Ni?b:b.substr(0,1)==="("?Np(b.substr(1,b.length-2)):Np(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ni?Np(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Ni?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(b){b=!!b,x=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,1)},set:function(b){b?this.Ff=ci(this.Ff,1):this.Ff=ui(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,2)},set:function(b){b?this.Ff=ci(this.Ff,2):this.Ff=ui(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,3)},set:function(b){b?this.Ff=ci(this.Ff,3):this.Ff=ui(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');v=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(v){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:v=2;break;case"center":case 1:v=1;break;case"left":case 0:default:v=0}}})};Oo(Tl,oc);var fh=function(){Tl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return HM(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,18)},set:function(n){n?this.Ff=ci(this.Ff,18):this.Ff=ui(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=ci(this.Ff,19):this.Ff=ui(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,20)},set:function(n){n?(this.Ff=ci(this.Ff,20),e.sort()):this.Ff=ui(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,22)},set:function(n){n?this.Ff=ci(this.Ff,22):this.Ff=ui(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(n){n?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,27)},set:function(n){n?this.Ff=ci(this.Ff,27):this.Ff=ui(this.Ff,27)}}),this.hasAppearanceStream=!1};Oo(fh,Tl);var hh=function(){fh.call(this),this.fontName="helvetica",this.combo=!1};Oo(hh,fh);var ph=function(){hh.call(this),this.combo=!0};Oo(ph,hh);var ng=function(){ph.call(this),this.edit=!0};Oo(ng,ph);var Ni=function(){Tl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,15)},set:function(n){n?this.Ff=ci(this.Ff,15):this.Ff=ui(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,16)},set:function(n){n?this.Ff=ci(this.Ff,16):this.Ff=ui(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,17)},set:function(n){n?this.Ff=ci(this.Ff,17):this.Ff=ui(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(n){n?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+jh(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Xn(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Oo(Ni,Tl);var rg=function(){Ni.call(this),this.pushButton=!0};Oo(rg,Ni);var mh=function(){Ni.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Oo(mh,Ni);var pv=function(){var t,e;Tl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+jh(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Xn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=zt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Oo(pv,Tl),mh.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},mh.prototype.createOption=function(t){var e=new pv;return e.Parent=this,e.optionName=t,this.Kids.push(e),doe.call(this.scope,e),e};var ig=function(){Ni.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=zt.CheckBox.createAppearanceStream()};Oo(ig,Ni);var Fd=function(){Tl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,13)},set:function(e){e?this.Ff=ci(this.Ff,13):this.Ff=ui(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,21)},set:function(e){e?this.Ff=ci(this.Ff,21):this.Ff=ui(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,23)},set:function(e){e?this.Ff=ci(this.Ff,23):this.Ff=ui(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,24)},set:function(e){e?this.Ff=ci(this.Ff,24):this.Ff=ui(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,25)},set:function(e){e?this.Ff=ci(this.Ff,25):this.Ff=ui(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,26)},set:function(e){e?this.Ff=ci(this.Ff,26):this.Ff=ui(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Oo(Fd,Tl);var sg=function(){Fd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!li(this.Ff,14)},set:function(t){t?this.Ff=ci(this.Ff,14):this.Ff=ui(this.Ff,14)}}),this.password=!0};Oo(sg,Fd);var zt={CheckBox:{createAppearanceStream:function(){return{N:{On:zt.CheckBox.YesNormal},D:{On:zt.CheckBox.YesPushDown,Off:zt.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=T_(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+gn(zt.internal.getWidth(t))+" "+gn(zt.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+gn(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Zl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=zt.internal.getHeight(t),o=zt.internal.getWidth(t),a=T_(t,t.caption);return i.push("1 g"),i.push("0 0 "+gn(o)+" "+gn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+gn(o-1)+" "+gn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+gn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+gn(zt.internal.getWidth(t))+" "+gn(zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:zt.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=zt.RadioButton.Circle.YesNormal,e.D[t]=zt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Zl(t);e.scope=t.scope;var n=[],r=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=zt.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+sd(zt.internal.getWidth(t)/2)+" "+sd(zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=[],r=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*zt.internal.Bezier_C).toFixed(5)),o=Number((r*zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sd(zt.internal.getWidth(t)/2)+" "+sd(zt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+sd(zt.internal.getWidth(t)/2)+" "+sd(zt.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=[],r=zt.internal.getWidth(t)<=zt.internal.getHeight(t)?zt.internal.getWidth(t)/4:zt.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*zt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+sd(zt.internal.getWidth(t)/2)+" "+sd(zt.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:zt.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=zt.RadioButton.Cross.YesNormal,e.D[t]=zt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Zl(t);e.scope=t.scope;var n=[],r=zt.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+gn(zt.internal.getWidth(t)-2)+" "+gn(zt.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(gn(r.x1.x)+" "+gn(r.x1.y)+" m"),n.push(gn(r.x2.x)+" "+gn(r.x2.y)+" l"),n.push(gn(r.x4.x)+" "+gn(r.x4.y)+" m"),n.push(gn(r.x3.x)+" "+gn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=zt.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+gn(zt.internal.getWidth(t))+" "+gn(zt.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+gn(zt.internal.getWidth(t)-2)+" "+gn(zt.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(gn(n.x1.x)+" "+gn(n.x1.y)+" m"),r.push(gn(n.x2.x)+" "+gn(n.x2.y)+" l"),r.push(gn(n.x4.x)+" "+gn(n.x4.y)+" m"),r.push(gn(n.x3.x)+" "+gn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Zl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+gn(zt.internal.getWidth(t))+" "+gn(zt.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};zt.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=zt.internal.getWidth(t),n=zt.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},zt.internal.getWidth=function(t){var e=0;return Xn(t)==="object"&&(e=kT(t.Rect[2])),e},zt.internal.getHeight=function(t){var e=0;return Xn(t)==="object"&&(e=kT(t.Rect[3])),e};var doe=Kr.addField=function(t){if(uoe(this,t),!(t instanceof Tl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Kr.AcroFormChoiceField=fh,Kr.AcroFormListBox=hh,Kr.AcroFormComboBox=ph,Kr.AcroFormEditBox=ng,Kr.AcroFormButton=Ni,Kr.AcroFormPushButton=rg,Kr.AcroFormRadioButton=mh,Kr.AcroFormCheckBox=ig,Kr.AcroFormTextField=Fd,Kr.AcroFormPasswordField=sg,Kr.AcroFormAppearance=zt,Kr.AcroForm={ChoiceField:fh,ListBox:hh,ComboBox:ph,EditBox:ng,Button:Ni,PushButton:rg,RadioButton:mh,CheckBox:ig,TextField:Fd,PasswordField:sg,Appearance:zt},nn.AcroForm={ChoiceField:fh,ListBox:hh,ComboBox:ph,EditBox:ng,Button:Ni,PushButton:rg,RadioButton:mh,CheckBox:ig,TextField:Fd,PasswordField:sg,Appearance:zt};var foe=nn.AcroForm;function KM(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(D,M){var H,W,Z,B,F,Q=e;if((M=M||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(P(D))for(F in n)for(Z=n[F],H=0;H<Z.length;H+=1){for(B=!0,W=0;W<Z[H].length;W+=1)if(Z[H][W]!==void 0&&Z[H][W]!==D[W]){B=!1;break}if(B===!0){Q=F;break}}else for(F in n)for(Z=n[F],H=0;H<Z.length;H+=1){for(B=!0,W=0;W<Z[H].length;W+=1)if(Z[H][W]!==void 0&&Z[H][W]!==D.charCodeAt(W)){B=!1;break}if(B===!0){Q=F;break}}return Q===e&&M!==e&&(Q=M),Q},i=function D(M){for(var H=this.internal.write,W=this.internal.putStream,Z=(0,this.internal.getFilters)();Z.indexOf("FlateEncode")!==-1;)Z.splice(Z.indexOf("FlateEncode"),1);M.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:M.width}),B.push({key:"Height",value:M.height}),M.colorSpace===v.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(M.palette.length/3-1)+" "+("sMask"in M&&M.sMask!==void 0?M.objectId+2:M.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+M.colorSpace}),M.colorSpace===v.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:M.bitsPerComponent}),"decodeParameters"in M&&M.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+M.decodeParameters+">>"}),"transparency"in M&&Array.isArray(M.transparency)){for(var F="",Q=0,ee=M.transparency.length;Q<ee;Q++)F+=M.transparency[Q]+" "+M.transparency[Q]+" ";B.push({key:"Mask",value:"["+F+"]"})}M.sMask!==void 0&&B.push({key:"SMask",value:M.objectId+1+" 0 R"});var te=M.filter!==void 0?["/"+M.filter]:void 0;if(W({data:M.data,additionalKeyValues:B,alreadyAppliedFilters:te,objectId:M.objectId}),H("endobj"),"sMask"in M&&M.sMask!==void 0){var re="/Predictor "+M.predictor+" /Colors 1 /BitsPerComponent "+M.bitsPerComponent+" /Columns "+M.width,O={width:M.width,height:M.height,colorSpace:"DeviceGray",bitsPerComponent:M.bitsPerComponent,decodeParameters:re,data:M.sMask};"filter"in M&&(O.filter=M.filter),D.call(this,O)}if(M.colorSpace===v.INDEXED){var X=this.internal.newObject();W({data:N(new Uint8Array(M.palette)),objectId:X}),H("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var M in D)i.call(this,D[M])},o=function(){var D,M=this.internal.collections.addImage_images,H=this.internal.write;for(var W in M)H("/I"+(D=M[W]).index,D.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var D=this.internal.collections.addImage_images;return a.call(this),D},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(D){return typeof t["process"+D.toUpperCase()]=="function"},d=function(D){return Xn(D)==="object"&&D.nodeType===1},h=function(D,M){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var H=""+D.getAttribute("src");if(H.indexOf("data:image/")===0)return tg(unescape(H).split("base64,").pop());var W=t.loadFile(H,!0);if(W!==void 0)return W}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var Z;switch(M){case"PNG":Z="image/png";break;case"WEBP":Z="image/webp";break;case"JPEG":case"JPG":default:Z="image/jpeg"}return tg(D.toDataURL(Z,1).split("base64,").pop())}},p=function(D){var M=this.internal.collections.addImage_images;if(M){for(var H in M)if(D===M[H].alias)return M[H]}},y=function(D,M,H){return D||M||(D=-96,M=-96),D<0&&(D=-1*H.width*72/D/this.internal.scaleFactor),M<0&&(M=-1*H.height*72/M/this.internal.scaleFactor),D===0&&(D=M*H.width/H.height),M===0&&(M=D*H.height/H.width),[D,M]},x=function(D,M,H,W,Z,B){var F=y.call(this,H,W,Z),Q=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,te=l.call(this);if(H=F[0],W=F[1],te[Z.index]=Z,B){B*=Math.PI/180;var re=Math.cos(B),O=Math.sin(B),X=function(V){return V.toFixed(4)},q=[X(re),X(O),X(-1*O),X(re),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,Q(D),ee(M+W),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([Q(H),"0","0",Q(W),"0","0","cm"].join(" "))):this.internal.write([Q(H),"0","0",Q(W),Q(D),ee(M+W),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Z.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(D){var M,H,W=0;if(typeof D=="string")for(H=D.length,M=0;M<H;M++)W=(W<<5)-W+D.charCodeAt(M),W|=0;else if(P(D))for(H=D.byteLength/2,M=0;M<H;M++)W=(W<<5)-W+D[M],W|=0;return W},k=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var M=!0;return D.length===0&&(M=!1),D.length%4!=0&&(M=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(M=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(M=!1),M},T=t.__addimage__.extractImageFromDataUrl=function(D){var M=(D=D||"").split("base64,"),H=null;if(M.length===2){var W=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(M[0]);Array.isArray(W)&&(H={mimeType:W[1],charset:W[2],data:M[1]})}return H},j=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return j()&&D instanceof ArrayBuffer};var P=t.__addimage__.isArrayBufferView=function(D){return j()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(D){for(var M=D.length,H=new Uint8Array(M),W=0;W<M;W++)H[W]=D.charCodeAt(W);return H},N=t.__addimage__.arrayBufferToBinaryString=function(D){for(var M="",H=P(D)?D:new Uint8Array(D),W=0;W<H.length;W+=8192)M+=String.fromCharCode.apply(null,H.subarray(W,W+8192));return M};t.addImage=function(){var D,M,H,W,Z,B,F,Q,ee;if(typeof arguments[1]=="number"?(M=e,H=arguments[1],W=arguments[2],Z=arguments[3],B=arguments[4],F=arguments[5],Q=arguments[6],ee=arguments[7]):(M=arguments[1],H=arguments[2],W=arguments[3],Z=arguments[4],B=arguments[5],F=arguments[6],Q=arguments[7],ee=arguments[8]),Xn(D=arguments[0])==="object"&&!d(D)&&"imageData"in D){var te=D;D=te.imageData,M=te.format||M||e,H=te.x||H||0,W=te.y||W||0,Z=te.w||te.width||Z,B=te.h||te.height||B,F=te.alias||F,Q=te.compression||Q,ee=te.rotation||te.angle||ee}var re=this.internal.getFilters();if(Q===void 0&&re.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(H)||isNaN(W))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var O=L.call(this,D,M,F,Q);return x.call(this,H,W,Z,B,O,ee),this};var L=function(D,M,H,W){var Z,B,F;if(typeof D=="string"&&r(D)===e){D=unescape(D);var Q=R(D,!1);(Q!==""||(Q=t.loadFile(D,!0))!==void 0)&&(D=Q)}if(d(D)&&(D=h(D,M)),M=r(D,M),!u(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(((F=H)==null||F.length===0)&&(H=function(ee){return typeof ee=="string"||P(ee)?S(ee):P(ee.data)?S(ee.data):null}(D)),(Z=p.call(this,H))||(j()&&(D instanceof Uint8Array||M==="RGBA"||(B=D,D=C(D))),Z=this["process"+M.toUpperCase()](D,c.call(this),H,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in t.image_compression?ee:b.NONE}(W),B)),!Z)throw new Error("An unknown error occurred whilst processing the image.");return Z},R=t.__addimage__.convertBase64ToBinaryString=function(D,M){var H;M=typeof M!="boolean"||M;var W,Z="";if(typeof D=="string"){W=(H=T(D))!==null?H.data:D;try{Z=tg(W)}catch(B){if(M)throw k(W)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Z};t.getImageProperties=function(D){var M,H,W="";if(d(D)&&(D=h(D)),typeof D=="string"&&r(D)===e&&((W=R(D,!1))===""&&(W=t.loadFile(D)||""),D=W),H=r(D),!u(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!j()||D instanceof Uint8Array||(D=C(D)),!(M=this["process"+H.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return M.fileType=H,M}})(nn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};nn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,u=!1,d=0;d<c.length&&!u;d++)switch((r=c[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var h=0;h<c.length;h++){r=c[h];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(x.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(b(r.contents))+")",s+=" /Popup "+v.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(b(S))+") >>",x.content=s;var k=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+k,r.open&&(s+=" /Open true"),s+=" >>",v.content=s,this.internal.write(x.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var T=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(y(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var j=this.annotations._nameMap[r.options.name];r.options.pageNumber=j.page,r.options.top=j.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var u=this.splitTextToSize(n,a).length;o=Math.ceil(c*u)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(nn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=t.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(x){var v=0,b=n,S="",k=0;for(v=0;v<x.length;v+=1)b[x.charCodeAt(v)]!==void 0?(k++,typeof(b=b[x.charCodeAt(v)])=="number"&&(S+=String.fromCharCode(b),b=n,k=0),v===x.length-1&&(b=n,S+=x.charAt(v-(k-1)),v-=k-1,k=0)):(b=n,S+=x.charAt(v-k),v-=k,k=0);return S};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var h=t.__arabicParser__.getCorrectForm=function(x,v,b){return o(x)?s(x)===!1?-1:!c(x)||!o(v)&&!o(b)||!o(b)&&a(v)||a(x)&&!o(v)||a(x)&&l(v)||a(x)&&a(v)?0:u(x)&&o(v)&&!a(v)&&o(b)&&c(b)?3:a(x)||!o(b)?1:2:-1},p=function(x){var v=0,b=0,S=0,k="",T="",j="",P=(x=x||"").split("\\s+"),C=[];for(v=0;v<P.length;v+=1){for(C.push(""),b=0;b<P[v].length;b+=1)k=P[v][b],T=P[v][b-1],j=P[v][b+1],o(k)?(S=h(k,T,j),C[v]+=S!==-1?String.fromCharCode(e[k.charCodeAt(0)][S]):k):C[v]+=k;C[v]=d(C[v])}return C.join(" ")},y=t.__arabicParser__.processArabic=t.processArabic=function(){var x,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(v)){var S=0;for(b=[],S=0;S<v.length;S+=1)Array.isArray(v[S])?b.push([p(v[S][0]),v[S][1],v[S][2]]):b.push([p(v[S])]);x=b}else x=p(v);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",y])}(nn.API),nn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(nn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(x){y=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),d=c.font||this.getFont(),h=c.scaleFactor||this.internal.scaleFactor,p=0,y=0,x=0,v=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=c.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(k,T){return k.concat(v.splitTextToSize(T,b))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)p<(x=this.getStringUnitWidth(l[S],{font:d})*u)&&(p=x);return p!==0&&(y=l.length),{w:p/=h,h:Math.max((y*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/h,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&h&&(this.printHeaderRow(l.lineNumber,!0),l.y+=h[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-u,l.y+u,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+u,{align:"center",baseline:"top",maxWidth:l.width-u-u}):this.text(l.text,l.x+u,l.y+u,{align:"left",baseline:"top",maxWidth:l.width-u-u})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,u,d,h){if(r.call(this),!u)throw new Error("No data for PDF table.");var p,y,x,v,b=[],S=[],k=[],T={},j={},P=[],C=[],N=(h=h||{}).autoSize||!1,L=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},e),M=typeof h.padding=="number"?h.padding:3,H=h.headerBackgroundColor||"#c8c8c8",W=h.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=M,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=W,this.setFontSize(R),d==null)S=b=Object.keys(u[0]),k=b.map(function(){return"left"});else if(Array.isArray(d)&&Xn(d[0])==="object")for(b=d.map(function(te){return te.name}),S=d.map(function(te){return te.prompt||te.name||""}),k=d.map(function(te){return te.align||"left"}),p=0;p<d.length;p+=1)j[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(S=b=d,k=b.map(function(){return"left"}));if(N||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(T[v=b[p]]=u.map(function(te){return te[v]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(S[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=T[v],this.setFont(void 0,"normal"),x=0;x<y.length;x+=1)P.push(this.getTextDimensions(y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);j[v]=Math.max.apply(null,P)+M+M,P=[]}if(L){var Z={};for(p=0;p<b.length;p+=1)Z[b[p]]={},Z[b[p]].text=S[p],Z[b[p]].align=k[p];var B=a.call(this,Z,j);C=b.map(function(te){return new s(l,c,j[te],B,Z[te].text,void 0,Z[te].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var F=d.reduce(function(te,re){return te[re.name]=re.align,te},{});for(p=0;p<u.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:u[p]},this);var Q=a.call(this,u[p],j);for(x=0;x<b.length;x+=1){var ee=u[p][b[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:ee},this),o.call(this,new s(l,c,j[b[x]],Q,ee,p+2,F[b[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var u=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(l).map(function(p){var y=l[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,c[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/h+u+u},this).reduce(function(p,y){return Math.max(p,y)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,h.push(u)),u.lineNumber=l;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(y)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),n=!1}}(nn.API);var XM={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},YM=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j_=KM(YM),JM=[100,200,300,400,500,600,700,800,900],hoe=KM(JM);function P_(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return XM[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof j_[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function NT(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var poe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},CT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ET(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function moe(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},poe,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=P_(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+ET(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var u=j_[l],d=u<=j_.normal?-1:1,h=NT(c,YM,u,d);if(!h)throw new Error("Could not find a matching font-stretch value for "+l);return h}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var u=XM[l],d=0;d<u.length;++d)if(c[u[d]])return c[u[d]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var u=hoe[l],d=NT(c,JM,u,l<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+l);return d}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+ET(s)+"'.");return o}function AT(t){return t.trimLeft()}function goe(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function yoe(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ly,TT,jT,Gb=["times"];(function(t){var e,n,r,i,s,o,a,l,c,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new l,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var d=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=O;Object.defineProperty(this,"pdf",{get:function(){return X}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(Ne){q=!!Ne}});var V=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return V},set:function(Ne){V=!!Ne}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Ne){isNaN(Ne)||(ne=Ne)}});var ge=0;Object.defineProperty(this,"posY",{get:function(){return ge},set:function(Ne){isNaN(Ne)||(ge=Ne)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(Ne){var pe;typeof Ne=="number"?pe=[Ne,Ne,Ne,Ne]:((pe=new Array(4))[0]=Ne[0],pe[1]=Ne.length>=2?Ne[1]:pe[0],pe[2]=Ne.length>=3?Ne[2]:pe[0],pe[3]=Ne.length>=4?Ne[3]:pe[1]),c.margin=pe}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Ne){ye=Ne}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(Ne){xe=Ne}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(Ne){Se=Ne}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(Ne){Ne instanceof u&&(c=Ne)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(Ne){c.path=Ne}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(Ne){He=Ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ne){var pe;pe=h(Ne),this.ctx.fillStyle=pe.style,this.ctx.isFillTransparent=pe.a===0,this.ctx.fillOpacity=pe.a,this.pdf.setFillColor(pe.r,pe.g,pe.b,{a:pe.a}),this.pdf.setTextColor(pe.r,pe.g,pe.b,{a:pe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ne){var pe=h(Ne);this.ctx.strokeStyle=pe.style,this.ctx.isStrokeTransparent=pe.a===0,this.ctx.strokeOpacity=pe.a,pe.a===0?this.pdf.setDrawColor(255,255,255):(pe.a,this.pdf.setDrawColor(pe.r,pe.g,pe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ne){["butt","round","square"].indexOf(Ne)!==-1&&(this.ctx.lineCap=Ne,this.pdf.setLineCap(Ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ne){isNaN(Ne)||(this.ctx.lineWidth=Ne,this.pdf.setLineWidth(Ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ne){["bevel","round","miter"].indexOf(Ne)!==-1&&(this.ctx.lineJoin=Ne,this.pdf.setLineJoin(Ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ne){isNaN(Ne)||(this.ctx.miterLimit=Ne,this.pdf.setMiterLimit(Ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ne){this.ctx.textBaseline=Ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ne){["right","end","center","left","start"].indexOf(Ne)!==-1&&(this.ctx.textAlign=Ne)}});var $e=null;function Ge(Ne,pe){if($e===null){var qe=function(Ze){var Me=[];return Object.keys(Ze).forEach(function(ke){Ze[ke].forEach(function(We){var it=null;switch(We){case"bold":it={family:ke,weight:"bold"};break;case"italic":it={family:ke,style:"italic"};break;case"bolditalic":it={family:ke,weight:"bold",style:"italic"};break;case"":case"normal":it={family:ke}}it!==null&&(it.ref={name:ke,style:We},Me.push(it))})}),Me}(Ne.getFontList());$e=function(Ze){for(var Me={},ke=0;ke<Ze.length;++ke){var We=P_(Ze[ke]),it=We.family,gt=We.stretch,xt=We.style,Tt=We.weight;Me[it]=Me[it]||{},Me[it][gt]=Me[it][gt]||{},Me[it][gt][xt]=Me[it][gt][xt]||{},Me[it][gt][xt][Tt]=We}return Me}(qe.concat(pe))}return $e}var ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(Ne){$e=null,ze=Ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ne){var pe;if(this.ctx.font=Ne,(pe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ne))!==null){var qe=pe[1],Ze=(pe[2],pe[3]),Me=pe[4],ke=(pe[5],pe[6]),We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Me)[2];Me=Math.floor(We==="px"?parseFloat(Me)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Me)*this.pdf.getFontSize():parseFloat(Me)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Me);var it=function(Dt){var Mt,ot,Nn=[],Qt=Dt.trim();if(Qt==="")return Gb;if(Qt in CT)return[CT[Qt]];for(;Qt!=="";){switch(ot=null,Mt=(Qt=AT(Qt)).charAt(0)){case'"':case"'":ot=goe(Qt.substring(1),Mt);break;default:ot=yoe(Qt)}if(ot===null||(Nn.push(ot[0]),(Qt=AT(ot[1]))!==""&&Qt.charAt(0)!==","))return Gb;Qt=Qt.replace(/^,/,"")}return Nn}(ke);if(this.fontFaces){var gt=moe(Ge(this.pdf,this.fontFaces),it.map(function(Dt){return{family:Dt,stretch:"normal",weight:Ze,style:qe}}));this.pdf.setFont(gt.ref.name,gt.ref.style)}else{var xt="";(Ze==="bold"||parseInt(Ze,10)>=700||qe==="bold")&&(xt="bold"),qe==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var Tt="",Bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<it.length;qt++){if(this.pdf.internal.getFont(it[qt],xt,{noFallback:!0,disableWarning:!0})!==void 0){Tt=it[qt];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(it[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Tt=it[qt],xt="bold";else if(this.pdf.internal.getFont(it[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Tt=it[qt],xt="normal";break}}if(Tt===""){for(var Rt=0;Rt<it.length;Rt++)if(Bt[it[Rt]]){Tt=Bt[it[Rt]];break}}Tt=Tt===""?"Times":Tt,this.pdf.setFont(Tt,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ne){this.ctx.globalCompositeOperation=Ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ne){this.ctx.globalAlpha=Ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ne){this.ctx.lineDashOffset=Ne,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ne){this.ctx.lineDash=Ne,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ne){this.ctx.ignoreClearRect=!!Ne}})};d.prototype.setLineDash=function(O){this.lineDash=O},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){T.call(this,"fill",!1)},d.prototype.stroke=function(){T.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(O,X){if(isNaN(O)||isNaN(X))throw xr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(O,X));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(O,X)},d.prototype.closePath=function(){var O=new o(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Xn(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){O=new o(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},d.prototype.lineTo=function(O,X){if(isNaN(O)||isNaN(X))throw xr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(O,X));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},d.prototype.quadraticCurveTo=function(O,X,q,V){if(isNaN(q)||isNaN(V)||isNaN(O)||isNaN(X))throw xr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new o(q,V)),ge=this.ctx.transform.applyToPoint(new o(O,X));this.path.push({type:"qct",x1:ge.x,y1:ge.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},d.prototype.bezierCurveTo=function(O,X,q,V,ne,ge){if(isNaN(ne)||isNaN(ge)||isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V))throw xr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new o(ne,ge)),xe=this.ctx.transform.applyToPoint(new o(O,X)),Se=this.ctx.transform.applyToPoint(new o(q,V));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Se.x,y2:Se.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new o(ye.x,ye.y)},d.prototype.arc=function(O,X,q,V,ne,ge){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V)||isNaN(ne))throw xr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ge=!!ge,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new o(O,X));O=ye.x,X=ye.y;var xe=this.ctx.transform.applyToPoint(new o(0,q)),Se=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(xe.x-Se.x,2)+Math.pow(xe.y-Se.y,2))}Math.abs(ne-V)>=2*Math.PI&&(V=0,ne=2*Math.PI),this.path.push({type:"arc",x:O,y:X,radius:q,startAngle:V,endAngle:ne,counterclockwise:ge})},d.prototype.arcTo=function(O,X,q,V,ne){throw new Error("arcTo not implemented.")},d.prototype.rect=function(O,X,q,V){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V))throw xr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,X),this.lineTo(O+q,X),this.lineTo(O+q,X+V),this.lineTo(O,X+V),this.lineTo(O,X),this.lineTo(O+q,X),this.lineTo(O,X)},d.prototype.fillRect=function(O,X,q,V){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V))throw xr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,X,q,V),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},d.prototype.strokeRect=function(O,X,q,V){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V))throw xr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(O,X,q,V),this.stroke())},d.prototype.clearRect=function(O,X,q,V){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V))throw xr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,X,q,V))},d.prototype.save=function(O){O=typeof O!="boolean"||O;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var V=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=V}},d.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(X),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(O){var X,q,V,ne;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))X=0,q=0,V=0,ne=0;else{var ge=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ge!==null)X=parseInt(ge[1]),q=parseInt(ge[2]),V=parseInt(ge[3]),ne=1;else if((ge=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)X=parseInt(ge[1]),q=parseInt(ge[2]),V=parseInt(ge[3]),ne=parseFloat(ge[4]);else{if(ne=1,typeof O=="string"&&O.charAt(0)!=="#"){var ye=new $M(O);O=ye.ok?ye.toHex():"#000000"}O.length===4?(X=O.substring(1,2),X+=X,q=O.substring(2,3),q+=q,V=O.substring(3,4),V+=V):(X=O.substring(1,3),q=O.substring(3,5),V=O.substring(5,7)),X=parseInt(X,16),q=parseInt(q,16),V=parseInt(V,16)}}return{r:X,g:q,b:V,a:ne,style:O}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(O,X,q,V){if(isNaN(X)||isNaN(q)||typeof O!="string")throw xr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(V=isNaN(V)?void 0:V,!p.call(this)){var ne=Q(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;M.call(this,{text:O,x:X,y:q,scale:ge,angle:ne,align:this.textAlign,maxWidth:V})}},d.prototype.strokeText=function(O,X,q,V){if(isNaN(X)||isNaN(q)||typeof O!="string")throw xr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){V=isNaN(V)?void 0:V;var ne=Q(this.ctx.transform.rotation),ge=this.ctx.transform.scaleX;M.call(this,{text:O,x:X,y:q,scale:ge,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:V})}},d.prototype.measureText=function(O){if(typeof O!="string")throw xr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,q=this.pdf.internal.scaleFactor,V=X.internal.getFontSize(),ne=X.getStringUnitWidth(O)*V/X.internal.scaleFactor,ge=function(ye){var xe=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xe}}),this};return new ge({width:ne*=Math.round(96*q/72*1e4)/1e4})},d.prototype.scale=function(O,X){if(isNaN(O)||isNaN(X))throw xr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new l(O,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},d.prototype.rotate=function(O){if(isNaN(O))throw xr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new l(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},d.prototype.translate=function(O,X){if(isNaN(O)||isNaN(X))throw xr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new l(1,0,0,1,O,X);this.ctx.transform=this.ctx.transform.multiply(q)},d.prototype.transform=function(O,X,q,V,ne,ge){if(isNaN(O)||isNaN(X)||isNaN(q)||isNaN(V)||isNaN(ne)||isNaN(ge))throw xr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new l(O,X,q,V,ne,ge);this.ctx.transform=this.ctx.transform.multiply(ye)},d.prototype.setTransform=function(O,X,q,V,ne,ge){O=isNaN(O)?1:O,X=isNaN(X)?0:X,q=isNaN(q)?0:q,V=isNaN(V)?1:V,ne=isNaN(ne)?0:ne,ge=isNaN(ge)?0:ge,this.ctx.transform=new l(O,X,q,V,ne,ge)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(O,X,q,V,ne,ge,ye,xe,Se){var He=this.pdf.getImageProperties(O),$e=1,Ge=1,ze=1,Ne=1;V!==void 0&&xe!==void 0&&(ze=xe/V,Ne=Se/ne,$e=He.width/V*xe/V,Ge=He.height/ne*Se/ne),ge===void 0&&(ge=X,ye=q,X=0,q=0),V!==void 0&&xe===void 0&&(xe=V,Se=ne),V===void 0&&xe===void 0&&(xe=He.width,Se=He.height);for(var pe,qe=this.ctx.transform.decompose(),Ze=Q(qe.rotate.shx),Me=new l,ke=(Me=(Me=(Me=Me.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new a(ge-X*ze,ye-q*Ne,V*$e,ne*Ge)),We=v.call(this,ke),it=[],gt=0;gt<We.length;gt+=1)it.indexOf(We[gt])===-1&&it.push(We[gt]);if(k(it),this.autoPaging)for(var xt=it[0],Tt=it[it.length-1],Bt=xt;Bt<Tt+1;Bt++){this.pdf.setPage(Bt);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rt=Bt===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Bt===1?0:Dt+(Bt-2)*Mt;if(this.ctx.clip_path.length!==0){var Nn=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(pe,this.posX+this.margin[3],-ot+Rt+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=Nn}var Qt=JSON.parse(JSON.stringify(ke));Qt=S([Qt],this.posX+this.margin[3],-ot+Rt+this.ctx.prevPageLastElemOffset)[0];var Wn=(Bt>xt||Bt<Tt)&&x.call(this);Wn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,Mt,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Ze),Wn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",ke.x,ke.y,ke.w,ke.h,null,null,Ze)};var v=function(O,X,q){var V=[];X=X||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":V.push(Math.floor((O.y+ne)/q)+1);break;case"arc":V.push(Math.floor((O.y+ne-O.radius)/q)+1),V.push(Math.floor((O.y+ne+O.radius)/q)+1);break;case"qct":var ge=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);V.push(Math.floor((ge.y+ne)/q)+1),V.push(Math.floor((ge.y+ge.h+ne)/q)+1);break;case"bct":var ye=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);V.push(Math.floor((ye.y+ne)/q)+1),V.push(Math.floor((ye.y+ye.h+ne)/q)+1);break;case"rect":V.push(Math.floor((O.y+ne)/q)+1),V.push(Math.floor((O.y+O.h+ne)/q)+1)}for(var xe=0;xe<V.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<V[xe];)b.call(this);return V},b=function(){var O=this.fillStyle,X=this.strokeStyle,q=this.font,V=this.lineCap,ne=this.lineWidth,ge=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=X,this.font=q,this.lineCap=V,this.lineWidth=ne,this.lineJoin=ge},S=function(O,X,q){for(var V=0;V<O.length;V++)switch(O[V].type){case"bct":O[V].x2+=X,O[V].y2+=q;case"qct":O[V].x1+=X,O[V].y1+=q;case"mt":case"lt":case"arc":default:O[V].x+=X,O[V].y+=q}return O},k=function(O){return O.sort(function(X,q){return X-q})},T=function(O,X){for(var q,V,ne=this.fillStyle,ge=this.strokeStyle,ye=this.lineCap,xe=this.lineWidth,Se=Math.abs(xe*this.ctx.transform.scaleX),He=this.lineJoin,$e=JSON.parse(JSON.stringify(this.path)),Ge=JSON.parse(JSON.stringify(this.path)),ze=[],Ne=0;Ne<Ge.length;Ne++)if(Ge[Ne].x!==void 0)for(var pe=v.call(this,Ge[Ne]),qe=0;qe<pe.length;qe+=1)ze.indexOf(pe[qe])===-1&&ze.push(pe[qe]);for(var Ze=0;Ze<ze.length;Ze++)for(;this.pdf.internal.getNumberOfPages()<ze[Ze];)b.call(this);if(k(ze),this.autoPaging)for(var Me=ze[0],ke=ze[ze.length-1],We=Me;We<ke+1;We++){this.pdf.setPage(We),this.fillStyle=ne,this.strokeStyle=ge,this.lineCap=ye,this.lineWidth=Se,this.lineJoin=He;var it=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gt=We===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Bt=We===1?0:xt+(We-2)*Tt;if(this.ctx.clip_path.length!==0){var qt=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(q,this.posX+this.margin[3],-Bt+gt+this.ctx.prevPageLastElemOffset),j.call(this,O,!0),this.path=qt}if(V=JSON.parse(JSON.stringify($e)),this.path=S(V,this.posX+this.margin[3],-Bt+gt+this.ctx.prevPageLastElemOffset),X===!1||We===0){var Rt=(We>Me||We<ke)&&x.call(this);Rt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],it,Tt,null).clip().discardPath()),j.call(this,O,X),Rt&&this.pdf.restoreGraphicsState()}this.lineWidth=xe}else this.lineWidth=Se,j.call(this,O,X),this.lineWidth=xe;this.path=$e},j=function(O,X){if((O!=="stroke"||X||!y.call(this))&&(O==="stroke"||X||!p.call(this))){for(var q,V,ne=[],ge=this.path,ye=0;ye<ge.length;ye++){var xe=ge[ye];switch(xe.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:xe,deltas:[],abs:[]});break;case"lt":var Se=ne.length;if(ge[ye-1]&&!isNaN(ge[ye-1].x)&&(q=[xe.x-ge[ye-1].x,xe.y-ge[ye-1].y],Se>0)){for(;Se>=0;Se--)if(ne[Se-1].close!==!0&&ne[Se-1].begin!==!0){ne[Se-1].deltas.push(q),ne[Se-1].abs.push(xe);break}}break;case"bct":q=[xe.x1-ge[ye-1].x,xe.y1-ge[ye-1].y,xe.x2-ge[ye-1].x,xe.y2-ge[ye-1].y,xe.x-ge[ye-1].x,xe.y-ge[ye-1].y],ne[ne.length-1].deltas.push(q);break;case"qct":var He=ge[ye-1].x+2/3*(xe.x1-ge[ye-1].x),$e=ge[ye-1].y+2/3*(xe.y1-ge[ye-1].y),Ge=xe.x+2/3*(xe.x1-xe.x),ze=xe.y+2/3*(xe.y1-xe.y),Ne=xe.x,pe=xe.y;q=[He-ge[ye-1].x,$e-ge[ye-1].y,Ge-ge[ye-1].x,ze-ge[ye-1].y,Ne-ge[ye-1].x,pe-ge[ye-1].y],ne[ne.length-1].deltas.push(q);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(xe)}}V=X?null:O==="stroke"?"stroke":"fill";for(var qe=!1,Ze=0;Ze<ne.length;Ze++)if(ne[Ze].arc)for(var Me=ne[Ze].abs,ke=0;ke<Me.length;ke++){var We=Me[ke];We.type==="arc"?N.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,X,!qe):H.call(this,We.x,We.y),qe=!0}else if(ne[Ze].close===!0)this.pdf.internal.out("h"),qe=!1;else if(ne[Ze].begin!==!0){var it=ne[Ze].start.x,gt=ne[Ze].start.y;W.call(this,ne[Ze].deltas,it,gt),qe=!0}V&&L.call(this,V),X&&R.call(this)}},P=function(O){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-q;case"top":return O+X-q;case"hanging":return O+X-2*q;case"middle":return O+X/2-q;case"ideographic":return O;case"alphabetic":default:return O}},C=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(X,q){this.colorStops.push([X,q])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(O,X,q,V,ne,ge,ye,xe,Se){for(var He=B.call(this,q,V,ne,ge),$e=0;$e<He.length;$e++){var Ge=He[$e];$e===0&&(Se?D.call(this,Ge.x1+O,Ge.y1+X):H.call(this,Ge.x1+O,Ge.y1+X)),Z.call(this,O,X,Ge.x2,Ge.y2,Ge.x3,Ge.y3,Ge.x4,Ge.y4)}xe?R.call(this):L.call(this,ye)},L=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(O,X){this.pdf.internal.out(n(O)+" "+r(X)+" m")},M=function(O){var X;switch(O.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var q=this.pdf.getTextDimensions(O.text),V=P.call(this,O.y),ne=C.call(this,V)-q.h,ge=this.ctx.transform.applyToPoint(new o(O.x,V)),ye=this.ctx.transform.decompose(),xe=new l;xe=(xe=(xe=xe.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Se,He,$e,Ge=this.ctx.transform.applyToRectangle(new a(O.x,V,q.w,q.h)),ze=xe.applyToRectangle(new a(O.x,ne,q.w,q.h)),Ne=v.call(this,ze),pe=[],qe=0;qe<Ne.length;qe+=1)pe.indexOf(Ne[qe])===-1&&pe.push(Ne[qe]);if(k(pe),this.autoPaging)for(var Ze=pe[0],Me=pe[pe.length-1],ke=Ze;ke<Me+1;ke++){this.pdf.setPage(ke);var We=ke===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[2],xt=gt-this.margin[0],Tt=this.pdf.internal.pageSize.width-this.margin[1],Bt=Tt-this.margin[3],qt=ke===1?0:it+(ke-2)*xt;if(this.ctx.clip_path.length!==0){var Rt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Se,this.posX+this.margin[3],-1*qt+We),j.call(this,"fill",!0),this.path=Rt}var Dt=S([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-qt+We+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*O.scale),$e=this.lineWidth,this.lineWidth=$e*O.scale);var Mt=this.autoPaging!=="text";if(Mt||Dt.y+Dt.h<=gt){if(Mt||Dt.y>=We&&Dt.x<=Tt){var ot=Mt?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||Tt-Dt.x)[0],Nn=S([JSON.parse(JSON.stringify(Ge))],this.posX+this.margin[3],-qt+We+this.ctx.prevPageLastElemOffset)[0],Qt=Mt&&(ke>Ze||ke<Me)&&x.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Bt,xt,null).clip().discardPath()),this.pdf.text(ot,Nn.x,Nn.y,{angle:O.angle,align:X,renderingMode:O.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else Dt.y<gt&&(this.ctx.prevPageLastElemOffset+=gt-Dt.y);O.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=$e)}else O.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*O.scale),$e=this.lineWidth,this.lineWidth=$e*O.scale),this.pdf.text(O.text,ge.x+this.posX,ge.y+this.posY,{angle:O.angle,align:X,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=$e)},H=function(O,X,q,V){q=q||0,V=V||0,this.pdf.internal.out(n(O+q)+" "+r(X+V)+" l")},W=function(O,X,q){return this.pdf.lines(O,X,q,null,null)},Z=function(O,X,q,V,ne,ge,ye,xe){this.pdf.internal.out([e(i(q+O)),e(s(V+X)),e(i(ne+O)),e(s(ge+X)),e(i(ye+O)),e(s(xe+X)),"c"].join(" "))},B=function(O,X,q,V){for(var ne=2*Math.PI,ge=Math.PI/2;X>q;)X-=ne;var ye=Math.abs(q-X);ye<ne&&V&&(ye=ne-ye);for(var xe=[],Se=V?-1:1,He=X;ye>1e-5;){var $e=He+Se*Math.min(ye,ge);xe.push(F.call(this,O,He,$e)),ye-=Math.abs($e-He),He=$e}return xe},F=function(O,X,q){var V=(q-X)/2,ne=O*Math.cos(V),ge=O*Math.sin(V),ye=ne,xe=-ge,Se=ye*ye+xe*xe,He=Se+ye*ne+xe*ge,$e=4/3*(Math.sqrt(2*Se*He)-He)/(ye*ge-xe*ne),Ge=ye-$e*xe,ze=xe+$e*ye,Ne=Ge,pe=-ze,qe=V+X,Ze=Math.cos(qe),Me=Math.sin(qe);return{x1:O*Math.cos(X),y1:O*Math.sin(X),x2:Ge*Ze-ze*Me,y2:Ge*Me+ze*Ze,x3:Ne*Ze-pe*Me,y3:Ne*Me+pe*Ze,x4:O*Math.cos(q),y4:O*Math.sin(q)}},Q=function(O){return 180*O/Math.PI},ee=function(O,X,q,V,ne,ge){var ye=O+.5*(q-O),xe=X+.5*(V-X),Se=ne+.5*(q-ne),He=ge+.5*(V-ge),$e=Math.min(O,ne,ye,Se),Ge=Math.max(O,ne,ye,Se),ze=Math.min(X,ge,xe,He),Ne=Math.max(X,ge,xe,He);return new a($e,ze,Ge-$e,Ne-ze)},te=function(O,X,q,V,ne,ge,ye,xe){var Se,He,$e,Ge,ze,Ne,pe,qe,Ze,Me,ke,We,it,gt,xt=q-O,Tt=V-X,Bt=ne-q,qt=ge-V,Rt=ye-ne,Dt=xe-ge;for(He=0;He<41;He++)Ze=(pe=($e=O+(Se=He/40)*xt)+Se*((ze=q+Se*Bt)-$e))+Se*(ze+Se*(ne+Se*Rt-ze)-pe),Me=(qe=(Ge=X+Se*Tt)+Se*((Ne=V+Se*qt)-Ge))+Se*(Ne+Se*(ge+Se*Dt-Ne)-qe),He==0?(ke=Ze,We=Me,it=Ze,gt=Me):(ke=Math.min(ke,Ze),We=Math.min(We,Me),it=Math.max(it,Ze),gt=Math.max(gt,Me));return new a(Math.round(ke),Math.round(We),Math.round(it-ke),Math.round(gt-We))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,X,q=(O=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:X}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(nn.API),function(t){var e=function(s){var o,a,l,c,u,d,h,p,y,x;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(u=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(d=(u=((u=((u=((u=(u-(x=u%85))/85)-(y=u%85))/85)-(p=u%85))/85)-(h=u%85))/85)%85,a.push(d+33,h+33,p+33,y+33,x+33)):a.push(122);return function(v,b){for(var S=b;S>0;S--)v.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,u,d=String,h="length",p=255,y="charCodeAt",x="slice",v="replace";for(s[x](-2),s=s[x](0,-2)[v](/\s/g,"")[v]("z","!!!!!"),l=[],c=0,u=(s+=o="uuuuu"[x](s[h]%5||5))[h];u>c;c+=5)a=52200625*(s[y](c)-33)+614125*(s[y](c+1)-33)+7225*(s[y](c+2)-33)+85*(s[y](c+3)-33)+(s[y](c+4)-33),l.push(p&a>>24,p&a>>16,p&a>>8,p&a);return function(b,S){for(var k=S;k>0;k--)b.pop()}(l,o[h]),d.fromCharCode.apply(d,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=N_(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(nn.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,u){var d=new XMLHttpRequest,h=0,p=function(y){var x=y.length,v=[],b=String.fromCharCode;for(h=0;h<x;h+=1)v.push(b(255&y.charCodeAt(h)));return v.join("")};if(d.open("GET",l,!c),d.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(d.onload=function(){d.status===200?u(p(this.responseText)):u(void 0)}),d.send(null),c&&d.status===200)return p(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(nn.API),function(t){function e(){return(an.html2canvas?Promise.resolve(an.html2canvas):fu(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(an.DOMPurify?Promise.resolve(an.DOMPurify):fu(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Xn(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,u){for(var d=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||d.appendChild(l(h,u));return c.nodeType===1&&(c.nodeName==="CANVAS"?(d.width=c.width,d.height=c.height,d.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(d.value=c.value),d.addEventListener("load",function(){d.scrollTop=c.scrollTop,d.scrollLeft=c.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var h=0;h<c.length;++h){var p=c[h],y=p.src.find(function(x){return x.format==="truetype"});y&&l.addFont(y.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,l.context2d.save(!0),a(this.prop.container,d)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,u){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(d){return l.updateProgress(null,c),d}).then(c,u).then(function(d){return l.updateProgress(1),d})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),u=l.call(c,o,a);return s.convert(u,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,nn.getPageSize=function(o,a,l){if(Xn(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var u,d=(""+l).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+a}var p,y=0,x=0;if(h.hasOwnProperty(d))y=h[d][1]/u,x=h[d][0]/u;else try{y=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",x>y&&(p=x,x=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>x&&(p=x,x=y,y=p)}return{width:x,height:y,unit:a,k:u,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(P_):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(nn.API),nn.API.addJS=function(t){return jT=t,this.internal.events.subscribe("postPutResources",function(){Ly=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ly+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),TT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+jT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ly!==void 0&&TT!==void 0&&this.internal.out("/Names <</JavaScript "+Ly+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(s=0;s<c;s++){var d=n.internal.newObject();u.push(d);var h=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<u.length;s++)n.internal.write("(page_"+(s+1)+")"+u[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(nn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(d){for(var h,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,x={width:0,height:0,numcomponents:1},v=4;v<y;v+=2){if(v+=p,e.indexOf(d.charCodeAt(v+1))!==-1){h=256*d.charCodeAt(v+5)+d.charCodeAt(v+6),x={width:256*d.charCodeAt(v+7)+d.charCodeAt(v+8),height:h,numcomponents:d.charCodeAt(v+9)};break}p=256*d.charCodeAt(v+2)+d.charCodeAt(v+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}u={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return u}}(nn.API);var Cp,My,PT,DT,OT,xoe=function(){var t,e,n;function r(s){var o,a,l,c,u,d,h,p,y,x,v,b,S,k;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var T,j;for(j=[],T=0;T<4;++T)j.push(String.fromCharCode(this.data[this.pos++]));return j}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),c=this.readUInt16()||100,d.delay=1e3*u/c,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),s=(d!=null?d.data:void 0)||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(S=0;0<=x?S<x:S>x;0<=x?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":h=(v=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,v.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,v.slice(h+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(k=this.colorType)===4||k===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function u(d,h,p,y){var x,v,b,S,k,T,j,P,C,N,L,R,D,M,H,W,Z,B,F,Q,ee,te=Math.ceil((c.width-d)/p),re=Math.ceil((c.height-h)/y),O=c.width==te&&c.height==re;for(M=o*te,R=O?a:new Uint8Array(M*re),T=s.length,D=0,v=0;D<re&&l<T;){switch(s[l++]){case 0:for(S=Z=0;Z<M;S=Z+=1)R[v++]=s[l++];break;case 1:for(S=B=0;B<M;S=B+=1)x=s[l++],k=S<o?0:R[v-o],R[v++]=(x+k)%256;break;case 2:for(S=F=0;F<M;S=F+=1)x=s[l++],b=(S-S%o)/o,H=D&&R[(D-1)*M+b*o+S%o],R[v++]=(H+x)%256;break;case 3:for(S=Q=0;Q<M;S=Q+=1)x=s[l++],b=(S-S%o)/o,k=S<o?0:R[v-o],H=D&&R[(D-1)*M+b*o+S%o],R[v++]=(x+Math.floor((k+H)/2))%256;break;case 4:for(S=ee=0;ee<M;S=ee+=1)x=s[l++],b=(S-S%o)/o,k=S<o?0:R[v-o],D===0?H=W=0:(H=R[(D-1)*M+b*o+S%o],W=b&&R[(D-1)*M+(b-1)*o+S%o]),j=k+H-W,P=Math.abs(j-k),N=Math.abs(j-H),L=Math.abs(j-W),C=P<=N&&P<=L?k:N<=L?H:W,R[v++]=(x+C)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!O){var X=((h+D*y)*c.width+d)*o,q=D*M;for(S=0;S<te;S+=1){for(var V=0;V<o;V+=1)a[X++]=R[q++];X+=(p-1)*o}}D++}}return s=Jse(s),c.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,u,d,h,p;for(a=this.palette,u=this.transparency.indexed||[],c=new Uint8Array((u.length||0)+a.length),l=0,s=0,o=d=0,h=a.length;d<h;o=d+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(p=u[s++])!=null?p:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,u,d,h,p,y,x,v,b;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,a=!0),y=(c=s.data||s).length,d=x||o,u=h=0,l===1)for(;u<y;)p=x?4*o[u/4]:h,v=d[p++],c[u++]=v,c[u++]=v,c[u++]=v,c[u++]=a?d[p++]:255,h=p;else for(;u<y;)p=x?4*o[u/4]:h,c[u++]=d[p++],c[u++]=d[p++],c[u++]=d[p++],c[u++]=a?d[p++]:255,h=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(an)==="[object Window]"){try{e=an.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,u,d,h,p;if(this.animation){for(p=[],a=u=0,d=(h=this.animation.frames).length;u<d;a=++u)o=h[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,p.push(o.image=t(l));return p}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,u,d,h=this;return a=0,d=this.animation,c=d.numFrames,l=d.frames,u=d.numPlays,(o=function(){var p,y;if(p=a++%c,y=l[p],h.renderFrame(s,p),c>1&&a/c<u)return h.animation._timeout=setTimeout(o,y.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function voe(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],d=0,h=null,p=0,y=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,y=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];d=t[e++]|t[e++]<<8,h=t[e++],(1&x)==0&&(h=null),p=x>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var v=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,T=t[e++],j=T>>6&1,P=1<<(7&T)+1,C=a,N=l,L=!1;T>>7&&(L=!0,C=e,N=P,e+=3*P);var R=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}u.push({x:v,y:b,width:S,height:k,has_local_palette:L,palette_offset:C,palette_size:N,data_offset:R,data_length:e-R,transparent_index:h,interlaced:!!j,delay:d,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return y},this.frameInfo=function(M){if(M<0||M>=u.length)throw new Error("Frame index out of range.");return u[M]},this.decodeAndBlitFrameBGRA=function(M,H){var W=this.frameInfo(M),Z=W.width*W.height,B=new Uint8Array(Z);LT(t,W.data_offset,B,Z);var F=W.palette_offset,Q=W.transparent_index;Q===null&&(Q=256);var ee=W.width,te=n-ee,re=ee,O=4*(W.y*n+W.x),X=4*((W.y+W.height)*n+W.x),q=O,V=4*te;W.interlaced===!0&&(V+=4*n*7);for(var ne=8,ge=0,ye=B.length;ge<ye;++ge){var xe=B[ge];if(re===0&&(re=ee,(q+=V)>=X&&(V=4*te+4*n*(ne-1),q=O+(ee+te)*(ne<<1),ne>>=1)),xe===Q)q+=4;else{var Se=t[F+3*xe],He=t[F+3*xe+1],$e=t[F+3*xe+2];H[q++]=$e,H[q++]=He,H[q++]=Se,H[q++]=255}--re}},this.decodeAndBlitFrameRGBA=function(M,H){var W=this.frameInfo(M),Z=W.width*W.height,B=new Uint8Array(Z);LT(t,W.data_offset,B,Z);var F=W.palette_offset,Q=W.transparent_index;Q===null&&(Q=256);var ee=W.width,te=n-ee,re=ee,O=4*(W.y*n+W.x),X=4*((W.y+W.height)*n+W.x),q=O,V=4*te;W.interlaced===!0&&(V+=4*n*7);for(var ne=8,ge=0,ye=B.length;ge<ye;++ge){var xe=B[ge];if(re===0&&(re=ee,(q+=V)>=X&&(V=4*te+4*n*(ne-1),q=O+(ee+te)*(ne<<1),ne>>=1)),xe===Q)q+=4;else{var Se=t[F+3*xe],He=t[F+3*xe+1],$e=t[F+3*xe+2];H[q++]=Se,H[q++]=He,H[q++]=$e,H[q++]=255}--re}}}function LT(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,u=0,d=0,h=0,p=t[e++],y=new Int32Array(4096),x=null;;){for(;u<16&&p!==0;)d|=t[e++]<<u,u+=8,p===1?p=t[e++]:--p;if(u<l)break;var v=d&c;if(d>>=l,u-=l,v!==s){if(v===o)break;for(var b=v<a?v:x,S=0,k=b;k>s;)k=y[k]>>8,++S;var T=k;if(h+S+(b!==v?1:0)>r)return void xr.log("Warning, gif stream longer than expected.");n[h++]=T;var j=h+=S;for(b!==v&&(n[h++]=T),k=b;S--;)k=y[k],n[--j]=255&k,k>>=8;x!==null&&a<4096&&(y[a++]=x<<8|T,a>=c+1&&l<12&&(++l,c=c<<1|1)),x=v}else a=o+1,c=(1<<(l=i+1))-1,x=null}return h!==r&&xr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Kb(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),d=new Array(65535),h=new Array(65535),p=new Array(64),y=new Array(64),x=[],v=0,b=7,S=new Array(64),k=new Array(64),T=new Array(64),j=new Array(256),P=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Z=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(O,X){for(var q=0,V=0,ne=new Array,ge=1;ge<=16;ge++){for(var ye=1;ye<=O[ge];ye++)ne[X[V]]=[],ne[X[V]][0]=q,ne[X[V]][1]=ge,V++,q++;q*=2}return ne}function F(O){for(var X=O[0],q=O[1]-1;q>=0;)X&1<<q&&(v|=1<<b),q--,--b<0&&(v==255?(Q(255),Q(0)):Q(v),b=7,v=0)}function Q(O){x.push(O)}function ee(O){Q(O>>8&255),Q(255&O)}function te(O,X,q,V,ne){for(var ge,ye=ne[0],xe=ne[240],Se=function(Me,ke){var We,it,gt,xt,Tt,Bt,qt,Rt,Dt,Mt,ot=0;for(Dt=0;Dt<8;++Dt){We=Me[ot],it=Me[ot+1],gt=Me[ot+2],xt=Me[ot+3],Tt=Me[ot+4],Bt=Me[ot+5],qt=Me[ot+6];var Nn=We+(Rt=Me[ot+7]),Qt=We-Rt,Wn=it+qt,cn=it-qt,bn=gt+Bt,$r=gt-Bt,dn=xt+Tt,Qr=xt-Tt,_n=Nn+dn,gr=Nn-dn,fn=Wn+bn,Yt=Wn-bn;Me[ot]=_n+fn,Me[ot+4]=_n-fn;var Ot=.707106781*(Yt+gr);Me[ot+2]=gr+Ot,Me[ot+6]=gr-Ot;var Jt=.382683433*((_n=Qr+$r)-(Yt=cn+Qt)),Yn=.5411961*_n+Jt,hn=1.306562965*Yt+Jt,Cn=.707106781*(fn=$r+cn),Lr=Qt+Cn,Et=Qt-Cn;Me[ot+5]=Et+Yn,Me[ot+3]=Et-Yn,Me[ot+1]=Lr+hn,Me[ot+7]=Lr-hn,ot+=8}for(ot=0,Dt=0;Dt<8;++Dt){We=Me[ot],it=Me[ot+8],gt=Me[ot+16],xt=Me[ot+24],Tt=Me[ot+32],Bt=Me[ot+40],qt=Me[ot+48];var lr=We+(Rt=Me[ot+56]),Bn=We-Rt,nr=it+qt,jn=it-qt,On=gt+Bt,ae=gt-Bt,we=xt+Tt,G=xt-Tt,se=lr+we,fe=lr-we,me=nr+On,Ae=nr-On;Me[ot]=se+me,Me[ot+32]=se-me;var De=.707106781*(Ae+fe);Me[ot+16]=fe+De,Me[ot+48]=fe-De;var Ie=.382683433*((se=G+ae)-(Ae=jn+Bn)),Re=.5411961*se+Ie,Ve=1.306562965*Ae+Ie,lt=.707106781*(me=ae+jn),vt=Bn+lt,Ct=Bn-lt;Me[ot+40]=Ct+Re,Me[ot+24]=Ct-Re,Me[ot+8]=vt+Ve,Me[ot+56]=vt-Ve,ot++}for(Dt=0;Dt<64;++Dt)Mt=Me[Dt]*ke[Dt],p[Dt]=Mt>0?Mt+.5|0:Mt-.5|0;return p}(O,X),He=0;He<64;++He)y[C[He]]=Se[He];var $e=y[0]-q;q=y[0],$e==0?F(V[0]):(F(V[h[ge=32767+$e]]),F(d[ge]));for(var Ge=63;Ge>0&&y[Ge]==0;)Ge--;if(Ge==0)return F(ye),q;for(var ze,Ne=1;Ne<=Ge;){for(var pe=Ne;y[Ne]==0&&Ne<=Ge;)++Ne;var qe=Ne-pe;if(qe>=16){ze=qe>>4;for(var Ze=1;Ze<=ze;++Ze)F(xe);qe&=15}ge=32767+y[Ne],F(ne[(qe<<4)+h[ge]]),F(d[ge]),Ne++}return Ge!=63&&F(ye),q}function re(O){O=Math.min(Math.max(O,1),100),s!=O&&(function(X){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],V=0;V<64;V++){var ne=o((q[V]*X+50)/100);ne=Math.min(Math.max(ne,1),255),a[C[V]]=ne}for(var ge=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var xe=o((ge[ye]*X+50)/100);xe=Math.min(Math.max(xe,1),255),l[C[ye]]=xe}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,$e=0;$e<8;$e++)for(var Ge=0;Ge<8;Ge++)c[He]=1/(a[C[He]]*Se[$e]*Se[Ge]*8),u[He]=1/(l[C[He]]*Se[$e]*Se[Ge]*8),He++}(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),s=O)}this.encode=function(O,X){X&&re(X),x=new Array,v=0,b=7,ee(65496),ee(65504),ee(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),ee(1),ee(1),Q(0),Q(0),function(){ee(65499),ee(132),Q(0);for(var it=0;it<64;it++)Q(a[it]);Q(1);for(var gt=0;gt<64;gt++)Q(l[gt])}(),function(it,gt){ee(65472),ee(17),Q(8),ee(gt),ee(it),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(O.width,O.height),function(){ee(65476),ee(418),Q(0);for(var it=0;it<16;it++)Q(N[it+1]);for(var gt=0;gt<=11;gt++)Q(L[gt]);Q(16);for(var xt=0;xt<16;xt++)Q(R[xt+1]);for(var Tt=0;Tt<=161;Tt++)Q(D[Tt]);Q(1);for(var Bt=0;Bt<16;Bt++)Q(M[Bt+1]);for(var qt=0;qt<=11;qt++)Q(H[qt]);Q(17);for(var Rt=0;Rt<16;Rt++)Q(W[Rt+1]);for(var Dt=0;Dt<=161;Dt++)Q(Z[Dt])}(),ee(65498),ee(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var q=0,V=0,ne=0;v=0,b=7,this.encode.displayName="_encode_";for(var ge,ye,xe,Se,He,$e,Ge,ze,Ne,pe=O.data,qe=O.width,Ze=O.height,Me=4*qe,ke=0;ke<Ze;){for(ge=0;ge<Me;){for(He=Me*ke+ge,Ge=-1,ze=0,Ne=0;Ne<64;Ne++)$e=He+(ze=Ne>>3)*Me+(Ge=4*(7&Ne)),ke+ze>=Ze&&($e-=Me*(ke+1+ze-Ze)),ge+Ge>=Me&&($e-=ge+Ge-Me+4),ye=pe[$e++],xe=pe[$e++],Se=pe[$e++],S[Ne]=(P[ye]+P[xe+256>>0]+P[Se+512>>0]>>16)-128,k[Ne]=(P[ye+768>>0]+P[xe+1024>>0]+P[Se+1280>>0]>>16)-128,T[Ne]=(P[ye+1280>>0]+P[xe+1536>>0]+P[Se+1792>>0]>>16)-128;q=te(S,c,q,e,r),V=te(k,u,V,n,i),ne=te(T,u,ne,n,i),ge+=32}ke+=8}if(b>=0){var We=[];We[1]=b+1,We[0]=(1<<b+1)-1,F(We)}return ee(65497),new Uint8Array(x)},t=t||50,function(){for(var O=String.fromCharCode,X=0;X<256;X++)j[X]=O(X)}(),e=B(N,L),n=B(M,H),r=B(R,D),i=B(W,Z),function(){for(var O=1,X=2,q=1;q<=15;q++){for(var V=O;V<X;V++)h[32767+V]=q,d[32767+V]=[],d[32767+V][1]=q,d[32767+V][0]=V;for(var ne=-(X-1);ne<=-O;ne++)h[32767+ne]=q,d[32767+ne]=[],d[32767+ne][1]=q,d[32767+ne][0]=X-1+ne;O<<=1,X<<=1}}(),function(){for(var O=0;O<256;O++)P[O]=19595*O,P[O+256>>0]=38470*O,P[O+512>>0]=7471*O+32768,P[O+768>>0]=-11059*O,P[O+1024>>0]=-21709*O,P[O+1280>>0]=32768*O+8421375,P[O+1536>>0]=-27439*O,P[O+1792>>0]=-5329*O}(),re(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function dl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MT(t){function e(N){if(!N)throw Error("assert :P")}function n(N,L,R){for(var D=0;4>D;D++)if(N[L+D]!=R.charCodeAt(D))return!0;return!1}function r(N,L,R,D,M){for(var H=0;H<M;H++)N[L+H]=R[D+H]}function i(N,L,R,D){for(var M=0;M<D;M++)N[L+M]=R}function s(N){return new Int32Array(N)}function o(N,L){for(var R=[],D=0;D<N;D++)R.push(new L);return R}function a(N,L){var R=[];return function D(M,H,W){for(var Z=W[H],B=0;B<Z&&(M.push(W.length>H+1?[]:new L),!(W.length<H+1));B++)D(M[B],H+1,W)}(R,0,N),R}var l=function(){var N=this;function L(_,A){for(var U=1<<A-1>>>0;_&U;)U>>>=1;return U?(_&U-1)+U:_}function R(_,A,U,J,ie){e(!(J%U));do _[A+(J-=U)]=ie;while(0<J)}function D(_,A,U,J,ie){if(e(2328>=ie),512>=ie)var le=s(512);else if((le=s(ie))==null)return 0;return function(ue,de,he,ve,Ee,Be){var Ue,Le,st=de,Je=1<<he,je=s(16),Pe=s(16);for(e(Ee!=0),e(ve!=null),e(ue!=null),e(0<he),Le=0;Le<Ee;++Le){if(15<ve[Le])return 0;++je[ve[Le]]}if(je[0]==Ee)return 0;for(Pe[1]=0,Ue=1;15>Ue;++Ue){if(je[Ue]>1<<Ue)return 0;Pe[Ue+1]=Pe[Ue]+je[Ue]}for(Le=0;Le<Ee;++Le)Ue=ve[Le],0<ve[Le]&&(Be[Pe[Ue]++]=Le);if(Pe[15]==1)return(ve=new M).g=0,ve.value=Be[0],R(ue,st,1,Je,ve),Je;var tt,et=-1,rt=Je-1,jt=0,kt=1,Xt=1,Nt=1<<he;for(Le=0,Ue=1,Ee=2;Ue<=he;++Ue,Ee<<=1){if(kt+=Xt<<=1,0>(Xt-=je[Ue]))return 0;for(;0<je[Ue];--je[Ue])(ve=new M).g=Ue,ve.value=Be[Le++],R(ue,st+jt,Ee,Nt,ve),jt=L(jt,Ue)}for(Ue=he+1,Ee=2;15>=Ue;++Ue,Ee<<=1){if(kt+=Xt<<=1,0>(Xt-=je[Ue]))return 0;for(;0<je[Ue];--je[Ue]){if(ve=new M,(jt&rt)!=et){for(st+=Nt,tt=1<<(et=Ue)-he;15>et&&!(0>=(tt-=je[et]));)++et,tt<<=1;Je+=Nt=1<<(tt=et-he),ue[de+(et=jt&rt)].g=tt+he,ue[de+et].value=st-de-et}ve.g=Ue-he,ve.value=Be[Le++],R(ue,st+(jt>>he),Ee,Nt,ve),jt=L(jt,Ue)}}return kt!=2*Pe[15]-1?0:Je}(_,A,U,J,ie,le)}function M(){this.value=this.g=0}function H(){this.value=this.g=0}function W(){this.G=o(5,M),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ti,H)}function Z(_,A,U,J){e(_!=null),e(A!=null),e(2147483648>J),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=A,_.pa=U,_.Jd=A,_.Yc=U+J,_.Zc=4<=J?U+J-4+1:U,ge(_)}function B(_,A){for(var U=0;0<A--;)U|=xe(_,128)<<A;return U}function F(_,A){var U=B(_,A);return ye(_)?-U:U}function Q(_,A,U,J){var ie,le=0;for(e(_!=null),e(A!=null),e(4294967288>J),_.Sb=J,_.Ra=0,_.u=0,_.h=0,4<J&&(J=4),ie=0;ie<J;++ie)le+=A[U+ie]<<8*ie;_.Ra=le,_.bb=J,_.oa=A,_.pa=U}function ee(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Mu-8>>>0,++_.bb,_.u-=8;q(_)&&(_.h=1,_.u=0)}function te(_,A){if(e(0<=A),!_.h&&A<=Lu){var U=X(_)&Ou[A];return _.u+=A,ee(_),U}return _.h=1,_.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(_){return _.Ra>>>(_.u&Mu-1)>>>0}function q(_){return e(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Mu}function V(_,A){_.u=A,_.h=q(_)}function ne(_){_.u>=Iu&&(e(_.u>=Iu),ee(_))}function ge(_){e(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(e(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function ye(_){return B(_,1)}function xe(_,A){var U=_.Ca;0>_.b&&ge(_);var J=_.b,ie=U*A>>>8,le=(_.I>>>J>ie)+0;for(le?(U-=ie,_.I-=ie+1<<J>>>0):U=ie+1,J=U,ie=0;256<=J;)ie+=8,J>>=8;return J=7^ie+Gi[J],_.b-=J,_.Ca=(U<<J)-1,le}function Se(_,A,U){_[A+0]=U>>24&255,_[A+1]=U>>16&255,_[A+2]=U>>8&255,_[A+3]=U>>0&255}function He(_,A){return _[A+0]<<0|_[A+1]<<8}function $e(_,A){return He(_,A)|_[A+2]<<16}function Ge(_,A){return He(_,A)|He(_,A+2)<<16}function ze(_,A){var U=1<<A;return e(_!=null),e(0<A),_.X=s(U),_.X==null?0:(_.Mb=32-A,_.Xa=A,1)}function Ne(_,A){e(_!=null),e(A!=null),e(_.Xa==A.Xa),r(A.X,0,_.X,0,1<<A.Xa)}function pe(){this.X=[],this.Xa=this.Mb=0}function qe(_,A,U,J){e(U!=null),e(J!=null);var ie=U[0],le=J[0];return ie==0&&(ie=(_*le+A/2)/A),le==0&&(le=(A*ie+_/2)/_),0>=ie||0>=le?0:(U[0]=ie,J[0]=le,1)}function Ze(_,A){return _+(1<<A)-1>>>A}function Me(_,A){return((4278255360&_)+(4278255360&A)>>>0&4278255360)+((16711935&_)+(16711935&A)>>>0&16711935)>>>0}function ke(_,A){N[A]=function(U,J,ie,le,ue,de,he){var ve;for(ve=0;ve<ue;++ve){var Ee=N[_](de[he+ve-1],ie,le+ve);de[he+ve]=Me(U[J+ve],Ee)}}}function We(){this.ud=this.hd=this.jd=0}function it(_,A){return((4278124286&(_^A))>>>1)+(_&A)>>>0}function gt(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function xt(_,A){return gt(_+(_-A+.5>>1))}function Tt(_,A,U){return Math.abs(A-U)-Math.abs(_-U)}function Bt(_,A,U,J,ie,le,ue){for(J=le[ue-1],U=0;U<ie;++U)le[ue+U]=J=Me(_[A+U],J)}function qt(_,A,U,J,ie){var le;for(le=0;le<U;++le){var ue=_[A+le],de=ue>>8&255,he=16711935&(he=(he=16711935&ue)+((de<<16)+de));J[ie+le]=(4278255360&ue)+he>>>0}}function Rt(_,A){A.jd=_>>0&255,A.hd=_>>8&255,A.ud=_>>16&255}function Dt(_,A,U,J,ie,le){var ue;for(ue=0;ue<J;++ue){var de=A[U+ue],he=de>>>8,ve=de,Ee=255&(Ee=(Ee=de>>>16)+((_.jd<<24>>24)*(he<<24>>24)>>>5));ve=255&(ve=(ve=ve+((_.hd<<24>>24)*(he<<24>>24)>>>5))+((_.ud<<24>>24)*(Ee<<24>>24)>>>5)),ie[le+ue]=(4278255360&de)+(Ee<<16)+ve}}function Mt(_,A,U,J,ie){N[A]=function(le,ue,de,he,ve,Ee,Be,Ue,Le){for(he=Be;he<Ue;++he)for(Be=0;Be<Le;++Be)ve[Ee++]=ie(de[J(le[ue++])])},N[_]=function(le,ue,de,he,ve,Ee,Be){var Ue=8>>le.b,Le=le.Ea,st=le.K[0],Je=le.w;if(8>Ue)for(le=(1<<le.b)-1,Je=(1<<Ue)-1;ue<de;++ue){var je,Pe=0;for(je=0;je<Le;++je)je&le||(Pe=J(he[ve++])),Ee[Be++]=ie(st[Pe&Je]),Pe>>=Ue}else N["VP8LMapColor"+U](he,ve,st,Je,Ee,Be,ue,de,Le)}}function ot(_,A,U,J,ie){for(U=A+U;A<U;){var le=_[A++];J[ie++]=le>>16&255,J[ie++]=le>>8&255,J[ie++]=le>>0&255}}function Nn(_,A,U,J,ie){for(U=A+U;A<U;){var le=_[A++];J[ie++]=le>>16&255,J[ie++]=le>>8&255,J[ie++]=le>>0&255,J[ie++]=le>>24&255}}function Qt(_,A,U,J,ie){for(U=A+U;A<U;){var le=(ue=_[A++])>>16&240|ue>>12&15,ue=ue>>0&240|ue>>28&15;J[ie++]=le,J[ie++]=ue}}function Wn(_,A,U,J,ie){for(U=A+U;A<U;){var le=(ue=_[A++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;J[ie++]=le,J[ie++]=ue}}function cn(_,A,U,J,ie){for(U=A+U;A<U;){var le=_[A++];J[ie++]=le>>0&255,J[ie++]=le>>8&255,J[ie++]=le>>16&255}}function bn(_,A,U,J,ie,le){if(le==0)for(U=A+U;A<U;)Se(J,((le=_[A++])[0]>>24|le[1]>>8&65280|le[2]<<8&16711680|le[3]<<24)>>>0),ie+=32;else r(J,ie,_,A,U)}function $r(_,A){N[A][0]=N[_+"0"],N[A][1]=N[_+"1"],N[A][2]=N[_+"2"],N[A][3]=N[_+"3"],N[A][4]=N[_+"4"],N[A][5]=N[_+"5"],N[A][6]=N[_+"6"],N[A][7]=N[_+"7"],N[A][8]=N[_+"8"],N[A][9]=N[_+"9"],N[A][10]=N[_+"10"],N[A][11]=N[_+"11"],N[A][12]=N[_+"12"],N[A][13]=N[_+"13"],N[A][14]=N[_+"0"],N[A][15]=N[_+"0"]}function dn(_){return _==Bu||_==Ic||_==bf||_==_f}function Qr(){this.eb=[],this.size=this.A=this.fb=0}function _n(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function gr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qr,this.f.kb=new _n,this.sd=null}function fn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ot(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Jt(_,A){var U=_.T,J=A.ba.f.RGBA,ie=J.eb,le=J.fb+_.ka*J.A,ue=xs[A.ba.S],de=_.y,he=_.O,ve=_.f,Ee=_.N,Be=_.ea,Ue=_.W,Le=A.cc,st=A.dc,Je=A.Mc,je=A.Nc,Pe=_.ka,tt=_.ka+_.T,et=_.U,rt=et+1>>1;for(Pe==0?ue(de,he,null,null,ve,Ee,Be,Ue,ve,Ee,Be,Ue,ie,le,null,null,et):(ue(A.ec,A.fc,de,he,Le,st,Je,je,ve,Ee,Be,Ue,ie,le-J.A,ie,le,et),++U);Pe+2<tt;Pe+=2)Le=ve,st=Ee,Je=Be,je=Ue,Ee+=_.Rc,Ue+=_.Rc,le+=2*J.A,ue(de,(he+=2*_.fa)-_.fa,de,he,Le,st,Je,je,ve,Ee,Be,Ue,ie,le-J.A,ie,le,et);return he+=_.fa,_.j+tt<_.o?(r(A.ec,A.fc,de,he,et),r(A.cc,A.dc,ve,Ee,rt),r(A.Mc,A.Nc,Be,Ue,rt),U--):1&tt||ue(de,he,null,null,ve,Ee,Be,Ue,ve,Ee,Be,Ue,ie,le+J.A,null,null,et),U}function Yn(_,A,U){var J=_.F,ie=[_.J];if(J!=null){var le=_.U,ue=A.ba.S,de=ue==wf||ue==bf;A=A.ba.f.RGBA;var he=[0],ve=_.ka;he[0]=_.T,_.Kb&&(ve==0?--he[0]:(--ve,ie[0]-=_.width),_.j+_.ka+_.T==_.o&&(he[0]=_.o-_.j-ve));var Ee=A.eb;ve=A.fb+ve*A.A,_=Mc(J,ie[0],_.width,le,he,Ee,ve+(de?0:3),A.A),e(U==he),_&&dn(ue)&&ba(Ee,ve,de,le,he,A.A)}return 0}function hn(_){var A=_.ma,U=A.ba.S,J=11>U,ie=U==Wl||U==vf||U==wf||U==cr||U==12||dn(U);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!Pu(A.Oa,_,ie?11:12))return 0;if(ie&&dn(U)&&ht(),_.da)alert("todo:use_scaling");else{if(J){if(A.Ib=Ot,_.Kb){if(U=_.U+1>>1,A.memory=s(_.U+2*U),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+_.U,A.Mc=A.cc,A.Nc=A.dc+U,A.Ib=Jt,ht()}}else alert("todo:EmitYUV");ie&&(A.Jb=Yn,J&&Fe())}if(J&&!bi){for(_=0;256>_;++_)vs[_]=89858*(_-128)+Ho>>Qa,ws[_]=-22014*(_-128)+Ho,Vu[_]=-45773*(_-128),Bc[_]=113618*(_-128)+Ho>>Qa;for(_=Zn;_<ir;++_)A=76283*(_-16)+Ho>>Qa,Jh[_-Zn]=$s(A,255),L1[_-Zn]=$s(A+8>>4,15);bi=1}return 1}function Cn(_){var A=_.ma,U=_.U,J=_.T;return e(!(1&_.ka)),0>=U||0>=J?0:(U=A.Ib(_,A),A.Jb!=null&&A.Jb(_,A,U),A.Dc+=U,1)}function Lr(_){_.ma.memory=null}function Et(_,A,U,J){return te(_,8)!=47?0:(A[0]=te(_,14)+1,U[0]=te(_,14)+1,J[0]=te(_,1),te(_,3)!=0?0:!_.h)}function lr(_,A){if(4>_)return _+1;var U=_-2>>1;return(2+(1&_)<<U)+te(A,U)+1}function Bn(_,A){return 120<A?A-120:1<=(U=((U=I2[A-1])>>4)*_+(8-(15&U)))?U:1;var U}function nr(_,A,U){var J=X(U),ie=_[A+=255&J].g-8;return 0<ie&&(V(U,U.u+8),J=X(U),A+=_[A].value,A+=J&(1<<ie)-1),V(U,U.u+_[A].g),_[A].value}function jn(_,A,U){return U.g+=_.g,U.value+=_.value<<A>>>0,e(8>=U.g),_.g}function On(_,A,U){var J=_.xc;return e((A=J==0?0:_.vc[_.md*(U>>J)+(A>>J)])<_.Wb),_.Ya[A]}function ae(_,A,U,J){var ie=_.ab,le=_.c*A,ue=_.C;A=ue+A;var de=U,he=J;for(J=_.Ta,U=_.Ua;0<ie--;){var ve=_.gc[ie],Ee=ue,Be=A,Ue=de,Le=he,st=(he=J,de=U,ve.Ea);switch(e(Ee<Be),e(Be<=ve.nc),ve.hc){case 2:Hh(Ue,Le,(Be-Ee)*st,he,de);break;case 0:var Je=Ee,je=Be,Pe=he,tt=de,et=(Nt=ve).Ea;Je==0&&(Dc(Ue,Le,null,null,1,Pe,tt),Bt(Ue,Le+1,0,0,et-1,Pe,tt+1),Le+=et,tt+=et,++Je);for(var rt=1<<Nt.b,jt=rt-1,kt=Ze(et,Nt.b),Xt=Nt.K,Nt=Nt.w+(Je>>Nt.b)*kt;Je<je;){var Rn=Xt,Fn=Nt,Pn=1;for(Xa(Ue,Le,Pe,tt-et,1,Pe,tt);Pn<et;){var yn=(Pn&~jt)+rt;yn>et&&(yn=et),(0,xa[Rn[Fn++]>>8&15])(Ue,Le+ +Pn,Pe,tt+Pn-et,yn-Pn,Pe,tt+Pn),Pn=yn}Le+=et,tt+=et,++Je&jt||(Nt+=kt)}Be!=ve.nc&&r(he,de-st,he,de+(Be-Ee-1)*st,st);break;case 1:for(st=Ue,je=Le,et=(Ue=ve.Ea)-(tt=Ue&~(Pe=(Le=1<<ve.b)-1)),Je=Ze(Ue,ve.b),rt=ve.K,ve=ve.w+(Ee>>ve.b)*Je;Ee<Be;){for(jt=rt,kt=ve,Xt=new We,Nt=je+tt,Rn=je+Ue;je<Nt;)Rt(jt[kt++],Xt),Ws(Xt,st,je,Le,he,de),je+=Le,de+=Le;je<Rn&&(Rt(jt[kt++],Xt),Ws(Xt,st,je,et,he,de),je+=et,de+=et),++Ee&Pe||(ve+=Je)}break;case 3:if(Ue==he&&Le==de&&0<ve.b){for(je=he,Ue=st=de+(Be-Ee)*st-(tt=(Be-Ee)*Ze(ve.Ea,ve.b)),Le=he,Pe=de,Je=[],tt=(et=tt)-1;0<=tt;--tt)Je[tt]=Le[Pe+tt];for(tt=et-1;0<=tt;--tt)je[Ue+tt]=Je[tt];ms(ve,Ee,Be,he,st,he,de)}else ms(ve,Ee,Be,Ue,Le,he,de)}de=J,he=U}he!=U&&r(J,U,de,he,le)}function we(_,A){var U=_.V,J=_.Ba+_.c*_.C,ie=A-_.C;if(e(A<=_.l.o),e(16>=ie),0<ie){var le=_.l,ue=_.Ta,de=_.Ua,he=le.width;if(ae(_,ie,U,J),ie=de=[de],e((U=_.C)<(J=A)),e(le.v<le.va),J>le.o&&(J=le.o),U<le.j){var ve=le.j-U;U=le.j,ie[0]+=ve*he}if(U>=J?U=0:(ie[0]+=4*le.v,le.ka=U-le.j,le.U=le.va-le.v,le.T=J-U,U=1),U){if(de=de[0],11>(U=_.ca).S){var Ee=U.f.RGBA,Be=(J=U.S,ie=le.U,le=le.T,ve=Ee.eb,Ee.A),Ue=le;for(Ee=Ee.fb+_.Ma*Ee.A;0<Ue--;){var Le=ue,st=de,Je=ie,je=ve,Pe=Ee;switch(J){case Gh:lo(Le,st,Je,je,Pe);break;case Wl:Ya(Le,st,Je,je,Pe);break;case Bu:Ya(Le,st,Je,je,Pe),ba(je,Pe,0,Je,1,0);break;case T1:Ru(Le,st,Je,je,Pe);break;case vf:bn(Le,st,Je,je,Pe,1);break;case Ic:bn(Le,st,Je,je,Pe,1),ba(je,Pe,0,Je,1,0);break;case wf:bn(Le,st,Je,je,Pe,0);break;case bf:bn(Le,st,Je,je,Pe,0),ba(je,Pe,1,Je,1,0);break;case cr:va(Le,st,Je,je,Pe);break;case _f:va(Le,st,Je,je,Pe),Lc(je,Pe,Je,1,0);break;case Kh:Ja(Le,st,Je,je,Pe);break;default:e(0)}de+=he,Ee+=Be}_.Ma+=le}else alert("todo:EmitRescaledRowsYUVA");e(_.Ma<=U.height)}}_.C=A,e(_.C<=_.i)}function G(_){var A;if(0<_.ua)return 0;for(A=0;A<_.Wb;++A){var U=_.Ya[A].G,J=_.Ya[A].H;if(0<U[1][J[1]+0].g||0<U[2][J[2]+0].g||0<U[3][J[3]+0].g)return 0}return 1}function se(_,A,U,J,ie,le){if(_.Z!=0){var ue=_.qd,de=_.rd;for(e(Ei[_.Z]!=null);A<U;++A)Ei[_.Z](ue,de,J,ie,J,ie,le),ue=J,de=ie,ie+=le;_.qd=ue,_.rd=de}}function fe(_,A){var U=_.l.ma,J=U.Z==0||U.Z==1?_.l.j:_.C;if(J=_.C<J?J:_.C,e(A<=_.l.o),A>J){var ie=_.l.width,le=U.ca,ue=U.tb+ie*J,de=_.V,he=_.Ba+_.c*J,ve=_.gc;e(_.ab==1),e(ve[0].hc==3),qh(ve[0],J,A,de,he,le,ue),se(U,J,A,le,ue,ie)}_.C=_.Ma=A}function me(_,A,U,J,ie,le,ue){var de=_.$/J,he=_.$%J,ve=_.m,Ee=_.s,Be=U+_.$,Ue=Be;ie=U+J*ie;var Le=U+J*le,st=280+Ee.ua,Je=_.Pb?de:16777216,je=0<Ee.ua?Ee.Wa:null,Pe=Ee.wc,tt=Be<Le?On(Ee,he,de):null;e(_.C<le),e(Le<=ie);var et=!1;e:for(;;){for(;et||Be<Le;){var rt=0;if(de>=Je){var jt=Be-U;e((Je=_).Pb),Je.wd=Je.m,Je.xd=jt,0<Je.s.ua&&Ne(Je.s.Wa,Je.s.vb),Je=de+Yh}if(he&Pe||(tt=On(Ee,he,de)),e(tt!=null),tt.Qb&&(A[Be]=tt.qb,et=!0),!et)if(ne(ve),tt.jc){rt=ve,jt=A;var kt=Be,Xt=tt.pd[X(rt)&ti-1];e(tt.jc),256>Xt.g?(V(rt,rt.u+Xt.g),jt[kt]=Xt.value,rt=0):(V(rt,rt.u+Xt.g-256),e(256<=Xt.value),rt=Xt.value),rt==0&&(et=!0)}else rt=nr(tt.G[0],tt.H[0],ve);if(ve.h)break;if(et||256>rt){if(!et)if(tt.nd)A[Be]=(tt.qb|rt<<8)>>>0;else{if(ne(ve),et=nr(tt.G[1],tt.H[1],ve),ne(ve),jt=nr(tt.G[2],tt.H[2],ve),kt=nr(tt.G[3],tt.H[3],ve),ve.h)break;A[Be]=(kt<<24|et<<16|rt<<8|jt)>>>0}if(et=!1,++Be,++he>=J&&(he=0,++de,ue!=null&&de<=le&&!(de%16)&&ue(_,de),je!=null))for(;Ue<Be;)rt=A[Ue++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt}else if(280>rt){if(rt=lr(rt-256,ve),jt=nr(tt.G[4],tt.H[4],ve),ne(ve),jt=Bn(J,jt=lr(jt,ve)),ve.h)break;if(Be-U<jt||ie-Be<rt)break e;for(kt=0;kt<rt;++kt)A[Be+kt]=A[Be+kt-jt];for(Be+=rt,he+=rt;he>=J;)he-=J,++de,ue!=null&&de<=le&&!(de%16)&&ue(_,de);if(e(Be<=ie),he&Pe&&(tt=On(Ee,he,de)),je!=null)for(;Ue<Be;)rt=A[Ue++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt}else{if(!(rt<st))break e;for(et=rt-280,e(je!=null);Ue<Be;)rt=A[Ue++],je.X[(506832829*rt&4294967295)>>>je.Mb]=rt;rt=Be,e(!(et>>>(jt=je).Xa)),A[rt]=jt.X[et],et=!0}et||e(ve.h==q(ve))}if(_.Pb&&ve.h&&Be<ie)e(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Ne(_.s.vb,_.s.Wa);else{if(ve.h)break e;ue!=null&&ue(_,de>le?le:de),_.a=0,_.$=Be-U}return 1}return _.a=3,0}function Ae(_){e(_!=null),_.vc=null,_.yc=null,_.Ya=null;var A=_.Wa;A!=null&&(A.X=null),_.vb=null,e(_!=null)}function De(){var _=new z0;return _==null?null:(_.a=0,_.xb=$u,$r("Predictor","VP8LPredictors"),$r("Predictor","VP8LPredictors_C"),$r("PredictorAdd","VP8LPredictorsAdd"),$r("PredictorAdd","VP8LPredictorsAdd_C"),Hh=qt,Ws=Dt,lo=ot,Ya=Nn,va=Qt,Ja=Wn,Ru=cn,N.VP8LMapColor32b=gf,N.VP8LMapColor8b=yf,_)}function Ie(_,A,U,J,ie){var le=1,ue=[_],de=[A],he=J.m,ve=J.s,Ee=null,Be=0;e:for(;;){if(U)for(;le&&te(he,1);){var Ue=ue,Le=de,st=J,Je=1,je=st.m,Pe=st.gc[st.ab],tt=te(je,2);if(st.Oc&1<<tt)le=0;else{switch(st.Oc|=1<<tt,Pe.hc=tt,Pe.Ea=Ue[0],Pe.nc=Le[0],Pe.K=[null],++st.ab,e(4>=st.ab),tt){case 0:case 1:Pe.b=te(je,3)+2,Je=Ie(Ze(Pe.Ea,Pe.b),Ze(Pe.nc,Pe.b),0,st,Pe.K),Pe.K=Pe.K[0];break;case 3:var et,rt=te(je,8)+1,jt=16<rt?0:4<rt?1:2<rt?2:3;if(Ue[0]=Ze(Pe.Ea,jt),Pe.b=jt,et=Je=Ie(rt,1,0,st,Pe.K)){var kt,Xt=rt,Nt=Pe,Rn=1<<(8>>Nt.b),Fn=s(Rn);if(Fn==null)et=0;else{var Pn=Nt.K[0],yn=Nt.w;for(Fn[0]=Nt.K[0][0],kt=1;kt<1*Xt;++kt)Fn[kt]=Me(Pn[yn+kt],Fn[kt-1]);for(;kt<4*Rn;++kt)Fn[kt]=0;Nt.K[0]=null,Nt.K[0]=Fn,et=1}}Je=et;break;case 2:break;default:e(0)}le=Je}}if(ue=ue[0],de=de[0],le&&te(he,1)&&!(le=1<=(Be=te(he,4))&&11>=Be)){J.a=3;break e}var Qn;if(Qn=le)t:{var sr,ln,Er,Ji=J,zr=ue,ni=de,Hn=Be,Ai=U,Ti=Ji.m,Ar=Ji.s,ri=[null],_i=1,bs=0,po=P1[Hn];n:for(;;){if(Ai&&te(Ti,1)){var Tr=te(Ti,3)+2,Hr=Ze(zr,Tr),Vs=Ze(ni,Tr),ql=Hr*Vs;if(!Ie(Hr,Vs,0,Ji,ri))break n;for(ri=ri[0],Ar.xc=Tr,sr=0;sr<ql;++sr){var tl=ri[sr]>>8&65535;ri[sr]=tl,tl>=_i&&(_i=tl+1)}}if(Ti.h)break n;for(ln=0;5>ln;++ln){var qn=Rc[ln];!ln&&0<Hn&&(qn+=1<<Hn),bs<qn&&(bs=qn)}var ka=o(_i*po,M),Zh=_i,J0=o(Zh,W);if(J0==null)var mo=null;else e(65536>=Zh),mo=J0;var go=s(bs);if(mo==null||go==null||ka==null){Ji.a=1;break n}var $c=ka;for(sr=Er=0;sr<_i;++sr){var yo=mo[sr],nl=yo.G,Wc=yo.H,Hu=0,Hs=1,qu=0;for(ln=0;5>ln;++ln){qn=Rc[ln],nl[ln]=$c,Wc[ln]=Er,!ln&&0<Hn&&(qn+=1<<Hn);i:{var Gl,rl=qn,Gu=Ji,Na=go,I1=$c,Z0=Er,yr=0,qo=Gu.m,Q0=te(qo,1);if(i(Na,0,0,rl),Q0){var em=te(qo,1)+1,Qh=te(qo,1),ep=te(qo,Qh==0?1:8);Na[ep]=1,em==2&&(Na[ep=te(qo,8)]=1);var Ca=1}else{var wr=s(19),qr=te(qo,4)+4;if(19<qr){Gu.a=3;var Br=0;break i}for(Gl=0;Gl<qr;++Gl)wr[M2[Gl]]=te(qo,3);var Ku=void 0,il=void 0,Xu=Gu,U2=wr,ii=rl,tp=Na,Ef=0,Ea=Xu.m,Go=8,qs=o(128,M);r:for(;D(qs,0,7,U2,19);){if(te(Ea,1)){var Af=2+2*te(Ea,3);if((Ku=2+te(Ea,Af))>ii)break r}else Ku=ii;for(il=0;il<ii&&Ku--;){ne(Ea);var np=qs[0+(127&X(Ea))];V(Ea,Ea.u+np.g);var Kl=np.value;if(16>Kl)tp[il++]=Kl,Kl!=0&&(Go=Kl);else{var R1=Kl==16,tm=Kl-16,F1=Xh[tm],nm=te(Ea,Sf[tm])+F1;if(il+nm>ii)break r;for(var z1=R1?Go:0;0<nm--;)tp[il++]=z1}}Ef=1;break r}Ef||(Xu.a=3),Ca=Ef}(Ca=Ca&&!qo.h)&&(yr=D(I1,Z0,8,Na,rl)),Ca&&yr!=0?Br=yr:(Gu.a=3,Br=0)}if(Br==0)break n;if(Hs&&j1[ln]==1&&(Hs=$c[Er].g==0),Hu+=$c[Er].g,Er+=Br,3>=ln){var Yu,rp=go[0];for(Yu=1;Yu<qn;++Yu)go[Yu]>rp&&(rp=go[Yu]);qu+=rp}}if(yo.nd=Hs,yo.Qb=0,Hs&&(yo.qb=(nl[3][Wc[3]+0].value<<24|nl[1][Wc[1]+0].value<<16|nl[2][Wc[2]+0].value)>>>0,Hu==0&&256>nl[0][Wc[0]+0].value&&(yo.Qb=1,yo.qb+=nl[0][Wc[0]+0].value<<8)),yo.jc=!yo.Qb&&6>qu,yo.jc){var Tf,Gs=yo;for(Tf=0;Tf<ti;++Tf){var sl=Tf,Ko=Gs.pd[sl],Vc=Gs.G[0][Gs.H[0]+sl];256<=Vc.value?(Ko.g=Vc.g+256,Ko.value=Vc.value):(Ko.g=0,Ko.value=0,sl>>=jn(Vc,8,Ko),sl>>=jn(Gs.G[1][Gs.H[1]+sl],16,Ko),sl>>=jn(Gs.G[2][Gs.H[2]+sl],0,Ko),jn(Gs.G[3][Gs.H[3]+sl],24,Ko))}}}Ar.vc=ri,Ar.Wb=_i,Ar.Ya=mo,Ar.yc=ka,Qn=1;break t}Qn=0}if(!(le=Qn)){J.a=3;break e}if(0<Be){if(ve.ua=1<<Be,!ze(ve.Wa,Be)){J.a=1,le=0;break e}}else ve.ua=0;var ip=J,sp=ue,B1=de,op=ip.s,ap=op.xc;if(ip.c=sp,ip.i=B1,op.md=Ze(sp,ap),op.wc=ap==0?-1:(1<<ap)-1,U){J.xb=Sa;break e}if((Ee=s(ue*de))==null){J.a=1,le=0;break e}le=(le=me(J,Ee,0,ue,de,de,null))&&!he.h;break e}return le?(ie!=null?ie[0]=Ee:(e(Ee==null),e(U)),J.$=0,U||Ae(ve)):Ae(ve),le}function Re(_,A){var U=_.c*_.i,J=U+A+16*A;return e(_.c<=A),_.V=s(J),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+U+A,1)}function Ve(_,A){var U=_.C,J=A-U,ie=_.V,le=_.Ba+_.c*U;for(e(A<=_.l.o);0<J;){var ue=16<J?16:J,de=_.l.ma,he=_.l.width,ve=he*ue,Ee=de.ca,Be=de.tb+he*U,Ue=_.Ta,Le=_.Ua;ae(_,ue,ie,le),B0(Ue,Le,Ee,Be,ve),se(de,U,U+ue,Ee,Be,he),J-=ue,ie+=ue*_.c,U+=ue}e(U==A),_.C=_.Ma=A}function lt(){this.ub=this.yd=this.td=this.Rb=0}function vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function yt(){this.Yb=function(){var _=[];return function A(U,J,ie){for(var le=ie[J],ue=0;ue<le&&(U.push(ie.length>J+1?[]:0),!(ie.length<J+1));ue++)A(U[ue],J+1,ie)}(_,0,[3,11]),_}()}function pt(){this.jb=s(3),this.Wc=a([4,8],yt),this.Xc=a([4,17],yt)}function on(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function Jn(){this.Na=this.la=0}function Sr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Lo(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function da(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new Lo),this.aa=0,this.l=new fa}function Bs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Wr(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new lt,this.Kc=new vt,this.ed=new on,this.Qa=new Ct,this.Ic=this.$c=this.Aa=0,this.D=new da,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,re),this.ia=0,this.pb=o(4,Sr),this.Pa=new pt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Bs),this.Hd=0,this.rb=Array(new Jn),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Lo),this.L=this.aa=0,this.gd=a([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kr(){var _=new Wr;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Fc||(Fc=wc)),_}function Fr(_,A,U){return _.a==0&&(_.a=A,_.sc=U,_.cb=0),0}function Fh(_,A,U){return 3<=U&&_[A+0]==157&&_[A+1]==1&&_[A+2]==42}function zh(_,A){if(_==null)return 0;if(_.a=0,_.sc="OK",A==null)return Fr(_,2,"null VP8Io passed to VP8GetHeaders()");var U=A.data,J=A.w,ie=A.ha;if(4>ie)return Fr(_,7,"Truncated header.");var le=U[J+0]|U[J+1]<<8|U[J+2]<<16,ue=_.Od;if(ue.Rb=!(1&le),ue.td=le>>1&7,ue.yd=le>>4&1,ue.ub=le>>5,3<ue.td)return Fr(_,3,"Incorrect keyframe parameters.");if(!ue.yd)return Fr(_,4,"Frame not displayable.");J+=3,ie-=3;var de=_.Kc;if(ue.Rb){if(7>ie)return Fr(_,7,"cannot parse picture header");if(!Fh(U,J,ie))return Fr(_,3,"Bad code word");de.c=16383&(U[J+4]<<8|U[J+3]),de.Td=U[J+4]>>6,de.i=16383&(U[J+6]<<8|U[J+5]),de.Ud=U[J+6]>>6,J+=7,ie-=7,_.za=de.c+15>>4,_.Ub=de.i+15>>4,A.width=de.c,A.height=de.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((le=_.Pa).jb,0,255,le.jb.length),e((le=_.Qa)!=null),le.Cb=0,le.Bb=0,le.Fb=1,i(le.Zb,0,0,le.Zb.length),i(le.Lb,0,0,le.Lb)}if(ue.ub>ie)return Fr(_,7,"bad partition length");Z(le=_.m,U,J,ue.ub),J+=ue.ub,ie-=ue.ub,ue.Rb&&(de.Ld=ye(le),de.Kd=ye(le)),de=_.Qa;var he,ve=_.Pa;if(e(le!=null),e(de!=null),de.Cb=ye(le),de.Cb){if(de.Bb=ye(le),ye(le)){for(de.Fb=ye(le),he=0;4>he;++he)de.Zb[he]=ye(le)?F(le,7):0;for(he=0;4>he;++he)de.Lb[he]=ye(le)?F(le,6):0}if(de.Bb)for(he=0;3>he;++he)ve.jb[he]=ye(le)?B(le,8):255}else de.Bb=0;if(le.Ka)return Fr(_,3,"cannot parse segment header");if((de=_.ed).zd=ye(le),de.Tb=B(le,6),de.wb=B(le,3),de.Pc=ye(le),de.Pc&&ye(le)){for(ve=0;4>ve;++ve)ye(le)&&(de.vd[ve]=F(le,6));for(ve=0;4>ve;++ve)ye(le)&&(de.od[ve]=F(le,6))}if(_.L=de.Tb==0?0:de.zd?1:2,le.Ka)return Fr(_,3,"cannot parse filter header");var Ee=ie;if(ie=he=J,J=he+Ee,de=Ee,_.Xb=(1<<B(_.m,2))-1,Ee<3*(ve=_.Xb))U=7;else{for(he+=3*ve,de-=3*ve,Ee=0;Ee<ve;++Ee){var Be=U[ie+0]|U[ie+1]<<8|U[ie+2]<<16;Be>de&&(Be=de),Z(_.Jc[+Ee],U,he,Be),he+=Be,de-=Be,ie+=3}Z(_.Jc[+ve],U,he,de),U=he<J?0:5}if(U!=0)return Fr(_,U,"cannot parse partitions");for(U=B(he=_.m,7),ie=ye(he)?F(he,4):0,J=ye(he)?F(he,4):0,de=ye(he)?F(he,4):0,ve=ye(he)?F(he,4):0,he=ye(he)?F(he,4):0,Ee=_.Qa,Be=0;4>Be;++Be){if(Ee.Cb){var Ue=Ee.Zb[Be];Ee.Fb||(Ue+=U)}else{if(0<Be){_.pb[Be]=_.pb[0];continue}Ue=U}var Le=_.pb[Be];Le.Sc[0]=Uu[$s(Ue+ie,127)],Le.Sc[1]=kf[$s(Ue+0,127)],Le.Eb[0]=2*Uu[$s(Ue+J,127)],Le.Eb[1]=101581*kf[$s(Ue+de,127)]>>16,8>Le.Eb[1]&&(Le.Eb[1]=8),Le.Qc[0]=Uu[$s(Ue+ve,117)],Le.Qc[1]=kf[$s(Ue+he,127)],Le.lc=Ue+he}if(!ue.Rb)return Fr(_,4,"Not a key frame.");for(ye(le),ue=_.Pa,U=0;4>U;++U){for(ie=0;8>ie;++ie)for(J=0;3>J;++J)for(de=0;11>de;++de)ve=xe(le,F2[U][ie][J][de])?B(le,8):O1[U][ie][J][de],ue.Wc[U][ie].Yb[J][de]=ve;for(ie=0;17>ie;++ie)ue.Xc[U][ie]=ue.Wc[U][K0[ie]]}return _.kc=ye(le),_.kc&&(_.Bd=B(le,8)),_.cb=1}function wc(_,A,U,J,ie,le,ue){var de=A[ie].Yb[U];for(U=0;16>ie;++ie){if(!xe(_,de[U+0]))return ie;for(;!xe(_,de[U+1]);)if(de=A[++ie].Yb[0],U=0,ie==16)return 16;var he=A[ie+1].Yb;if(xe(_,de[U+2])){var ve=_,Ee=0;if(xe(ve,(Ue=de)[(Be=U)+3]))if(xe(ve,Ue[Be+6])){for(de=0,Be=2*(Ee=xe(ve,Ue[Be+8]))+(Ue=xe(ve,Ue[Be+9+Ee])),Ee=0,Ue=q0[Be];Ue[de];++de)Ee+=Ee+xe(ve,Ue[de]);Ee+=3+(8<<Be)}else xe(ve,Ue[Be+7])?(Ee=7+2*xe(ve,165),Ee+=xe(ve,145)):Ee=5+xe(ve,159);else Ee=xe(ve,Ue[Be+4])?3+xe(ve,Ue[Be+5]):2;de=he[2]}else Ee=1,de=he[1];he=ue+G0[ie],0>(ve=_).b&&ge(ve);var Be,Ue=ve.b,Le=(Be=ve.Ca>>1)-(ve.I>>Ue)>>31;--ve.b,ve.Ca+=Le,ve.Ca|=1,ve.I-=(Be+1&Le)<<Ue,le[he]=((Ee^Le)-Le)*J[(0<ie)+0]}return 16}function Pl(_){var A=_.rb[_.sb-1];A.la=0,A.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function bc(_,A){if(_==null)return 0;if(A==null)return Fr(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!zh(_,A))return 0;if(e(_.cb),A.ac==null||A.ac(A)){A.ob&&(_.L=0);var U=Uc[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=A.v-U>>4,_.zb=A.j-U>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=A.o+15+U>>4,_.Hb=A.va+15+U>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var J=_.ed;for(U=0;4>U;++U){var ie;if(_.Qa.Cb){var le=_.Qa.Lb[U];_.Qa.Fb||(le+=J.Tb)}else le=J.Tb;for(ie=0;1>=ie;++ie){var ue=_.gd[U][ie],de=le;if(J.Pc&&(de+=J.vd[0],ie&&(de+=J.od[0])),0<(de=0>de?0:63<de?63:de)){var he=de;0<J.wb&&(he=4<J.wb?he>>2:he>>1)>9-J.wb&&(he=9-J.wb),1>he&&(he=1),ue.dd=he,ue.tc=2*de+he,ue.ld=40<=de?2:15<=de?1:0}else ue.tc=0;ue.La=ie}}}U=0}else Fr(_,6,"Frame setup failed"),U=_.a;if(U=U==0){if(U){_.$c=0,0<_.Aa||(_.Ic=el);e:{U=_.Ic,J=4*(he=_.za);var ve=32*he,Ee=he+1,Be=0<_.L?he*(0<_.Aa?2:1):0,Ue=(_.Aa==2?2:1)*he;if((ue=J+832+(ie=3*(16*U+Uc[_.L])/2*ve)+(le=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=ue)U=0;else{if(ue>_.Vb){if(_.Vb=0,_.Ec=s(ue),_.Fc=0,_.Ec==null){U=Fr(_,1,"no memory during frame initialization.");break e}_.Vb=ue}ue=_.Ec,de=_.Fc,_.Ac=ue,_.Bc=de,de+=J,_.Gd=o(ve,Bs),_.Hd=0,_.rb=o(Ee+1,Jn),_.sb=1,_.wa=Be?o(Be,In):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=he),e(!0),_.oc=ue,_.pc=de,de+=832,_.ya=o(Ue,Lo),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=he),_.R=16*he,_.B=8*he,he=(ve=Uc[_.L])*_.R,ve=ve/2*_.B,_.sa=ue,_.ta=de+he,_.qa=_.sa,_.ra=_.ta+16*U*_.R+ve,_.Ha=_.qa,_.Ia=_.ra+8*U*_.B+ve,_.$c=0,de+=ie,_.mb=le?ue:null,_.nb=le?de:null,e(de+le<=_.Fc+_.Vb),Pl(_),i(_.Ac,_.Bc,0,J),U=1}}if(U){if(A.ka=0,A.y=_.sa,A.O=_.ta,A.f=_.qa,A.N=_.ra,A.ea=_.Ha,A.Vd=_.Ia,A.fa=_.R,A.Rc=_.B,A.F=null,A.J=0,!H0){for(U=-255;255>=U;++U)U0[255+U]=0>U?-U:U;for(U=-1020;1020>=U;++U)$0[1020+U]=-128>U?-128:127<U?127:U;for(U=-112;112>=U;++U)W0[112+U]=-16>U?-16:15<U?15:U;for(U=-255;510>=U;++U)V0[255+U]=0>U?0:255<U?255:U;H0=1}Wo=Un,Fu=af,co=Dl,uo=R0,wa=vu,Ki=of,Ul=Cu,Oc=ei,Za=Ac,$l=ff,xf=Il,wi=Rl,Vo=Tc,Vn=Eu,rr=Ro,Ir=Fo,Rr=zo,gs=Wh,ho[0]=ga,ho[1]=Bh,ho[2]=Nc,ho[3]=ma,ho[4]=cf,ho[5]=bu,ho[6]=Ll,ho[7]=_u,ho[8]=$h,ho[9]=Su,Yi[0]=kc,Yi[1]=Uh,Yi[2]=ha,Yi[3]=Sc,Yi[4]=Nr,Yi[5]=pa,Yi[6]=Mo,ys[0]=Us,ys[1]=lf,ys[2]=F0,ys[3]=Ga,ys[4]=Cc,ys[5]=ku,ys[6]=uf,U=1}else U=0}U&&(U=function(Le,st){for(Le.M=0;Le.M<Le.Va;++Le.M){var Je,je=Le.Jc[Le.M&Le.Xb],Pe=Le.m,tt=Le;for(Je=0;Je<tt.za;++Je){var et=Pe,rt=tt,jt=rt.Ac,kt=rt.Bc+4*Je,Xt=rt.zc,Nt=rt.ya[rt.aa+Je];if(rt.Qa.Bb?Nt.$b=xe(et,rt.Pa.jb[0])?2+xe(et,rt.Pa.jb[2]):xe(et,rt.Pa.jb[1]):Nt.$b=0,rt.kc&&(Nt.Ad=xe(et,rt.Bd)),Nt.Za=!xe(et,145)+0,Nt.Za){var Rn=Nt.Ob,Fn=0;for(rt=0;4>rt;++rt){var Pn,yn=Xt[0+rt];for(Pn=0;4>Pn;++Pn){yn=R2[jt[kt+Pn]][yn];for(var Qn=D1[xe(et,yn[0])];0<Qn;)Qn=D1[2*Qn+xe(et,yn[Qn])];yn=-Qn,jt[kt+Pn]=yn}r(Rn,Fn,jt,kt,4),Fn+=4,Xt[0+rt]=yn}}else yn=xe(et,156)?xe(et,128)?1:3:xe(et,163)?2:0,Nt.Ob[0]=yn,i(jt,kt,yn,4),i(Xt,0,yn,4);Nt.Dd=xe(et,142)?xe(et,114)?xe(et,183)?1:3:2:0}if(tt.m.Ka)return Fr(Le,7,"Premature end-of-partition0 encountered.");for(;Le.ja<Le.za;++Le.ja){if(tt=je,et=(Pe=Le).rb[Pe.sb-1],jt=Pe.rb[Pe.sb+Pe.ja],Je=Pe.ya[Pe.aa+Pe.ja],kt=Pe.kc?Je.Ad:0)et.la=jt.la=0,Je.Za||(et.Na=jt.Na=0),Je.Hc=0,Je.Gc=0,Je.ia=0;else{var sr,ln;if(et=jt,jt=tt,kt=Pe.Pa.Xc,Xt=Pe.ya[Pe.aa+Pe.ja],Nt=Pe.pb[Xt.$b],rt=Xt.ad,Rn=0,Fn=Pe.rb[Pe.sb-1],yn=Pn=0,i(rt,Rn,0,384),Xt.Za)var Er=0,Ji=kt[3];else{Qn=s(16);var zr=et.Na+Fn.Na;if(zr=Fc(jt,kt[1],zr,Nt.Eb,0,Qn,0),et.Na=Fn.Na=(0<zr)+0,1<zr)Wo(Qn,0,rt,Rn);else{var ni=Qn[0]+3>>3;for(Qn=0;256>Qn;Qn+=16)rt[Rn+Qn]=ni}Er=1,Ji=kt[0]}var Hn=15&et.la,Ai=15&Fn.la;for(Qn=0;4>Qn;++Qn){var Ti=1&Ai;for(ni=ln=0;4>ni;++ni)Hn=Hn>>1|(Ti=(zr=Fc(jt,Ji,zr=Ti+(1&Hn),Nt.Sc,Er,rt,Rn))>Er)<<7,ln=ln<<2|(3<zr?3:1<zr?2:rt[Rn+0]!=0),Rn+=16;Hn>>=4,Ai=Ai>>1|Ti<<7,Pn=(Pn<<8|ln)>>>0}for(Ji=Hn,Er=Ai>>4,sr=0;4>sr;sr+=2){for(ln=0,Hn=et.la>>4+sr,Ai=Fn.la>>4+sr,Qn=0;2>Qn;++Qn){for(Ti=1&Ai,ni=0;2>ni;++ni)zr=Ti+(1&Hn),Hn=Hn>>1|(Ti=0<(zr=Fc(jt,kt[2],zr,Nt.Qc,0,rt,Rn)))<<3,ln=ln<<2|(3<zr?3:1<zr?2:rt[Rn+0]!=0),Rn+=16;Hn>>=2,Ai=Ai>>1|Ti<<5}yn|=ln<<4*sr,Ji|=Hn<<4<<sr,Er|=(240&Ai)<<sr}et.la=Ji,Fn.la=Er,Xt.Hc=Pn,Xt.Gc=yn,Xt.ia=43690&yn?0:Nt.ia,kt=!(Pn|yn)}if(0<Pe.L&&(Pe.wa[Pe.Y+Pe.ja]=Pe.gd[Je.$b][Je.Za],Pe.wa[Pe.Y+Pe.ja].La|=!kt),tt.Ka)return Fr(Le,7,"Premature end-of-file encountered.")}if(Pl(Le),Pe=st,tt=1,Je=(je=Le).D,et=0<je.L&&je.M>=je.zb&&je.M<=je.Va,je.Aa==0)e:{if(Je.M=je.M,Je.uc=et,ju(je,Je),tt=1,Je=(ln=je.D).Nb,et=(yn=Uc[je.L])*je.R,jt=yn/2*je.B,Qn=16*Je*je.R,ni=8*Je*je.B,kt=je.sa,Xt=je.ta-et+Qn,Nt=je.qa,rt=je.ra-jt+ni,Rn=je.Ha,Fn=je.Ia-jt+ni,Ai=(Hn=ln.M)==0,Pn=Hn>=je.Va-1,je.Aa==2&&ju(je,ln),ln.uc)for(Ti=(zr=je).D.M,e(zr.D.uc),ln=zr.yb;ln<zr.Hb;++ln){Er=ln,Ji=Ti;var Ar=(ri=(qn=zr).D).Nb;sr=qn.R;var ri=ri.wa[ri.Y+Er],_i=qn.sa,bs=qn.ta+16*Ar*sr+16*Er,po=ri.dd,Tr=ri.tc;if(Tr!=0)if(e(3<=Tr),qn.L==1)0<Er&&Ir(_i,bs,sr,Tr+4),ri.La&&gs(_i,bs,sr,Tr),0<Ji&&rr(_i,bs,sr,Tr+4),ri.La&&Rr(_i,bs,sr,Tr);else{var Hr=qn.B,Vs=qn.qa,ql=qn.ra+8*Ar*Hr+8*Er,tl=qn.Ha,qn=qn.Ia+8*Ar*Hr+8*Er;Ar=ri.ld,0<Er&&(Oc(_i,bs,sr,Tr+4,po,Ar),$l(Vs,ql,tl,qn,Hr,Tr+4,po,Ar)),ri.La&&(wi(_i,bs,sr,Tr,po,Ar),Vn(Vs,ql,tl,qn,Hr,Tr,po,Ar)),0<Ji&&(Ul(_i,bs,sr,Tr+4,po,Ar),Za(Vs,ql,tl,qn,Hr,Tr+4,po,Ar)),ri.La&&(xf(_i,bs,sr,Tr,po,Ar),Vo(Vs,ql,tl,qn,Hr,Tr,po,Ar))}}if(je.ia&&alert("todo:DitherRow"),Pe.put!=null){if(ln=16*Hn,Hn=16*(Hn+1),Ai?(Pe.y=je.sa,Pe.O=je.ta+Qn,Pe.f=je.qa,Pe.N=je.ra+ni,Pe.ea=je.Ha,Pe.W=je.Ia+ni):(ln-=yn,Pe.y=kt,Pe.O=Xt,Pe.f=Nt,Pe.N=rt,Pe.ea=Rn,Pe.W=Fn),Pn||(Hn-=yn),Hn>Pe.o&&(Hn=Pe.o),Pe.F=null,Pe.J=null,je.Fa!=null&&0<je.Fa.length&&ln<Hn&&(Pe.J=pf(je,Pe,ln,Hn-ln),Pe.F=je.mb,Pe.F==null&&Pe.F.length==0)){tt=Fr(je,3,"Could not decode alpha data.");break e}ln<Pe.j&&(yn=Pe.j-ln,ln=Pe.j,e(!(1&yn)),Pe.O+=je.R*yn,Pe.N+=je.B*(yn>>1),Pe.W+=je.B*(yn>>1),Pe.F!=null&&(Pe.J+=Pe.width*yn)),ln<Hn&&(Pe.O+=Pe.v,Pe.N+=Pe.v>>1,Pe.W+=Pe.v>>1,Pe.F!=null&&(Pe.J+=Pe.v),Pe.ka=ln-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=Hn-ln,tt=Pe.put(Pe))}Je+1!=je.Ic||Pn||(r(je.sa,je.ta-et,kt,Xt+16*je.R,et),r(je.qa,je.ra-jt,Nt,rt+8*je.B,jt),r(je.Ha,je.Ia-jt,Rn,Fn+8*je.B,jt))}if(!tt)return Fr(Le,6,"Output aborted.")}return 1}(_,A)),A.bc!=null&&A.bc(A),U&=1}return U?(_.cb=0,U):0}function fs(_,A,U,J,ie){ie=_[A+U+32*J]+(ie>>3),_[A+U+32*J]=-256&ie?0>ie?0:255:ie}function xu(_,A,U,J,ie,le){fs(_,A,0,U,J+ie),fs(_,A,1,U,J+le),fs(_,A,2,U,J-le),fs(_,A,3,U,J-ie)}function hs(_){return(20091*_>>16)+_}function _c(_,A,U,J){var ie,le=0,ue=s(16);for(ie=0;4>ie;++ie){var de=_[A+0]+_[A+8],he=_[A+0]-_[A+8],ve=(35468*_[A+4]>>16)-hs(_[A+12]),Ee=hs(_[A+4])+(35468*_[A+12]>>16);ue[le+0]=de+Ee,ue[le+1]=he+ve,ue[le+2]=he-ve,ue[le+3]=de-Ee,le+=4,A++}for(ie=le=0;4>ie;++ie)de=(_=ue[le+0]+4)+ue[le+8],he=_-ue[le+8],ve=(35468*ue[le+4]>>16)-hs(ue[le+12]),fs(U,J,0,0,de+(Ee=hs(ue[le+4])+(35468*ue[le+12]>>16))),fs(U,J,1,0,he+ve),fs(U,J,2,0,he-ve),fs(U,J,3,0,de-Ee),le++,J+=32}function of(_,A,U,J){var ie=_[A+0]+4,le=35468*_[A+4]>>16,ue=hs(_[A+4]),de=35468*_[A+1]>>16;xu(U,J,0,ie+ue,_=hs(_[A+1]),de),xu(U,J,1,ie+le,_,de),xu(U,J,2,ie-le,_,de),xu(U,J,3,ie-ue,_,de)}function af(_,A,U,J,ie){_c(_,A,U,J),ie&&_c(_,A+16,U,J+4)}function Dl(_,A,U,J){Fu(_,A+0,U,J,1),Fu(_,A+32,U,J+128,1)}function R0(_,A,U,J){var ie;for(_=_[A+0]+4,ie=0;4>ie;++ie)for(A=0;4>A;++A)fs(U,J,A,ie,_)}function vu(_,A,U,J){_[A+0]&&uo(_,A+0,U,J),_[A+16]&&uo(_,A+16,U,J+4),_[A+32]&&uo(_,A+32,U,J+128),_[A+48]&&uo(_,A+48,U,J+128+4)}function Un(_,A,U,J){var ie,le=s(16);for(ie=0;4>ie;++ie){var ue=_[A+0+ie]+_[A+12+ie],de=_[A+4+ie]+_[A+8+ie],he=_[A+4+ie]-_[A+8+ie],ve=_[A+0+ie]-_[A+12+ie];le[0+ie]=ue+de,le[8+ie]=ue-de,le[4+ie]=ve+he,le[12+ie]=ve-he}for(ie=0;4>ie;++ie)ue=(_=le[0+4*ie]+3)+le[3+4*ie],de=le[1+4*ie]+le[2+4*ie],he=le[1+4*ie]-le[2+4*ie],ve=_-le[3+4*ie],U[J+0]=ue+de>>3,U[J+16]=ve+he>>3,U[J+32]=ue-de>>3,U[J+48]=ve-he>>3,J+=64}function wu(_,A,U){var J,ie=A-32,le=Xi,ue=255-_[ie-1];for(J=0;J<U;++J){var de,he=le,ve=ue+_[A-1];for(de=0;de<U;++de)_[A+de]=he[ve+_[ie+de]];A+=32}}function Bh(_,A){wu(_,A,4)}function lf(_,A){wu(_,A,8)}function Uh(_,A){wu(_,A,16)}function ha(_,A){var U;for(U=0;16>U;++U)r(_,A+32*U,_,A-32,16)}function Sc(_,A){var U;for(U=16;0<U;--U)i(_,A,_[A-1],16),A+=32}function Ol(_,A,U){var J;for(J=0;16>J;++J)i(A,U+32*J,_,16)}function kc(_,A){var U,J=16;for(U=0;16>U;++U)J+=_[A-1+32*U]+_[A+U-32];Ol(J>>5,_,A)}function Nr(_,A){var U,J=8;for(U=0;16>U;++U)J+=_[A-1+32*U];Ol(J>>4,_,A)}function pa(_,A){var U,J=8;for(U=0;16>U;++U)J+=_[A+U-32];Ol(J>>4,_,A)}function Mo(_,A){Ol(128,_,A)}function rn(_,A,U){return _+2*A+U+2>>2}function Nc(_,A){var U,J=A-32;for(J=new Uint8Array([rn(_[J-1],_[J+0],_[J+1]),rn(_[J+0],_[J+1],_[J+2]),rn(_[J+1],_[J+2],_[J+3]),rn(_[J+2],_[J+3],_[J+4])]),U=0;4>U;++U)r(_,A+32*U,J,0,J.length)}function ma(_,A){var U=_[A-1],J=_[A-1+32],ie=_[A-1+64],le=_[A-1+96];Se(_,A+0,16843009*rn(_[A-1-32],U,J)),Se(_,A+32,16843009*rn(U,J,ie)),Se(_,A+64,16843009*rn(J,ie,le)),Se(_,A+96,16843009*rn(ie,le,le))}function ga(_,A){var U,J=4;for(U=0;4>U;++U)J+=_[A+U-32]+_[A-1+32*U];for(J>>=3,U=0;4>U;++U)i(_,A+32*U,J,4)}function cf(_,A){var U=_[A-1+0],J=_[A-1+32],ie=_[A-1+64],le=_[A-1-32],ue=_[A+0-32],de=_[A+1-32],he=_[A+2-32],ve=_[A+3-32];_[A+0+96]=rn(J,ie,_[A-1+96]),_[A+1+96]=_[A+0+64]=rn(U,J,ie),_[A+2+96]=_[A+1+64]=_[A+0+32]=rn(le,U,J),_[A+3+96]=_[A+2+64]=_[A+1+32]=_[A+0+0]=rn(ue,le,U),_[A+3+64]=_[A+2+32]=_[A+1+0]=rn(de,ue,le),_[A+3+32]=_[A+2+0]=rn(he,de,ue),_[A+3+0]=rn(ve,he,de)}function Ll(_,A){var U=_[A+1-32],J=_[A+2-32],ie=_[A+3-32],le=_[A+4-32],ue=_[A+5-32],de=_[A+6-32],he=_[A+7-32];_[A+0+0]=rn(_[A+0-32],U,J),_[A+1+0]=_[A+0+32]=rn(U,J,ie),_[A+2+0]=_[A+1+32]=_[A+0+64]=rn(J,ie,le),_[A+3+0]=_[A+2+32]=_[A+1+64]=_[A+0+96]=rn(ie,le,ue),_[A+3+32]=_[A+2+64]=_[A+1+96]=rn(le,ue,de),_[A+3+64]=_[A+2+96]=rn(ue,de,he),_[A+3+96]=rn(de,he,he)}function bu(_,A){var U=_[A-1+0],J=_[A-1+32],ie=_[A-1+64],le=_[A-1-32],ue=_[A+0-32],de=_[A+1-32],he=_[A+2-32],ve=_[A+3-32];_[A+0+0]=_[A+1+64]=le+ue+1>>1,_[A+1+0]=_[A+2+64]=ue+de+1>>1,_[A+2+0]=_[A+3+64]=de+he+1>>1,_[A+3+0]=he+ve+1>>1,_[A+0+96]=rn(ie,J,U),_[A+0+64]=rn(J,U,le),_[A+0+32]=_[A+1+96]=rn(U,le,ue),_[A+1+32]=_[A+2+96]=rn(le,ue,de),_[A+2+32]=_[A+3+96]=rn(ue,de,he),_[A+3+32]=rn(de,he,ve)}function _u(_,A){var U=_[A+0-32],J=_[A+1-32],ie=_[A+2-32],le=_[A+3-32],ue=_[A+4-32],de=_[A+5-32],he=_[A+6-32],ve=_[A+7-32];_[A+0+0]=U+J+1>>1,_[A+1+0]=_[A+0+64]=J+ie+1>>1,_[A+2+0]=_[A+1+64]=ie+le+1>>1,_[A+3+0]=_[A+2+64]=le+ue+1>>1,_[A+0+32]=rn(U,J,ie),_[A+1+32]=_[A+0+96]=rn(J,ie,le),_[A+2+32]=_[A+1+96]=rn(ie,le,ue),_[A+3+32]=_[A+2+96]=rn(le,ue,de),_[A+3+64]=rn(ue,de,he),_[A+3+96]=rn(de,he,ve)}function Su(_,A){var U=_[A-1+0],J=_[A-1+32],ie=_[A-1+64],le=_[A-1+96];_[A+0+0]=U+J+1>>1,_[A+2+0]=_[A+0+32]=J+ie+1>>1,_[A+2+32]=_[A+0+64]=ie+le+1>>1,_[A+1+0]=rn(U,J,ie),_[A+3+0]=_[A+1+32]=rn(J,ie,le),_[A+3+32]=_[A+1+64]=rn(ie,le,le),_[A+3+64]=_[A+2+64]=_[A+0+96]=_[A+1+96]=_[A+2+96]=_[A+3+96]=le}function $h(_,A){var U=_[A-1+0],J=_[A-1+32],ie=_[A-1+64],le=_[A-1+96],ue=_[A-1-32],de=_[A+0-32],he=_[A+1-32],ve=_[A+2-32];_[A+0+0]=_[A+2+32]=U+ue+1>>1,_[A+0+32]=_[A+2+64]=J+U+1>>1,_[A+0+64]=_[A+2+96]=ie+J+1>>1,_[A+0+96]=le+ie+1>>1,_[A+3+0]=rn(de,he,ve),_[A+2+0]=rn(ue,de,he),_[A+1+0]=_[A+3+32]=rn(U,ue,de),_[A+1+32]=_[A+3+64]=rn(J,U,ue),_[A+1+64]=_[A+3+96]=rn(ie,J,U),_[A+1+96]=rn(le,ie,J)}function F0(_,A){var U;for(U=0;8>U;++U)r(_,A+32*U,_,A-32,8)}function Ga(_,A){var U;for(U=0;8>U;++U)i(_,A,_[A-1],8),A+=32}function Io(_,A,U){var J;for(J=0;8>J;++J)i(A,U+32*J,_,8)}function Us(_,A){var U,J=8;for(U=0;8>U;++U)J+=_[A+U-32]+_[A-1+32*U];Io(J>>4,_,A)}function ku(_,A){var U,J=4;for(U=0;8>U;++U)J+=_[A+U-32];Io(J>>3,_,A)}function Cc(_,A){var U,J=4;for(U=0;8>U;++U)J+=_[A-1+32*U];Io(J>>3,_,A)}function uf(_,A){Io(128,_,A)}function Ml(_,A,U){var J=_[A-U],ie=_[A+0],le=3*(ie-J)+_a[1020+_[A-2*U]-_[A+U]],ue=zu[112+(le+4>>3)];_[A-U]=Xi[255+J+zu[112+(le+3>>3)]],_[A+0]=Xi[255+ie-ue]}function Ec(_,A,U,J){var ie=_[A+0],le=_[A+U];return fo[255+_[A-2*U]-_[A-U]]>J||fo[255+le-ie]>J}function Nu(_,A,U,J){return 4*fo[255+_[A-U]-_[A+0]]+fo[255+_[A-2*U]-_[A+U]]<=J}function df(_,A,U,J,ie){var le=_[A-3*U],ue=_[A-2*U],de=_[A-U],he=_[A+0],ve=_[A+U],Ee=_[A+2*U],Be=_[A+3*U];return 4*fo[255+de-he]+fo[255+ue-ve]>J?0:fo[255+_[A-4*U]-le]<=ie&&fo[255+le-ue]<=ie&&fo[255+ue-de]<=ie&&fo[255+Be-Ee]<=ie&&fo[255+Ee-ve]<=ie&&fo[255+ve-he]<=ie}function Ro(_,A,U,J){var ie=2*J+1;for(J=0;16>J;++J)Nu(_,A+J,U,ie)&&Ml(_,A+J,U)}function Fo(_,A,U,J){var ie=2*J+1;for(J=0;16>J;++J)Nu(_,A+J*U,1,ie)&&Ml(_,A+J*U,1)}function zo(_,A,U,J){var ie;for(ie=3;0<ie;--ie)Ro(_,A+=4*U,U,J)}function Wh(_,A,U,J){var ie;for(ie=3;0<ie;--ie)Fo(_,A+=4,U,J)}function Bo(_,A,U,J,ie,le,ue,de){for(le=2*le+1;0<ie--;){if(df(_,A,U,le,ue))if(Ec(_,A,U,de))Ml(_,A,U);else{var he=_,ve=A,Ee=U,Be=he[ve-2*Ee],Ue=he[ve-Ee],Le=he[ve+0],st=he[ve+Ee],Je=he[ve+2*Ee],je=27*(tt=_a[1020+3*(Le-Ue)+_a[1020+Be-st]])+63>>7,Pe=18*tt+63>>7,tt=9*tt+63>>7;he[ve-3*Ee]=Xi[255+he[ve-3*Ee]+tt],he[ve-2*Ee]=Xi[255+Be+Pe],he[ve-Ee]=Xi[255+Ue+je],he[ve+0]=Xi[255+Le-je],he[ve+Ee]=Xi[255+st-Pe],he[ve+2*Ee]=Xi[255+Je-tt]}A+=J}}function ps(_,A,U,J,ie,le,ue,de){for(le=2*le+1;0<ie--;){if(df(_,A,U,le,ue))if(Ec(_,A,U,de))Ml(_,A,U);else{var he=_,ve=A,Ee=U,Be=he[ve-Ee],Ue=he[ve+0],Le=he[ve+Ee],st=zu[112+((Je=3*(Ue-Be))+4>>3)],Je=zu[112+(Je+3>>3)],je=st+1>>1;he[ve-2*Ee]=Xi[255+he[ve-2*Ee]+je],he[ve-Ee]=Xi[255+Be+Je],he[ve+0]=Xi[255+Ue-st],he[ve+Ee]=Xi[255+Le-je]}A+=J}}function Cu(_,A,U,J,ie,le){Bo(_,A,U,1,16,J,ie,le)}function ei(_,A,U,J,ie,le){Bo(_,A,1,U,16,J,ie,le)}function Il(_,A,U,J,ie,le){var ue;for(ue=3;0<ue;--ue)ps(_,A+=4*U,U,1,16,J,ie,le)}function Rl(_,A,U,J,ie,le){var ue;for(ue=3;0<ue;--ue)ps(_,A+=4,1,U,16,J,ie,le)}function Ac(_,A,U,J,ie,le,ue,de){Bo(_,A,ie,1,8,le,ue,de),Bo(U,J,ie,1,8,le,ue,de)}function ff(_,A,U,J,ie,le,ue,de){Bo(_,A,1,ie,8,le,ue,de),Bo(U,J,1,ie,8,le,ue,de)}function Tc(_,A,U,J,ie,le,ue,de){ps(_,A+4*ie,ie,1,8,le,ue,de),ps(U,J+4*ie,ie,1,8,le,ue,de)}function Eu(_,A,U,J,ie,le,ue,de){ps(_,A+4,1,ie,8,le,ue,de),ps(U,J+4,1,ie,8,le,ue,de)}function ya(){this.ba=new gr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Fl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Au(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vh(){this.ua=0,this.Wa=new pe,this.vb=new pe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new W,this.yc=new M}function z0(){this.xb=this.a=0,this.l=new fa,this.ca=new gr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vh,this.ab=0,this.gc=o(4,Au),this.Oc=0}function Tu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ka(_,A,U,J,ie,le,ue){for(_=_==null?0:_[A+0],A=0;A<ue;++A)ie[le+A]=_+U[J+A]&255,_=ie[le+A]}function hf(_,A,U,J,ie,le,ue){var de;if(_==null)Ka(null,null,U,J,ie,le,ue);else for(de=0;de<ue;++de)ie[le+de]=_[A+de]+U[J+de]&255}function zl(_,A,U,J,ie,le,ue){if(_==null)Ka(null,null,U,J,ie,le,ue);else{var de,he=_[A+0],ve=he,Ee=he;for(de=0;de<ue;++de)ve=Ee+(he=_[A+de])-ve,Ee=U[J+de]+(-256&ve?0>ve?0:255:ve)&255,ve=he,ie[le+de]=Ee}}function pf(_,A,U,J){var ie=A.width,le=A.o;if(e(_!=null&&A!=null),0>U||0>=J||U+J>le)return null;if(!_.Cc){if(_.ga==null){var ue;if(_.ga=new Tu,(ue=_.ga==null)||(ue=A.width*A.o,e(_.Gb.length==0),_.Gb=s(ue),_.Uc=0,_.Gb==null?ue=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,ue=1),ue=!ue),!ue){ue=_.ga;var de=_.Fa,he=_.P,ve=_.qc,Ee=_.mb,Be=_.nb,Ue=he+1,Le=ve-1,st=ue.l;if(e(de!=null&&Ee!=null&&A!=null),Ei[0]=null,Ei[1]=Ka,Ei[2]=hf,Ei[3]=zl,ue.ca=Ee,ue.tb=Be,ue.c=A.width,ue.i=A.height,e(0<ue.c&&0<ue.i),1>=ve)A=0;else if(ue.$a=de[he+0]>>0&3,ue.Z=de[he+0]>>2&3,ue.Lc=de[he+0]>>4&3,he=de[he+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||he)A=0;else if(st.put=Cn,st.ac=hn,st.bc=Lr,st.ma=ue,st.width=A.width,st.height=A.height,st.Da=A.Da,st.v=A.v,st.va=A.va,st.j=A.j,st.o=A.o,ue.$a)e:{e(ue.$a==1),A=De();t:for(;;){if(A==null){A=0;break e}if(e(ue!=null),ue.mc=A,A.c=ue.c,A.i=ue.i,A.l=ue.l,A.l.ma=ue,A.l.width=ue.c,A.l.height=ue.i,A.a=0,Q(A.m,de,Ue,Le),!Ie(ue.c,ue.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&G(A.s)?(ue.ic=1,de=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(de),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(ue.ic=0,A=Re(A,ue.c)),!A))break t;A=1;break e}ue.mc=null,A=0}else A=Le>=ue.c*ue.i;ue=!A}if(ue)return null;_.ga.Lc!=1?_.Ga=0:J=le-U}e(_.ga!=null),e(U+J<=le);e:{if(A=(de=_.ga).c,le=de.l.o,de.$a==0){if(Ue=_.rc,Le=_.Vc,st=_.Fa,he=_.P+1+U*A,ve=_.mb,Ee=_.nb+U*A,e(he<=_.P+_.qc),de.Z!=0)for(e(Ei[de.Z]!=null),ue=0;ue<J;++ue)Ei[de.Z](Ue,Le,st,he,ve,Ee,A),Ue=ve,Le=Ee,Ee+=A,he+=A;else for(ue=0;ue<J;++ue)r(ve,Ee,st,he,A),Ue=ve,Le=Ee,Ee+=A,he+=A;_.rc=Ue,_.Vc=Le}else{if(e(de.mc!=null),A=U+J,e((ue=de.mc)!=null),e(A<=ue.i),ue.C>=A)A=1;else if(de.ic||Fe(),de.ic){de=ue.V,Ue=ue.Ba,Le=ue.c;var Je=ue.i,je=(st=1,he=ue.$/Le,ve=ue.$%Le,Ee=ue.m,Be=ue.s,ue.$),Pe=Le*Je,tt=Le*A,et=Be.wc,rt=je<tt?On(Be,ve,he):null;e(je<=Pe),e(A<=Je),e(G(Be));t:for(;;){for(;!Ee.h&&je<tt;){if(ve&et||(rt=On(Be,ve,he)),e(rt!=null),ne(Ee),256>(Je=nr(rt.G[0],rt.H[0],Ee)))de[Ue+je]=Je,++je,++ve>=Le&&(ve=0,++he<=A&&!(he%16)&&fe(ue,he));else{if(!(280>Je)){st=0;break t}Je=lr(Je-256,Ee);var jt,kt=nr(rt.G[4],rt.H[4],Ee);if(ne(Ee),!(je>=(kt=Bn(Le,kt=lr(kt,Ee)))&&Pe-je>=Je)){st=0;break t}for(jt=0;jt<Je;++jt)de[Ue+je+jt]=de[Ue+je+jt-kt];for(je+=Je,ve+=Je;ve>=Le;)ve-=Le,++he<=A&&!(he%16)&&fe(ue,he);je<tt&&ve&et&&(rt=On(Be,ve,he))}e(Ee.h==q(Ee))}fe(ue,he>A?A:he);break t}!st||Ee.h&&je<Pe?(st=0,ue.a=Ee.h?5:3):ue.$=je,A=st}else A=me(ue,ue.V,ue.Ba,ue.c,ue.i,A,Ve);if(!A){J=0;break e}}U+J>=le&&(_.Cc=1),J=1}if(!J)return null;if(_.Cc&&((J=_.ga)!=null&&(J.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+U*ie}function I(_,A,U,J,ie,le){for(;0<ie--;){var ue,de=_,he=A+(U?1:0),ve=_,Ee=A+(U?0:3);for(ue=0;ue<J;++ue){var Be=ve[Ee+4*ue];Be!=255&&(Be*=32897,de[he+4*ue+0]=de[he+4*ue+0]*Be>>23,de[he+4*ue+1]=de[he+4*ue+1]*Be>>23,de[he+4*ue+2]=de[he+4*ue+2]*Be>>23)}A+=le}}function oe(_,A,U,J,ie){for(;0<J--;){var le;for(le=0;le<U;++le){var ue=_[A+2*le+0],de=15&(ve=_[A+2*le+1]),he=4369*de,ve=(240&ve|ve>>4)*he>>16;_[A+2*le+0]=(240&ue|ue>>4)*he>>16&240|(15&ue|ue<<4)*he>>16>>4&15,_[A+2*le+1]=240&ve|de}A+=ie}}function be(_,A,U,J,ie,le,ue,de){var he,ve,Ee=255;for(ve=0;ve<ie;++ve){for(he=0;he<J;++he){var Be=_[A+he];le[ue+4*he]=Be,Ee&=Be}A+=U,ue+=de}return Ee!=255}function Ce(_,A,U,J,ie){var le;for(le=0;le<ie;++le)U[J+le]=_[A+le]>>8}function Fe(){ba=I,Lc=oe,Mc=be,B0=Ce}function Qe(_,A,U){N[_]=function(J,ie,le,ue,de,he,ve,Ee,Be,Ue,Le,st,Je,je,Pe,tt,et){var rt,jt=et-1>>1,kt=de[he+0]|ve[Ee+0]<<16,Xt=Be[Ue+0]|Le[st+0]<<16;e(J!=null);var Nt=3*kt+Xt+131074>>2;for(A(J[ie+0],255&Nt,Nt>>16,Je,je),le!=null&&(Nt=3*Xt+kt+131074>>2,A(le[ue+0],255&Nt,Nt>>16,Pe,tt)),rt=1;rt<=jt;++rt){var Rn=de[he+rt]|ve[Ee+rt]<<16,Fn=Be[Ue+rt]|Le[st+rt]<<16,Pn=kt+Rn+Xt+Fn+524296,yn=Pn+2*(Rn+Xt)>>3;Nt=yn+kt>>1,kt=(Pn=Pn+2*(kt+Fn)>>3)+Rn>>1,A(J[ie+2*rt-1],255&Nt,Nt>>16,Je,je+(2*rt-1)*U),A(J[ie+2*rt-0],255&kt,kt>>16,Je,je+(2*rt-0)*U),le!=null&&(Nt=Pn+Xt>>1,kt=yn+Fn>>1,A(le[ue+2*rt-1],255&Nt,Nt>>16,Pe,tt+(2*rt-1)*U),A(le[ue+2*rt+0],255&kt,kt>>16,Pe,tt+(2*rt+0)*U)),kt=Rn,Xt=Fn}1&et||(Nt=3*kt+Xt+131074>>2,A(J[ie+et-1],255&Nt,Nt>>16,Je,je+(et-1)*U),le!=null&&(Nt=3*Xt+kt+131074>>2,A(le[ue+et-1],255&Nt,Nt>>16,Pe,tt+(et-1)*U)))}}function ht(){xs[Gh]=z2,xs[Wl]=Vl,xs[T1]=B2,xs[vf]=Wu,xs[wf]=zc,xs[cr]=Nf,xs[Kh]=X0,xs[Bu]=Vl,xs[Ic]=Wu,xs[bf]=zc,xs[_f]=Nf}function At(_){return _&-16384?0>_?0:255:_>>Hl}function Kt(_,A){return At((19077*_>>8)+(26149*A>>8)-14234)}function pn(_,A,U){return At((19077*_>>8)-(6419*A>>8)-(13320*U>>8)+8708)}function xn(_,A){return At((19077*_>>8)+(33050*A>>8)-17685)}function Tn(_,A,U,J,ie){J[ie+0]=Kt(_,U),J[ie+1]=pn(_,A,U),J[ie+2]=xn(_,A)}function Cr(_,A,U,J,ie){J[ie+0]=xn(_,A),J[ie+1]=pn(_,A,U),J[ie+2]=Kt(_,U)}function Mr(_,A,U,J,ie){var le=pn(_,A,U);A=le<<3&224|xn(_,A)>>3,J[ie+0]=248&Kt(_,U)|le>>5,J[ie+1]=A}function Vr(_,A,U,J,ie){var le=240&xn(_,A)|15;J[ie+0]=240&Kt(_,U)|pn(_,A,U)>>4,J[ie+1]=le}function Ci(_,A,U,J,ie){J[ie+0]=255,Tn(_,A,U,J,ie+1)}function hi(_,A,U,J,ie){Cr(_,A,U,J,ie),J[ie+3]=255}function Uo(_,A,U,J,ie){Tn(_,A,U,J,ie),J[ie+3]=255}function $s(_,A){return 0>_?0:_>A?A:_}function $o(_,A,U){N[_]=function(J,ie,le,ue,de,he,ve,Ee,Be){for(var Ue=Ee+(-2&Be)*U;Ee!=Ue;)A(J[ie+0],le[ue+0],de[he+0],ve,Ee),A(J[ie+1],le[ue+0],de[he+0],ve,Ee+U),ie+=2,++ue,++he,Ee+=2*U;1&Be&&A(J[ie+0],le[ue+0],de[he+0],ve,Ee)}}function Bl(_,A,U){return U==0?_==0?A==0?6:5:A==0?4:0:U}function mf(_,A,U,J,ie){switch(_>>>30){case 3:Fu(A,U,J,ie,0);break;case 2:Ki(A,U,J,ie);break;case 1:uo(A,U,J,ie)}}function ju(_,A){var U,J,ie=A.M,le=A.Nb,ue=_.oc,de=_.pc+40,he=_.oc,ve=_.pc+584,Ee=_.oc,Be=_.pc+600;for(U=0;16>U;++U)ue[de+32*U-1]=129;for(U=0;8>U;++U)he[ve+32*U-1]=129,Ee[Be+32*U-1]=129;for(0<ie?ue[de-1-32]=he[ve-1-32]=Ee[Be-1-32]=129:(i(ue,de-32-1,127,21),i(he,ve-32-1,127,9),i(Ee,Be-32-1,127,9)),J=0;J<_.za;++J){var Ue=A.ya[A.aa+J];if(0<J){for(U=-1;16>U;++U)r(ue,de+32*U-4,ue,de+32*U+12,4);for(U=-1;8>U;++U)r(he,ve+32*U-4,he,ve+32*U+4,4),r(Ee,Be+32*U-4,Ee,Be+32*U+4,4)}var Le=_.Gd,st=_.Hd+J,Je=Ue.ad,je=Ue.Hc;if(0<ie&&(r(ue,de-32,Le[st].y,0,16),r(he,ve-32,Le[st].f,0,8),r(Ee,Be-32,Le[st].ea,0,8)),Ue.Za){var Pe=ue,tt=de-32+16;for(0<ie&&(J>=_.za-1?i(Pe,tt,Le[st].y[15],4):r(Pe,tt,Le[st+1].y,0,4)),U=0;4>U;U++)Pe[tt+128+U]=Pe[tt+256+U]=Pe[tt+384+U]=Pe[tt+0+U];for(U=0;16>U;++U,je<<=2)Pe=ue,tt=de+Y0[U],ho[Ue.Ob[U]](Pe,tt),mf(je,Je,16*+U,Pe,tt)}else if(Pe=Bl(J,ie,Ue.Ob[0]),Yi[Pe](ue,de),je!=0)for(U=0;16>U;++U,je<<=2)mf(je,Je,16*+U,ue,de+Y0[U]);for(U=Ue.Gc,Pe=Bl(J,ie,Ue.Dd),ys[Pe](he,ve),ys[Pe](Ee,Be),je=Je,Pe=he,tt=ve,255&(Ue=U>>0)&&(170&Ue?co(je,256,Pe,tt):wa(je,256,Pe,tt)),Ue=Ee,je=Be,255&(U>>=8)&&(170&U?co(Je,320,Ue,je):wa(Je,320,Ue,je)),ie<_.Ub-1&&(r(Le[st].y,0,ue,de+480,16),r(Le[st].f,0,he,ve+224,8),r(Le[st].ea,0,Ee,Be+224,8)),U=8*le*_.B,Le=_.sa,st=_.ta+16*J+16*le*_.R,Je=_.qa,Ue=_.ra+8*J+U,je=_.Ha,Pe=_.Ia+8*J+U,U=0;16>U;++U)r(Le,st+U*_.R,ue,de+32*U,16);for(U=0;8>U;++U)r(Je,Ue+U*_.B,he,ve+32*U,8),r(je,Pe+U*_.B,Ee,Be+32*U,8)}}function jc(_,A,U,J,ie,le,ue,de,he){var ve=[0],Ee=[0],Be=0,Ue=he!=null?he.kd:0,Le=he??new Fl;if(_==null||12>U)return 7;Le.data=_,Le.w=A,Le.ha=U,A=[A],U=[U],Le.gb=[Le.gb];e:{var st=A,Je=U,je=Le.gb;if(e(_!=null),e(Je!=null),e(je!=null),je[0]=0,12<=Je[0]&&!n(_,st[0],"RIFF")){if(n(_,st[0]+8,"WEBP")){je=3;break e}var Pe=Ge(_,st[0]+4);if(12>Pe||4294967286<Pe){je=3;break e}if(Ue&&Pe>Je[0]-8){je=7;break e}je[0]=Pe,st[0]+=12,Je[0]-=12}je=0}if(je!=0)return je;for(Pe=0<Le.gb[0],U=U[0];;){e:{var tt=_;Je=A,je=U;var et=ve,rt=Ee,jt=st=[0];if((Nt=Be=[Be])[0]=0,8>je[0])je=7;else{if(!n(tt,Je[0],"VP8X")){if(Ge(tt,Je[0]+4)!=10){je=3;break e}if(18>je[0]){je=7;break e}var kt=Ge(tt,Je[0]+8),Xt=1+$e(tt,Je[0]+12);if(2147483648<=Xt*(tt=1+$e(tt,Je[0]+15))){je=3;break e}jt!=null&&(jt[0]=kt),et!=null&&(et[0]=Xt),rt!=null&&(rt[0]=tt),Je[0]+=18,je[0]-=18,Nt[0]=1}je=0}}if(Be=Be[0],st=st[0],je!=0)return je;if(Je=!!(2&st),!Pe&&Be)return 3;if(le!=null&&(le[0]=!!(16&st)),ue!=null&&(ue[0]=Je),de!=null&&(de[0]=0),ue=ve[0],st=Ee[0],Be&&Je&&he==null){je=0;break}if(4>U){je=7;break}if(Pe&&Be||!Pe&&!Be&&!n(_,A[0],"ALPH")){U=[U],Le.na=[Le.na],Le.P=[Le.P],Le.Sa=[Le.Sa];e:{kt=_,je=A,Pe=U;var Nt=Le.gb;et=Le.na,rt=Le.P,jt=Le.Sa,Xt=22,e(kt!=null),e(Pe!=null),tt=je[0];var Rn=Pe[0];for(e(et!=null),e(jt!=null),et[0]=null,rt[0]=null,jt[0]=0;;){if(je[0]=tt,Pe[0]=Rn,8>Rn){je=7;break e}var Fn=Ge(kt,tt+4);if(4294967286<Fn){je=3;break e}var Pn=8+Fn+1&-2;if(Xt+=Pn,0<Nt&&Xt>Nt){je=3;break e}if(!n(kt,tt,"VP8 ")||!n(kt,tt,"VP8L")){je=0;break e}if(Rn[0]<Pn){je=7;break e}n(kt,tt,"ALPH")||(et[0]=kt,rt[0]=tt+8,jt[0]=Fn),tt+=Pn,Rn-=Pn}}if(U=U[0],Le.na=Le.na[0],Le.P=Le.P[0],Le.Sa=Le.Sa[0],je!=0)break}U=[U],Le.Ja=[Le.Ja],Le.xa=[Le.xa];e:if(Nt=_,je=A,Pe=U,et=Le.gb[0],rt=Le.Ja,jt=Le.xa,kt=je[0],tt=!n(Nt,kt,"VP8 "),Xt=!n(Nt,kt,"VP8L"),e(Nt!=null),e(Pe!=null),e(rt!=null),e(jt!=null),8>Pe[0])je=7;else{if(tt||Xt){if(Nt=Ge(Nt,kt+4),12<=et&&Nt>et-12){je=3;break e}if(Ue&&Nt>Pe[0]-8){je=7;break e}rt[0]=Nt,je[0]+=8,Pe[0]-=8,jt[0]=Xt}else jt[0]=5<=Pe[0]&&Nt[kt+0]==47&&!(Nt[kt+4]>>5),rt[0]=Pe[0];je=0}if(U=U[0],Le.Ja=Le.Ja[0],Le.xa=Le.xa[0],A=A[0],je!=0)break;if(4294967286<Le.Ja)return 3;if(de==null||Je||(de[0]=Le.xa?2:1),ue=[ue],st=[st],Le.xa){if(5>U){je=7;break}de=ue,Ue=st,Je=le,_==null||5>U?_=0:5<=U&&_[A+0]==47&&!(_[A+4]>>5)?(Pe=[0],Nt=[0],et=[0],Q(rt=new O,_,A,U),Et(rt,Pe,Nt,et)?(de!=null&&(de[0]=Pe[0]),Ue!=null&&(Ue[0]=Nt[0]),Je!=null&&(Je[0]=et[0]),_=1):_=0):_=0}else{if(10>U){je=7;break}de=st,_==null||10>U||!Fh(_,A+3,U-3)?_=0:(Ue=_[A+0]|_[A+1]<<8|_[A+2]<<16,Je=16383&(_[A+7]<<8|_[A+6]),_=16383&(_[A+9]<<8|_[A+8]),1&Ue||3<(Ue>>1&7)||!(Ue>>4&1)||Ue>>5>=Le.Ja||!Je||!_?_=0:(ue&&(ue[0]=Je),de&&(de[0]=_),_=1))}if(!_||(ue=ue[0],st=st[0],Be&&(ve[0]!=ue||Ee[0]!=st)))return 3;he!=null&&(he[0]=Le,he.offset=A-he.w,e(4294967286>A-he.w),e(he.offset==he.ha-U));break}return je==0||je==7&&Be&&he==null?(le!=null&&(le[0]|=Le.na!=null&&0<Le.na.length),J!=null&&(J[0]=ue),ie!=null&&(ie[0]=st),0):je}function Pu(_,A,U){var J=A.width,ie=A.height,le=0,ue=0,de=J,he=ie;if(A.Da=_!=null&&0<_.Da,A.Da&&(de=_.cd,he=_.bd,le=_.v,ue=_.j,11>U||(le&=-2,ue&=-2),0>le||0>ue||0>=de||0>=he||le+de>J||ue+he>ie))return 0;if(A.v=le,A.j=ue,A.va=le+de,A.o=ue+he,A.U=de,A.T=he,A.da=_!=null&&0<_.da,A.da){if(!qe(de,he,U=[_.ib],le=[_.hb]))return 0;A.ib=U[0],A.hb=le[0]}return A.ob=_!=null&&_.ob,A.Kb=_==null||!_.Sd,A.da&&(A.ob=A.ib<3*J/4&&A.hb<3*ie/4,A.Kb=0),1}function Du(_){if(_==null)return 2;if(11>_.S){var A=_.f.RGBA;A.fb+=(_.height-1)*A.A,A.A=-A.A}else A=_.f.kb,_=_.height,A.O+=(_-1)*A.fa,A.fa=-A.fa,A.N+=(_-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(_-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(_-1)*A.lb,A.lb=-A.lb);return 0}function Pc(_,A,U,J){if(J==null||0>=_||0>=A)return 2;if(U!=null){if(U.Da){var ie=U.cd,le=U.bd,ue=-2&U.v,de=-2&U.j;if(0>ue||0>de||0>=ie||0>=le||ue+ie>_||de+le>A)return 2;_=ie,A=le}if(U.da){if(!qe(_,A,ie=[U.ib],le=[U.hb]))return 2;_=ie[0],A=le[0]}}J.width=_,J.height=A;e:{var he=J.width,ve=J.height;if(_=J.S,0>=he||0>=ve||!(_>=Gh&&13>_))_=2;else{if(0>=J.Rd&&J.sd==null){ue=le=ie=A=0;var Ee=(de=he*Cf[_])*ve;if(11>_||(le=(ve+1)/2*(A=(he+1)/2),_==12&&(ue=(ie=he)*ve)),(ve=s(Ee+2*le+ue))==null){_=1;break e}J.sd=ve,11>_?((he=J.f.RGBA).eb=ve,he.fb=0,he.A=de,he.size=Ee):((he=J.f.kb).y=ve,he.O=0,he.fa=de,he.Fd=Ee,he.f=ve,he.N=0+Ee,he.Ab=A,he.Cd=le,he.ea=ve,he.W=0+Ee+le,he.Db=A,he.Ed=le,_==12&&(he.F=ve,he.J=0+Ee+2*le),he.Tc=ue,he.lb=ie)}if(A=1,ie=J.S,le=J.width,ue=J.height,ie>=Gh&&13>ie)if(11>ie)_=J.f.RGBA,A&=(de=Math.abs(_.A))*(ue-1)+le<=_.size,A&=de>=le*Cf[ie],A&=_.eb!=null;else{_=J.f.kb,de=(le+1)/2,Ee=(ue+1)/2,he=Math.abs(_.fa),ve=Math.abs(_.Ab);var Be=Math.abs(_.Db),Ue=Math.abs(_.lb),Le=Ue*(ue-1)+le;A&=he*(ue-1)+le<=_.Fd,A&=ve*(Ee-1)+de<=_.Cd,A=(A&=Be*(Ee-1)+de<=_.Ed)&he>=le&ve>=de&Be>=de,A&=_.y!=null,A&=_.f!=null,A&=_.ea!=null,ie==12&&(A&=Ue>=le,A&=Le<=_.Tc,A&=_.F!=null)}else A=0;_=A?0:2}}return _!=0||U!=null&&U.fd&&(_=Du(J)),_}var ti=64,Ou=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Lu=24,Mu=32,Iu=8,Gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ke("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(_){return _},N.Predictor2=function(_,A,U){return A[U+0]},N.Predictor3=function(_,A,U){return A[U+1]},N.Predictor4=function(_,A,U){return A[U-1]},N.Predictor5=function(_,A,U){return it(it(_,A[U+1]),A[U+0])},N.Predictor6=function(_,A,U){return it(_,A[U-1])},N.Predictor7=function(_,A,U){return it(_,A[U+0])},N.Predictor8=function(_,A,U){return it(A[U-1],A[U+0])},N.Predictor9=function(_,A,U){return it(A[U+0],A[U+1])},N.Predictor10=function(_,A,U){return it(it(_,A[U-1]),it(A[U+0],A[U+1]))},N.Predictor11=function(_,A,U){var J=A[U+0];return 0>=Tt(J>>24&255,_>>24&255,(A=A[U-1])>>24&255)+Tt(J>>16&255,_>>16&255,A>>16&255)+Tt(J>>8&255,_>>8&255,A>>8&255)+Tt(255&J,255&_,255&A)?J:_},N.Predictor12=function(_,A,U){var J=A[U+0];return(gt((_>>24&255)+(J>>24&255)-((A=A[U-1])>>24&255))<<24|gt((_>>16&255)+(J>>16&255)-(A>>16&255))<<16|gt((_>>8&255)+(J>>8&255)-(A>>8&255))<<8|gt((255&_)+(255&J)-(255&A)))>>>0},N.Predictor13=function(_,A,U){var J=A[U-1];return(xt((_=it(_,A[U+0]))>>24&255,J>>24&255)<<24|xt(_>>16&255,J>>16&255)<<16|xt(_>>8&255,J>>8&255)<<8|xt(_>>0&255,J>>0&255))>>>0};var Dc=N.PredictorAdd0;N.PredictorAdd1=Bt,ke("Predictor2","PredictorAdd2"),ke("Predictor3","PredictorAdd3"),ke("Predictor4","PredictorAdd4"),ke("Predictor5","PredictorAdd5"),ke("Predictor6","PredictorAdd6"),ke("Predictor7","PredictorAdd7"),ke("Predictor8","PredictorAdd8"),ke("Predictor9","PredictorAdd9"),ke("Predictor10","PredictorAdd10"),ke("Predictor11","PredictorAdd11"),ke("Predictor12","PredictorAdd12"),ke("Predictor13","PredictorAdd13");var Xa=N.PredictorAdd2;Mt("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var Hh,ms=N.ColorIndexInverseTransform,gf=N.MapARGB,qh=N.VP8LColorIndexInverseTransformAlpha,yf=N.MapAlpha,xa=N.VP8LPredictorsAdd=[];xa.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ws,lo,Ya,va,Ja,Ru,Wo,Fu,Ki,co,uo,wa,Ul,Oc,Za,$l,xf,wi,Vo,Vn,rr,Ir,Rr,gs,ba,Lc,Mc,B0,U0=s(511),$0=s(2041),W0=s(225),V0=s(767),H0=0,_a=$0,zu=W0,Xi=V0,fo=U0,Gh=0,Wl=1,T1=2,vf=3,wf=4,cr=5,Kh=6,Bu=7,Ic=8,bf=9,_f=10,Sf=[2,3,7],Xh=[3,3,11],Rc=[280,256,256,256,40],j1=[0,1,1,1,0],M2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],I2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],P1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Yh=8,Uu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fc=null,q0=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],G0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],D1=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],O1=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],R2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],F2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],K0=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Yi=[],ho=[],ys=[],Sa=1,$u=2,Ei=[],xs=[];Qe("UpsampleRgbLinePair",Tn,3),Qe("UpsampleBgrLinePair",Cr,3),Qe("UpsampleRgbaLinePair",Uo,4),Qe("UpsampleBgraLinePair",hi,4),Qe("UpsampleArgbLinePair",Ci,4),Qe("UpsampleRgba4444LinePair",Vr,2),Qe("UpsampleRgb565LinePair",Mr,2);var z2=N.UpsampleRgbLinePair,B2=N.UpsampleBgrLinePair,Vl=N.UpsampleRgbaLinePair,Wu=N.UpsampleBgraLinePair,zc=N.UpsampleArgbLinePair,Nf=N.UpsampleRgba4444LinePair,X0=N.UpsampleRgb565LinePair,Qa=16,Ho=1<<Qa-1,Zn=-227,ir=482,Hl=6,bi=0,vs=s(256),Bc=s(256),Vu=s(256),ws=s(256),Jh=s(ir-Zn),L1=s(ir-Zn);$o("YuvToRgbRow",Tn,3),$o("YuvToBgrRow",Cr,3),$o("YuvToRgbaRow",Uo,4),$o("YuvToBgraRow",hi,4),$o("YuvToArgbRow",Ci,4),$o("YuvToRgba4444Row",Vr,2),$o("YuvToRgb565Row",Mr,2);var Y0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Uc=[0,2,8],M1=[8,7,6,4,4,2,2,2,1,1,1,1],el=1;this.WebPDecodeRGBA=function(_,A,U,J,ie){var le=Wl,ue=new ya,de=new gr;ue.ba=de,de.S=le,de.width=[de.width],de.height=[de.height];var he=de.width,ve=de.height,Ee=new fn;if(Ee==null||_==null)var Be=2;else e(Ee!=null),Be=jc(_,A,U,Ee.width,Ee.height,Ee.Pd,Ee.Qd,Ee.format,null);if(Be!=0?he=0:(he!=null&&(he[0]=Ee.width[0]),ve!=null&&(ve[0]=Ee.height[0]),he=1),he){de.width=de.width[0],de.height=de.height[0],J!=null&&(J[0]=de.width),ie!=null&&(ie[0]=de.height);e:{if(J=new fa,(ie=new Fl).data=_,ie.w=A,ie.ha=U,ie.kd=1,A=[0],e(ie!=null),((_=jc(ie.data,ie.w,ie.ha,null,null,null,A,null,ie))==0||_==7)&&A[0]&&(_=4),(A=_)==0){if(e(ue!=null),J.data=ie.data,J.w=ie.w+ie.offset,J.ha=ie.ha-ie.offset,J.put=Cn,J.ac=hn,J.bc=Lr,J.ma=ue,ie.xa){if((_=De())==null){ue=1;break e}if(function(Ue,Le){var st=[0],Je=[0],je=[0];t:for(;;){if(Ue==null)return 0;if(Le==null)return Ue.a=2,0;if(Ue.l=Le,Ue.a=0,Q(Ue.m,Le.data,Le.w,Le.ha),!Et(Ue.m,st,Je,je)){Ue.a=3;break t}if(Ue.xb=$u,Le.width=st[0],Le.height=Je[0],!Ie(st[0],Je[0],1,Ue,null))break t;return 1}return e(Ue.a!=0),0}(_,J)){if(J=(A=Pc(J.width,J.height,ue.Oa,ue.ba))==0){t:{J=_;n:for(;;){if(J==null){J=0;break t}if(e(J.s.yc!=null),e(J.s.Ya!=null),e(0<J.s.Wb),e((U=J.l)!=null),e((ie=U.ma)!=null),J.xb!=0){if(J.ca=ie.ba,J.tb=ie.tb,e(J.ca!=null),!Pu(ie.Oa,U,vf)){J.a=2;break n}if(!Re(J,U.width)||U.da)break n;if((U.da||dn(J.ca.S))&&Fe(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&Fe()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!ze(J.s.vb,J.s.Wa.Xa)){J.a=1;break n}J.xb=0}if(!me(J,J.V,J.Ba,J.c,J.i,U.o,we))break n;ie.Dc=J.Ma,J=1;break t}e(J.a!=0),J=0}J=!J}J&&(A=_.a)}else A=_.a}else{if((_=new kr)==null){ue=1;break e}if(_.Fa=ie.na,_.P=ie.P,_.qc=ie.Sa,zh(_,J)){if((A=Pc(J.width,J.height,ue.Oa,ue.ba))==0){if(_.Aa=0,U=ue.Oa,e((ie=_)!=null),U!=null){if(0<(he=0>(he=U.Md)?0:100<he?255:255*he/100)){for(ve=Ee=0;4>ve;++ve)12>(Be=ie.pb[ve]).lc&&(Be.ia=he*M1[0>Be.lc?0:Be.lc]>>3),Ee|=Be.ia;Ee&&(alert("todo:VP8InitRandom"),ie.ia=1)}ie.Ga=U.Id,100<ie.Ga?ie.Ga=100:0>ie.Ga&&(ie.Ga=0)}bc(_,J)||(A=_.a)}}else A=_.a}A==0&&ue.Oa!=null&&ue.Oa.fd&&(A=Du(ue.ba))}ue=A}le=ue!=0?null:11>le?de.f.RGBA.eb:de.f.kb.y}else le=null;return le};var Cf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,L){for(var R="",D=0;D<4;D++)R+=String.fromCharCode(N[L++]);return R}function u(N,L){return(N[L+0]<<0|N[L+1]<<8|N[L+2]<<16)>>>0}function d(N,L){return(N[L+0]<<0|N[L+1]<<8|N[L+2]<<16|N[L+3]<<24)>>>0}new l;var h=[0],p=[0],y=[],x=new l,v=t,b=function(N,L){var R={},D=0,M=!1,H=0,W=0;if(R.frames=[],!function(X,q,V,ne){for(var ge=0;ge<ne;ge++)if(X[q+ge]!=V.charCodeAt(ge))return!0;return!1}(N,L,"RIFF",4)){var Z,B;for(d(N,L+=4),L+=8;L<N.length;){var F=c(N,L),Q=d(N,L+=4);L+=4;var ee=Q+(1&Q);switch(F){case"VP8 ":case"VP8L":R.frames[D]===void 0&&(R.frames[D]={}),(O=R.frames[D]).src_off=M?W:L-8,O.src_size=H+Q+8,D++,M&&(M=!1,H=0,W=0);break;case"VP8X":(O=R.header={}).feature_flags=N[L];var te=L+4;O.canvas_width=1+u(N,te),te+=3,O.canvas_height=1+u(N,te),te+=3;break;case"ALPH":M=!0,H=ee+8,W=L-8;break;case"ANIM":(O=R.header).bgcolor=d(N,L),te=L+4,O.loop_count=(Z=N)[(B=te)+0]<<0|Z[B+1]<<8,te+=2;break;case"ANMF":var re,O;(O=R.frames[D]={}).offset_x=2*u(N,L),L+=3,O.offset_y=2*u(N,L),L+=3,O.width=1+u(N,L),L+=3,O.height=1+u(N,L),L+=3,O.duration=u(N,L),L+=3,re=N[L++],O.dispose=1&re,O.blend=re>>1&1}F!="ANMF"&&(L+=ee)}return R}}(v,0);b.response=v,b.rgbaoutput=!0,b.dataurl=!1;var S=b.header?b.header:null,k=b.frames?b.frames:null;if(S){S.loop_counter=S.loop_count,h=[S.canvas_height],p=[S.canvas_width];for(var T=0;T<k.length&&k[T].blend!=0;T++);}var j=k[0],P=x.WebPDecodeRGBA(v,j.src_off,j.src_size,p,h);j.rgba=P,j.imgwidth=p[0],j.imgheight=h[0];for(var C=0;C<p[0]*h[0]*4;C++)y[C]=P[C];return this.width=p,this.height=h,this.data=y,this}(function(t){var e=function(){return typeof N_=="function"},n=function(h,p,y,x){var v=4,b=o;switch(x){case t.image_compression.FAST:v=1,b=s;break;case t.image_compression.MEDIUM:v=6,b=a;break;case t.image_compression.SLOW:v=9,b=l}h=r(h,p,y,b);var S=N_(h,{level:v});return t.__addimage__.arrayBufferToBinaryString(S)},r=function(h,p,y,x){for(var v,b,S,k=h.length/p,T=new Uint8Array(h.length+k),j=u(),P=0;P<k;P+=1){if(S=P*p,v=h.subarray(S,S+p),x)T.set(x(v,y,b),S+P);else{for(var C,N=j.length,L=[];C<N;C+=1)L[C]=j[C](v,y,b);var R=d(L.concat());T.set(L[R],S+P)}b=v}return T},i=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var y,x=[],v=h.length;x[0]=1;for(var b=0;b<v;b+=1)y=h[b-p]||0,x[b+1]=h[b]-y+256&255;return x},o=function(h,p,y){var x,v=[],b=h.length;v[0]=2;for(var S=0;S<b;S+=1)x=y&&y[S]||0,v[S+1]=h[S]-x+256&255;return v},a=function(h,p,y){var x,v,b=[],S=h.length;b[0]=3;for(var k=0;k<S;k+=1)x=h[k-p]||0,v=y&&y[k]||0,b[k+1]=h[k]+256-(x+v>>>1)&255;return b},l=function(h,p,y){var x,v,b,S,k=[],T=h.length;k[0]=4;for(var j=0;j<T;j+=1)x=h[j-p]||0,v=y&&y[j]||0,b=y&&y[j-p]||0,S=c(x,v,b),k[j+1]=h[j]-S+256&255;return k},c=function(h,p,y){if(h===p&&p===y)return h;var x=Math.abs(p-y),v=Math.abs(h-y),b=Math.abs(h+p-y-y);return x<=v&&x<=b?h:v<=b?p:y},u=function(){return[i,s,o,a,l]},d=function(h){var p=h.map(function(y){return y.reduce(function(x,v){return x+Math.abs(v)},0)});return p.indexOf(Math.min.apply(null,p))};t.processPNG=function(h,p,y,x){var v,b,S,k,T,j,P,C,N,L,R,D,M,H,W,Z=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(S=new xoe(h)).imgData,b=S.bits,v=S.colorSpace,T=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){N=(C=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,R=new Uint8Array(N*S.colors),L=new Uint8Array(N);var F,Q=S.pixelBitlength-S.bits;for(H=0,W=0;H<N;H++){for(M=C[H],F=0;F<Q;)R[W++]=M>>>F&255,F+=S.bits;L[H]=M>>>F&255}}if(S.bits===16){N=(C=new Uint32Array(S.decodePixels().buffer)).length,R=new Uint8Array(N*(32/S.pixelBitlength)*S.colors),L=new Uint8Array(N*(32/S.pixelBitlength)),D=S.colors>1,H=0,W=0;for(var ee=0;H<N;)M=C[H++],R[W++]=M>>>0&255,D&&(R[W++]=M>>>16&255,M=C[H++],R[W++]=M>>>0&255),L[ee++]=M>>>16&255;b=8}x!==t.image_compression.NONE&&e()?(h=n(R,S.width*S.colors,S.colors,x),P=n(L,S.width,1,x)):(h=R,P=L,Z=void 0)}if(S.colorType===3&&(v=this.color_spaces.INDEXED,j=S.palette,S.transparency.indexed)){var te=S.transparency.indexed,re=0;for(H=0,N=te.length;H<N;++H)re+=te[H];if((re/=255)===N-1&&te.indexOf(0)!==-1)k=[te.indexOf(0)];else if(re!==N){for(C=S.decodePixels(),L=new Uint8Array(C.length),H=0,N=C.length;H<N;H++)L[H]=te[C[H]];P=n(L,S.width,1)}}var O=function(X){var q;switch(X){case t.image_compression.FAST:q=11;break;case t.image_compression.MEDIUM:q=13;break;case t.image_compression.SLOW:q=14;break;default:q=12}return q}(x);return Z===this.decode.FLATE_DECODE&&(B="/Predictor "+O+" "),B+="/Colors "+T+" /BitsPerComponent "+b+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:y,data:h,index:p,filter:Z,decodeParameters:B,transparency:k,palette:j,sMask:P,predictor:O,width:S.width,height:S.height,bitsPerComponent:b,colorSpace:v}}}})(nn.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new voe(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new Kb(100).encode(c,100);return t.processJPEG.call(this,u,n,r,i)},t.processGIF87A=t.processGIF89A}(nn.API),dl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){xr.log("bit decode error:"+n)}},dl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},dl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},dl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},dl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=r*this.width*4+4*i;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},dl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=i*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},dl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},dl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},dl.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new dl(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Kb(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(nn.API),MT.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new MT(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new Kb(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(nn.API),nn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var u=r[c],d=r[c+1],h=r[c+2],p=r[c+3];s[a++]=u,s[a++]=d,s[a++]=h,o[l++]=p}var y=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},nn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cp=nn.API,My=Cp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,u=c.fof?c.fof:1,d=e.doKerning!==!1,h=0,p=t.length,y=0,x=a[0]||l,v=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(h=d&&Xn(c[r])==="object"&&!isNaN(parseInt(c[r][y],10))?c[r][y]/u:0,v.push((a[r]||x)/l+h)),y=r;return v},PT=Cp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Cp.processArabic&&(t=Cp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:My.apply(this,arguments).reduce(function(s,o){return s+o},0)},DT=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},OT=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,u=[],d=[u],h=n.textIndent||0,p=0,y=0,x=t.split(" "),v=My.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),S=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?S=S.concat(T.map(function(j,P){return(P&&j.length?`
`:"")+j})):S.push(T[0])}),x=S,l=PT.apply(this,[b,n])}for(s=0,o=x.length;s<o;s++){var k=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),k=1),h+p+(y=(i=My.apply(this,[r,n])).reduce(function(T,j){return T+j},0))>e||k){if(y>e){for(a=DT.apply(this,[r,i,e-(h+p),e]),u.push(a.shift()),u=[a.pop()];a.length;)d.push([a.shift()]);y=i.slice(r.length-(u[0]?u[0].length:0)).reduce(function(T,j){return T+j},0)}else u=[r];d.push(u),h=y+l,p=v}else u.push(r),h+=p+y,p=v}return c=l?function(T,j){return(j?b:"")+T.join(" ")}:function(T){return T.join(" ")},d.map(c)},Cp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var d=this.internal.getFont(u.fontName,u.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(OT.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},o=t.__fontmetrics__.compress=function(d){var h,p,y,x,v=["{"];for(var b in d){if(h=d[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=s(b).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof h=="number")h<0?(y=s(h).slice(3),x="-"):(y=s(h).slice(2),x=""),y=x+y.slice(0,-1)+r[y.slice(-1)];else{if(Xn(h)!=="object")throw new Error("Don't know what to do with value type "+Xn(h)+".");y=o(h)}v.push(p+y)}return v.push("}"),v.join("")},a=t.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,y,x,v={},b=1,S=v,k=[],T="",j="",P=d.length-1,C=1;C<P;C+=1)(x=d[C])=="'"?h?(y=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(k.push([S,y]),S={},y=void 0):x=="}"?((p=k.pop())[0][p[1]]=S,y=void 0,S=p[0]):x=="-"?b=-1:y===void 0?n.hasOwnProperty(x)?(T+=n[x],y=parseInt(T,16)*b,b=1,T=""):T+=x:n.hasOwnProperty(x)?(j+=n[x],S[y]=parseInt(j,16)*b,b=1,y=void 0,j=""):j+=x;return v},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(d){var h=d.font,p=u.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var y=c.Unicode[h.postScriptName];y&&(h.metadata.Unicode.encoding=y,h.encoding=y.codePages[0])}])}(nn.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(tg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(nn),function(t){function e(){return(an.canvg?Promise.resolve(an.canvg):fu(()=>import("./index.es-BZ0OOlFm.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}nn.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw xr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw xr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=s,u.height=o;var d=u.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(y){return y.fromString(d,n,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),nn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},nn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,d=0;function h(y,x){var v,b=!1;for(v=0;v<y.length;v+=1)y[v]===x&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(Xn(t)==="object"){for(i in t)if(s=t[i],h(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&h(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)typeof s[c][u]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,x=[];for(y in n)n[y].explicitSet===!0&&(n[y].type==="name"?x.push("/"+y+" /"+n[y].value):x.push("/"+y+" "+n[y].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(nn.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],d=0,h=s.length;d<h;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return u.join("");a=a.toString(16),u.push(c[4-a.length],a)}return u.join("")},r=function(s){var o,a,l,c,u,d,h;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,h=(a=Object.keys(s).sort(function(p,y){return p-y})).length;d<h;d++)o=a[d],l.length>=100&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(u+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,h=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",y=0;y<h.length;y++)p+=String.fromCharCode(h[y]);var x=c();u({data:p,addLength1:!0,objectId:x}),l("endobj");var v=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:v}),l("endobj");var b=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Mp(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Mp(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+v+" 0 R"),l("/BaseFont /"+Mp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,u=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,h="",p=0;p<d.length;p++)h+=String.fromCharCode(d[p]);var y=c();u({data:h,addLength1:!0,objectId:y}),l("endobj");var x=c();u({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var v=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+y+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Mp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Mp(a.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,u=s.options||{},d=s.mutex||{},h=d.pdfEscape,p=d.activeFontKey,y=d.fonts,x=p,v="",b=0,S="",k=y[x].encoding;if(y[x].encoding!=="Identity-H")return{text:a,x:l,y:c,options:u,mutex:d};for(S=a,x=p,Array.isArray(a)&&(S=a[0]),b=0;b<S.length;b+=1)y[x].metadata.hasOwnProperty("cmap")&&(o=y[x].metadata.cmap.unicode.codeMap[S[b].charCodeAt(0)]),o||S[b].charCodeAt(0)<256&&y[x].metadata.hasOwnProperty("Unicode")?v+=S[b]:v+="";var T="";return parseInt(x.slice(1))<14||k==="WinAnsiEncoding"?T=h(v,x).split("").map(function(j){return j.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(T=n(v,y[x])),d.isHex=!0,{text:T,x:l,y:c,options:u,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(nn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(nn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,u,d=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,k=0;this.__bidiEngine__={};var T=function(D){var M=D.charCodeAt(),H=M>>8,W=x[H];return W!==void 0?d[256*W+(255&M)]:H===252||H===253?"AL":b.test(H)?"L":H===8?"R":"N"},j=function(D){for(var M,H=0;H<D.length;H++){if((M=T(D.charAt(H)))==="L")return!1;if(M==="R")return!0}return!1},P=function(D,M,H,W){var Z,B,F,Q,ee=M[W];switch(ee){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(ee="AN");break;case"AL":S=!0,ee="R";break;case"WS":ee="N";break;case"CS":W<1||W+1>=M.length||(Z=H[W-1])!=="EN"&&Z!=="AN"||(B=M[W+1])!=="EN"&&B!=="AN"?ee="N":S&&(B="AN"),ee=B===Z?B:"N";break;case"ES":ee=(Z=W>0?H[W-1]:"B")==="EN"&&W+1<M.length&&M[W+1]==="EN"?"EN":"N";break;case"ET":if(W>0&&H[W-1]==="EN"){ee="EN";break}if(S){ee="N";break}for(F=W+1,Q=M.length;F<Q&&M[F]==="ET";)F++;ee=F<Q&&M[F]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Q=M.length,F=W+1;F<Q&&M[F]==="NSM";)F++;if(F<Q){var te=D[W],re=te>=1425&&te<=2303||te===64286;if(Z=M[F],re&&(Z==="R"||Z==="AL")){ee="R";break}}}ee=W<1||(Z=M[W-1])==="B"?"N":H[W-1];break;case"B":S=!1,i=!0,ee=k;break;case"S":s=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":ee="N"}return ee},C=function(D,M,H){var W=D.split("");return H&&N(W,H,{hiLevel:k}),W.reverse(),M&&M.reverse(),W.join("")},N=function(D,M,H){var W,Z,B,F,Q,ee=-1,te=D.length,re=0,O=[],X=k?p:h,q=[];for(S=!1,i=!1,s=!1,Z=0;Z<te;Z++)q[Z]=T(D[Z]);for(B=0;B<te;B++){if(Q=re,O[B]=P(D,q,O,B),W=240&(re=X[Q][y[O[B]]]),re&=15,M[B]=F=X[re][5],W>0)if(W===16){for(Z=ee;Z<B;Z++)M[Z]=1;ee=-1}else ee=-1;if(X[re][6])ee===-1&&(ee=B);else if(ee>-1){for(Z=ee;Z<B;Z++)M[Z]=F;ee=-1}q[B]==="B"&&(M[B]=0),H.hiLevel|=F}s&&function(V,ne,ge){for(var ye=0;ye<ge;ye++)if(V[ye]==="S"){ne[ye]=k;for(var xe=ye-1;xe>=0&&V[xe]==="WS";xe--)ne[xe]=k}}(q,M,te)},L=function(D,M,H,W,Z){if(!(Z.hiLevel<D)){if(D===1&&k===1&&!i)return M.reverse(),void(H&&H.reverse());for(var B,F,Q,ee,te=M.length,re=0;re<te;){if(W[re]>=D){for(Q=re+1;Q<te&&W[Q]>=D;)Q++;for(ee=re,F=Q-1;ee<F;ee++,F--)B=M[ee],M[ee]=M[F],M[F]=B,H&&(B=H[ee],H[ee]=H[F],H[F]=B);re=Q}re++}}},R=function(D,M,H){var W=D.split(""),Z={hiLevel:k};return H||(H=[]),N(W,H,Z),function(B,F,Q){if(Q.hiLevel!==0&&u)for(var ee,te=0;te<B.length;te++)F[te]===1&&(ee=v.indexOf(B[te]))>=0&&(B[te]=v[ee+1])}(W,H,Z),L(2,W,M,H,Z),L(1,W,M,H,Z),W.join("")};return this.__bidiEngine__.doBidiReorder=function(D,M,H){if(function(Z,B){if(B)for(var F=0;F<Z.length;F++)B[F]=F;a===void 0&&(a=j(Z)),c===void 0&&(c=j(Z))}(D,M),o||!l||c)if(o&&l&&a^c)k=a?1:0,D=C(D,M,H);else if(!o&&l&&c)k=a?1:0,D=R(D,M,H),D=C(D,M);else if(!o||a||l||c){if(o&&!l&&a^c)D=C(D,M),a?(k=0,D=R(D,M,H)):(k=1,D=R(D,M,H),D=C(D,M));else if(o&&a&&!l&&c)k=1,D=R(D,M,H),D=C(D,M);else if(!o&&!l&&a^c){var W=u;a?(k=1,D=R(D,M,H),k=0,u=!1,D=R(D,M,H),u=W):(k=0,D=R(D,M,H),D=C(D,M),k=1,u=!1,D=R(D,M,H),u=W,D=C(D,M))}}else k=0,D=R(D,M,H);else k=a?1:0,D=R(D,M,H);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,l=D.isOutputVisual,a=D.isInputRtl,c=D.isOutputRtl,u=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(nn),nn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Gd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Loe(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new woe(this.contents),this.head=new _oe(this),this.name=new Eoe(this),this.cmap=new ZM(this),this.toUnicode={},this.hhea=new Soe(this),this.maxp=new Aoe(this),this.hmtx=new Toe(this),this.post=new Noe(this),this.os2=new koe(this),this.loca=new Ooe(this),this.glyf=new joe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(n=i>>16))!=0&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var jl,Gd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),woe=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,u,d,h,p,y,x;for(x in p=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),u=16*p-d,(i=new Gd).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(u),s=16*p,c=i.pos+s,a=null,y=[],n)for(h=n[x],i.writeString(x),i.writeInt(t(h)),i.writeInt(c),i.writeInt(h.length),y=y.concat(h),x==="head"&&(a=c),c+=h.length;c%4;)y.push(0),c++;return i.write(y),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=QM.call(n);n.length%4;)n.push(0);for(s=new Gd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),boe={}.hasOwnProperty,vc=function(t,e){for(var n in e)boe.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};jl=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var _oe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Gd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),IT=function(){function t(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b,S,k;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),h=p/2,e.pos+=6,s=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),e.pos+=2,x=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),c=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),u=function(){var T,j;for(j=[],l=T=0;0<=h?T<h:T>h;l=0<=h?++T:--T)j.push(e.readUInt16());return j}(),i=(this.length-e.pos+this.offset)/2,a=function(){var T,j;for(j=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)j.push(e.readUInt16());return j}(),l=b=0,k=s.length;b<k;l=++b)for(v=s[l],r=S=y=x[l];y<=v?S<=v:S>=v;r=y<=v?++S:--S)u[l]===0?o=r+c[l]:(o=a[u[l]/2+(r-y)-(h-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b,S,k,T,j,P,C,N,L,R,D,M,H,W,Z,B,F,Q,ee,te,re,O,X,q,V,ne,ge,ye,xe,Se,He,$e;switch(W=new Gd,o=Object.keys(e).sort(function(Ge,ze){return Ge-ze}),n){case"macroman":for(x=0,v=function(){var Ge=[];for(y=0;y<256;++y)Ge.push(0);return Ge}(),S={0:0},s={},Z=0,ee=o.length;Z<ee;Z++)S[xe=e[i=o[Z]]]==null&&(S[xe]=++x),s[i]={old:e[i],new:S[e[i]]},v[i]=S[e[i]];return W.writeUInt16(1),W.writeUInt16(0),W.writeUInt32(12),W.writeUInt16(0),W.writeUInt16(262),W.writeUInt16(0),W.write(v),{charMap:s,subtable:W.data,maxGlyphID:x+1};case"unicode":for(M=[],d=[],k=0,S={},r={},b=c=null,B=0,te=o.length;B<te;B++)S[j=e[i=o[B]]]==null&&(S[j]=++k),r[i]={old:j,new:S[j]},a=S[j]-i,b!=null&&a===c||(b&&d.push(b),M.push(i),c=a),b=i;for(b&&d.push(b),d.push(65535),M.push(65535),R=2*(L=M.length),N=2*Math.pow(Math.log(L)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,C=2*L-N,l=[],P=[],p=[],y=F=0,re=M.length;F<re;y=++F){if(D=M[y],u=d[y],D===65535){l.push(0),P.push(0);break}if(D-(H=r[D].new)>=32768)for(l.push(0),P.push(2*(p.length+L-y)),i=Q=D;D<=u?Q<=u:Q>=u;i=D<=u?++Q:--Q)p.push(r[i].new);else l.push(H-D),P.push(0)}for(W.writeUInt16(3),W.writeUInt16(1),W.writeUInt32(12),W.writeUInt16(4),W.writeUInt16(16+8*L+2*p.length),W.writeUInt16(0),W.writeUInt16(R),W.writeUInt16(N),W.writeUInt16(h),W.writeUInt16(C),ge=0,O=d.length;ge<O;ge++)i=d[ge],W.writeUInt16(i);for(W.writeUInt16(0),ye=0,X=M.length;ye<X;ye++)i=M[ye],W.writeUInt16(i);for(Se=0,q=l.length;Se<q;Se++)a=l[Se],W.writeUInt16(a);for(He=0,V=P.length;He<V;He++)T=P[He],W.writeUInt16(T);for($e=0,ne=p.length;$e<ne;$e++)x=p[$e],W.writeUInt16(x);return{charMap:r,subtable:W.data,maxGlyphID:k+1}}},t}(),ZM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new IT(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=IT.encode(n,r),(s=new Gd).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),Soe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),koe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),Noe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),Coe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Eoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,u,d,h,p;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=d=0,h=i.length;d<h;o=++d)s=i[o],n.pos=s.offset,u=n.readString(s.length),a=new Coe(u,s),c[p=s.nameID]==null&&(c[p]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),Aoe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),Toe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,d;for(d=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)d.push(n.readInt16());return d}(),this.widths=(function(){var u,d,h,p;for(p=[],u=0,d=(h=this.metrics).length;u<d;u++)o=h[u],p.push(o.advance);return p}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),QM=[].slice,joe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,u,d,h;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Gd(r.read(s))).readShort(),u=l.readShort(),h=l.readShort(),c=l.readShort(),d=l.readShort(),this.cache[n]=a===-1?new Doe(l,u,h,c,d):new Poe(l,a,u,h,c,d),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),Poe=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Doe=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Gd(QM.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),Ooe=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,jl),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var u=new Array(4*i.length),d=0;d<i.length;++d)u[4*d+3]=255&i[d],u[4*d+2]=(65280&i[d])>>8,u[4*d+1]=(16711680&i[d])>>16,u[4*d]=(4278190080&i[d])>>24;return u},e}(),Loe=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,u,d,h,p,y,x,v,b;for(i in r=ZM.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},b=r.charMap)p[(l=b[i]).old]=l.new;for(y in h=r.maxGlyphID,o)y in p||(p[y]=h++);return u=function(S){var k,T;for(k in T={},S)T[S[k]]=k;return T}(p),d=Object.keys(u).sort(function(S,k){return S-k}),x=function(){var S,k,T;for(T=[],S=0,k=d.length;S<k;S++)a=d[S],T.push(u[a]);return T}(),s=this.font.glyf.encode(o,x,p),c=this.font.loca.encode(s.offsets,x),v={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},t}();nn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const Moe=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:foe,AcroFormAppearance:zt,AcroFormButton:Ni,AcroFormCheckBox:ig,AcroFormChoiceField:fh,AcroFormComboBox:ph,AcroFormEditBox:ng,AcroFormListBox:hh,AcroFormPasswordField:sg,AcroFormPushButton:rg,AcroFormRadioButton:mh,AcroFormTextField:Fd,GState:Kg,ShadingPattern:vd,TilingPattern:rh,default:nn,jsPDF:nn},Symbol.toStringTag,{value:"Module"}));var yx={exports:{}};const Ioe=R6(Moe);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var RT=yx.exports,FT;function Roe(){return FT||(FT=1,function(t,e){(function(r,i){t.exports=i(function(){try{return Ioe}catch{}}())})(typeof globalThis<"u"?globalThis:typeof RT<"u"?RT:typeof window<"u"?window:typeof self<"u"?self:t7,function(n){return function(){var r={172:function(a,l){var c=this&&this.__extends||function(){var h=function(p,y){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,v){x.__proto__=v}||function(x,v){for(var b in v)Object.prototype.hasOwnProperty.call(v,b)&&(x[b]=v[b])},h(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");h(p,y);function x(){this.constructor=p}p.prototype=y===null?Object.create(y):(x.prototype=y.prototype,new x)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.CellHookData=l.HookData=void 0;var u=function(){function h(p,y,x){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=x,this.doc=p.getDocument()}return h}();l.HookData=u;var d=function(h){c(p,h);function p(y,x,v,b,S,k){var T=h.call(this,y,x,k)||this;return T.cell=v,T.row=b,T.column=S,T.section=b.section,T}return p}(u);l.CellHookData=d},340:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0});var u=c(4),d=c(136),h=c(744),p=c(776),y=c(664),x=c(972);function v(b){b.API.autoTable=function(){for(var S=[],k=0;k<arguments.length;k++)S[k]=arguments[k];var T;S.length===1?T=S[0]:(console.error("Use of deprecated autoTable initiation"),T=S[2]||{},T.columns=S[0],T.body=S[1]);var j=(0,p.parseInput)(this,T),P=(0,x.createTable)(this,j);return(0,y.drawTable)(this,P),this},b.API.lastAutoTable=!1,b.API.previousAutoTable=!1,b.API.autoTable.previous=!1,b.API.autoTableText=function(S,k,T,j){(0,d.default)(S,k,T,j,this)},b.API.autoTableSetDefaults=function(S){return h.DocHandler.setDefaults(S,this),this},b.autoTableSetDefaults=function(S,k){h.DocHandler.setDefaults(S,k)},b.API.autoTableHtmlToJson=function(S,k){var T;if(k===void 0&&(k=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var j=new h.DocHandler(this),P=(0,u.parseHtml)(j,S,window,k,!1),C=P.head,N=P.body,L=((T=C[0])===null||T===void 0?void 0:T.map(function(R){return R.content}))||[];return{columns:L,rows:N,data:N}},b.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var S=this.lastAutoTable;return S&&S.finalY?S.finalY:0},b.API.autoTableAddPageContent=function(S){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),b.API.autoTable.globalDefaults||(b.API.autoTable.globalDefaults={}),b.API.autoTable.globalDefaults.addPageContent=S,this},b.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}l.default=v},136:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(u,d,h,p,y){p=p||{};var x=1.15,v=y.internal.scaleFactor,b=y.internal.getFontSize()/v,S=y.getLineHeightFactor?y.getLineHeightFactor():x,k=b*S,T=/\r\n|\r|\n/g,j="",P=1;if((p.valign==="middle"||p.valign==="bottom"||p.halign==="center"||p.halign==="right")&&(j=typeof u=="string"?u.split(T):u,P=j.length||1),h+=b*(2-x),p.valign==="middle"?h-=P/2*k:p.valign==="bottom"&&(h-=P*k),p.halign==="center"||p.halign==="right"){var C=b;if(p.halign==="center"&&(C*=.5),j&&P>=1){for(var N=0;N<j.length;N++)y.text(j[N],d-y.getStringUnitWidth(j[N])*C,h),h+=k;return y}d-=y.getStringUnitWidth(u)*C}return p.halign==="justify"?y.text(u,d,h,{maxWidth:p.maxWidth||100,align:"justify"}):y.text(u,d,h),y}l.default=c},420:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.getPageAvailableWidth=l.parseSpacing=l.getFillStyle=l.addTableBorder=l.getStringWidth=void 0;function c(y,x,v){v.applyStyles(x,!0);var b=Array.isArray(y)?y:[y],S=b.map(function(k){return v.getTextWidth(k)}).reduce(function(k,T){return Math.max(k,T)},0);return S}l.getStringWidth=c;function u(y,x,v,b){var S=x.settings.tableLineWidth,k=x.settings.tableLineColor;y.applyStyles({lineWidth:S,lineColor:k});var T=d(S,!1);T&&y.rect(v.x,v.y,x.getWidth(y.pageSize().width),b.y-v.y,T)}l.addTableBorder=u;function d(y,x){var v=y>0,b=x||x===0;return v&&b?"DF":v?"S":b?"F":null}l.getFillStyle=d;function h(y,x){var v,b,S,k;if(y=y||x,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=x}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(v=y.left)!==null&&v!==void 0?v:x,top:(b=y.top)!==null&&b!==void 0?b:x,right:(S=y.right)!==null&&S!==void 0?S:x,bottom:(k=y.bottom)!==null&&k!==void 0?k:x}):(typeof y!="number"&&(y=x),{top:y,right:y,bottom:y,left:y})}l.parseSpacing=h;function p(y,x){var v=h(x.settings.margin,0);return y.pageSize().width-(v.left+v.right)}l.getPageAvailableWidth=p},796:function(a,l){var c=this&&this.__extends||function(){var p=function(y,x){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(v[S]=b[S])},p(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");p(y,x);function v(){this.constructor=y}y.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}}();Object.defineProperty(l,"__esModule",{value:!0}),l.getTheme=l.defaultStyles=l.HtmlRowInput=void 0;var u=function(p){c(y,p);function y(x){var v=p.call(this)||this;return v._element=x,v}return y}(Array);l.HtmlRowInput=u;function d(p){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/p,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}l.defaultStyles=d;function h(p){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[p]}l.getTheme=h},903:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseCss=void 0;var u=c(420);function d(v,b,S,k,T){var j={},P=1.3333333333333333,C=p(b,function(ee){return T.getComputedStyle(ee).backgroundColor});C!=null&&(j.fillColor=C);var N=p(b,function(ee){return T.getComputedStyle(ee).color});N!=null&&(j.textColor=N);var L=x(k,S);L&&(j.cellPadding=L);var R="borderTopColor",D=P*S,M=k.borderTopWidth;if(k.borderBottomWidth===M&&k.borderRightWidth===M&&k.borderLeftWidth===M){var H=(parseFloat(M)||0)/D;H&&(j.lineWidth=H)}else j.lineWidth={top:(parseFloat(k.borderTopWidth)||0)/D,right:(parseFloat(k.borderRightWidth)||0)/D,bottom:(parseFloat(k.borderBottomWidth)||0)/D,left:(parseFloat(k.borderLeftWidth)||0)/D},j.lineWidth.top||(j.lineWidth.right?R="borderRightColor":j.lineWidth.bottom?R="borderBottomColor":j.lineWidth.left&&(R="borderLeftColor"));var W=p(b,function(ee){return T.getComputedStyle(ee)[R]});W!=null&&(j.lineColor=W);var Z=["left","right","center","justify"];Z.indexOf(k.textAlign)!==-1&&(j.halign=k.textAlign),Z=["middle","bottom","top"],Z.indexOf(k.verticalAlign)!==-1&&(j.valign=k.verticalAlign);var B=parseInt(k.fontSize||"");isNaN(B)||(j.fontSize=B/P);var F=h(k);F&&(j.fontStyle=F);var Q=(k.fontFamily||"").toLowerCase();return v.indexOf(Q)!==-1&&(j.font=Q),j}l.parseCss=d;function h(v){var b="";return(v.fontWeight==="bold"||v.fontWeight==="bolder"||parseInt(v.fontWeight)>=700)&&(b="bold"),(v.fontStyle==="italic"||v.fontStyle==="oblique")&&(b+="italic"),b}function p(v,b){var S=y(v,b);if(!S)return null;var k=S.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!k||!Array.isArray(k))return null;var T=[parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],j=parseInt(k[4]);return j===0||isNaN(T[0])||isNaN(T[1])||isNaN(T[2])?null:T}function y(v,b){var S=b(v);return S==="rgba(0, 0, 0, 0)"||S==="transparent"||S==="initial"||S==="inherit"?v.parentElement==null?null:y(v.parentElement,b):S}function x(v,b){var S=[v.paddingTop,v.paddingRight,v.paddingBottom,v.paddingLeft],k=96/(72/b),T=(parseInt(v.lineHeight)-parseInt(v.fontSize))/b/2,j=S.map(function(C){return parseInt(C||"0")/k}),P=(0,u.parseSpacing)(j,0);return T>P.top&&(P.top=T),T>P.bottom&&(P.bottom=T),P}},744:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.DocHandler=void 0;var c={},u=function(){function d(h){this.jsPDFDocument=h,this.userStyles={textColor:h.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:h.internal.getFontSize(),fontStyle:h.internal.getFont().fontStyle,font:h.internal.getFont().fontName,lineWidth:h.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:h.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return d.setDefaults=function(h,p){p===void 0&&(p=null),p?p.__autoTableDocumentDefaults=h:c=h},d.unifyColor=function(h){return Array.isArray(h)?h:typeof h=="number"?[h,h,h]:typeof h=="string"?[h]:null},d.prototype.applyStyles=function(h,p){var y,x,v;p===void 0&&(p=!1),h.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(h.fontStyle);var b=this.jsPDFDocument.internal.getFont(),S=b.fontStyle,k=b.fontName;if(h.font&&(k=h.font),h.fontStyle){S=h.fontStyle;var T=this.getFontList()[k];T&&T.indexOf(S)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(T[0]),S=T[0])}if(this.jsPDFDocument.setFont(k,S),h.fontSize&&this.jsPDFDocument.setFontSize(h.fontSize),!p){var j=d.unifyColor(h.fillColor);j&&(y=this.jsPDFDocument).setFillColor.apply(y,j),j=d.unifyColor(h.textColor),j&&(x=this.jsPDFDocument).setTextColor.apply(x,j),j=d.unifyColor(h.lineColor),j&&(v=this.jsPDFDocument).setDrawColor.apply(v,j),typeof h.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(h.lineWidth)}},d.prototype.splitTextToSize=function(h,p,y){return this.jsPDFDocument.splitTextToSize(h,p,y)},d.prototype.rect=function(h,p,y,x,v){return this.jsPDFDocument.rect(h,p,y,x,v)},d.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},d.prototype.getTextWidth=function(h){return this.jsPDFDocument.getTextWidth(h)},d.prototype.getDocument=function(){return this.jsPDFDocument},d.prototype.setPage=function(h){this.jsPDFDocument.setPage(h)},d.prototype.addPage=function(){return this.jsPDFDocument.addPage()},d.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},d.prototype.getGlobalOptions=function(){return c||{}},d.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},d.prototype.pageSize=function(){var h=this.jsPDFDocument.internal.pageSize;return h.width==null&&(h={width:h.getWidth(),height:h.getHeight()}),h},d.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},d.prototype.getLineHeightFactor=function(){var h=this.jsPDFDocument;return h.getLineHeightFactor?h.getLineHeightFactor():1.15},d.prototype.getLineHeight=function(h){return h/this.scaleFactor()*this.getLineHeightFactor()},d.prototype.pageNumber=function(){var h=this.jsPDFDocument.internal.getCurrentPageInfo();return h?h.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},d}();l.DocHandler=u},4:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseHtml=void 0;var u=c(903),d=c(796);function h(x,v,b,S,k){var T,j;S===void 0&&(S=!1),k===void 0&&(k=!1);var P;typeof v=="string"?P=b.document.querySelector(v):P=v;var C=Object.keys(x.getFontList()),N=x.scaleFactor(),L=[],R=[],D=[];if(!P)return console.error("Html table could not be found with input: ",v),{head:L,body:R,foot:D};for(var M=0;M<P.rows.length;M++){var H=P.rows[M],W=(j=(T=H==null?void 0:H.parentElement)===null||T===void 0?void 0:T.tagName)===null||j===void 0?void 0:j.toLowerCase(),Z=p(C,N,b,H,S,k);Z&&(W==="thead"?L.push(Z):W==="tfoot"?D.push(Z):R.push(Z))}return{head:L,body:R,foot:D}}l.parseHtml=h;function p(x,v,b,S,k,T){for(var j=new d.HtmlRowInput(S),P=0;P<S.cells.length;P++){var C=S.cells[P],N=b.getComputedStyle(C);if(k||N.display!=="none"){var L=void 0;T&&(L=(0,u.parseCss)(x,C,v,N,b)),j.push({rowSpan:C.rowSpan,colSpan:C.colSpan,styles:L,_element:C,content:y(C)})}}var R=b.getComputedStyle(S);if(j.length>0&&(k||R.display!=="none"))return j}function y(x){var v=x.cloneNode(!0);return v.innerHTML=v.innerHTML.replace(/\n/g,"").replace(/ +/g," "),v.innerHTML=v.innerHTML.split(/<br.*?>/).map(function(b){return b.trim()}).join(`
`),v.innerText||v.textContent||""}},776:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.parseInput=void 0;var u=c(4),d=c(356),h=c(420),p=c(744),y=c(792);function x(P,C){var N=new p.DocHandler(P),L=N.getDocumentOptions(),R=N.getGlobalOptions();(0,y.default)(N,R,L,C);var D=(0,d.assign)({},R,L,C),M;typeof window<"u"&&(M=window);var H=v(R,L,C),W=b(R,L,C),Z=S(N,D),B=T(N,D,M);return{id:C.tableId,content:B,hooks:W,styles:H,settings:Z}}l.parseInput=x;function v(P,C,N){for(var L={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},R=function(W){if(W==="columnStyles"){var Z=P[W],B=C[W],F=N[W];L.columnStyles=(0,d.assign)({},Z,B,F)}else{var Q=[P,C,N],ee=Q.map(function(te){return te[W]||{}});L[W]=(0,d.assign)({},ee[0],ee[1],ee[2])}},D=0,M=Object.keys(L);D<M.length;D++){var H=M[D];R(H)}return L}function b(P,C,N){for(var L=[P,C,N],R={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},D=0,M=L;D<M.length;D++){var H=M[D];H.didParseCell&&R.didParseCell.push(H.didParseCell),H.willDrawCell&&R.willDrawCell.push(H.willDrawCell),H.didDrawCell&&R.didDrawCell.push(H.didDrawCell),H.willDrawPage&&R.willDrawPage.push(H.willDrawPage),H.didDrawPage&&R.didDrawPage.push(H.didDrawPage)}return R}function S(P,C){var N,L,R,D,M,H,W,Z,B,F,Q,ee,te=(0,h.parseSpacing)(C.margin,40/P.scaleFactor()),re=(N=k(P,C.startY))!==null&&N!==void 0?N:te.top,O;C.showFoot===!0?O="everyPage":C.showFoot===!1?O="never":O=(L=C.showFoot)!==null&&L!==void 0?L:"everyPage";var X;C.showHead===!0?X="everyPage":C.showHead===!1?X="never":X=(R=C.showHead)!==null&&R!==void 0?R:"everyPage";var q=(D=C.useCss)!==null&&D!==void 0?D:!1,V=C.theme||(q?"plain":"striped"),ne=!!C.horizontalPageBreak,ge=(M=C.horizontalPageBreakRepeat)!==null&&M!==void 0?M:null;return{includeHiddenHtml:(H=C.includeHiddenHtml)!==null&&H!==void 0?H:!1,useCss:q,theme:V,startY:re,margin:te,pageBreak:(W=C.pageBreak)!==null&&W!==void 0?W:"auto",rowPageBreak:(Z=C.rowPageBreak)!==null&&Z!==void 0?Z:"auto",tableWidth:(B=C.tableWidth)!==null&&B!==void 0?B:"auto",showHead:X,showFoot:O,tableLineWidth:(F=C.tableLineWidth)!==null&&F!==void 0?F:0,tableLineColor:(Q=C.tableLineColor)!==null&&Q!==void 0?Q:200,horizontalPageBreak:ne,horizontalPageBreakRepeat:ge,horizontalPageBreakBehaviour:(ee=C.horizontalPageBreakBehaviour)!==null&&ee!==void 0?ee:"afterAllRows"}}function k(P,C){var N=P.getLastAutoTable(),L=P.scaleFactor(),R=P.pageNumber(),D=!1;if(N&&N.startPageNumber){var M=N.startPageNumber+N.pageNumber-1;D=M===R}return typeof C=="number"?C:(C==null||C===!1)&&D&&(N==null?void 0:N.finalY)!=null?N.finalY+20/L:null}function T(P,C,N){var L=C.head||[],R=C.body||[],D=C.foot||[];if(C.html){var M=C.includeHiddenHtml;if(N){var H=(0,u.parseHtml)(P,C.html,N,M,C.useCss)||{};L=H.head||L,R=H.body||L,D=H.foot||L}else console.error("Cannot parse html in non browser environment")}var W=C.columns||j(L,R,D);return{columns:W,head:L,body:R,foot:D}}function j(P,C,N){var L=P[0]||C[0]||N[0]||[],R=[];return Object.keys(L).filter(function(D){return D!=="_element"}).forEach(function(D){var M=1,H;Array.isArray(L)?H=L[parseInt(D)]:H=L[D],typeof H=="object"&&!Array.isArray(H)&&(M=(H==null?void 0:H.colSpan)||1);for(var W=0;W<M;W++){var Z=void 0;Array.isArray(L)?Z=R.length:Z=D+(W>0?"_".concat(W):"");var B={dataKey:Z};R.push(B)}}),R}},792:function(a,l){Object.defineProperty(l,"__esModule",{value:!0});function c(d,h,p,y){for(var x=function(k){k&&typeof k!="object"&&console.error("The options parameter should be of type object, is: "+typeof k),typeof k.extendWidth<"u"&&(k.tableWidth=k.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof k.margins<"u"&&(typeof k.margin>"u"&&(k.margin=k.margins),console.error("Use of deprecated option: margins, use margin instead.")),k.startY&&typeof k.startY!="number"&&(console.error("Invalid value for startY option",k.startY),delete k.startY),!k.didDrawPage&&(k.afterPageContent||k.beforePageContent||k.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),k.didDrawPage=function(D){d.applyStyles(d.userStyles),k.beforePageContent&&k.beforePageContent(D),d.applyStyles(d.userStyles),k.afterPageContent&&k.afterPageContent(D),d.applyStyles(d.userStyles),k.afterPageAdd&&D.pageNumber>1&&D.afterPageAdd(D),d.applyStyles(d.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(D){k[D]&&console.error('The "'.concat(D,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(D){var M=D[0],H=D[1];k[H]&&(console.error("Use of deprecated option ".concat(H,". Use ").concat(M," instead")),k[M]=k[H])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(D){var M=typeof D=="string"?D:D[0],H=typeof D=="string"?D:D[1];typeof k[M]<"u"&&(typeof k.styles[H]>"u"&&(k.styles[H]=k[M]),console.error("Use of deprecated option: "+M+", use the style "+H+" instead."))});for(var T=0,j=["styles","bodyStyles","headStyles","footStyles"];T<j.length;T++){var P=j[T];u(k[P]||{})}for(var C=k.columnStyles||{},N=0,L=Object.keys(C);N<L.length;N++){var R=L[N];u(C[R]||{})}},v=0,b=[h,p,y];v<b.length;v++){var S=b[v];x(S)}}l.default=c;function u(d){d.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),d.minCellHeight||(d.minCellHeight=d.rowHeight)):d.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),d.cellWidth||(d.cellWidth=d.columnWidth))}},260:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.Column=l.Cell=l.Row=l.Table=void 0;var u=c(796),d=c(172),h=c(420),p=function(){function b(S,k){this.pageNumber=1,this.pageCount=1,this.id=S.id,this.settings=S.settings,this.styles=S.styles,this.hooks=S.hooks,this.columns=k.columns,this.head=k.head,this.body=k.body,this.foot=k.foot}return b.prototype.getHeadHeight=function(S){return this.head.reduce(function(k,T){return k+T.getMaxCellHeight(S)},0)},b.prototype.getFootHeight=function(S){return this.foot.reduce(function(k,T){return k+T.getMaxCellHeight(S)},0)},b.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},b.prototype.callCellHooks=function(S,k,T,j,P,C){for(var N=0,L=k;N<L.length;N++){var R=L[N],D=new d.CellHookData(S,this,T,j,P,C),M=R(D)===!1;if(T.text=Array.isArray(T.text)?T.text:[T.text],M)return!1}return!0},b.prototype.callEndPageHooks=function(S,k){S.applyStyles(S.userStyles);for(var T=0,j=this.hooks.didDrawPage;T<j.length;T++){var P=j[T];P(new d.HookData(S,this,k))}},b.prototype.callWillDrawPageHooks=function(S,k){for(var T=0,j=this.hooks.willDrawPage;T<j.length;T++){var P=j[T];P(new d.HookData(S,this,k))}},b.prototype.getWidth=function(S){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var k=this.columns.reduce(function(j,P){return j+P.wrappedWidth},0);return k}else{var T=this.settings.margin;return S-T.left-T.right}},b}();l.Table=p;var y=function(){function b(S,k,T,j,P){P===void 0&&(P=!1),this.height=0,this.raw=S,S instanceof u.HtmlRowInput&&(this.raw=S._element,this.element=S._element),this.index=k,this.section=T,this.cells=j,this.spansMultiplePages=P}return b.prototype.getMaxCellHeight=function(S){var k=this;return S.reduce(function(T,j){var P;return Math.max(T,((P=k.cells[j.index])===null||P===void 0?void 0:P.height)||0)},0)},b.prototype.hasRowSpan=function(S){var k=this;return S.filter(function(T){var j=k.cells[T.index];return j?j.rowSpan>1:!1}).length>0},b.prototype.canEntireRowFit=function(S,k){return this.getMaxCellHeight(k)<=S},b.prototype.getMinimumRowHeight=function(S,k){var T=this;return S.reduce(function(j,P){var C=T.cells[P.index];if(!C)return 0;var N=k.getLineHeight(C.styles.fontSize),L=C.padding("vertical"),R=L+N;return R>j?R:j},0)},b}();l.Row=y;var x=function(){function b(S,k,T){var j,P;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=k,this.section=T,this.raw=S;var C=S;S!=null&&typeof S=="object"&&!Array.isArray(S)?(this.rowSpan=S.rowSpan||1,this.colSpan=S.colSpan||1,C=(P=(j=S.content)!==null&&j!==void 0?j:S.title)!==null&&P!==void 0?P:S,S._element&&(this.raw=S._element)):(this.rowSpan=1,this.colSpan=1);var N=C!=null?""+C:"",L=/\r\n|\r|\n/g;this.text=N.split(L)}return b.prototype.getTextPos=function(){var S;if(this.styles.valign==="top")S=this.y+this.padding("top");else if(this.styles.valign==="bottom")S=this.y+this.height-this.padding("bottom");else{var k=this.height-this.padding("vertical");S=this.y+k/2+this.padding("top")}var T;if(this.styles.halign==="right")T=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var j=this.width-this.padding("horizontal");T=this.x+j/2+this.padding("left")}else T=this.x+this.padding("left");return{x:T,y:S}},b.prototype.getContentHeight=function(S,k){k===void 0&&(k=1.15);var T=Array.isArray(this.text)?this.text.length:1,j=this.styles.fontSize/S*k,P=T*j+this.padding("vertical");return Math.max(P,this.styles.minCellHeight)},b.prototype.padding=function(S){var k=(0,h.parseSpacing)(this.styles.cellPadding,0);return S==="vertical"?k.top+k.bottom:S==="horizontal"?k.left+k.right:k[S]},b}();l.Cell=x;var v=function(){function b(S,k,T){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=S,this.raw=k,this.index=T}return b.prototype.getMaxCustomCellWidth=function(S){for(var k=0,T=0,j=S.allRows();T<j.length;T++){var P=j[T],C=P.cells[this.index];C&&typeof C.styles.cellWidth=="number"&&(k=Math.max(k,C.styles.cellWidth))}return k},b}();l.Column=v},356:function(a,l){Object.defineProperty(l,"__esModule",{value:!0}),l.assign=void 0;function c(u,d,h,p,y){if(u==null)throw new TypeError("Cannot convert undefined or null to object");for(var x=Object(u),v=1;v<arguments.length;v++){var b=arguments[v];if(b!=null)for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(x[S]=b[S])}return x}l.assign=c},972:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.createTable=void 0;var u=c(744),d=c(260),h=c(324),p=c(796),y=c(356);function x(P,C){var N=new u.DocHandler(P),L=v(C,N.scaleFactor()),R=new d.Table(C,L);return(0,h.calculateWidths)(N,R),N.applyStyles(N.userStyles),R}l.createTable=x;function v(P,C){var N=P.content,L=T(N.columns);if(N.head.length===0){var R=S(L,"head");R&&N.head.push(R)}if(N.foot.length===0){var R=S(L,"foot");R&&N.foot.push(R)}var D=P.settings.theme,M=P.styles;return{columns:L,head:b("head",N.head,L,M,D,C),body:b("body",N.body,L,M,D,C),foot:b("foot",N.foot,L,M,D,C)}}function b(P,C,N,L,R,D){var M={},H=C.map(function(W,Z){for(var B=0,F={},Q=0,ee=0,te=0,re=N;te<re.length;te++){var O=re[te];if(M[O.index]==null||M[O.index].left===0)if(ee===0){var X=void 0;Array.isArray(W)?X=W[O.index-Q-B]:X=W[O.dataKey];var q={};typeof X=="object"&&!Array.isArray(X)&&(q=(X==null?void 0:X.styles)||{});var V=j(P,O,Z,R,L,D,q),ne=new d.Cell(X,V,P);F[O.dataKey]=ne,F[O.index]=ne,ee=ne.colSpan-1,M[O.index]={left:ne.rowSpan-1,times:ee}}else ee--,Q++;else M[O.index].left--,ee=M[O.index].times,B++}return new d.Row(W,Z,P,F)});return H}function S(P,C){var N={};return P.forEach(function(L){if(L.raw!=null){var R=k(C,L.raw);R!=null&&(N[L.dataKey]=R)}}),Object.keys(N).length>0?N:null}function k(P,C){if(P==="head"){if(typeof C=="object")return C.header||C.title||null;if(typeof C=="string"||typeof C=="number")return C}else if(P==="foot"&&typeof C=="object")return C.footer;return null}function T(P){return P.map(function(C,N){var L,R,D;return typeof C=="object"?D=(R=(L=C.dataKey)!==null&&L!==void 0?L:C.key)!==null&&R!==void 0?R:N:D=N,new d.Column(D,C,N)})}function j(P,C,N,L,R,D,M){var H=(0,p.getTheme)(L),W;P==="head"?W=R.headStyles:P==="body"?W=R.bodyStyles:P==="foot"&&(W=R.footStyles);var Z=(0,y.assign)({},H.table,H[P],R.styles,W),B=R.columnStyles[C.dataKey]||R.columnStyles[C.index]||{},F=P==="body"?B:{},Q=P==="body"&&N%2===0?(0,y.assign)({},H.alternateRow,R.alternateRowStyles):{},ee=(0,p.defaultStyles)(D),te=(0,y.assign)({},ee,Z,Q,F);return(0,y.assign)(te,M)}},664:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.addPage=l.drawTable=void 0;var u=c(420),d=c(260),h=c(744),p=c(356),y=c(136),x=c(224);function v(B,F){var Q=F.settings,ee=Q.startY,te=Q.margin,re={x:te.left,y:ee},O=F.getHeadHeight(F.columns)+F.getFootHeight(F.columns),X=ee+te.bottom+O;if(Q.pageBreak==="avoid"){var q=F.body,V=q.reduce(function(ye,xe){return ye+xe.height},0);X+=V}var ne=new h.DocHandler(B);(Q.pageBreak==="always"||Q.startY!=null&&X>ne.pageSize().height)&&(Z(ne),re.y=te.top),F.callWillDrawPageHooks(ne,re);var ge=(0,p.assign)({},re);F.startPageNumber=ne.pageNumber(),Q.horizontalPageBreak?b(ne,F,ge,re):(ne.applyStyles(ne.userStyles),(Q.showHead==="firstPage"||Q.showHead==="everyPage")&&F.head.forEach(function(ye){return R(ne,F,ye,re,F.columns)}),ne.applyStyles(ne.userStyles),F.body.forEach(function(ye,xe){var Se=xe===F.body.length-1;L(ne,F,ye,Se,ge,re,F.columns)}),ne.applyStyles(ne.userStyles),(Q.showFoot==="lastPage"||Q.showFoot==="everyPage")&&F.foot.forEach(function(ye){return R(ne,F,ye,re,F.columns)})),(0,u.addTableBorder)(ne,F,ge,re),F.callEndPageHooks(ne,re),F.finalY=re.y,B.lastAutoTable=F,B.previousAutoTable=F,B.autoTable&&(B.autoTable.previous=F),ne.applyStyles(ne.userStyles)}l.drawTable=v;function b(B,F,Q,ee){var te=(0,x.calculateAllColumnsCanFitInPage)(B,F),re=F.settings;if(re.horizontalPageBreakBehaviour==="afterAllRows")te.forEach(function(V,ne){B.applyStyles(B.userStyles),ne>0?W(B,F,Q,ee,V.columns,!0):S(B,F,ee,V.columns),k(B,F,Q,ee,V.columns),j(B,F,ee,V.columns)});else for(var O=-1,X=te[0],q=function(){var V=O;if(X){B.applyStyles(B.userStyles);var ne=X.columns;O>=0?W(B,F,Q,ee,ne,!0):S(B,F,ee,ne),V=T(B,F,O+1,ee,ne),j(B,F,ee,ne)}var ge=V-O;te.slice(1).forEach(function(ye){B.applyStyles(B.userStyles),W(B,F,Q,ee,ye.columns,!0),T(B,F,O+1,ee,ye.columns,ge),j(B,F,ee,ye.columns)}),O=V};O<F.body.length-1;)q()}function S(B,F,Q,ee){var te=F.settings;B.applyStyles(B.userStyles),(te.showHead==="firstPage"||te.showHead==="everyPage")&&F.head.forEach(function(re){return R(B,F,re,Q,ee)})}function k(B,F,Q,ee,te){B.applyStyles(B.userStyles),F.body.forEach(function(re,O){var X=O===F.body.length-1;L(B,F,re,X,Q,ee,te)})}function T(B,F,Q,ee,te,re){B.applyStyles(B.userStyles),re=re??F.body.length;var O=Math.min(Q+re,F.body.length),X=-1;return F.body.slice(Q,O).forEach(function(q,V){var ne=Q+V===F.body.length-1,ge=H(B,F,ne,ee);q.canEntireRowFit(ge,te)&&(R(B,F,q,ee,te),X=Q+V)}),X}function j(B,F,Q,ee){var te=F.settings;B.applyStyles(B.userStyles),(te.showFoot==="lastPage"||te.showFoot==="everyPage")&&F.foot.forEach(function(re){return R(B,F,re,Q,ee)})}function P(B,F,Q){var ee=Q.getLineHeight(B.styles.fontSize),te=B.padding("vertical"),re=Math.floor((F-te)/ee);return Math.max(0,re)}function C(B,F,Q,ee){var te={};B.spansMultiplePages=!0,B.height=0;for(var re=0,O=0,X=Q.columns;O<X.length;O++){var q=X[O],V=B.cells[q.index];if(V){Array.isArray(V.text)||(V.text=[V.text]);var ne=new d.Cell(V.raw,V.styles,V.section);ne=(0,p.assign)(ne,V),ne.text=[];var ge=P(V,F,ee);V.text.length>ge&&(ne.text=V.text.splice(ge,V.text.length));var ye=ee.scaleFactor(),xe=ee.getLineHeightFactor();V.contentHeight=V.getContentHeight(ye,xe),V.contentHeight>=F&&(V.contentHeight=F,ne.styles.minCellHeight-=F),V.contentHeight>B.height&&(B.height=V.contentHeight),ne.contentHeight=ne.getContentHeight(ye,xe),ne.contentHeight>re&&(re=ne.contentHeight),te[q.index]=ne}}var Se=new d.Row(B.raw,-1,B.section,te,!0);Se.height=re;for(var He=0,$e=Q.columns;He<$e.length;He++){var q=$e[He],ne=Se.cells[q.index];ne&&(ne.height=Se.height);var V=B.cells[q.index];V&&(V.height=B.height)}return Se}function N(B,F,Q,ee){var te=B.pageSize().height,re=ee.settings.margin,O=re.top+re.bottom,X=te-O;F.section==="body"&&(X-=ee.getHeadHeight(ee.columns)+ee.getFootHeight(ee.columns));var q=F.getMinimumRowHeight(ee.columns,B),V=q<Q;if(q>X)return console.error("Will not be able to print row ".concat(F.index," correctly since it's minimum height is larger than page height")),!0;if(!V)return!1;var ne=F.hasRowSpan(ee.columns),ge=F.getMaxCellHeight(ee.columns)>X;return ge?(ne&&console.error("The content of row ".concat(F.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(ne||ee.settings.rowPageBreak==="avoid")}function L(B,F,Q,ee,te,re,O){var X=H(B,F,ee,re);if(Q.canEntireRowFit(X,O))R(B,F,Q,re,O);else if(N(B,Q,X,F)){var q=C(Q,X,F,B);R(B,F,Q,re,O),W(B,F,te,re,O),L(B,F,q,ee,te,re,O)}else W(B,F,te,re,O),L(B,F,Q,ee,te,re,O)}function R(B,F,Q,ee,te){ee.x=F.settings.margin.left;for(var re=0,O=te;re<O.length;re++){var X=O[re],q=Q.cells[X.index];if(!q){ee.x+=X.width;continue}B.applyStyles(q.styles),q.x=ee.x,q.y=ee.y;var V=F.callCellHooks(B,F.hooks.willDrawCell,q,Q,X,ee);if(V===!1){ee.x+=X.width;continue}D(B,q,ee);var ne=q.getTextPos();(0,y.default)(q.text,ne.x,ne.y,{halign:q.styles.halign,valign:q.styles.valign,maxWidth:Math.ceil(q.width-q.padding("left")-q.padding("right"))},B.getDocument()),F.callCellHooks(B,F.hooks.didDrawCell,q,Q,X,ee),ee.x+=X.width}ee.y+=Q.height}function D(B,F,Q){var ee=F.styles;if(B.getDocument().setFillColor(B.getDocument().getFillColor()),typeof ee.lineWidth=="number"){var te=(0,u.getFillStyle)(ee.lineWidth,ee.fillColor);te&&B.rect(F.x,Q.y,F.width,F.height,te)}else typeof ee.lineWidth=="object"&&(ee.fillColor&&B.rect(F.x,Q.y,F.width,F.height,"F"),M(B,F,Q,ee.lineWidth))}function M(B,F,Q,ee){var te,re,O,X;ee.top&&(te=Q.x,re=Q.y,O=Q.x+F.width,X=Q.y,ee.right&&(O+=.5*ee.right),ee.left&&(te-=.5*ee.left),q(ee.top,te,re,O,X)),ee.bottom&&(te=Q.x,re=Q.y+F.height,O=Q.x+F.width,X=Q.y+F.height,ee.right&&(O+=.5*ee.right),ee.left&&(te-=.5*ee.left),q(ee.bottom,te,re,O,X)),ee.left&&(te=Q.x,re=Q.y,O=Q.x,X=Q.y+F.height,ee.top&&(re-=.5*ee.top),ee.bottom&&(X+=.5*ee.bottom),q(ee.left,te,re,O,X)),ee.right&&(te=Q.x+F.width,re=Q.y,O=Q.x+F.width,X=Q.y+F.height,ee.top&&(re-=.5*ee.top),ee.bottom&&(X+=.5*ee.bottom),q(ee.right,te,re,O,X));function q(V,ne,ge,ye,xe){B.getDocument().setLineWidth(V),B.getDocument().line(ne,ge,ye,xe,"S")}}function H(B,F,Q,ee){var te=F.settings.margin.bottom,re=F.settings.showFoot;return(re==="everyPage"||re==="lastPage"&&Q)&&(te+=F.getFootHeight(F.columns)),B.pageSize().height-ee.y-te}function W(B,F,Q,ee,te,re){te===void 0&&(te=[]),re===void 0&&(re=!1),B.applyStyles(B.userStyles),F.settings.showFoot==="everyPage"&&!re&&F.foot.forEach(function(X){return R(B,F,X,ee,te)}),F.callEndPageHooks(B,ee);var O=F.settings.margin;(0,u.addTableBorder)(B,F,Q,ee),Z(B),F.pageNumber++,F.pageCount++,ee.x=O.left,ee.y=O.top,Q.y=O.top,F.callWillDrawPageHooks(B,ee),F.settings.showHead==="everyPage"&&(F.head.forEach(function(X){return R(B,F,X,ee,te)}),B.applyStyles(B.userStyles))}l.addPage=W;function Z(B){var F=B.pageNumber();B.setPage(F+1);var Q=B.pageNumber();return Q===F?(B.addPage(),!0):!1}},224:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.calculateAllColumnsCanFitInPage=void 0;var u=c(420);function d(p,y,x){var v;x===void 0&&(x={});var b=(0,u.getPageAvailableWidth)(p,y),S=new Map,k=[],T=[],j=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?j=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(j=[y.settings.horizontalPageBreakRepeat]),j.forEach(function(L){var R=y.columns.find(function(D){return D.dataKey===L||D.index===L});R&&!S.has(R.index)&&(S.set(R.index,!0),k.push(R.index),T.push(y.columns[R.index]),b-=R.wrappedWidth)});for(var P=!0,C=(v=x==null?void 0:x.start)!==null&&v!==void 0?v:0;C<y.columns.length;){if(S.has(C)){C++;continue}var N=y.columns[C].wrappedWidth;if(P||b>=N)P=!1,k.push(C),T.push(y.columns[C]),b-=N;else break;C++}return{colIndexes:k,columns:T,lastIndex:C-1}}function h(p,y){for(var x=[],v=0;v<y.columns.length;v++){var b=d(p,y,{start:v});b.columns.length&&(x.push(b),v=b.lastIndex)}return x}l.calculateAllColumnsCanFitInPage=h},324:function(a,l,c){Object.defineProperty(l,"__esModule",{value:!0}),l.ellipsize=l.resizeColumns=l.calculateWidths=void 0;var u=c(420);function d(k,T){h(k,T);var j=[],P=0;T.columns.forEach(function(N){var L=N.getMaxCustomCellWidth(T);L?N.width=L:(N.width=N.wrappedWidth,j.push(N)),P+=N.width});var C=T.getWidth(k.pageSize().width)-P;C&&(C=p(j,C,function(N){return Math.max(N.minReadableWidth,N.minWidth)})),C&&(C=p(j,C,function(N){return N.minWidth})),C=Math.abs(C),!T.settings.horizontalPageBreak&&C>.1/k.scaleFactor()&&(C=C<1?C:Math.round(C),console.warn("Of the table content, ".concat(C," units width could not fit page"))),x(T),v(T,k),y(T)}l.calculateWidths=d;function h(k,T){var j=k.scaleFactor(),P=T.settings.horizontalPageBreak,C=(0,u.getPageAvailableWidth)(k,T);T.allRows().forEach(function(N){for(var L=0,R=T.columns;L<R.length;L++){var D=R[L],M=N.cells[D.index];if(M){var H=T.hooks.didParseCell;T.callCellHooks(k,H,M,N,D,null);var W=M.padding("horizontal");M.contentWidth=(0,u.getStringWidth)(M.text,M.styles,k)+W;var Z=(0,u.getStringWidth)(M.text.join(" ").split(/[^\S\u00A0]+/),M.styles,k);if(M.minReadableWidth=Z+M.padding("horizontal"),typeof M.styles.cellWidth=="number")M.minWidth=M.styles.cellWidth,M.wrappedWidth=M.styles.cellWidth;else if(M.styles.cellWidth==="wrap"||P===!0)M.contentWidth>C?(M.minWidth=C,M.wrappedWidth=C):(M.minWidth=M.contentWidth,M.wrappedWidth=M.contentWidth);else{var B=10/j;M.minWidth=M.styles.minCellWidth||B,M.wrappedWidth=M.contentWidth,M.minWidth>M.wrappedWidth&&(M.wrappedWidth=M.minWidth)}}}}),T.allRows().forEach(function(N){for(var L=0,R=T.columns;L<R.length;L++){var D=R[L],M=N.cells[D.index];if(M&&M.colSpan===1)D.wrappedWidth=Math.max(D.wrappedWidth,M.wrappedWidth),D.minWidth=Math.max(D.minWidth,M.minWidth),D.minReadableWidth=Math.max(D.minReadableWidth,M.minReadableWidth);else{var H=T.styles.columnStyles[D.dataKey]||T.styles.columnStyles[D.index]||{},W=H.cellWidth||H.minCellWidth;W&&typeof W=="number"&&(D.minWidth=W,D.wrappedWidth=W)}M&&(M.colSpan>1&&!D.minWidth&&(D.minWidth=M.minWidth),M.colSpan>1&&!D.wrappedWidth&&(D.wrappedWidth=M.minWidth))}})}function p(k,T,j){for(var P=T,C=k.reduce(function(B,F){return B+F.wrappedWidth},0),N=0;N<k.length;N++){var L=k[N],R=L.wrappedWidth/C,D=P*R,M=L.width+D,H=j(L),W=M<H?H:M;T-=W-L.width,L.width=W}if(T=Math.round(T*1e10)/1e10,T){var Z=k.filter(function(B){return T<0?B.width>j(B):!0});Z.length&&(T=p(Z,T,j))}return T}l.resizeColumns=p;function y(k){for(var T={},j=1,P=k.allRows(),C=0;C<P.length;C++)for(var N=P[C],L=0,R=k.columns;L<R.length;L++){var D=R[L],M=T[D.index];if(j>1)j--,delete N.cells[D.index];else if(M)M.cell.height+=N.height,j=M.cell.colSpan,delete N.cells[D.index],M.left--,M.left<=1&&delete T[D.index];else{var H=N.cells[D.index];if(!H)continue;if(H.height=N.height,H.rowSpan>1){var W=P.length-C,Z=H.rowSpan>W?W:H.rowSpan;T[D.index]={cell:H,left:Z,row:N}}}}}function x(k){for(var T=k.allRows(),j=0;j<T.length;j++)for(var P=T[j],C=null,N=0,L=0,R=0;R<k.columns.length;R++){var D=k.columns[R];if(L-=1,L>1&&k.columns[R+1])N+=D.width,delete P.cells[D.index];else if(C){var M=C;delete P.cells[D.index],C=null,M.width=D.width+N}else{var M=P.cells[D.index];if(!M)continue;if(L=M.colSpan,N=0,M.colSpan>1){C=M,N+=D.width;continue}M.width=D.width+N}}}function v(k,T){for(var j={count:0,height:0},P=0,C=k.allRows();P<C.length;P++){for(var N=C[P],L=0,R=k.columns;L<R.length;L++){var D=R[L],M=N.cells[D.index];if(M){T.applyStyles(M.styles,!0);var H=M.width-M.padding("horizontal");if(M.styles.overflow==="linebreak")M.text=T.splitTextToSize(M.text,H+1/T.scaleFactor(),{fontSize:M.styles.fontSize});else if(M.styles.overflow==="ellipsize")M.text=b(M.text,H,M.styles,T,"...");else if(M.styles.overflow==="hidden")M.text=b(M.text,H,M.styles,T,"");else if(typeof M.styles.overflow=="function"){var W=M.styles.overflow(M.text,H);typeof W=="string"?M.text=[W]:M.text=W}M.contentHeight=M.getContentHeight(T.scaleFactor(),T.getLineHeightFactor());var Z=M.contentHeight/M.rowSpan;M.rowSpan>1&&j.count*j.height<Z*M.rowSpan?j={height:Z,count:M.rowSpan}:j&&j.count>0&&j.height>Z&&(Z=j.height),Z>N.height&&(N.height=Z)}}j.count--}}function b(k,T,j,P,C){return k.map(function(N){return S(N,T,j,P,C)})}l.ellipsize=b;function S(k,T,j,P,C){var N=1e4*P.scaleFactor();if(T=Math.ceil(T*N)/N,T>=(0,u.getStringWidth)(k,j,P))return k;for(;T<(0,u.getStringWidth)(k+C,j,P)&&!(k.length<=1);)k=k.substring(0,k.length-1);return k.trim()+C}},964:function(a){if(typeof n>"u"){var l=new Error("Cannot find module 'undefined'");throw l.code="MODULE_NOT_FOUND",l}a.exports=n}},i={};function s(a){var l=i[a];if(l!==void 0)return l.exports;var c=i[a]={exports:{}};return r[a].call(c.exports,c,c.exports,s),c.exports}var o={};return function(){var a=o;Object.defineProperty(a,"__esModule",{value:!0}),a.Cell=a.Column=a.Row=a.Table=a.CellHookData=a.__drawTable=a.__createTable=a.applyPlugin=void 0;var l=s(340),c=s(776),u=s(664),d=s(972),h=s(260);Object.defineProperty(a,"Table",{enumerable:!0,get:function(){return h.Table}});var p=s(172);Object.defineProperty(a,"CellHookData",{enumerable:!0,get:function(){return p.CellHookData}});var y=s(260);Object.defineProperty(a,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(a,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(a,"Row",{enumerable:!0,get:function(){return y.Row}});function x(T){(0,l.default)(T)}a.applyPlugin=x;function v(T,j){var P=(0,c.parseInput)(T,j),C=(0,d.createTable)(T,P);(0,u.drawTable)(T,C)}function b(T,j){var P=(0,c.parseInput)(T,j);return(0,d.createTable)(T,P)}a.__createTable=b;function S(T,j){(0,u.drawTable)(T,j)}a.__drawTable=S;try{var k=s(964);k.jsPDF&&(k=k.jsPDF),x(k)}catch{}a.default=v}(),o}()})}(yx)),yx.exports}Roe();const Iy=({icon:t,title:e,value:n,description:r,trend:i,percentage:s})=>m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(t,{className:"w-6 h-6 text-gray-500 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium text-gray-500",children:e}),m.jsx("div",{className:"text-2xl font-semibold",children:n})]})]}),i&&s&&m.jsxs("div",{className:`flex items-center ${i==="up"?"text-green-500":"text-red-500"}`,children:[m.jsx(nS,{className:`w-4 h-4 ${i==="down"&&"rotate-180"}`}),m.jsxs("span",{className:"text-sm ml-1",children:[s,"%"]})]})]}),m.jsx("p",{className:"mt-2 text-sm text-gray-500",children:r})]}),Foe=()=>{const[t,e]=Y.useState("30days"),[n,r]=Y.useState({activeRentals:0,monthlyRentals:0,avgDuration:0,totalRevenue:0,popularEquipment:[],monthlyStats:[],equipmentCategories:[],overdueRentals:[],topCustomers:[]}),[i,s]=Y.useState(!0),[o,a]=Y.useState(null);Y.useEffect(()=>{l()},[t]);const l=async()=>{try{s(!0);const{data:d,error:h}=await ct.rpc("get_rental_statistics",{p_date_range:t});if(h)throw h;r({activeRentals:(d==null?void 0:d.activeRentals)||0,monthlyRentals:(d==null?void 0:d.monthlyRentals)||0,avgDuration:(d==null?void 0:d.avgDuration)||0,totalRevenue:(d==null?void 0:d.totalRevenue)||0,popularEquipment:(d==null?void 0:d.popularEquipment)||[],monthlyStats:(d==null?void 0:d.monthlyStats)||[],equipmentCategories:(d==null?void 0:d.equipmentCategories)||[],overdueRentals:(d==null?void 0:d.overdueRentals)||[],topCustomers:(d==null?void 0:d.topCustomers)||[]}),a(null)}catch(d){console.error("Error loading statistics:",d),a("Nie udao si zaadowa statystyk")}finally{s(!1)}},c=()=>{const d=new nn;d.setFontSize(20),d.text("Raport statystyk wypoycze",20,20),d.setFontSize(12),d.text(`Wygenerowano: ${new Date().toLocaleString("pl-PL")}`,20,30),d.setFontSize(14),d.text("Gwne wskaniki:",20,45);const h=[["Aktywne wypoyczenia",n.activeRentals.toString()],["Wypoyczenia w tym miesicu",n.monthlyRentals.toString()],["redni czas wypoyczenia",`${n.avgDuration.toFixed(1)} dni`],["Cakowity przychd",`${n.totalRevenue.toFixed(2)} z`]];d.autoTable({startY:50,head:[["Wskanik","Warto"]],body:h,theme:"grid"}),d.text("Najpopularniejszy sprzt:",20,d.lastAutoTable.finalY+15);const p=n.popularEquipment.map(y=>[y.name,y.count.toString(),`${y.percentage}%`]);d.autoTable({startY:d.lastAutoTable.finalY+20,head:[["Nazwa","Liczba wypoycze","Udzia"]],body:p,theme:"grid"}),d.save("raport-wypozyczen.pdf")},u=()=>{const d=[["Raport statystyk wypoycze"],["Wygenerowano:",new Date().toLocaleString("pl-PL")],[],["Gwne wskaniki"],["Aktywne wypoyczenia",n.activeRentals],["Wypoyczenia w tym miesicu",n.monthlyRentals],["redni czas wypoyczenia",n.avgDuration.toFixed(1)],["Cakowity przychd",n.totalRevenue.toFixed(2)],[],["Najpopularniejszy sprzt"],["Nazwa","Liczba wypoycze","Udzia %"],...n.popularEquipment.map(y=>[y.name,y.count,y.percentage])].map(y=>y.join(",")).join(`
`),h=new Blob([d],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a");p.href=URL.createObjectURL(h),p.download="raport-wypozyczen.csv",document.body.appendChild(p),p.click(),document.body.removeChild(p)};return i?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):o?m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg text-red-700 flex items-center",children:[m.jsx(hc,{className:"w-5 h-5 mr-2"}),m.jsx("p",{children:o})]}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Statystyki wypoycze"}),m.jsxs("select",{value:t,onChange:d=>e(d.target.value),className:"px-4 py-2 border rounded-lg",children:[m.jsx("option",{value:"7days",children:"Ostatnie 7 dni"}),m.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),m.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),m.jsx("option",{value:"12months",children:"Ostatnie 12 miesicy"})]})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:c,className:"flex items-center px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[m.jsx(Nz,{className:"w-5 h-5 mr-2"}),"PDF"]}),m.jsxs("button",{onClick:u,className:"flex items-center px-4 py-2 bg-white border rounded-lg hover:bg-gray-50",children:[m.jsx(Ch,{className:"w-5 h-5 mr-2"}),"CSV"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsx(Iy,{icon:Qs,title:"Aktywne wypoyczenia",value:n.activeRentals,description:"Obecnie wypoyczony sprzt",trend:"up",percentage:8}),m.jsx(Iy,{icon:kl,title:"Wypoyczenia w tym miesicu",value:n.monthlyRentals,description:"Wzrost o 15% m/m",trend:"up",percentage:15}),m.jsx(Iy,{icon:kl,title:"redni czas wypoyczenia",value:`${n.avgDuration.toFixed(1)} dni`,description:"rednia z ostatnich 30 dni"}),m.jsx(Iy,{icon:Uv,title:"Cakowity przychd",value:`${n.totalRevenue.toFixed(2)} z`,description:"W wybranym okresie",trend:"up",percentage:12})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Liczba wypoycze w czasie"}),m.jsx(Z6,{className:"w-5 h-5 text-gray-400"})]}),m.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Wykres bdzie dostpny wkrtce"})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Podzia na kategorie sprztu"}),m.jsx(Lz,{className:"w-5 h-5 text-gray-400"})]}),m.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"Wykres bdzie dostpny wkrtce"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Najpopularniejszy sprzt"}),m.jsx("div",{className:"space-y-4",children:n.popularEquipment.map((d,h)=>m.jsxs("div",{className:"flex items-center",children:[m.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[h+1,"."]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),m.jsxs("div",{className:"text-sm text-gray-500",children:[d.count," wypoycze"]})]}),m.jsx("div",{className:"w-24 h-2 bg-gray-100 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-green-500",style:{width:`${d.percentage}%`}})})]},h))})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Najczciej wypoyczajcy klienci"}),m.jsx("div",{className:"space-y-4",children:n.topCustomers.map((d,h)=>m.jsxs("div",{className:"flex items-center",children:[m.jsxs("div",{className:"w-8 text-sm text-gray-500",children:[h+1,"."]}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.name}),m.jsxs("div",{className:"text-sm text-gray-500",children:[d.rentals," wypoycze, ",d.totalValue," z"]})]})]},h))})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Przeterminowane wypoyczenia"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klient"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sprzt"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data zwrotu"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opnienie (dni)"})]})}),m.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.overdueRentals.map((d,h)=>m.jsxs("tr",{children:[m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:d.customerName}),m.jsx("div",{className:"text-sm text-gray-500",children:d.customerPhone})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-900",children:d.equipmentName})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm text-gray-900",children:new Date(d.returnDate).toLocaleDateString()})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-red-600",children:d.daysOverdue})})]},h)),n.overdueRentals.length===0&&m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500",children:"Brak przeterminowanych wypoycze"})})]})]})})]})]})},zoe=()=>{var ae,we;const{id:t}=zv(),e=ua(),n=El(),[r,i]=Y.useState(null),[s,o]=Y.useState(!0),[a,l]=Y.useState(null),[c,u]=Y.useState(""),[d,h]=Y.useState(!1),[p,y]=Y.useState([]),[x]=Y.useState([{id:"pending",label:"Oczekujce",color:"bg-yellow-100 text-yellow-800",icon:Q_},{id:"confirmed",label:"Potwierdzone",color:"bg-green-100 text-green-800",icon:ac},{id:"picked_up",label:"Odebrane",color:"bg-blue-100 text-blue-800",icon:Qs},{id:"completed",label:"Zakoczone",color:"bg-indigo-100 text-indigo-800",icon:ac},{id:"cancelled",label:"Anulowane",color:"bg-red-100 text-red-800",icon:Cx},{id:"archived",label:"Historyczne",color:"bg-gray-100 text-gray-800",icon:Az}]),[v,b]=Y.useState(!1),[S,k]=Y.useState({start_date:"",end_date:"",start_time:"",end_time:"",status:""}),[T,j]=Y.useState([]),[P,C]=Y.useState([]),[N,L]=Y.useState(""),[R,D]=Y.useState(!1),[M,H]=Y.useState([{id:"gas",name:"Butla gazowa",price:50,quantity:0},{id:"vacuum",name:"Odkurzacz do yrafy",price:25,quantity:0},{id:"powder",name:"Proszek piorcy Krcher 100g",price:10,quantity:0},{id:"scaffold",name:"RUSZTOWANIE",price:100,quantity:0},{id:"disc",name:"Tarcza do gipsu",price:15,quantity:0},{id:"drill152",name:"Wierto do wiertnicy 152 mm",price:40,quantity:0},{id:"drill202",name:"Wierto do wiertnicy 202 mm",price:80,quantity:0},{id:"drill82",name:"Wierto do wiertnicy 82, 112, 132 mm",price:30,quantity:0}]),[W,Z]=Y.useState(""),[B,F]=Y.useState([]),[Q,ee]=Y.useState(!1),[te,re]=Y.useState({first_name:"",last_name:"",email:"",phone:"",company_name:"",company_nip:"",street:"",city:"",postal_code:""}),[O,X]=Y.useState(!1),[q,V]=Y.useState(!1),[ne,ge]=Y.useState(""),[ye,xe]=Y.useState(()=>null),[Se,He]=Y.useState([]),[$e,Ge]=Y.useState(!1),[ze,Ne]=Y.useState({amount:0,payment_type:"advance",payment_method:"cash",notes:""}),[pe,qe]=Y.useState([]),[Ze,Me]=Y.useState(!1),[ke,We]=Y.useState({equipment_id:"",description:"",category:"mechanical",priority:"important",is_customer_fault:!1,images:[]}),[it,gt]=Y.useState(!1),[xt,Tt]=Y.useState(""),[Bt,qt]=Y.useState([]),[Rt,Dt]=Y.useState([]),[Mt,ot]=Y.useState({first_name:"",last_name:"",email:"",phone:"",company_name:"",company_nip:"",street:"",city:"",postal_code:""});Y.useEffect(()=>{if(gr(),_n(),r){const G=new Date(r.start_date),se=new Date(r.end_date);k({start_date:G.toISOString().split("T")[0],end_date:se.toISOString().split("T")[0],start_time:G.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1}),end_time:se.toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit",hour12:!1}),status:r.status}),gt(!!r.customer.company_name),re({id:r.customer.id,first_name:r.customer.first_name,last_name:r.customer.last_name,email:r.customer.email,phone:r.customer.phone,company_name:r.customer.company_name||"",company_nip:r.customer.company_nip||"",street:r.customer.street||"",city:r.customer.city||"",postal_code:r.customer.postal_code||"",notes:te.notes}),r.items&&C(r.items.map(fe=>({id:fe.id||`temp-${Math.random().toString(36).substring(2,9)}`,name:fe.equipment_name,quantity:fe.quantity,price:fe.price_per_day,deposit:fe.deposit})))}},[t]),Y.useEffect(()=>{if(r){const G={id:r.customer.id,first_name:r.customer.first_name,last_name:r.customer.last_name,email:r.customer.email,phone:r.customer.phone,company_name:r.customer.company_name||"",company_nip:r.customer.company_nip||"",street:r.customer.street||"",city:r.customer.city||"",postal_code:r.customer.postal_code||""};ot(G),re(G)}},[r]),Y.useEffect(()=>{(async()=>{try{const{data:se,error:fe}=await ct.from("equipment").select("*").order("name");if(fe)throw fe;se&&j(se)}catch(se){console.error("Error loading equipment:",se)}})()},[]),Y.useEffect(()=>{W.length>=3?(async()=>{try{const{data:se,error:fe}=await ct.from("customers").select("*").or(`first_name.ilike.%${W}%,last_name.ilike.%${W}%,email.ilike.%${W}%,phone.ilike.%${W}%`).limit(5);if(fe)throw fe;se&&(F(se),ee(!0))}catch(se){console.error("Error searching customers:",se)}})():ee(!1)},[W]);const Nn=G=>{L(G.target.value),D(!0)},Qt=G=>{const se=P.findIndex(fe=>fe.id===G.id);if(se>=0){const fe=[...P];fe[se].quantity+=1,C(fe)}else C([...P,{id:G.id,name:G.name,quantity:1,price:G.price,deposit:G.deposit}]);L(""),D(!1)},Wn=G=>{ge("Czy na pewno chcesz usun ten produkt z rezerwacji?"),xe(()=>()=>{C(P.filter(se=>se.id!==G)),V(!1)}),V(!0)},cn=(G,se)=>{const fe=P.find(Ae=>Ae.id===G);if(se<0&&fe&&fe.quantity+se<=0){ge("Czy na pewno chcesz usun ten produkt z rezerwacji?"),xe(()=>()=>{const Ae=P.map(De=>{if(De.id===G){const Ie=Math.max(0,De.quantity+se);return{...De,quantity:Ie}}return De}).filter(De=>De.quantity>0);C(Ae),V(!1)}),V(!0);return}const me=P.map(Ae=>{if(Ae.id===G){const De=Math.max(0,Ae.quantity+se);return{...Ae,quantity:De}}return Ae}).filter(Ae=>Ae.quantity>0);C(me)},bn=(G,se)=>{const fe=M.find(De=>De.id===G);if(se<0&&fe&&fe.quantity===1){ge("Czy na pewno chcesz usun t usug dodatkow?"),xe(()=>()=>{const De=M.map(Re=>{if(Re.id===G){const Ve=Math.max(0,Re.quantity+se);return{...Re,quantity:Ve}}return Re});H(De);const Ie=De.filter(Re=>Re.quantity>0).map(Re=>({id:Re.id,name:Re.name,quantity:Re.quantity,price:Re.price}));Dt(Ie),V(!1)}),V(!0);return}const me=M.map(De=>{if(De.id===G){const Ie=Math.max(0,De.quantity+se);return{...De,quantity:Ie}}return De});H(me);const Ae=me.filter(De=>De.quantity>0).map(De=>({id:De.id,name:De.name,quantity:De.quantity,price:De.price}));Dt(Ae)},$r=G=>{re({id:G.id,first_name:G.first_name,last_name:G.last_name,email:G.email,phone:G.phone,company_name:G.company_name||"",company_nip:G.company_nip||"",street:G.street||"",city:G.city||"",postal_code:G.postal_code||"",notes:te.notes}),Z(`${G.first_name} ${G.last_name}`),ee(!1)},dn=async()=>{if(!te.first_name||!te.last_name){alert("Prosz poda imi i nazwisko klienta");return}try{const G=new Date().getFullYear(),{data:se,error:fe}=await ct.from("customers").select("id").like("id",`${G}%`).order("id",{ascending:!1}).limit(1);if(fe)throw fe;let me;if(se&&se.length>0){const Ie=parseInt(se[0].id.substring(4));me=`${G}${Ie+1}`}else me=`${G}1`;const{data:Ae,error:De}=await ct.from("customers").insert({id:me,first_name:te.first_name,last_name:te.last_name,email:te.email,phone:te.phone,company_name:te.company_name||null,company_nip:te.company_nip||null,street:te.street||null,city:te.city||null,postal_code:te.postal_code||null}).select().single();if(De)throw De;Ae&&(Z(`${Ae.first_name} ${Ae.last_name}`),X(!1))}catch(G){console.error("Error adding customer:",G),alert("Wystpi bd podczas dodawania klienta")}},Qr=()=>{const G=P.reduce((fe,me)=>fe+me.price*me.quantity,0),se=M.reduce((fe,me)=>fe+me.price*me.quantity,0);return G+se},_n=async()=>{try{const{data:G,error:se}=await ct.from("reservation_notes").select("*").eq("reservation_id",t).order("created_at",{ascending:!1});if(se)throw se;y(G||[])}catch(G){console.error("Error loading comments:",G),l("Nie udao si zaadowa komentarzy")}},gr=async()=>{try{const{data:G,error:se}=await ct.from("admin_reservations_view").select("*").eq("id",t).single();if(!se&&G){i(G);const Ae={id:G.customer.id,first_name:G.customer.first_name,last_name:G.customer.last_name,email:G.customer.email,phone:G.customer.phone,company_name:G.customer.company_name||"",company_nip:G.customer.company_nip||"",street:G.customer.street||"",city:G.customer.city||"",postal_code:G.customer.postal_code||""};re(Ae),ot(Ae),o(!1);return}console.error("Error loading from view, trying direct tables:",se);const{data:fe,error:me}=await ct.from("reservations").select(`
          id,
          status,
          start_date,
          end_date,
          start_time,
          end_time,
          total_price,
          customers (
            id,
            first_name,
            last_name,
            email,
            phone,
            company_name,
            company_nip,
            street,
            city,
            postal_code
          ),
          reservation_items (
            id,
            equipment_id,
            equipment:equipment (
              id,
              name,
              price_per_day,
              deposit
            ),
            quantity
          )
        `).eq("id",t).single();if(me){console.error("Error loading reservation details:",me),l("Nie udao si zaadowa szczegw rezerwacji"),o(!1);return}if(fe){const Ae=fe,De=Ae.customers||{},Ie={id:Ae.id,status:Ae.status||"pending",start_date:Ae.start_date,end_date:Ae.end_date,total_price:Ae.total_price||0,customer:{id:De.id||"",first_name:De.first_name||"",last_name:De.last_name||"",email:De.email||"",phone:De.phone||"",company_name:De.company_name||"",company_nip:De.company_nip||"",street:De.street||"",city:De.city||"",postal_code:De.postal_code||""},items:Array.isArray(Ae.reservation_items)?Ae.reservation_items.map(Ve=>{var lt,vt,Ct;return{id:Ve.id,equipment_name:((lt=Ve.equipment)==null?void 0:lt.name)||"Nieznany sprzt",quantity:Ve.quantity||1,price_per_day:((vt=Ve.equipment)==null?void 0:vt.price_per_day)||0,deposit:((Ct=Ve.equipment)==null?void 0:Ct.deposit)||0}}):[],history:[],reservation:{id:Ae.id,start_date:Ae.start_date,end_date:Ae.end_date,start_time:Ae.start_time||"08:00",end_time:Ae.end_time||"18:00"}};i(Ie);const Re={id:De.id||"",first_name:De.first_name||"",last_name:De.last_name||"",email:De.email||"",phone:De.phone||"",company_name:De.company_name||"",company_nip:De.company_nip||"",street:De.street||"",city:De.city||"",postal_code:De.postal_code||""};re(Re),ot(Re)}}catch(G){console.error("Error loading customer details:",G),l("Nie udao si zaadowa szczegw klienta")}finally{o(!1)}},fn=async G=>{try{h(!0);const{error:se}=await ct.rpc("update_reservation_status",{p_reservation_id:t,p_new_status:G,p_comment:`Status zmieniony na: ${G}`});if(se)throw se;await gr()}catch(se){console.error("Error updating status:",se),l("Nie udao si zaktualizowa statusu")}finally{h(!1)}},Yt=async G=>{if(G.preventDefault(),!!c.trim())try{h(!0);const{error:se}=await ct.from("reservation_notes").insert({reservation_id:t,content:c});if(se)throw se;u(""),await _n()}catch(se){console.error("Error adding comment:",se),l("Nie udao si doda komentarza")}finally{h(!1)}},Ot=G=>{const fe=G.target.value.replace(/[^0-9]/g,"").slice(0,10);let me=fe;fe.length>3&&(me=fe.slice(0,3)+"-"+fe.slice(3)),fe.length>6&&(me=me.slice(0,7)+"-"+me.slice(7)),fe.length>8&&(me=me.slice(0,10)+"-"+me.slice(10)),re({...te,company_nip:me})},Jt=async()=>{if(!v)return;h(!0);let G=!1;try{if(te.id){console.log("Zapisywanie danych klienta:",te);const se={first_name:te.first_name,last_name:te.last_name,email:te.email,phone:te.phone,company_name:te.company_name||"",company_nip:te.company_nip?te.company_nip.replace(/[^0-9]/g,""):"",street:te.street||"",city:te.city||"",postal_code:te.postal_code||""};if(se.company_nip&&se.company_nip.length!==10){alert("Nieprawidowy format NIP. NIP powinien skada si z 10 cyfr."),h(!1);return}const{error:fe}=await ct.from("customers").update({...se,company_name:it?se.company_name:null,company_nip:it?se.company_nip:null,street:it?se.street:null,city:it?se.city:null,postal_code:it?se.postal_code:null}).eq("id",te.id);if(fe)console.error("Bd aktualizacji klienta:",fe),fe.code==="23514"&&fe.message.includes("valid_nip_format")?alert("Nieprawidowy format NIP. NIP powinien skada si z 10 cyfr."):alert("Wystpi bd podczas aktualizacji danych klienta"),G=!0;else{console.log("Dane klienta zostay zaktualizowane pomylnie");const me=se.company_nip?`${se.company_nip.slice(0,3)}-${se.company_nip.slice(3,6)}-${se.company_nip.slice(6,8)}-${se.company_nip.slice(8,10)}`:"",Ae={...te,company_name:it?se.company_name:"",company_nip:it?me:"",street:it?se.street:"",city:it?se.city:"",postal_code:it?se.postal_code:""};re(Ae),ot(Ae),r&&i({...r,customer:{...r.customer,...Ae}})}}G||(b(!1),alert("Dane zostay pomylnie zapisane"))}catch(se){console.error("Nieoczekiwany bd:",se),alert("Wystpi nieoczekiwany bd podczas zapisywania danych"),G=!0}finally{h(!1)}};Y.useEffect(()=>{t&&Yn()},[t]),Y.useEffect(()=>{t&&Cn()},[t]),Y.useEffect(()=>{t&&hn()},[t]);const Yn=async()=>{try{const{data:G,error:se}=await ct.from("payments").select("*").eq("reservation_id",t).order("created_at",{ascending:!1});if(se){console.error("Error loading payments:",se),He([]);return}G&&He(G)}catch(G){console.error("Error loading payments:",G),He([])}},hn=async()=>{try{const{data:G,error:se}=await ct.from("reservation_additional_services").select("id").limit(1);if(se){console.error("Tabela usug dodatkowych nie istnieje:",se),H([{id:"gas",name:"Butla gazowa",price:50,quantity:0},{id:"vacuum",name:"Odkurzacz do yrafy",price:25,quantity:0},{id:"powder",name:"Proszek piorcy Krcher 100g",price:10,quantity:0},{id:"scaffold",name:"RUSZTOWANIE",price:100,quantity:0},{id:"disc",name:"Tarcza do gipsu",price:15,quantity:0},{id:"drill152",name:"Wierto do wiertnicy 152 mm",price:40,quantity:0},{id:"drill202",name:"Wierto do wiertnicy 202 mm",price:80,quantity:0},{id:"drill82",name:"Wierto do wiertnicy 82, 112, 132 mm",price:30,quantity:0}]);return}const{data:fe,error:me}=await ct.from("reservation_additional_services").select("*").eq("reservation_id",t);if(me){console.error("Error loading additional services:",me);return}if(fe&&fe.length>0){const Ae=M.map(De=>{const Ie=fe.find(Re=>Re.service_id===De.id);return Ie?{...De,quantity:Ie.quantity}:De});H(Ae)}}catch(G){console.error("Error loading additional services:",G)}},Cn=async()=>{try{const{data:G,error:se}=await ct.from("issues").select("*").eq("reservation_id",t).order("reported_at",{ascending:!1});if(se){console.error("Error loading issues:",se),qe([]);return}G&&qe(G)}catch(G){console.error("Error loading issues:",G),qe([])}},Lr=async()=>{if(ze.amount<=0){alert("Kwota patnoci musi by wiksza od zera");return}try{h(!0);const{data:G,error:se}=await ct.from("payments").insert({reservation_id:t,amount:ze.amount,payment_type:ze.payment_type,payment_method:ze.payment_method,status:"completed",notes:ze.notes,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select();if(se)throw se;Ne({amount:0,payment_type:"advance",payment_method:"cash",notes:""}),Ge(!1),await Yn(),await ct.from("reservation_history").insert({reservation_id:t,changed_at:new Date().toISOString(),previous_status:(r==null?void 0:r.status)||"",new_status:(r==null?void 0:r.status)||"",comment:`Dodano patno: ${ze.amount} z (${ze.payment_type})`,changed_by:"Administrator"})}catch(G){console.error("Error adding payment:",G),alert("Wystpi bd podczas dodawania patnoci")}finally{h(!1)}},Et=async()=>{if(!ke.equipment_id||!ke.description){alert("Prosz wypeni wszystkie wymagane pola");return}try{h(!0);const G=[];if(ke.images.length>0)for(const Ae of ke.images){const De=`${t}/${Date.now()}_${Ae.name}`,{data:Ie,error:Re}=await ct.storage.from("issue_images").upload(De,Ae);if(Re)throw Re;const{data:Ve}=await ct.storage.from("issue_images").getPublicUrl(De);Ve&&G.push(Ve.publicUrl)}const se=P.find(Ae=>Ae.id===ke.equipment_id),{data:fe,error:me}=await ct.from("issues").insert({reservation_id:t,equipment_id:ke.equipment_id,equipment_name:(se==null?void 0:se.name)||"Nieznany sprzt",description:ke.description,category:ke.category,priority:ke.priority,status:"reported",reported_at:new Date().toISOString(),is_customer_fault:ke.is_customer_fault,images:G}).select();if(me)throw me;We({equipment_id:"",description:"",category:"mechanical",priority:"important",is_customer_fault:!1,images:[]}),Me(!1),await Cn(),await ct.from("reservation_history").insert({reservation_id:t,changed_at:new Date().toISOString(),previous_status:(r==null?void 0:r.status)||"",new_status:(r==null?void 0:r.status)||"",comment:`Zgoszono usterk: ${ke.description}`,changed_by:"Administrator"})}catch(G){console.error("Error adding issue:",G),alert("Wystpi bd podczas zgaszania usterki")}finally{h(!1)}},lr=async(G,se)=>{try{h(!0);const{error:fe}=await ct.from("issues").update({status:se,...se==="resolved"?{resolved_at:new Date().toISOString()}:{}}).eq("id",G);if(fe)throw fe;await Cn()}catch(fe){console.error("Error updating issue status:",fe),alert("Wystpi bd podczas aktualizacji statusu usterki")}finally{h(!1)}},Bn=G=>{if(G.target.files&&G.target.files.length>0){const se=Array.from(G.target.files);We(fe=>({...fe,images:[...fe.images,...se]}))}},nr=G=>{We(se=>({...se,images:se.images.filter((fe,me)=>me!==G)}))},jn=(G,se=!0)=>{const fe=new Date(G);return J9(fe,se).map(me=>m.jsx("option",{value:me,children:me},me))},On=()=>{re(Mt),b(!1)};return Y.useEffect(()=>{const G=se=>{const fe=document.getElementById("product_search"),me=document.querySelector(".equipment-list");fe&&me&&!fe.contains(se.target)&&!me.contains(se.target)&&D(!1)};return document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}},[]),s?m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):r?m.jsxs("div",{className:"p-6",children:[m.jsxs("button",{onClick:()=>{var G;(G=n.state)!=null&&G.from?e(n.state.from):e(-1)},className:"mb-6 flex items-center text-gray-600 hover:text-gray-900",children:[m.jsx(Sx,{className:"w-5 h-5 mr-2"}),"Powrt do listy"]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Status rezerwacji"}),m.jsx("div",{className:"flex items-center space-x-2",children:m.jsx(J6,{className:"w-6 h-6 text-gray-400"})})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(G=>{const se=G.icon,fe=(r==null?void 0:r.status)===G.id;return m.jsxs("button",{onClick:()=>fn(G.id),disabled:d||(r==null?void 0:r.status)===G.id,className:`inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${fe?`${G.color} ring-2 ring-offset-2 ring-${G.color.split(" ")[0]}`:`hover:${G.color} bg-white border border-gray-200`}`,children:[m.jsx(se,{className:`w-4 h-4 mr-1.5 ${fe?"":"text-gray-400"}`}),G.label]},G.id)})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[m.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dane klienta"}),m.jsx(wg,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Imi i nazwisko"}),m.jsxs("p",{className:"font-medium",children:[r.customer.first_name," ",r.customer.last_name]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),m.jsx("p",{className:"font-medium",children:r.customer.email})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"}),m.jsx("p",{className:"font-medium",children:r.customer.phone})]}),r.customer.street&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Adres"}),m.jsx("p",{className:"font-medium",children:r.customer.street})]}),r.customer.city&&r.customer.postal_code&&m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Miasto i kod pocztowy"}),m.jsxs("p",{className:"font-medium",children:[r.customer.postal_code," ",r.customer.city]})]}),r.customer.company_name&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"pt-4 border-t",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Nazwa firmy"}),m.jsx("p",{className:"font-medium",children:r.customer.company_name})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"NIP"}),m.jsx("p",{className:"font-medium",children:r.customer.company_nip})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Szczegy rezerwacji"}),m.jsx(kl,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),m.jsx("div",{className:"mt-2",children:((ae=x.find(G=>G.id===r.status))==null?void 0:ae.label)||r.status})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Data rozpoczcia"}),m.jsx("p",{className:"font-medium",children:new Date(r.start_date).toLocaleDateString("pl-PL")}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),m.jsx("p",{className:"font-medium",children:new Date(r.start_date).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Data zakoczenia"}),m.jsx("p",{className:"font-medium",children:new Date(r.end_date).toLocaleDateString("pl-PL")}),m.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Godzina"}),m.jsx("p",{className:"font-medium",children:new Date(r.end_date).toLocaleTimeString("pl-PL",{hour:"2-digit",minute:"2-digit"})})]}),m.jsxs("div",{className:"pt-4 border-t",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Cakowita warto"}),m.jsxs("p",{className:"text-xl font-bold text-solrent-orange",children:[r.total_price," z"]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Zarezerwowany sprzt"}),m.jsx(Qs,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:(we=r.items)==null?void 0:we.map((G,se)=>m.jsxs("div",{className:"flex justify-between items-start pb-4 border-b last:border-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:G.equipment_name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Ilo: ",G.quantity]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"font-medium",children:[G.price_per_day," z/dzie"]}),G.deposit>0&&m.jsxs("p",{className:"text-sm text-orange-600",children:["Kaucja: ",G.deposit," z"]})]})]},se))})]}),r.additional_services&&r.additional_services.length>0&&m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usugi dodatkowe"}),m.jsx(Qs,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:r.additional_services.map((G,se)=>m.jsxs("div",{className:"flex justify-between items-start pb-4 border-b last:border-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:G.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Ilo: ",G.quantity]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"font-medium",children:[G.price," z"]})})]},se))})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Komentarze"}),m.jsx(x5,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:p.length>0?p.map((G,se)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsx("p",{className:"text-sm text-gray-500",children:new Date(G.created_at).toLocaleString("pl-PL")}),m.jsx("p",{className:"mt-1",children:G.content})]},se)):m.jsx("p",{className:"text-gray-500 text-center",children:"Brak komentarzy"})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Historia patnoci"}),m.jsx(kz,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:Se.length>0?Se.map((G,se)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium",children:[G.amount," z",m.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full ${G.status==="completed"?"bg-green-100 text-green-800":G.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:G.status==="completed"?"Zrealizowana":G.status==="pending"?"Oczekujca":"Anulowana"})]}),m.jsx("p",{className:"text-sm text-gray-500",children:new Date(G.created_at).toLocaleDateString("pl-PL")}),m.jsxs("p",{className:"text-sm mt-1",children:["Typ: ",G.payment_type==="deposit"?"Kaucja":G.payment_type==="advance"?"Zaliczka":G.payment_type==="full_payment"?"Pena patno":"Dopata"]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("p",{className:"text-sm",children:["Metoda: ",G.payment_method==="cash"?"Gotwka":G.payment_method==="transfer"?"Przelew":G.payment_method==="online"?"Online":"BLIK"]})})]}),G.notes&&m.jsx("p",{className:"mt-2 text-sm text-gray-600 border-t pt-2",children:G.notes})]},G.id)):m.jsx("p",{className:"text-gray-500 text-center",children:"Brak historii patnoci"})}),m.jsx("button",{onClick:()=>Ge(!0),className:"mt-4 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Dodaj patno"})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Usterki i serwis"}),m.jsx(Uz,{className:"w-6 h-6 text-gray-400"})]}),m.jsx("div",{className:"space-y-4",children:pe.length>0?pe.map(G=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:G.equipment_name}),m.jsx("p",{className:"text-sm text-gray-500",children:new Date(G.reported_at).toLocaleDateString("pl-PL")}),m.jsx("p",{className:"mt-1",children:G.description})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${G.status==="resolved"?"bg-green-100 text-green-800":G.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:G.status==="resolved"?"Rozwizane":G.status==="in_progress"?"W trakcie":"Zgoszone"}),m.jsxs("p",{className:"text-sm mt-1",children:["Kategoria: ",G.category==="mechanical"?"Mechaniczna":G.category==="electrical"?"Elektryczna":G.category==="cosmetic"?"Kosmetyczna":"Inna"]}),m.jsxs("p",{className:"text-sm",children:["Priorytet: ",G.priority==="critical"?"Krytyczny":G.priority==="important"?"Wany":"Niski"]})]})]}),G.images&&G.images.length>0&&m.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:G.images.map((se,fe)=>m.jsx("a",{href:se,target:"_blank",rel:"noopener noreferrer",className:"block w-16 h-16 rounded overflow-hidden",children:m.jsx("img",{src:se,alt:`Zdjcie usterki ${fe+1}`,className:"w-full h-full object-cover"})},fe))}),G.status!=="resolved"&&m.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[G.status==="reported"&&m.jsx("button",{onClick:()=>lr(G.id,"in_progress"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-lg text-sm hover:bg-blue-200",children:"Rozpocznij napraw"}),m.jsx("button",{onClick:()=>lr(G.id,"resolved"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-lg text-sm hover:bg-green-200",children:"Oznacz jako naprawione"})]})]},G.id)):m.jsx("p",{className:"text-gray-500 text-center",children:"Brak zgoszonych usterek"})}),m.jsx("button",{onClick:()=>Me(!0),className:"mt-4 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Zgo usterk"})]})]}),m.jsxs("div",{className:"lg:col-span-8 space-y-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Szczegy"}),m.jsx("h2",{className:"text-xl font-semibold text-gray-900 ml-4 pl-4 border-l",children:"Dane klienta"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>v?On():b(!0),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${v?"bg-gray-200 text-gray-700":"bg-solrent-orange text-white hover:bg-orange-700"}`,children:v?"Anuluj edycj":"Edytuj dane"}),v&&m.jsx("button",{onClick:Jt,disabled:d,className:"px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zapisywanie...":"Zapisz zmiany"}),m.jsx(Qs,{className:"w-6 h-6 text-gray-400"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dane podstawowe"}),m.jsxs("button",{onClick:()=>X(!0),className:"text-sm text-solrent-orange hover:text-orange-700 flex items-center",children:[m.jsx(rS,{className:"w-4 h-4 mr-1"}),"Dodaj nowego klienta"]})]}),m.jsxs("div",{className:"space-y-4",children:[v&&m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"customer_search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Wyszukaj klienta"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",id:"customer_search",placeholder:"Wyszukaj klienta...",value:W,onChange:G=>Z(G.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"}),Q&&B.length>0&&m.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:B.map(G=>m.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>$r(G),children:m.jsxs("div",{children:[m.jsxs("span",{className:"font-medium",children:[G.first_name," ",G.last_name]}),m.jsx("p",{className:"text-sm text-gray-600",children:G.email})]})},G.id))})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imi"}),v?m.jsx("input",{type:"text",id:"first_name",value:te.first_name,onChange:G=>re({...te,first_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d}):m.jsx("p",{className:"py-2",children:te.first_name})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko"}),v?m.jsx("input",{type:"text",id:"last_name",value:te.last_name,onChange:G=>re({...te,last_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d}):m.jsx("p",{className:"py-2",children:te.last_name})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"email",id:"customer_email",value:te.email,onChange:G=>re({...te,email:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),m.jsx("input",{type:"tel",id:"customer_phone",value:te.phone,onChange:G=>re({...te,phone:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsx("div",{children:m.jsxs("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:it,onChange:G=>gt(G.target.checked),className:"rounded text-solrent-orange focus:ring-solrent-orange",disabled:!v}),m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Klient firmowy"})]})})]}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dodatkowe dane klienta"}),m.jsx("div",{className:"grid grid-cols-1 gap-3",children:it?m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_company_name",className:"block text-xs text-gray-500 mb-1",children:"Nazwa firmy"}),m.jsx("input",{type:"text",id:"customer_company_name",value:te.company_name||"",onChange:G=>re({...te,company_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_company_nip",className:"block text-xs text-gray-500 mb-1",children:"NIP"}),m.jsx("input",{type:"text",id:"customer_company_nip",value:te.company_nip||"",onChange:Ot,placeholder:"XXX-XXX-XX-XX",maxLength:13,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_street",className:"block text-xs text-gray-500 mb-1",children:"Ulica i numer"}),m.jsx("input",{type:"text",id:"customer_street",value:te.street||"",onChange:G=>re({...te,street:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_postal_code",className:"block text-xs text-gray-500 mb-1",children:"Kod pocztowy"}),m.jsx("input",{type:"text",id:"customer_postal_code",value:te.postal_code||"",onChange:G=>re({...te,postal_code:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"customer_city",className:"block text-xs text-gray-500 mb-1",children:"Miasto"}),m.jsx("input",{type:"text",id:"customer_city",value:te.city||"",onChange:G=>re({...te,city:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:!v})]})]})]}):null})]})]}),m.jsxs("div",{children:[m.jsx("div",{className:"mb-2",children:m.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Termin rezerwacji"})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[m.jsx(QN,{className:"w-4 h-4"})," Data rozpoczcia"]}),m.jsx("input",{type:"date",id:"start_date",value:S.start_date,onChange:G=>k({...S,start_date:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"start_time",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[m.jsx(e3,{className:"w-4 h-4"})," Godzina rozpoczcia"]}),m.jsx("select",{id:"start_time",value:S.start_time,onChange:G=>k({...S,start_time:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v,children:jn(S.start_date,!0)})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[m.jsx(QN,{className:"w-4 h-4"})," Data zakoczenia"]}),m.jsx("input",{type:"date",id:"end_date",value:S.end_date,onChange:G=>k({...S,end_date:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"end_time",className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-1",children:[m.jsx(e3,{className:"w-4 h-4"})," Godzina zakoczenia"]}),m.jsx("select",{id:"end_time",value:S.end_time,onChange:G=>k({...S,end_time:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",disabled:d||!v,children:jn(S.end_date,!1)})]})]})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"product_search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Produkt"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",id:"product_search",placeholder:"Wyszukaj produkt...",value:N,onChange:Nn,onFocus:()=>D(!0),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"}),m.jsx(tS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),R&&m.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto equipment-list",children:[T.filter(G=>G.name.toLowerCase().includes(N.toLowerCase())).map(G=>m.jsx("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:()=>Qt(G),children:m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{children:G.name}),m.jsxs("span",{className:"text-solrent-orange font-medium",children:[G.price," z/dzie"]})]})},G.id)),T.filter(G=>G.name.toLowerCase().includes(N.toLowerCase())).length===0&&m.jsx("div",{className:"px-4 py-2 text-gray-500",children:"Brak wynikw"})]})]}),m.jsxs("div",{className:"mt-4 space-y-3",children:[P.map(G=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:G.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:[G.price," z/dzie"]})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("button",{onClick:()=>cn(G.id,-1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:m.jsx(Nx,{className:"w-4 h-4"})}),m.jsx("span",{className:"w-6 text-center",children:G.quantity}),m.jsx("button",{onClick:()=>cn(G.id,1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:m.jsx(_l,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>Wn(G.id),className:"p-1 rounded-full bg-red-100 text-red-600 hover:bg-red-200",children:m.jsx(Cx,{className:"w-4 h-4"})})]})]},G.id)),P.length===0&&m.jsx("p",{className:"text-gray-500 text-center py-2",children:"Brak wybranych produktw"})]})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Usugi dodatkowe"}),m.jsx("span",{className:"text-xs text-gray-500",children:'Moesz dodawa i usuwa usugi bez klikania "Edytuj dane"'})]}),m.jsx("div",{className:"space-y-3",children:M.map(G=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:G.name}),m.jsxs("p",{className:"text-sm text-gray-600",children:[G.price," z"]})]}),m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("button",{onClick:()=>bn(G.id,-1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",disabled:G.quantity===0,children:m.jsx(Nx,{className:"w-4 h-4"})}),m.jsx("span",{className:"w-6 text-center",children:G.quantity}),m.jsx("button",{onClick:()=>bn(G.id,1),className:"p-1 rounded-full bg-gray-200 hover:bg-gray-300",children:m.jsx(_l,{className:"w-4 h-4"})})]})]},G.id))})]}),m.jsxs("div",{className:"border-t pt-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-gray-700",children:"Suma brutto:"}),m.jsxs("span",{className:"font-bold text-solrent-orange",children:[Qr()," z"]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:Jt,disabled:d,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zapisywanie...":"Zapisz zmiany"})})]})]}),O&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dodaj nowego klienta"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_first_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Imi*"}),m.jsx("input",{type:"text",id:"new_first_name",value:te.first_name,onChange:G=>re({...te,first_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_last_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwisko*"}),m.jsx("input",{type:"text",id:"new_last_name",value:te.last_name,onChange:G=>re({...te,last_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"email",id:"new_email",value:te.email,onChange:G=>re({...te,email:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon"}),m.jsx("input",{type:"tel",id:"new_phone",value:te.phone,onChange:G=>re({...te,phone:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_street",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ulica i numer"}),m.jsx("input",{type:"text",id:"new_street",value:te.street,onChange:G=>re({...te,street:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_city",className:"block text-sm font-medium text-gray-700 mb-1",children:"Miasto"}),m.jsx("input",{type:"text",id:"new_city",value:te.city,onChange:G=>re({...te,city:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_postal_code",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kod pocztowy"}),m.jsx("input",{type:"text",id:"new_postal_code",value:te.postal_code,onChange:G=>re({...te,postal_code:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_company_name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nazwa firmy"}),m.jsx("input",{type:"text",id:"new_company_name",value:te.company_name,onChange:G=>re({...te,company_name:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"new_company_nip",className:"block text-sm font-medium text-gray-700 mb-1",children:"NIP"}),m.jsx("input",{type:"text",id:"new_company_nip",value:te.company_nip,onChange:G=>re({...te,company_nip:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange"})]})]}),m.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[m.jsx("button",{onClick:()=>X(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),m.jsx("button",{onClick:dn,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Dodaj klienta"})]})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dodaj komentarz"}),m.jsx(x5,{className:"w-6 h-6 text-gray-400"})]}),m.jsxs("form",{onSubmit:Yt,className:"mb-6",children:[m.jsx("textarea",{value:c,onChange:G=>u(G.target.value),placeholder:"Dodaj komentarz...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3,disabled:d}),m.jsx("button",{type:"submit",disabled:d||!c.trim(),className:"mt-2 w-full py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Dodaj komentarz"})]})]})]})]}),$e&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Dodaj patno"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"payment_amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kwota*"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",id:"payment_amount",value:ze.amount,onChange:G=>Ne({...ze,amount:parseFloat(G.target.value)}),className:"w-full px-3 py-2 pl-10 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",min:"0",step:"0.01",required:!0}),m.jsx(Q6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"payment_type",className:"block text-sm font-medium text-gray-700 mb-1",children:"Typ patnoci*"}),m.jsxs("select",{id:"payment_type",value:ze.payment_type,onChange:G=>Ne({...ze,payment_type:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[m.jsx("option",{value:"advance",children:"Zaliczka"}),m.jsx("option",{value:"deposit",children:"Kaucja"}),m.jsx("option",{value:"full_payment",children:"Pena patno"}),m.jsx("option",{value:"additional",children:"Dopata"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"payment_method",className:"block text-sm font-medium text-gray-700 mb-1",children:"Metoda patnoci*"}),m.jsxs("select",{id:"payment_method",value:ze.payment_method,onChange:G=>Ne({...ze,payment_method:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[m.jsx("option",{value:"cash",children:"Gotwka"}),m.jsx("option",{value:"transfer",children:"Przelew"}),m.jsx("option",{value:"online",children:"Patno online"}),m.jsx("option",{value:"blik",children:"BLIK"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"payment_notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notatki"}),m.jsx("textarea",{id:"payment_notes",value:ze.notes,onChange:G=>Ne({...ze,notes:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3})]})]}),m.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[m.jsx("button",{onClick:()=>Ge(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),m.jsx("button",{onClick:Lr,disabled:d||ze.amount<=0,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Dodawanie...":"Dodaj patno"})]})]})}),Ze&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-h-[90vh] overflow-y-auto",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Zgo usterk"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"issue_equipment",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sprzt*"}),m.jsxs("select",{id:"issue_equipment",value:ke.equipment_id,onChange:G=>We({...ke,equipment_id:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[m.jsx("option",{value:"",children:"Wybierz sprzt"}),P.map(G=>m.jsxs("option",{value:G.id,children:[G.name," (x",G.quantity,")"]},G.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"issue_category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategoria*"}),m.jsxs("select",{id:"issue_category",value:ke.category,onChange:G=>We({...ke,category:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[m.jsx("option",{value:"mechanical",children:"Mechaniczna"}),m.jsx("option",{value:"electrical",children:"Elektryczna"}),m.jsx("option",{value:"cosmetic",children:"Kosmetyczna"}),m.jsx("option",{value:"other",children:"Inna"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"issue_priority",className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorytet*"}),m.jsxs("select",{id:"issue_priority",value:ke.priority,onChange:G=>We({...ke,priority:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",required:!0,children:[m.jsx("option",{value:"critical",children:"Krytyczny"}),m.jsx("option",{value:"important",children:"Wany"}),m.jsx("option",{value:"minor",children:"Niski"})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"issue_description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Opis usterki*"}),m.jsx("textarea",{id:"issue_description",value:ke.description,onChange:G=>We({...ke,description:G.target.value}),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3,required:!0})]}),m.jsx("div",{children:m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:ke.is_customer_fault,onChange:G=>We({...ke,is_customer_fault:G.target.checked}),className:"rounded text-solrent-orange focus:ring-solrent-orange mr-2"}),m.jsx("span",{className:"text-sm text-gray-700",children:"Wina klienta"})]})}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zdjcia usterki"}),m.jsx("div",{className:"mt-1 flex items-center",children:m.jsxs("label",{className:"flex items-center justify-center w-full h-32 px-4 transition bg-white border-2 border-gray-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-gray-400 focus:outline-none",children:[m.jsxs("span",{className:"flex flex-col items-center space-y-2",children:[m.jsx(bz,{className:"w-6 h-6 text-gray-400"}),m.jsx("span",{className:"font-medium text-sm text-gray-600",children:"Kliknij, aby doda zdjcia"})]}),m.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Bn})]})}),ke.images.length>0&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Wybrane zdjcia (",ke.images.length,"):"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:ke.images.map((G,se)=>m.jsxs("div",{className:"relative w-16 h-16 rounded overflow-hidden",children:[m.jsx("img",{src:URL.createObjectURL(G),alt:`Zdjcie ${se+1}`,className:"w-full h-full object-cover"}),m.jsx("button",{type:"button",onClick:()=>nr(se),className:"absolute top-0 right-0 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center",children:""})]},se))})]})]})]}),m.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[m.jsx("button",{onClick:()=>Me(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),m.jsx("button",{onClick:Et,disabled:d||!ke.equipment_id||!ke.description,className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Zgaszanie...":"Zgo usterk"})]})]})}),q&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Potwierdzenie"}),m.jsx("p",{className:"mb-6",children:ne}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Anuluj"}),m.jsx("button",{onClick:()=>ye&&ye(),className:"px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700",children:"Potwierd"})]})]})})]}):m.jsxs("div",{className:"p-6",children:[m.jsxs("button",{onClick:()=>e(-1),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900",children:[m.jsx(Sx,{className:"w-5 h-5 mr-2"}),"Powrt do listy"]}),m.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center",children:[m.jsx(hc,{className:"w-5 h-5 mr-2"}),m.jsx("span",{children:"Nie znaleziono szczegw klienta"})]})]})},Boe=()=>{var q,V,ne,ge,ye,xe,Se,He,$e,Ge,ze,Ne,pe,qe,Ze,Me;const{id:t}=zv(),e=ua(),[n,r]=Y.useState(null),[i,s]=Y.useState(!0),[o,a]=Y.useState(null),[l,c]=Y.useState("overview"),[u,d]=Y.useState(!1),[h,p]=Y.useState(""),[y,x]=Y.useState("30days"),[v,b]=Y.useState(!1),[S,k]=Y.useState(null),[T,j]=Y.useState(!1),[P,C]=Y.useState(!1),[N,L]=Y.useState(""),[R,D]=Y.useState({}),[M,H]=Y.useState([]),[W,Z]=Y.useState(!1);Y.useEffect(()=>{Q()},[t]),Y.useEffect(()=>{n&&k({company_street:n.company_street||"",company_postal_code:n.company_postal_code||"",company_city:n.company_city||"",company_name:n.company_name||"",company_nip:n.company_nip||""})},[n]);const B=()=>{const ke={};return S!=null&&S.company_nip&&!S.company_nip.match(/^\d{3}-\d{3}-\d{2}-\d{2}$/)&&(ke.company_nip="Nieprawidowy format NIP (XXX-XXX-XX-XX)"),S!=null&&S.company_postal_code&&!S.company_postal_code.match(/^\d{2}-\d{3}$/)&&(ke.company_postal_code="Nieprawidowy format kodu pocztowego (XX-XXX)"),D(ke),Object.keys(ke).length===0},F=async()=>{if(S){if(!B()){a("Prosz poprawi bdy w formularzu");return}try{const{error:ke}=await ct.from("customers").update(S).eq("id",t);if(ke)throw ke;await Q(),b(!1),a(null)}catch(ke){console.error("Error updating customer:",ke),a("Nie udao si zapisa zmian")}}};Y.useEffect(()=>{n&&(k({first_name:n.first_name,last_name:n.last_name,email:n.email,phone:n.phone,status:n.status||"active",company_name:n.company_name,company_nip:n.company_nip,company_street:n.company_street,company_postal_code:n.company_postal_code,company_city:n.company_city}),Z(!!n.company_name))},[n]);const Q=async()=>{try{s(!0);const{data:ke,error:We}=await ct.from("customers").select(`
          *,
          profile:customer_profiles!left(*),
          activities:customer_activities(
            id,
            type:activity_type,
            description,
            created_at,
            amount,
            tags:customer_activity_tags(
              tag:customer_tags(*)
            )
          ),
          rentals:reservations(
            id,
            start_date,
            end_date,
            total_price,
            status,
            items:reservation_items(
              equipment:equipment(name),
              quantity
            )
          )
        `).eq("id",t).single();if(We)throw We;r(ke),a(null)}catch(ke){console.error("Error loading customer profile:",ke),a("Nie udao si zaadowa profilu klienta")}finally{s(!1)}},ee=async()=>{var ke;if(h.trim())try{const{error:We}=await ct.from("customer_activities").insert({customer_id:t,activity_type:"note",description:h,created_by:(ke=(await ct.auth.getUser()).data.user)==null?void 0:ke.id});if(We)throw We;p(""),Q()}catch(We){console.error("Error saving note:",We),a("Nie udao si zapisa notatki")}},te=()=>{n&&k({first_name:n.first_name,last_name:n.last_name,email:n.email,phone:n.phone,company_street:n.company_street||"",company_postal_code:n.company_postal_code||"",company_city:n.company_city||"",company_name:n.company_name||"",company_nip:n.company_nip||""}),b(!1),D({})},re=async()=>{try{const{error:ke}=await ct.from("customers").delete().eq("id",t);if(ke)throw ke;e("/admin/panel/customers",{replace:!0,state:{message:"Klient zosta pomylnie usunity"}})}catch(ke){console.error("Error deleting customer:",ke),a("Nie udao si usun klienta"),j(!1)}},O=async()=>{try{const{error:ke}=await ct.rpc("block_customer",{p_customer_id:t,p_reason:N});if(ke)throw ke;C(!1),L(""),Q()}catch(ke){console.error("Error blocking customer:",ke),a("Nie udao si zablokowa klienta")}},X=async()=>{try{const{error:ke}=await ct.rpc("unblock_customer",{p_customer_id:t});if(ke)throw ke;Q()}catch(ke){console.error("Error unblocking customer:",ke),a("Nie udao si odblokowa klienta")}};return i?m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-solrent-orange"})}):n?m.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:v?m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:(S==null?void 0:S.first_name)||"",onChange:ke=>k(We=>({...We,first_name:ke.target.value})),className:"px-3 py-1.5 border rounded-lg",placeholder:"Imi"}),m.jsx("input",{type:"text",value:(S==null?void 0:S.last_name)||"",onChange:ke=>k(We=>({...We,last_name:ke.target.value})),className:"px-3 py-1.5 border rounded-lg",placeholder:"Nazwisko"})]}):`${n.first_name} ${n.last_name}`}),m.jsxs("div",{className:"mt-1 flex items-center gap-4",children:[m.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${((q=n.profile)==null?void 0:q.lead_status)==="hot"?"bg-red-100 text-red-800":((V=n.profile)==null?void 0:V.lead_status)==="warm"?"bg-yellow-100 text-yellow-800":((ne=n.profile)==null?void 0:ne.lead_status)==="converted"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:((ge=n.profile)==null?void 0:ge.lead_status)==="hot"?"Gorcy lead":((ye=n.profile)==null?void 0:ye.lead_status)==="warm"?"Zainteresowany":((xe=n.profile)==null?void 0:xe.lead_status)==="converted"?"Klient":"Nowy"}),m.jsxs("span",{className:"text-sm text-gray-500",children:["Klient od: ",new Date(n.created_at).toLocaleDateString()]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{onClick:()=>v?te():b(!0),className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5",children:v?m.jsxs(m.Fragment,{children:[m.jsx(du,{className:"w-4 h-4"}),"Anuluj"]}):m.jsxs(m.Fragment,{children:[m.jsx(_0,{className:"w-4 h-4"}),"Edytuj"]})}),v&&m.jsxs("button",{onClick:F,className:"px-3 py-1.5 text-sm bg-solrent-orange text-white rounded-lg hover:bg-orange-700 flex items-center gap-1.5",children:[m.jsx(eS,{className:"w-4 h-4"}),"Zapisz"]}),m.jsxs("button",{className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5 text-yellow-600 border-yellow-200 hover:bg-yellow-50",onClick:()=>n.status==="inactive"?X():C(!0),children:[m.jsx(wz,{className:"w-4 h-4"}),n.status==="inactive"?"Odblokuj":"Zablokuj"]}),m.jsxs("button",{onClick:()=>j(!0),className:"px-3 py-1.5 text-sm border rounded-lg hover:bg-gray-50 flex items-center gap-1.5 text-red-600 border-red-200 hover:bg-red-50 transition-colors",children:[m.jsx(lc,{className:"w-4 h-4"}),"Usu"]})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Dane kontaktowe"}),v&&m.jsx("div",{className:"mb-4",children:m.jsxs("label",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"checkbox",checked:W,onChange:ke=>Z(ke.target.checked),className:"rounded border-gray-300 text-solrent-orange focus:ring-solrent-orange"}),m.jsx("span",{className:"text-sm text-gray-700",children:"Klient firmowy"})]})}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx(Bd,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?m.jsx("input",{type:"email",value:(S==null?void 0:S.email)||"",onChange:ke=>k(We=>({...We,email:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Email"}):m.jsx("span",{children:n.email})]})}),R.email&&m.jsx("p",{className:"text-sm text-red-600 ml-8",children:R.email}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("div",{className:"flex items-center gap-3 w-full",children:[m.jsx(bd,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?m.jsx("input",{type:"tel",value:(S==null?void 0:S.phone)||"",onChange:ke=>k(We=>({...We,phone:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg"}):m.jsx("span",{children:n.phone})]}),R.phone&&m.jsx("p",{className:"text-sm text-red-600 ml-8",children:R.phone})]}),R.phone&&m.jsx("p",{className:"text-sm text-red-600 ml-8",children:R.phone}),n.company_name&&m.jsxs("div",{className:"pt-4 border-t",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(J_,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),v?m.jsx("input",{type:"text",value:(S==null?void 0:S.company_name)||"",onChange:ke=>k(We=>({...We,company_name:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Nazwa firmy"}):m.jsx("span",{className:"font-medium",children:n.company_name})]}),m.jsx("div",{className:"text-sm text-gray-600 ml-8 space-y-1",children:v?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-2",children:m.jsx("input",{type:"text",value:(S==null?void 0:S.company_nip)||"",onChange:ke=>k(We=>({...We,company_nip:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"NIP"})}),R.company_nip&&m.jsx("p",{className:"text-sm text-red-600",children:R.company_nip}),R.company_nip&&m.jsx("p",{className:"text-sm text-red-600",children:R.company_nip}),m.jsx("div",{className:"mb-2",children:m.jsx("input",{type:"text",value:(S==null?void 0:S.company_street)||"",onChange:ke=>k(We=>({...We,company_street:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Ulica i numer"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx("input",{type:"text",value:(S==null?void 0:S.company_postal_code)||"",onChange:ke=>k(We=>({...We,company_postal_code:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Kod pocztowy"}),m.jsx("input",{type:"text",value:(S==null?void 0:S.company_city)||"",onChange:ke=>k(We=>({...We,company_city:ke.target.value})),className:"w-full px-3 py-1.5 border rounded-lg",placeholder:"Miejscowo"})]}),R.company_postal_code&&m.jsx("p",{className:"text-sm text-red-600",children:R.company_postal_code}),R.company_postal_code&&m.jsx("p",{className:"text-sm text-red-600",children:R.company_postal_code})]}):m.jsxs(m.Fragment,{children:[m.jsxs("p",{children:["NIP: ",n.company_nip]}),m.jsx("p",{children:n.company_street}),m.jsxs("p",{children:[n.company_postal_code," ",n.company_city]})]})})]}),m.jsxs("div",{className:"pt-4 border-t",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx(zz,{className:"w-5 h-5 text-gray-400"}),m.jsx("span",{className:"font-medium",children:"Tagi"})]}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[(He=(Se=n.profile)==null?void 0:Se.tags)==null?void 0:He.map(ke=>m.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-sm",children:ke},ke)),m.jsx("button",{className:"px-2 py-1 border border-dashed border-gray-300 rounded-full text-sm text-gray-500 hover:border-gray-400",children:"+ Dodaj tag"})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Wskaniki"}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[m.jsx("div",{className:"text-sm text-gray-500",children:"Warto wypoycze"}),m.jsxs("div",{className:"mt-1 flex items-end gap-2",children:[m.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(Ge=($e=n.profile)==null?void 0:$e.lifetime_value)==null?void 0:Ge.toFixed(2)," z"]}),m.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[m.jsx(kx,{className:"w-4 h-4"}),"12%"]})]})]}),m.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[m.jsx("div",{className:"text-sm text-gray-500",children:"Liczba wypoycze"}),m.jsxs("div",{className:"mt-1 flex items-end gap-2",children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((ze=n.profile)==null?void 0:ze.total_rentals)||0}),m.jsxs("div",{className:"text-sm text-green-600 flex items-center",children:[m.jsx(kx,{className:"w-4 h-4"}),"8%"]})]})]}),m.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[m.jsx("div",{className:"text-sm text-gray-500",children:"redni czas wynajmu"}),m.jsx("div",{className:"mt-1 flex items-end gap-2",children:m.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[(pe=(Ne=n.profile)==null?void 0:Ne.avg_rental_duration)==null?void 0:pe.toFixed(1)," dni"]})})]}),m.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[m.jsx("div",{className:"text-sm text-gray-500",children:"Ostatnia aktywno"}),m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:"text-sm font-medium text-gray-900",children:(qe=n.profile)!=null&&qe.last_contact_date?new Date(n.profile.last_contact_date).toLocaleDateString():"Brak"})})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Notatki"}),m.jsx("button",{onClick:()=>d(!u),className:"text-gray-400 hover:text-gray-600",children:m.jsx(eu,{className:`w-5 h-5 transform transition-transform ${u?"rotate-180":""}`})})]}),m.jsx(pc,{children:u&&m.jsxs(Ii.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"space-y-4",children:[m.jsx("textarea",{value:h,onChange:ke=>p(ke.target.value),placeholder:"Dodaj notatk...",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-solrent-orange",rows:3}),m.jsx("button",{onClick:ee,disabled:!h.trim(),className:"w-full px-4 py-2 bg-solrent-orange text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Zapisz notatk"}),m.jsx("div",{className:"space-y-3 mt-4",children:(Ze=n.activities)==null?void 0:Ze.filter(ke=>ke.type==="note").map(ke=>m.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[m.jsx("p",{className:"text-sm text-gray-900",children:ke.description}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(ke.created_at).toLocaleString()})]},ke.id))})]})})]}),m.jsxs("div",{className:"lg:col-span-3 bg-white rounded-lg shadow overflow-hidden",children:[m.jsx("div",{className:"p-6 border-b",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Historia wypoycze"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("select",{value:y,onChange:ke=>x(ke.target.value),className:"px-3 py-1.5 border rounded-lg text-sm",children:[m.jsx("option",{value:"30days",children:"Ostatnie 30 dni"}),m.jsx("option",{value:"90days",children:"Ostatnie 90 dni"}),m.jsx("option",{value:"12months",children:"Ostatnie 12 miesicy"}),m.jsx("option",{value:"all",children:"Wszystkie"})]}),m.jsxs("button",{className:"px-3 py-1.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center gap-1.5",children:[m.jsx(Ch,{className:"w-4 h-4"}),"Eksportuj"]})]})]})}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sprzt"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Warto"}),m.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcje"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Me=n.rentals)==null?void 0:Me.map(ke=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"text-sm text-gray-900",children:new Date(ke.start_date).toLocaleDateString()}),m.jsx("div",{className:"text-sm text-gray-500",children:new Date(ke.end_date).toLocaleDateString()})]}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("div",{className:"text-sm text-gray-900",children:ke.items.map(We=>m.jsxs("div",{children:[We.equipment.name," (x",We.quantity,")"]},We.equipment.name))})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${ke.status==="completed"?"bg-green-100 text-green-800":ke.status==="cancelled"?"bg-red-100 text-red-800":ke.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:ke.status==="completed"?"Zakoczone":ke.status==="cancelled"?"Anulowane":ke.status==="pending"?"Oczekujce":"W trakcie"})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[ke.total_price.toFixed(2)," z"]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m.jsx("button",{onClick:()=>e(`/admin/panel/reservations/${ke.id}`),className:"text-indigo-600 hover:text-indigo-900",children:"Szczegy"})})]},ke.id))})]})})]})]}),T&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Czy na pewno chcesz usun tego klienta?"}),m.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[m.jsx("p",{className:"text-red-800 font-medium mb-2",children:"UWAGA:"}),m.jsx("p",{className:"text-red-700 text-sm",children:"Ta operacja jest nieodwracalna. Wszystkie dane klienta, wcznie z histori transakcji, zostan trwale usunite bez moliwoci przywrcenia."})]}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Anuluj"}),m.jsx("button",{onClick:re,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Tak, usu"})]})]})})}),P&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 overflow-hidden",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Czy na pewno chcesz zablokowa tego klienta?"}),m.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4",children:[m.jsx("p",{className:"text-yellow-800 font-medium mb-2",children:"UWAGA:"}),m.jsx("p",{className:"text-yellow-700 text-sm",children:"Zablokowany klient nie bdzie mg tworzy nowych rezerwacji. Istniejce rezerwacje pozostan bez zmian."})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Powd blokady"}),m.jsx("textarea",{value:N,onChange:ke=>L(ke.target.value),className:"w-full px-3 py-2 border rounded-lg",rows:3,placeholder:"Podaj powd blokady..."})]}),m.jsxs("div",{className:"flex justify-end gap-3",children:[m.jsx("button",{onClick:()=>{C(!1),L("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Anuluj"}),m.jsx("button",{onClick:O,disabled:!N.trim(),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Zablokuj"})]})]})})}),o&&m.jsxs("div",{className:"fixed bottom-4 right-4 bg-red-50 text-red-700 px-4 py-3 rounded-lg shadow-lg flex items-center",children:[m.jsx(hc,{className:"w-5 h-5 mr-2"}),m.jsx("span",{children:o})]})]}):m.jsx("div",{className:"p-6",children:m.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg flex items-center",children:[m.jsx(hc,{className:"w-5 h-5 mr-2"}),m.jsx("span",{children:"Nie znaleziono profilu klienta"})]})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var mv={};mv.version="0.18.5";var eI=1252,Uoe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tI=function(t){Uoe.indexOf(t)!=-1&&(eI=t)};function $oe(){tI(1252)}var Xg=function(t){tI(t)};function Woe(){Xg(1200),$oe()}var Ry=function(e){return String.fromCharCode(e)},zT=function(e){return String.fromCharCode(e)},BT,Cd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Yg(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;c<t.length;)n=t.charCodeAt(c++),s=n>>2,r=t.charCodeAt(c++),o=(n&3)<<4|r>>4,i=t.charCodeAt(c++),a=(r&15)<<2|i>>6,l=i&63,isNaN(r)?a=l=64:isNaN(i)&&(l=64),e+=Cd.charAt(s)+Cd.charAt(o)+Cd.charAt(a)+Cd.charAt(l);return e}function mu(t){var e="",n=0,r=0,i=0,s=0,o=0,a=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)s=Cd.indexOf(t.charAt(c++)),o=Cd.indexOf(t.charAt(c++)),n=s<<2|o>>4,e+=String.fromCharCode(n),a=Cd.indexOf(t.charAt(c++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),l=Cd.indexOf(t.charAt(c++)),i=(a&3)<<6|l,l!==64&&(e+=String.fromCharCode(i));return e}var er=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),yu=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function _h(t){return er?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function UT(t){return er?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var xl=function(e){return er?yu(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function S2(t){if(typeof ArrayBuffer>"u")return xl(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0;r!=t.length;++r)n[r]=t.charCodeAt(r)&255;return e}function _1(t){if(Array.isArray(t))return t.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function Voe(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var as=er?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:yu(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var r=new Uint8Array(n),i=0;for(e=0,n=0;e<t.length;n+=i,++e)if(i=t[e].length,t[e]instanceof Uint8Array)r.set(t[e],n);else{if(typeof t[e]=="string")throw"wtf";r.set(new Uint8Array(t[e]),n)}return r}return[].concat.apply([],t.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Hoe(t){for(var e=[],n=0,r=t.length+250,i=_h(t.length+255),s=0;s<t.length;++s){var o=t.charCodeAt(s);if(o<128)i[n++]=o;else if(o<2048)i[n++]=192|o>>6&31,i[n++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=t.charCodeAt(++s)&1023;i[n++]=240|o>>8&7,i[n++]=128|o>>2&63,i[n++]=128|a>>6&15|(o&3)<<4,i[n++]=128|a&63}else i[n++]=224|o>>12&15,i[n++]=128|o>>6&63,i[n++]=128|o&63;n>r&&(e.push(i.slice(0,n)),n=0,i=_h(65535),r=65530)}return e.push(i.slice(0,n)),as(e)}var og=/\u0000/g,Fy=/[\u0001-\u0006]/g;function Yp(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function wl(t,e){var n=""+t;return n.length>=e?n:Yr("0",e-n.length)+n}function Z4(t,e){var n=""+t;return n.length>=e?n:Yr(" ",e-n.length)+n}function gv(t,e){var n=""+t;return n.length>=e?n:n+Yr(" ",e-n.length)}function qoe(t,e){var n=""+Math.round(t);return n.length>=e?n:Yr("0",e-n.length)+n}function Goe(t,e){var n=""+t;return n.length>=e?n:Yr("0",e-n.length)+n}var $T=Math.pow(2,32);function Ep(t,e){if(t>$T||t<-$T)return qoe(t,e);var n=Math.round(t);return Goe(n,e)}function yv(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var WT=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Xb=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Koe(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Zr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},VT={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Xoe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function xv(t,e,n){for(var r=t<0?-1:1,i=t*r,s=0,o=1,a=0,l=1,c=0,u=0,d=Math.floor(i);c<e&&(d=Math.floor(i),a=d*o+s,u=d*c+l,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,l=c,c=u;if(u>e&&(c>e?(u=l,a=s):(u=c,a=o)),!n)return[0,r*a,u];var h=Math.floor(r*a/u);return[h,r*a-h*u,u]}function zy(t,e,n){if(t>2958465||t<0)return null;var r=t|0,i=Math.floor(86400*(t-r)),s=0,o=[],a={D:r,T:i,u:86400*(t-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=n?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=n?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var l=new Date(1900,0,1);l.setDate(l.getDate()+r-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],s=l.getDay(),r<60&&(s=(s+6)%7),n&&(s=nae(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var nI=new Date(1899,11,31,0,0,0),Yoe=nI.getTime(),Joe=new Date(1900,2,1,0,0,0);function rI(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=Joe&&(n+=24*60*60*1e3),(n-(Yoe+(t.getTimezoneOffset()-nI.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Q4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Zoe(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Qoe(t){var e=t<0?12:11,n=Q4(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function eae(t){var e=Q4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function tae(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=Qoe(t):e===10?n=t.toFixed(10).substr(0,12):n=eae(t),Q4(Zoe(n.toUpperCase()))}function D_(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):tae(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Kd(14,rI(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function nae(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function rae(t,e,n,r){var i="",s=0,o=0,a=n.y,l,c=0;switch(t){case 98:a=n.y+543;case 121:switch(e.length){case 1:case 2:l=a%100,c=2;break;default:l=a%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=n.m,c=e.length;break;case 3:return Xb[n.m-1][1];case 5:return Xb[n.m-1][0];default:return Xb[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=n.d,c=e.length;break;case 3:return WT[n.q][0];default:return WT[n.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(n.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=n.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=n.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?wl(n.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(n.S+n.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=wl(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=n.D*24+n.H;break;case"[m]":case"[mm]":l=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":l=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=a,c=1;break}var u=c>0?wl(l,c):"";return u}function Ed(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,r=t.substr(0,n);n!=t.length;n+=e)r+=(r.length>0?",":"")+t.substr(n,e);return r}var iI=/%/g;function iae(t,e,n){var r=e.replace(iI,""),i=e.length-r.length;return lu(t,r,n*Math.pow(10,2*i))+Yr("%",i)}function sae(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return lu(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function sI(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+sI(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),n.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,i)+"."+n.substr(2+i),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var oI=/# (\?+)( ?)\/( ?)(\d+)/;function oae(t,e,n){var r=parseInt(t[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return n+(s===0?"":""+s)+" "+(o===0?Yr(" ",t[1].length+1+t[4].length):Z4(o,t[1].length)+t[2]+"/"+t[3]+wl(a,t[4].length))}function aae(t,e,n){return n+(e===0?"":""+e)+Yr(" ",t[1].length+2+t[4].length)}var aI=/^#*0*\.([0#]+)/,lI=/\).*[0#]/,cI=/\(###\) ###\\?-####/;function Js(t){for(var e="",n,r=0;r!=t.length;++r)switch(n=t.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function HT(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function qT(t,e){var n=t-Math.floor(t),r=Math.pow(10,e);return e<(""+Math.round(n*r)).length?0:Math.round(n*r)}function lae(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function cae(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Oa(t,e,n){if(t.charCodeAt(0)===40&&!e.match(lI)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Oa("n",r,n):"("+Oa("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return sae(t,e,n);if(e.indexOf("%")!==-1)return iae(t,e,n);if(e.indexOf("E")!==-1)return sI(e,n);if(e.charCodeAt(0)===36)return"$"+Oa(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+Ep(l,e.length);if(e.match(/^[#?]+$/))return i=Ep(n,0),i==="0"&&(i=""),i.length>e.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(oI))return oae(s,l,c);if(e.match(/^#+0+$/))return c+Ep(l,e.length-e.indexOf("0"));if(s=e.match(aI))return i=HT(n,s[1].length).replace(/^([^\.]+)$/,"$1."+Js(s[1])).replace(/\.$/,"."+Js(s[1])).replace(/\.(\d*)$/,function(y,x){return"."+x+Yr("0",Js(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+HT(l,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Ed(Ep(l,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Oa(t,e,-n):Ed(""+(Math.floor(n)+lae(n,s[1].length)))+"."+wl(qT(n,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Oa(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Yp(Oa(t,e.replace(/[\\-]/g,""),n)),o=0,Yp(Yp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(cI))return i=Oa(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=xv(l,Math.pow(10,o)-1,!1),i=""+c,u=lu("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=gv(a[2],o),u.length<s[4].length&&(u=Js(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=xv(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Z4(a[1],o)+s[2]+"/"+s[3]+gv(a[2],o):Yr(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Ep(n,0),e.length<=i.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Js(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=qT(n,s[1].length),n<0?"-"+Oa(t,e,-n):Ed(cae(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?wl(0,3-y.length):"")+y})+"."+wl(o,s[1].length);switch(e){case"###,##0.00":return Oa(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var p=Ed(Ep(l,0));return p!=="0"?c+p:"";case"###,###.00":return Oa(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return Oa(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function uae(t,e,n){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return lu(t,e.substr(0,r),n/Math.pow(10,3*(e.length-r)))}function dae(t,e,n){var r=e.replace(iI,""),i=e.length-r.length;return lu(t,r,n*Math.pow(10,2*i))+Yr("%",i)}function uI(t,e){var n,r=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+uI(t,-e);var i=t.indexOf(".");i===-1&&(i=t.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),n=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!n.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(o-n.length+s):n+="E+"+(o-s),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,l,c,u){return l+c+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else n=e.toExponential(r);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Ql(t,e,n){if(t.charCodeAt(0)===40&&!e.match(lI)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Ql("n",r,n):"("+Ql("n",r,-n)+")"}if(e.charCodeAt(e.length-1)===44)return uae(t,e,n);if(e.indexOf("%")!==-1)return dae(t,e,n);if(e.indexOf("E")!==-1)return uI(e,n);if(e.charCodeAt(0)===36)return"$"+Ql(t,e.substr(e.charAt(1)==" "?2:1),n);var i,s,o,a,l=Math.abs(n),c=n<0?"-":"";if(e.match(/^00+$/))return c+wl(l,e.length);if(e.match(/^[#?]+$/))return i=""+n,n===0&&(i=""),i.length>e.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(oI))return aae(s,l,c);if(e.match(/^#+0+$/))return c+wl(l,e.length-e.indexOf("0"));if(s=e.match(aI))return i=(""+n).replace(/^([^\.]+)$/,"$1."+Js(s[1])).replace(/\.$/,"."+Js(s[1])),i=i.replace(/\.(\d*)$/,function(y,x){return"."+x+Yr("0",Js(s[1]).length-x.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return c+Ed(""+l);if(s=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Ql(t,e,-n):Ed(""+n)+"."+Yr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return Ql(t,e.replace(/^#,#*,/,""),n);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Yp(Ql(t,e.replace(/[\\-]/g,""),n)),o=0,Yp(Yp(e.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<i.length?i.charAt(o++):y==="0"?"0":""}));if(e.match(cI))return i=Ql(t,"##########",n),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=xv(l,Math.pow(10,o)-1,!1),i=""+c,u=lu("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=gv(a[2],o),u.length<s[4].length&&(u=Js(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=xv(l,Math.pow(10,o)-1,!0),c+(a[0]||(a[1]?"":"0"))+" "+(a[1]?Z4(a[1],o)+s[2]+"/"+s[3]+gv(a[2],o):Yr(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+n,e.length<=i.length?i:Js(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+n.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,h=e.length-i.length-d;return Js(e.substr(0,d)+i+e.substr(e.length-h))}if(s=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Ql(t,e,-n):Ed(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?wl(0,3-y.length):"")+y})+"."+wl(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Ed(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return Ql(t,e.slice(0,e.lastIndexOf(".")),n)+Js(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function lu(t,e,n){return(n|0)===n?Ql(t,e,n):Oa(t,e,n)}function fae(t){for(var e=[],n=!1,r=0,i=0;r<t.length;++r)switch(t.charCodeAt(r)){case 34:n=!n;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=t.substr(i,r-i),i=r+1}if(e[e.length]=t.substr(i),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var dI=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fI(t){for(var e=0,n="",r="";e<t.length;)switch(n=t.charAt(e)){case"G":yv(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=n;t.charAt(e++)!=="]"&&e<t.length;)r+=t.charAt(e);if(r.match(dI))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function hae(t,e,n,r){for(var i=[],s="",o=0,a="",l="t",c,u,d,h="H";o<t.length;)switch(a=t.charAt(o)){case"G":if(!yv(t,o))throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(d=t.charCodeAt(++o))!==34&&o<t.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++o;break;case"\\":var p=t.charAt(++o),y=p==="("||p===")"?p:"t";i[i.length]={t:y,v:p},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(t.charAt(o+1)==="1"||t.charAt(o+1)==="2"){if(c==null&&(c=zy(e,n,t.charAt(o+1)==="2"),c==null))return"";i[i.length]={t:"X",v:t.substr(o,2)},l=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=zy(e,n),c==null))return"";for(s=a;++o<t.length&&t.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&l.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=h),i[i.length]={t:a,v:s},l=a;break;case"A":case"a":case"":var x={t:a,v:a};if(c==null&&(c=zy(e,n)),t.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(x.v=c.H>=12?"P":"A"),x.t="T",h="h",o+=3):t.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(x.v=c.H>=12?"PM":"AM"),x.t="T",o+=5,h="h"):t.substr(o,5).toUpperCase()==="/"?(c!=null&&(x.v=c.H>=12?"":""),x.t="T",o+=5,h="h"):(x.t="t",++o),c==null&&x.t==="T")return"";i[i.length]=x,l=a;break;case"[":for(s=a;t.charAt(o++)!=="]"&&o<t.length;)s+=t.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(dI)){if(c==null&&(c=zy(e,n),c==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},l=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",fI(t)||(i[i.length]={t:"t",v:s}));break;case".":if(c!=null){for(s=a;++o<t.length&&(a=t.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<t.length&&"0#?.,E+-%".indexOf(a=t.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;t.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},l=a;break;case"*":++o,(t.charAt(o)==" "||t.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<t.length&&"0123456789".indexOf(t.charAt(++o))>-1;)s+=t.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+t);i[i.length]={t:"t",v:a},++o;break}var v=0,b=0,S;for(o=i.length-1,l="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=h,l="h",v<1&&(v=1);break;case"s":(S=i[o].v.match(/\.0+$/))&&(b=Math.max(b,S[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=i[o].t;break;case"m":l==="s"&&(i[o].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&i[o].v.match(/[Hh]/)&&(v=1),v<2&&i[o].v.match(/[Mm]/)&&(v=2),v<3&&i[o].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var k="",T;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=rae(i[o].t.charCodeAt(0),i[o].v,c,b),i[o].t="t";break;case"n":case"?":for(T=o+1;i[T]!=null&&((a=i[T].t)==="?"||a==="D"||(a===" "||a==="t")&&i[T+1]!=null&&(i[T+1].t==="?"||i[T+1].t==="t"&&i[T+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[T].v==="/"||i[T].v===" "&&i[T+1]!=null&&i[T+1].t=="?"));)i[o].v+=i[T].v,i[T]={v:"",t:";"},++T;k+=i[o].v,o=T-1;break;case"G":i[o].t="t",i[o].v=D_(e,n);break}var j="",P,C;if(k.length>0){k.charCodeAt(0)==40?(P=e<0&&k.charCodeAt(0)===45?-e:e,C=lu("n",k,P)):(P=e<0&&r>1?-e:e,C=lu("n",k,P),P<0&&i[0]&&i[0].t=="t"&&(C=C.substr(1),i[0].v="-"+i[0].v)),T=C.length-1;var N=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){N=o;break}var L=i.length;if(N===i.length&&C.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(T>=i[o].v.length-1?(T-=i[o].v.length,i[o].v=C.substr(T+1,i[o].v.length)):T<0?i[o].v="":(i[o].v=C.substr(0,T+1),T=-1),i[o].t="t",L=o);T>=0&&L<i.length&&(i[L].v=C.substr(0,T+1)+i[L].v)}else if(N!==i.length&&C.indexOf("E")===-1){for(T=C.indexOf(".")-1,o=N;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")-1:i[o].v.length-1,j=i[o].v.substr(u+1);u>=0;--u)T>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(j=C.charAt(T--)+j);i[o].v=j,i[o].t="t",L=o}for(T>=0&&L<i.length&&(i[L].v=C.substr(0,T+1)+i[L].v),T=C.indexOf(".")+1,o=N;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==N)){for(u=i[o].v.indexOf(".")>-1&&o===N?i[o].v.indexOf(".")+1:0,j=i[o].v.substr(0,u);u<i[o].v.length;++u)T<C.length&&(j+=C.charAt(T++));i[o].v=j,i[o].t="t",L=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(P=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=lu(i[o].t,i[o].v,P),i[o].t="t");var R="";for(o=0;o!==i.length;++o)i[o]!=null&&(R+=i[o].v);return R}var GT=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function KT(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function pae(t,e){var n=fae(t),r=n.length,i=n[r-1].indexOf("@");if(r<4&&i>-1&&--r,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||i>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=i>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=i>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=i>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var s=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[r,s];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var o=n[0].match(GT),a=n[1].match(GT);return KT(e,o)?[r,n[0]]:KT(e,a)?[r,n[1]]:[r,n[o!=null&&a!=null?2:1]]}return[r,s]}function Kd(t,e,n){n==null&&(n={});var r="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?r=n.dateNF:r=t;break;case"number":t==14&&n.dateNF?r=n.dateNF:r=(n.table!=null?n.table:Zr)[t],r==null&&(r=n.table&&n.table[VT[t]]||Zr[VT[t]]),r==null&&(r=Xoe[t]||"General");break}if(yv(r,0))return D_(e,n);e instanceof Date&&(e=rI(e,n.date1904));var i=pae(r,e);if(yv(i[1]))return D_(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return hae(i[1],e,n,i[0])}function hI(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(Zr[n]==null){e<0&&(e=n);continue}if(Zr[n]==t){e=n;break}}e<0&&(e=391)}return Zr[e]=t,e}function k2(t){for(var e=0;e!=392;++e)t[e]!==void 0&&hI(t[e],e)}function N2(){Zr=Koe()}var pI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function mae(t){var e=typeof t=="number"?Zr[t]:t;return e=e.replace(pI,"(\\d+)"),new RegExp("^"+e+"$")}function gae(t,e,n){var r=-1,i=-1,s=-1,o=-1,a=-1,l=-1;(e.match(pI)||[]).forEach(function(d,h){var p=parseInt(n[h+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":o=p;break;case"s":l=p;break;case"m":o>=0?a=p:i=p;break}}),l>=0&&a==-1&&i>=0&&(a=i,i=-1);var c=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return o==-1&&a==-1&&l==-1?c:r==-1&&i==-1&&s==-1?u:c+"T"+u}var yae=function(){var t={};t.version="1.2.0";function e(){for(var C=0,N=new Array(256),L=0;L!=256;++L)C=L,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,N[L]=C;return typeof Int32Array<"u"?new Int32Array(N):N}var n=e();function r(C){var N=0,L=0,R=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)D[R]=C[R];for(R=0;R!=256;++R)for(L=C[R],N=256+R;N<4096;N+=256)L=D[N]=L>>>8^C[L&255];var M=[];for(R=1;R!=16;++R)M[R-1]=typeof Int32Array<"u"?D.subarray(R*256,R*256+256):D.slice(R*256,R*256+256);return M}var i=r(n),s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],p=i[8],y=i[9],x=i[10],v=i[11],b=i[12],S=i[13],k=i[14];function T(C,N){for(var L=N^-1,R=0,D=C.length;R<D;)L=L>>>8^n[(L^C.charCodeAt(R++))&255];return~L}function j(C,N){for(var L=N^-1,R=C.length-15,D=0;D<R;)L=k[C[D++]^L&255]^S[C[D++]^L>>8&255]^b[C[D++]^L>>16&255]^v[C[D++]^L>>>24]^x[C[D++]]^y[C[D++]]^p[C[D++]]^h[C[D++]]^d[C[D++]]^u[C[D++]]^c[C[D++]]^l[C[D++]]^a[C[D++]]^o[C[D++]]^s[C[D++]]^n[C[D++]];for(R+=15;D<R;)L=L>>>8^n[(L^C[D++])&255];return~L}function P(C,N){for(var L=N^-1,R=0,D=C.length,M=0,H=0;R<D;)M=C.charCodeAt(R++),M<128?L=L>>>8^n[(L^M)&255]:M<2048?(L=L>>>8^n[(L^(192|M>>6&31))&255],L=L>>>8^n[(L^(128|M&63))&255]):M>=55296&&M<57344?(M=(M&1023)+64,H=C.charCodeAt(R++)&1023,L=L>>>8^n[(L^(240|M>>8&7))&255],L=L>>>8^n[(L^(128|M>>2&63))&255],L=L>>>8^n[(L^(128|H>>6&15|(M&3)<<4))&255],L=L>>>8^n[(L^(128|H&63))&255]):(L=L>>>8^n[(L^(224|M>>12&15))&255],L=L>>>8^n[(L^(128|M>>6&63))&255],L=L>>>8^n[(L^(128|M&63))&255]);return~L}return t.table=n,t.bstr=T,t.buf=j,t.str=P,t}(),mr=function(){var e={};e.version="1.2.1";function n(ae,we){for(var G=ae.split("/"),se=we.split("/"),fe=0,me=0,Ae=Math.min(G.length,se.length);fe<Ae;++fe){if(me=G[fe].length-se[fe].length)return me;if(G[fe]!=se[fe])return G[fe]<se[fe]?-1:1}return G.length-se.length}function r(ae){if(ae.charAt(ae.length-1)=="/")return ae.slice(0,-1).indexOf("/")===-1?ae:r(ae.slice(0,-1));var we=ae.lastIndexOf("/");return we===-1?ae:ae.slice(0,we+1)}function i(ae){if(ae.charAt(ae.length-1)=="/")return i(ae.slice(0,-1));var we=ae.lastIndexOf("/");return we===-1?ae:ae.slice(we+1)}function s(ae,we){typeof we=="string"&&(we=new Date(we));var G=we.getHours();G=G<<6|we.getMinutes(),G=G<<5|we.getSeconds()>>>1,ae.write_shift(2,G);var se=we.getFullYear()-1980;se=se<<4|we.getMonth()+1,se=se<<5|we.getDate(),ae.write_shift(2,se)}function o(ae){var we=ae.read_shift(2)&65535,G=ae.read_shift(2)&65535,se=new Date,fe=G&31;G>>>=5;var me=G&15;G>>>=4,se.setMilliseconds(0),se.setFullYear(G+1980),se.setMonth(me-1),se.setDate(fe);var Ae=we&31;we>>>=5;var De=we&63;return we>>>=6,se.setHours(we),se.setMinutes(De),se.setSeconds(Ae<<1),se}function a(ae){Zo(ae,0);for(var we={},G=0;ae.l<=ae.length-4;){var se=ae.read_shift(2),fe=ae.read_shift(2),me=ae.l+fe,Ae={};switch(se){case 21589:G=ae.read_shift(1),G&1&&(Ae.mtime=ae.read_shift(4)),fe>5&&(G&2&&(Ae.atime=ae.read_shift(4)),G&4&&(Ae.ctime=ae.read_shift(4))),Ae.mtime&&(Ae.mt=new Date(Ae.mtime*1e3));break}ae.l=me,we[se]=Ae}return we}var l;function c(){return l||(l={})}function u(ae,we){if(ae[0]==80&&ae[1]==75)return _n(ae,we);if((ae[0]|32)==109&&(ae[1]|32)==105)return Lr(ae,we);if(ae.length<512)throw new Error("CFB file size "+ae.length+" < 512");var G=3,se=512,fe=0,me=0,Ae=0,De=0,Ie=0,Re=[],Ve=ae.slice(0,512);Zo(Ve,0);var lt=d(Ve);switch(G=lt[0],G){case 3:se=512;break;case 4:se=4096;break;case 0:if(lt[1]==0)return _n(ae,we);default:throw new Error("Major Version: Expected 3 or 4 saw "+G)}se!==512&&(Ve=ae.slice(0,se),Zo(Ve,28));var vt=ae.slice(0,se);h(Ve,G);var Ct=Ve.read_shift(4,"i");if(G===3&&Ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ct);Ve.l+=4,Ae=Ve.read_shift(4,"i"),Ve.l+=4,Ve.chk("00100000","Mini Stream Cutoff Size: "),De=Ve.read_shift(4,"i"),fe=Ve.read_shift(4,"i"),Ie=Ve.read_shift(4,"i"),me=Ve.read_shift(4,"i");for(var yt=-1,pt=0;pt<109&&(yt=Ve.read_shift(4,"i"),!(yt<0));++pt)Re[pt]=yt;var on=p(ae,se);v(Ie,me,on,se,Re);var In=S(on,Ae,Re,se);In[Ae].name="!Directory",fe>0&&De!==H&&(In[De].name="!MiniFAT"),In[Re[0]].name="!FAT",In.fat_addrs=Re,In.ssz=se;var Jn={},Sr=[],Lo=[],da=[];k(Ae,In,on,Sr,fe,Jn,Lo,De),y(Lo,da,Sr),Sr.shift();var Bs={FileIndex:Lo,FullPaths:da};return we&&we.raw&&(Bs.raw={header:vt,sectors:on}),Bs}function d(ae){if(ae[ae.l]==80&&ae[ae.l+1]==75)return[0,0];ae.chk(W,"Header Signature: "),ae.l+=16;var we=ae.read_shift(2,"u");return[ae.read_shift(2,"u"),we]}function h(ae,we){var G=9;switch(ae.l+=2,G=ae.read_shift(2)){case 9:if(we!=3)throw new Error("Sector Shift: Expected 9 saw "+G);break;case 12:if(we!=4)throw new Error("Sector Shift: Expected 12 saw "+G);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+G)}ae.chk("0600","Mini Sector Shift: "),ae.chk("000000000000","Reserved: ")}function p(ae,we){for(var G=Math.ceil(ae.length/we)-1,se=[],fe=1;fe<G;++fe)se[fe-1]=ae.slice(fe*we,(fe+1)*we);return se[G-1]=ae.slice(G*we),se}function y(ae,we,G){for(var se=0,fe=0,me=0,Ae=0,De=0,Ie=G.length,Re=[],Ve=[];se<Ie;++se)Re[se]=Ve[se]=se,we[se]=G[se];for(;De<Ve.length;++De)se=Ve[De],fe=ae[se].L,me=ae[se].R,Ae=ae[se].C,Re[se]===se&&(fe!==-1&&Re[fe]!==fe&&(Re[se]=Re[fe]),me!==-1&&Re[me]!==me&&(Re[se]=Re[me])),Ae!==-1&&(Re[Ae]=se),fe!==-1&&se!=Re[se]&&(Re[fe]=Re[se],Ve.lastIndexOf(fe)<De&&Ve.push(fe)),me!==-1&&se!=Re[se]&&(Re[me]=Re[se],Ve.lastIndexOf(me)<De&&Ve.push(me));for(se=1;se<Ie;++se)Re[se]===se&&(me!==-1&&Re[me]!==me?Re[se]=Re[me]:fe!==-1&&Re[fe]!==fe&&(Re[se]=Re[fe]));for(se=1;se<Ie;++se)if(ae[se].type!==0){if(De=se,De!=Re[De])do De=Re[De],we[se]=we[De]+"/"+we[se];while(De!==0&&Re[De]!==-1&&De!=Re[De]);Re[se]=-1}for(we[0]+="/",se=1;se<Ie;++se)ae[se].type!==2&&(we[se]+="/")}function x(ae,we,G){for(var se=ae.start,fe=ae.size,me=[],Ae=se;G&&fe>0&&Ae>=0;)me.push(we.slice(Ae*M,Ae*M+M)),fe-=M,Ae=Jf(G,Ae*4);return me.length===0?nt(0):as(me).slice(0,ae.size)}function v(ae,we,G,se,fe){var me=H;if(ae===H){if(we!==0)throw new Error("DIFAT chain shorter than expected")}else if(ae!==-1){var Ae=G[ae],De=(se>>>2)-1;if(!Ae)return;for(var Ie=0;Ie<De&&(me=Jf(Ae,Ie*4))!==H;++Ie)fe.push(me);v(Jf(Ae,se-4),we-1,G,se,fe)}}function b(ae,we,G,se,fe){var me=[],Ae=[];fe||(fe=[]);var De=se-1,Ie=0,Re=0;for(Ie=we;Ie>=0;){fe[Ie]=!0,me[me.length]=Ie,Ae.push(ae[Ie]);var Ve=G[Math.floor(Ie*4/se)];if(Re=Ie*4&De,se<4+Re)throw new Error("FAT boundary crossed: "+Ie+" 4 "+se);if(!ae[Ve])break;Ie=Jf(ae[Ve],Re)}return{nodes:me,data:nj([Ae])}}function S(ae,we,G,se){var fe=ae.length,me=[],Ae=[],De=[],Ie=[],Re=se-1,Ve=0,lt=0,vt=0,Ct=0;for(Ve=0;Ve<fe;++Ve)if(De=[],vt=Ve+we,vt>=fe&&(vt-=fe),!Ae[vt]){Ie=[];var yt=[];for(lt=vt;lt>=0;){yt[lt]=!0,Ae[lt]=!0,De[De.length]=lt,Ie.push(ae[lt]);var pt=G[Math.floor(lt*4/se)];if(Ct=lt*4&Re,se<4+Ct)throw new Error("FAT boundary crossed: "+lt+" 4 "+se);if(!ae[pt]||(lt=Jf(ae[pt],Ct),yt[lt]))break}me[vt]={nodes:De,data:nj([Ie])}}return me}function k(ae,we,G,se,fe,me,Ae,De){for(var Ie=0,Re=se.length?2:0,Ve=we[ae].data,lt=0,vt=0,Ct;lt<Ve.length;lt+=128){var yt=Ve.slice(lt,lt+128);Zo(yt,64),vt=yt.read_shift(2),Ct=ik(yt,0,vt-Re),se.push(Ct);var pt={name:Ct,type:yt.read_shift(1),color:yt.read_shift(1),L:yt.read_shift(4,"i"),R:yt.read_shift(4,"i"),C:yt.read_shift(4,"i"),clsid:yt.read_shift(16),state:yt.read_shift(4,"i"),start:0,size:0},on=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);on!==0&&(pt.ct=T(yt,yt.l-8));var In=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);In!==0&&(pt.mt=T(yt,yt.l-8)),pt.start=yt.read_shift(4,"i"),pt.size=yt.read_shift(4,"i"),pt.size<0&&pt.start<0&&(pt.size=pt.type=0,pt.start=H,pt.name=""),pt.type===5?(Ie=pt.start,fe>0&&Ie!==H&&(we[Ie].name="!StreamData")):pt.size>=4096?(pt.storage="fat",we[pt.start]===void 0&&(we[pt.start]=b(G,pt.start,we.fat_addrs,we.ssz)),we[pt.start].name=pt.name,pt.content=we[pt.start].data.slice(0,pt.size)):(pt.storage="minifat",pt.size<0?pt.size=0:Ie!==H&&pt.start!==H&&we[Ie]&&(pt.content=x(pt,we[Ie].data,(we[De]||{}).data))),pt.content&&Zo(pt.content,0),me[Ct]=pt,Ae.push(pt)}}function T(ae,we){return new Date((ea(ae,we+4)/1e7*Math.pow(2,32)+ea(ae,we)/1e7-11644473600)*1e3)}function j(ae,we){return c(),u(l.readFileSync(ae),we)}function P(ae,we){var G=we&&we.type;switch(G||er&&Buffer.isBuffer(ae)&&(G="buffer"),G||"base64"){case"file":return j(ae,we);case"base64":return u(xl(mu(ae)),we);case"binary":return u(xl(ae),we)}return u(ae,we)}function C(ae,we){var G=we||{},se=G.root||"Root Entry";if(ae.FullPaths||(ae.FullPaths=[]),ae.FileIndex||(ae.FileIndex=[]),ae.FullPaths.length!==ae.FileIndex.length)throw new Error("inconsistent CFB structure");ae.FullPaths.length===0&&(ae.FullPaths[0]=se+"/",ae.FileIndex[0]={name:se,type:5}),G.CLSID&&(ae.FileIndex[0].clsid=G.CLSID),N(ae)}function N(ae){var we="Sh33tJ5";if(!mr.find(ae,"/"+we)){var G=nt(4);G[0]=55,G[1]=G[3]=50,G[2]=54,ae.FileIndex.push({name:we,type:2,content:G,size:4,L:69,R:69,C:69}),ae.FullPaths.push(ae.FullPaths[0]+we),L(ae)}}function L(ae,we){C(ae);for(var G=!1,se=!1,fe=ae.FullPaths.length-1;fe>=0;--fe){var me=ae.FileIndex[fe];switch(me.type){case 0:se?G=!0:(ae.FileIndex.pop(),ae.FullPaths.pop());break;case 1:case 2:case 5:se=!0,isNaN(me.R*me.L*me.C)&&(G=!0),me.R>-1&&me.L>-1&&me.R==me.L&&(G=!0);break;default:G=!0;break}}if(!(!G&&!we)){var Ae=new Date(1987,1,19),De=0,Ie=Object.create?Object.create(null):{},Re=[];for(fe=0;fe<ae.FullPaths.length;++fe)Ie[ae.FullPaths[fe]]=!0,ae.FileIndex[fe].type!==0&&Re.push([ae.FullPaths[fe],ae.FileIndex[fe]]);for(fe=0;fe<Re.length;++fe){var Ve=r(Re[fe][0]);se=Ie[Ve],se||(Re.push([Ve,{name:i(Ve).replace("/",""),type:1,clsid:B,ct:Ae,mt:Ae,content:null}]),Ie[Ve]=!0)}for(Re.sort(function(Ct,yt){return n(Ct[0],yt[0])}),ae.FullPaths=[],ae.FileIndex=[],fe=0;fe<Re.length;++fe)ae.FullPaths[fe]=Re[fe][0],ae.FileIndex[fe]=Re[fe][1];for(fe=0;fe<Re.length;++fe){var lt=ae.FileIndex[fe],vt=ae.FullPaths[fe];if(lt.name=i(vt).replace("/",""),lt.L=lt.R=lt.C=-(lt.color=1),lt.size=lt.content?lt.content.length:0,lt.start=0,lt.clsid=lt.clsid||B,fe===0)lt.C=Re.length>1?1:-1,lt.size=0,lt.type=5;else if(vt.slice(-1)=="/"){for(De=fe+1;De<Re.length&&r(ae.FullPaths[De])!=vt;++De);for(lt.C=De>=Re.length?-1:De,De=fe+1;De<Re.length&&r(ae.FullPaths[De])!=r(vt);++De);lt.R=De>=Re.length?-1:De,lt.type=1}else r(ae.FullPaths[fe+1]||"")==r(vt)&&(lt.R=fe+1),lt.type=2}}}function R(ae,we){var G=we||{};if(G.fileType=="mad")return Et(ae,G);switch(L(ae),G.fileType){case"zip":return fn(ae,G)}var se=function(Ct){for(var yt=0,pt=0,on=0;on<Ct.FileIndex.length;++on){var In=Ct.FileIndex[on];if(In.content){var Jn=In.content.length;Jn>0&&(Jn<4096?yt+=Jn+63>>6:pt+=Jn+511>>9)}}for(var Sr=Ct.FullPaths.length+3>>2,Lo=yt+7>>3,da=yt+127>>7,Bs=Lo+pt+Sr+da,Wr=Bs+127>>7,fa=Wr<=109?0:Math.ceil((Wr-109)/127);Bs+Wr+fa+127>>7>Wr;)fa=++Wr<=109?0:Math.ceil((Wr-109)/127);var kr=[1,fa,Wr,da,Sr,pt,yt,0];return Ct.FileIndex[0].size=yt<<6,kr[7]=(Ct.FileIndex[0].start=kr[0]+kr[1]+kr[2]+kr[3]+kr[4]+kr[5])+(kr[6]+7>>3),kr}(ae),fe=nt(se[7]<<9),me=0,Ae=0;{for(me=0;me<8;++me)fe.write_shift(1,Z[me]);for(me=0;me<8;++me)fe.write_shift(2,0);for(fe.write_shift(2,62),fe.write_shift(2,3),fe.write_shift(2,65534),fe.write_shift(2,9),fe.write_shift(2,6),me=0;me<3;++me)fe.write_shift(2,0);for(fe.write_shift(4,0),fe.write_shift(4,se[2]),fe.write_shift(4,se[0]+se[1]+se[2]+se[3]-1),fe.write_shift(4,0),fe.write_shift(4,4096),fe.write_shift(4,se[3]?se[0]+se[1]+se[2]-1:H),fe.write_shift(4,se[3]),fe.write_shift(-4,se[1]?se[0]-1:H),fe.write_shift(4,se[1]),me=0;me<109;++me)fe.write_shift(-4,me<se[2]?se[1]+me:-1)}if(se[1])for(Ae=0;Ae<se[1];++Ae){for(;me<236+Ae*127;++me)fe.write_shift(-4,me<se[2]?se[1]+me:-1);fe.write_shift(-4,Ae===se[1]-1?H:Ae+1)}var De=function(Ct){for(Ae+=Ct;me<Ae-1;++me)fe.write_shift(-4,me+1);Ct&&(++me,fe.write_shift(-4,H))};for(Ae=me=0,Ae+=se[1];me<Ae;++me)fe.write_shift(-4,F.DIFSECT);for(Ae+=se[2];me<Ae;++me)fe.write_shift(-4,F.FATSECT);De(se[3]),De(se[4]);for(var Ie=0,Re=0,Ve=ae.FileIndex[0];Ie<ae.FileIndex.length;++Ie)Ve=ae.FileIndex[Ie],Ve.content&&(Re=Ve.content.length,!(Re<4096)&&(Ve.start=Ae,De(Re+511>>9)));for(De(se[6]+7>>3);fe.l&511;)fe.write_shift(-4,F.ENDOFCHAIN);for(Ae=me=0,Ie=0;Ie<ae.FileIndex.length;++Ie)Ve=ae.FileIndex[Ie],Ve.content&&(Re=Ve.content.length,!(!Re||Re>=4096)&&(Ve.start=Ae,De(Re+63>>6)));for(;fe.l&511;)fe.write_shift(-4,F.ENDOFCHAIN);for(me=0;me<se[4]<<2;++me){var lt=ae.FullPaths[me];if(!lt||lt.length===0){for(Ie=0;Ie<17;++Ie)fe.write_shift(4,0);for(Ie=0;Ie<3;++Ie)fe.write_shift(4,-1);for(Ie=0;Ie<12;++Ie)fe.write_shift(4,0);continue}Ve=ae.FileIndex[me],me===0&&(Ve.start=Ve.size?Ve.start-1:H);var vt=me===0&&G.root||Ve.name;if(Re=2*(vt.length+1),fe.write_shift(64,vt,"utf16le"),fe.write_shift(2,Re),fe.write_shift(1,Ve.type),fe.write_shift(1,Ve.color),fe.write_shift(-4,Ve.L),fe.write_shift(-4,Ve.R),fe.write_shift(-4,Ve.C),Ve.clsid)fe.write_shift(16,Ve.clsid,"hex");else for(Ie=0;Ie<4;++Ie)fe.write_shift(4,0);fe.write_shift(4,Ve.state||0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,0),fe.write_shift(4,Ve.start),fe.write_shift(4,Ve.size),fe.write_shift(4,0)}for(me=1;me<ae.FileIndex.length;++me)if(Ve=ae.FileIndex[me],Ve.size>=4096)if(fe.l=Ve.start+1<<9,er&&Buffer.isBuffer(Ve.content))Ve.content.copy(fe,fe.l,0,Ve.size),fe.l+=Ve.size+511&-512;else{for(Ie=0;Ie<Ve.size;++Ie)fe.write_shift(1,Ve.content[Ie]);for(;Ie&511;++Ie)fe.write_shift(1,0)}for(me=1;me<ae.FileIndex.length;++me)if(Ve=ae.FileIndex[me],Ve.size>0&&Ve.size<4096)if(er&&Buffer.isBuffer(Ve.content))Ve.content.copy(fe,fe.l,0,Ve.size),fe.l+=Ve.size+63&-64;else{for(Ie=0;Ie<Ve.size;++Ie)fe.write_shift(1,Ve.content[Ie]);for(;Ie&63;++Ie)fe.write_shift(1,0)}if(er)fe.l=fe.length;else for(;fe.l<fe.length;)fe.write_shift(1,0);return fe}function D(ae,we){var G=ae.FullPaths.map(function(Ie){return Ie.toUpperCase()}),se=G.map(function(Ie){var Re=Ie.split("/");return Re[Re.length-(Ie.slice(-1)=="/"?2:1)]}),fe=!1;we.charCodeAt(0)===47?(fe=!0,we=G[0].slice(0,-1)+we):fe=we.indexOf("/")!==-1;var me=we.toUpperCase(),Ae=fe===!0?G.indexOf(me):se.indexOf(me);if(Ae!==-1)return ae.FileIndex[Ae];var De=!me.match(Fy);for(me=me.replace(og,""),De&&(me=me.replace(Fy,"!")),Ae=0;Ae<G.length;++Ae)if((De?G[Ae].replace(Fy,"!"):G[Ae]).replace(og,"")==me||(De?se[Ae].replace(Fy,"!"):se[Ae]).replace(og,"")==me)return ae.FileIndex[Ae];return null}var M=64,H=-2,W="d0cf11e0a1b11ae1",Z=[208,207,17,224,161,177,26,225],B="00000000000000000000000000000000",F={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:H,FREESECT:-1,HEADER_SIGNATURE:W,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:B,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(ae,we,G){c();var se=R(ae,G);l.writeFileSync(we,se)}function ee(ae){for(var we=new Array(ae.length),G=0;G<ae.length;++G)we[G]=String.fromCharCode(ae[G]);return we.join("")}function te(ae,we){var G=R(ae,we);switch(we&&we.type||"buffer"){case"file":return c(),l.writeFileSync(we.filename,G),G;case"binary":return typeof G=="string"?G:ee(G);case"base64":return Yg(typeof G=="string"?G:ee(G));case"buffer":if(er)return Buffer.isBuffer(G)?G:yu(G);case"array":return typeof G=="string"?xl(G):G}return G}var re;function O(ae){try{var we=ae.InflateRaw,G=new we;if(G._processChunk(new Uint8Array([3,0]),G._finishFlushFlag),G.bytesRead)re=ae;else throw new Error("zlib does not expose bytesRead")}catch(se){console.error("cannot use native zlib: "+(se.message||se))}}function X(ae,we){if(!re)return dn(ae,we);var G=re.InflateRaw,se=new G,fe=se._processChunk(ae.slice(ae.l),se._finishFlushFlag);return ae.l+=se.bytesRead,fe}function q(ae){return re?re.deflateRawSync(ae):Mt(ae)}var V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ge=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ye(ae){var we=(ae<<1|ae<<11)&139536|(ae<<5|ae<<15)&558144;return(we>>16|we>>8|we)&255}for(var xe=typeof Uint8Array<"u",Se=xe?new Uint8Array(256):[],He=0;He<256;++He)Se[He]=ye(He);function $e(ae,we){var G=Se[ae&255];return we<=8?G>>>8-we:(G=G<<8|Se[ae>>8&255],we<=16?G>>>16-we:(G=G<<8|Se[ae>>16&255],G>>>24-we))}function Ge(ae,we){var G=we&7,se=we>>>3;return(ae[se]|(G<=6?0:ae[se+1]<<8))>>>G&3}function ze(ae,we){var G=we&7,se=we>>>3;return(ae[se]|(G<=5?0:ae[se+1]<<8))>>>G&7}function Ne(ae,we){var G=we&7,se=we>>>3;return(ae[se]|(G<=4?0:ae[se+1]<<8))>>>G&15}function pe(ae,we){var G=we&7,se=we>>>3;return(ae[se]|(G<=3?0:ae[se+1]<<8))>>>G&31}function qe(ae,we){var G=we&7,se=we>>>3;return(ae[se]|(G<=1?0:ae[se+1]<<8))>>>G&127}function Ze(ae,we,G){var se=we&7,fe=we>>>3,me=(1<<G)-1,Ae=ae[fe]>>>se;return G<8-se||(Ae|=ae[fe+1]<<8-se,G<16-se)||(Ae|=ae[fe+2]<<16-se,G<24-se)||(Ae|=ae[fe+3]<<24-se),Ae&me}function Me(ae,we,G){var se=we&7,fe=we>>>3;return se<=5?ae[fe]|=(G&7)<<se:(ae[fe]|=G<<se&255,ae[fe+1]=(G&7)>>8-se),we+3}function ke(ae,we,G){var se=we&7,fe=we>>>3;return G=(G&1)<<se,ae[fe]|=G,we+1}function We(ae,we,G){var se=we&7,fe=we>>>3;return G<<=se,ae[fe]|=G&255,G>>>=8,ae[fe+1]=G,we+8}function it(ae,we,G){var se=we&7,fe=we>>>3;return G<<=se,ae[fe]|=G&255,G>>>=8,ae[fe+1]=G&255,ae[fe+2]=G>>>8,we+16}function gt(ae,we){var G=ae.length,se=2*G>we?2*G:we+5,fe=0;if(G>=we)return ae;if(er){var me=UT(se);if(ae.copy)ae.copy(me);else for(;fe<ae.length;++fe)me[fe]=ae[fe];return me}else if(xe){var Ae=new Uint8Array(se);if(Ae.set)Ae.set(ae);else for(;fe<G;++fe)Ae[fe]=ae[fe];return Ae}return ae.length=se,ae}function xt(ae){for(var we=new Array(ae),G=0;G<ae;++G)we[G]=0;return we}function Tt(ae,we,G){var se=1,fe=0,me=0,Ae=0,De=0,Ie=ae.length,Re=xe?new Uint16Array(32):xt(32);for(me=0;me<32;++me)Re[me]=0;for(me=Ie;me<G;++me)ae[me]=0;Ie=ae.length;var Ve=xe?new Uint16Array(Ie):xt(Ie);for(me=0;me<Ie;++me)Re[fe=ae[me]]++,se<fe&&(se=fe),Ve[me]=0;for(Re[0]=0,me=1;me<=se;++me)Re[me+16]=De=De+Re[me-1]<<1;for(me=0;me<Ie;++me)De=ae[me],De!=0&&(Ve[me]=Re[De+16]++);var lt=0;for(me=0;me<Ie;++me)if(lt=ae[me],lt!=0)for(De=$e(Ve[me],se)>>se-lt,Ae=(1<<se+4-lt)-1;Ae>=0;--Ae)we[De|Ae<<lt]=lt&15|me<<4;return se}var Bt=xe?new Uint16Array(512):xt(512),qt=xe?new Uint16Array(32):xt(32);if(!xe){for(var Rt=0;Rt<512;++Rt)Bt[Rt]=0;for(Rt=0;Rt<32;++Rt)qt[Rt]=0}(function(){for(var ae=[],we=0;we<32;we++)ae.push(5);Tt(ae,qt,32);var G=[];for(we=0;we<=143;we++)G.push(8);for(;we<=255;we++)G.push(9);for(;we<=279;we++)G.push(7);for(;we<=287;we++)G.push(8);Tt(G,Bt,288)})();var Dt=function(){for(var we=xe?new Uint8Array(32768):[],G=0,se=0;G<ge.length-1;++G)for(;se<ge[G+1];++se)we[se]=G;for(;se<32768;++se)we[se]=29;var fe=xe?new Uint8Array(259):[];for(G=0,se=0;G<ne.length-1;++G)for(;se<ne[G+1];++se)fe[se]=G;function me(De,Ie){for(var Re=0;Re<De.length;){var Ve=Math.min(65535,De.length-Re),lt=Re+Ve==De.length;for(Ie.write_shift(1,+lt),Ie.write_shift(2,Ve),Ie.write_shift(2,~Ve&65535);Ve-- >0;)Ie[Ie.l++]=De[Re++]}return Ie.l}function Ae(De,Ie){for(var Re=0,Ve=0,lt=xe?new Uint16Array(32768):[];Ve<De.length;){var vt=Math.min(65535,De.length-Ve);if(vt<10){for(Re=Me(Ie,Re,+(Ve+vt==De.length)),Re&7&&(Re+=8-(Re&7)),Ie.l=Re/8|0,Ie.write_shift(2,vt),Ie.write_shift(2,~vt&65535);vt-- >0;)Ie[Ie.l++]=De[Ve++];Re=Ie.l*8;continue}Re=Me(Ie,Re,+(Ve+vt==De.length)+2);for(var Ct=0;vt-- >0;){var yt=De[Ve];Ct=(Ct<<5^yt)&32767;var pt=-1,on=0;if((pt=lt[Ct])&&(pt|=Ve&-32768,pt>Ve&&(pt-=32768),pt<Ve))for(;De[pt+on]==De[Ve+on]&&on<250;)++on;if(on>2){yt=fe[on],yt<=22?Re=We(Ie,Re,Se[yt+1]>>1)-1:(We(Ie,Re,3),Re+=5,We(Ie,Re,Se[yt-23]>>5),Re+=3);var In=yt<8?0:yt-4>>2;In>0&&(it(Ie,Re,on-ne[yt]),Re+=In),yt=we[Ve-pt],Re=We(Ie,Re,Se[yt]>>3),Re-=3;var Jn=yt<4?0:yt-2>>1;Jn>0&&(it(Ie,Re,Ve-pt-ge[yt]),Re+=Jn);for(var Sr=0;Sr<on;++Sr)lt[Ct]=Ve&32767,Ct=(Ct<<5^De[Ve])&32767,++Ve;vt-=on-1}else yt<=143?yt=yt+48:Re=ke(Ie,Re,1),Re=We(Ie,Re,Se[yt]),lt[Ct]=Ve&32767,++Ve}Re=We(Ie,Re,0)-1}return Ie.l=(Re+7)/8|0,Ie.l}return function(Ie,Re){return Ie.length<8?me(Ie,Re):Ae(Ie,Re)}}();function Mt(ae){var we=nt(50+Math.floor(ae.length*1.1)),G=Dt(ae,we);return we.slice(0,G)}var ot=xe?new Uint16Array(32768):xt(32768),Nn=xe?new Uint16Array(32768):xt(32768),Qt=xe?new Uint16Array(128):xt(128),Wn=1,cn=1;function bn(ae,we){var G=pe(ae,we)+257;we+=5;var se=pe(ae,we)+1;we+=5;var fe=Ne(ae,we)+4;we+=4;for(var me=0,Ae=xe?new Uint8Array(19):xt(19),De=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ie=1,Re=xe?new Uint8Array(8):xt(8),Ve=xe?new Uint8Array(8):xt(8),lt=Ae.length,vt=0;vt<fe;++vt)Ae[V[vt]]=me=ze(ae,we),Ie<me&&(Ie=me),Re[me]++,we+=3;var Ct=0;for(Re[0]=0,vt=1;vt<=Ie;++vt)Ve[vt]=Ct=Ct+Re[vt-1]<<1;for(vt=0;vt<lt;++vt)(Ct=Ae[vt])!=0&&(De[vt]=Ve[Ct]++);var yt=0;for(vt=0;vt<lt;++vt)if(yt=Ae[vt],yt!=0){Ct=Se[De[vt]]>>8-yt;for(var pt=(1<<7-yt)-1;pt>=0;--pt)Qt[Ct|pt<<yt]=yt&7|vt<<3}var on=[];for(Ie=1;on.length<G+se;)switch(Ct=Qt[qe(ae,we)],we+=Ct&7,Ct>>>=3){case 16:for(me=3+Ge(ae,we),we+=2,Ct=on[on.length-1];me-- >0;)on.push(Ct);break;case 17:for(me=3+ze(ae,we),we+=3;me-- >0;)on.push(0);break;case 18:for(me=11+qe(ae,we),we+=7;me-- >0;)on.push(0);break;default:on.push(Ct),Ie<Ct&&(Ie=Ct);break}var In=on.slice(0,G),Jn=on.slice(G);for(vt=G;vt<286;++vt)In[vt]=0;for(vt=se;vt<30;++vt)Jn[vt]=0;return Wn=Tt(In,ot,286),cn=Tt(Jn,Nn,30),we}function $r(ae,we){if(ae[0]==3&&!(ae[1]&3))return[_h(we),2];for(var G=0,se=0,fe=UT(we||1<<18),me=0,Ae=fe.length>>>0,De=0,Ie=0;(se&1)==0;){if(se=ze(ae,G),G+=3,se>>>1)se>>1==1?(De=9,Ie=5):(G=bn(ae,G),De=Wn,Ie=cn);else{G&7&&(G+=8-(G&7));var Re=ae[G>>>3]|ae[(G>>>3)+1]<<8;if(G+=32,Re>0)for(!we&&Ae<me+Re&&(fe=gt(fe,me+Re),Ae=fe.length);Re-- >0;)fe[me++]=ae[G>>>3],G+=8;continue}for(;;){!we&&Ae<me+32767&&(fe=gt(fe,me+32767),Ae=fe.length);var Ve=Ze(ae,G,De),lt=se>>>1==1?Bt[Ve]:ot[Ve];if(G+=lt&15,lt>>>=4,(lt>>>8&255)===0)fe[me++]=lt;else{if(lt==256)break;lt-=257;var vt=lt<8?0:lt-4>>2;vt>5&&(vt=0);var Ct=me+ne[lt];vt>0&&(Ct+=Ze(ae,G,vt),G+=vt),Ve=Ze(ae,G,Ie),lt=se>>>1==1?qt[Ve]:Nn[Ve],G+=lt&15,lt>>>=4;var yt=lt<4?0:lt-2>>1,pt=ge[lt];for(yt>0&&(pt+=Ze(ae,G,yt),G+=yt),!we&&Ae<Ct&&(fe=gt(fe,Ct+100),Ae=fe.length);me<Ct;)fe[me]=fe[me-pt],++me}}}return we?[fe,G+7>>>3]:[fe.slice(0,me),G+7>>>3]}function dn(ae,we){var G=ae.slice(ae.l||0),se=$r(G,we);return ae.l+=se[1],se[0]}function Qr(ae,we){if(ae)typeof console<"u"&&console.error(we);else throw new Error(we)}function _n(ae,we){var G=ae;Zo(G,0);var se=[],fe=[],me={FileIndex:se,FullPaths:fe};C(me,{root:we.root});for(var Ae=G.length-4;(G[Ae]!=80||G[Ae+1]!=75||G[Ae+2]!=5||G[Ae+3]!=6)&&Ae>=0;)--Ae;G.l=Ae+4,G.l+=4;var De=G.read_shift(2);G.l+=6;var Ie=G.read_shift(4);for(G.l=Ie,Ae=0;Ae<De;++Ae){G.l+=20;var Re=G.read_shift(4),Ve=G.read_shift(4),lt=G.read_shift(2),vt=G.read_shift(2),Ct=G.read_shift(2);G.l+=8;var yt=G.read_shift(4),pt=a(G.slice(G.l+lt,G.l+lt+vt));G.l+=lt+vt+Ct;var on=G.l;G.l=yt+4,gr(G,Re,Ve,me,pt),G.l=on}return me}function gr(ae,we,G,se,fe){ae.l+=2;var me=ae.read_shift(2),Ae=ae.read_shift(2),De=o(ae);if(me&8257)throw new Error("Unsupported ZIP encryption");for(var Ie=ae.read_shift(4),Re=ae.read_shift(4),Ve=ae.read_shift(4),lt=ae.read_shift(2),vt=ae.read_shift(2),Ct="",yt=0;yt<lt;++yt)Ct+=String.fromCharCode(ae[ae.l++]);if(vt){var pt=a(ae.slice(ae.l,ae.l+vt));(pt[21589]||{}).mt&&(De=pt[21589].mt),((fe||{})[21589]||{}).mt&&(De=fe[21589].mt)}ae.l+=vt;var on=ae.slice(ae.l,ae.l+Re);switch(Ae){case 8:on=X(ae,Ve);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ae)}var In=!1;me&8&&(Ie=ae.read_shift(4),Ie==134695760&&(Ie=ae.read_shift(4),In=!0),Re=ae.read_shift(4),Ve=ae.read_shift(4)),Re!=we&&Qr(In,"Bad compressed size: "+we+" != "+Re),Ve!=G&&Qr(In,"Bad uncompressed size: "+G+" != "+Ve),Bn(se,Ct,on,{unsafe:!0,mt:De})}function fn(ae,we){var G=we||{},se=[],fe=[],me=nt(1),Ae=G.compression?8:0,De=0,Ie=0,Re=0,Ve=0,lt=0,vt=ae.FullPaths[0],Ct=vt,yt=ae.FileIndex[0],pt=[],on=0;for(Ie=1;Ie<ae.FullPaths.length;++Ie)if(Ct=ae.FullPaths[Ie].slice(vt.length),yt=ae.FileIndex[Ie],!(!yt.size||!yt.content||Ct=="Sh33tJ5")){var In=Ve,Jn=nt(Ct.length);for(Re=0;Re<Ct.length;++Re)Jn.write_shift(1,Ct.charCodeAt(Re)&127);Jn=Jn.slice(0,Jn.l),pt[lt]=yae.buf(yt.content,0);var Sr=yt.content;Ae==8&&(Sr=q(Sr)),me=nt(30),me.write_shift(4,67324752),me.write_shift(2,20),me.write_shift(2,De),me.write_shift(2,Ae),yt.mt?s(me,yt.mt):me.write_shift(4,0),me.write_shift(-4,pt[lt]),me.write_shift(4,Sr.length),me.write_shift(4,yt.content.length),me.write_shift(2,Jn.length),me.write_shift(2,0),Ve+=me.length,se.push(me),Ve+=Jn.length,se.push(Jn),Ve+=Sr.length,se.push(Sr),me=nt(46),me.write_shift(4,33639248),me.write_shift(2,0),me.write_shift(2,20),me.write_shift(2,De),me.write_shift(2,Ae),me.write_shift(4,0),me.write_shift(-4,pt[lt]),me.write_shift(4,Sr.length),me.write_shift(4,yt.content.length),me.write_shift(2,Jn.length),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(4,0),me.write_shift(4,In),on+=me.l,fe.push(me),on+=Jn.length,fe.push(Jn),++lt}return me=nt(22),me.write_shift(4,101010256),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(2,lt),me.write_shift(2,lt),me.write_shift(4,on),me.write_shift(4,Ve),me.write_shift(2,0),as([as(se),as(fe),me])}var Yt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ot(ae,we){if(ae.ctype)return ae.ctype;var G=ae.name||"",se=G.match(/\.([^\.]+)$/);return se&&Yt[se[1]]||we&&(se=(G=we).match(/[\.\\]([^\.\\])+$/),se&&Yt[se[1]])?Yt[se[1]]:"application/octet-stream"}function Jt(ae){for(var we=Yg(ae),G=[],se=0;se<we.length;se+=76)G.push(we.slice(se,se+76));return G.join(`\r
`)+`\r
`}function Yn(ae){var we=ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Re){var Ve=Re.charCodeAt(0).toString(16).toUpperCase();return"="+(Ve.length==1?"0"+Ve:Ve)});we=we.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),we.charAt(0)==`
`&&(we="=0D"+we.slice(1)),we=we.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var G=[],se=we.split(`\r
`),fe=0;fe<se.length;++fe){var me=se[fe];if(me.length==0){G.push("");continue}for(var Ae=0;Ae<me.length;){var De=76,Ie=me.slice(Ae,Ae+De);Ie.charAt(De-1)=="="?De--:Ie.charAt(De-2)=="="?De-=2:Ie.charAt(De-3)=="="&&(De-=3),Ie=me.slice(Ae,Ae+De),Ae+=De,Ae<me.length&&(Ie+="="),G.push(Ie)}}return G.join(`\r
`)}function hn(ae){for(var we=[],G=0;G<ae.length;++G){for(var se=ae[G];G<=ae.length&&se.charAt(se.length-1)=="=";)se=se.slice(0,se.length-1)+ae[++G];we.push(se)}for(var fe=0;fe<we.length;++fe)we[fe]=we[fe].replace(/[=][0-9A-Fa-f]{2}/g,function(me){return String.fromCharCode(parseInt(me.slice(1),16))});return xl(we.join(`\r
`))}function Cn(ae,we,G){for(var se="",fe="",me="",Ae,De=0;De<10;++De){var Ie=we[De];if(!Ie||Ie.match(/^\s*$/))break;var Re=Ie.match(/^(.*?):\s*([^\s].*)$/);if(Re)switch(Re[1].toLowerCase()){case"content-location":se=Re[2].trim();break;case"content-type":me=Re[2].trim();break;case"content-transfer-encoding":fe=Re[2].trim();break}}switch(++De,fe.toLowerCase()){case"base64":Ae=xl(mu(we.slice(De).join("")));break;case"quoted-printable":Ae=hn(we.slice(De));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+fe)}var Ve=Bn(ae,se.slice(G.length),Ae,{unsafe:!0});me&&(Ve.ctype=me)}function Lr(ae,we){if(ee(ae.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var G=we&&we.root||"",se=(er&&Buffer.isBuffer(ae)?ae.toString("binary"):ee(ae)).split(`\r
`),fe=0,me="";for(fe=0;fe<se.length;++fe)if(me=se[fe],!!/^Content-Location:/i.test(me)&&(me=me.slice(me.indexOf("file")),G||(G=me.slice(0,me.lastIndexOf("/")+1)),me.slice(0,G.length)!=G))for(;G.length>0&&(G=G.slice(0,G.length-1),G=G.slice(0,G.lastIndexOf("/")+1),me.slice(0,G.length)!=G););var Ae=(se[1]||"").match(/boundary="(.*?)"/);if(!Ae)throw new Error("MAD cannot find boundary");var De="--"+(Ae[1]||""),Ie=[],Re=[],Ve={FileIndex:Ie,FullPaths:Re};C(Ve);var lt,vt=0;for(fe=0;fe<se.length;++fe){var Ct=se[fe];Ct!==De&&Ct!==De+"--"||(vt++&&Cn(Ve,se.slice(lt,fe),G),lt=fe)}return Ve}function Et(ae,we){var G=we||{},se=G.boundary||"SheetJS";se="------="+se;for(var fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+se.slice(2)+'"',"","",""],me=ae.FullPaths[0],Ae=me,De=ae.FileIndex[0],Ie=1;Ie<ae.FullPaths.length;++Ie)if(Ae=ae.FullPaths[Ie].slice(me.length),De=ae.FileIndex[Ie],!(!De.size||!De.content||Ae=="Sh33tJ5")){Ae=Ae.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(on){return"_x"+on.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(on){return"_u"+on.charCodeAt(0).toString(16)+"_"});for(var Re=De.content,Ve=er&&Buffer.isBuffer(Re)?Re.toString("binary"):ee(Re),lt=0,vt=Math.min(1024,Ve.length),Ct=0,yt=0;yt<=vt;++yt)(Ct=Ve.charCodeAt(yt))>=32&&Ct<128&&++lt;var pt=lt>=vt*4/5;fe.push(se),fe.push("Content-Location: "+(G.root||"file:///C:/SheetJS/")+Ae),fe.push("Content-Transfer-Encoding: "+(pt?"quoted-printable":"base64")),fe.push("Content-Type: "+Ot(De,Ae)),fe.push(""),fe.push(pt?Yn(Ve):Jt(Ve))}return fe.push(se+`--\r
`),fe.join(`\r
`)}function lr(ae){var we={};return C(we,ae),we}function Bn(ae,we,G,se){var fe=se&&se.unsafe;fe||C(ae);var me=!fe&&mr.find(ae,we);if(!me){var Ae=ae.FullPaths[0];we.slice(0,Ae.length)==Ae?Ae=we:(Ae.slice(-1)!="/"&&(Ae+="/"),Ae=(Ae+we).replace("//","/")),me={name:i(we),type:2},ae.FileIndex.push(me),ae.FullPaths.push(Ae),fe||mr.utils.cfb_gc(ae)}return me.content=G,me.size=G?G.length:0,se&&(se.CLSID&&(me.clsid=se.CLSID),se.mt&&(me.mt=se.mt),se.ct&&(me.ct=se.ct)),me}function nr(ae,we){C(ae);var G=mr.find(ae,we);if(G){for(var se=0;se<ae.FileIndex.length;++se)if(ae.FileIndex[se]==G)return ae.FileIndex.splice(se,1),ae.FullPaths.splice(se,1),!0}return!1}function jn(ae,we,G){C(ae);var se=mr.find(ae,we);if(se){for(var fe=0;fe<ae.FileIndex.length;++fe)if(ae.FileIndex[fe]==se)return ae.FileIndex[fe].name=i(G),ae.FullPaths[fe]=G,!0}return!1}function On(ae){L(ae,!0)}return e.find=D,e.read=P,e.parse=u,e.write=te,e.writeFile=Q,e.utils={cfb_new:lr,cfb_add:Bn,cfb_del:nr,cfb_mov:jn,cfb_gc:On,ReadShift:lg,CheckField:DI,prep_blob:Zo,bconcat:as,use_zlib:O,_deflateRaw:Mt,_inflateRaw:dn,consts:F},e}();function xae(t){return typeof t=="string"?S2(t):Array.isArray(t)?Voe(t):t}function S1(t,e,n){if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=S2(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var r=n=="utf8"?Zg(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,t);if(typeof Blob<"u"){var i=new Blob([xae(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,t);if(typeof saveAs<"u")return saveAs(i,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:t,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=t,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=_1(e)),a.write(e),a.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function ds(t){for(var e=Object.keys(t),n=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(t,e[r])&&n.push(e[r]);return n}function XT(t,e){for(var n=[],r=ds(t),i=0;i!==r.length;++i)n[t[r[i]][e]]==null&&(n[t[r[i]][e]]=r[i]);return n}function ek(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=n[r];return e}function C2(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]=parseInt(n[r],10);return e}function vae(t){for(var e=[],n=ds(t),r=0;r!==n.length;++r)e[t[n[r]]]==null&&(e[t[n[r]]]=[]),e[t[n[r]]].push(n[r]);return e}var vv=new Date(1899,11,30,0,0,0);function Po(t,e){var n=t.getTime(),r=vv.getTime()+(t.getTimezoneOffset()-vv.getTimezoneOffset())*6e4;return(n-r)/(24*60*60*1e3)}var mI=new Date,wae=vv.getTime()+(mI.getTimezoneOffset()-vv.getTimezoneOffset())*6e4,YT=mI.getTimezoneOffset();function gI(t){var e=new Date;return e.setTime(t*24*60*60*1e3+wae),e.getTimezoneOffset()!==YT&&e.setTime(e.getTime()+(e.getTimezoneOffset()-YT)*6e4),e}var JT=new Date("2017-02-19T19:06:09.000Z"),yI=isNaN(JT.getFullYear())?new Date("2/19/17"):JT,bae=yI.getFullYear()==2017;function to(t,e){var n=new Date(t);if(bae)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(yI.getFullYear()==1917&&!isNaN(n.getFullYear())){var r=n.getFullYear();return t.indexOf(""+r)>-1||n.setFullYear(n.getFullYear()+100),n}var i=t.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return t.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function E2(t,e){if(er&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var n={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(s){return n[s]||s})}catch{}for(var r=[],i=0;i!=t.length;++i)r.push(String.fromCharCode(t[i]));return r.join("")}function Do(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=Do(t[n]));return e}function Yr(t,e){for(var n="";n.length<e;)n+=t;return n}function cu(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,r=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return n=-n,s}),!isNaN(e=Number(r)))?e/n:e}var _ae=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jg(t){var e=new Date(t),n=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return n;var o=t.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&_ae.indexOf(o)==-1)return n}else if(o.match(/[a-z]/))return n;return r<0||r>8099?n:(i>0||s>1)&&r!=101?e:t.match(/[^-0-9:,\/\\]/)?n:e}function kn(t,e,n){if(t.FullPaths){if(typeof n=="string"){var r;return er?r=yu(n):r=Hoe(n),mr.utils.cfb_add(t,e,r)}mr.utils.cfb_add(t,e,n)}else t.file(e,n)}function tk(){return mr.utils.cfb_new()}var vi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Sae={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},nk=ek(Sae),rk=/[&<>'"]/g,kae=/[\u0000-\u0008\u000b-\u001f]/g;function hr(t){var e=t+"";return e.replace(rk,function(n){return nk[n]}).replace(kae,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function ZT(t){return hr(t).replace(/ /g,"_x0020_")}var xI=/[\u0000-\u001f]/g;function Nae(t){var e=t+"";return e.replace(rk,function(n){return nk[n]}).replace(/\n/g,"<br/>").replace(xI,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function Cae(t){var e=t+"";return e.replace(rk,function(n){return nk[n]}).replace(xI,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function Eae(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function Aae(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Yb(t){for(var e="",n=0,r=0,i=0,s=0,o=0,a=0;n<t.length;){if(r=t.charCodeAt(n++),r<128){e+=String.fromCharCode(r);continue}if(i=t.charCodeAt(n++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=t.charCodeAt(n++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=t.charCodeAt(n++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function QT(t){var e=_h(2*t.length),n,r,i=1,s=0,o=0,a;for(r=0;r<t.length;r+=i)i=1,(a=t.charCodeAt(r))<128?n=a:a<224?(n=(a&31)*64+(t.charCodeAt(r+1)&63),i=2):a<240?(n=(a&15)*4096+(t.charCodeAt(r+1)&63)*64+(t.charCodeAt(r+2)&63),i=3):(i=4,n=(a&7)*262144+(t.charCodeAt(r+1)&63)*4096+(t.charCodeAt(r+2)&63)*64+(t.charCodeAt(r+3)&63),n-=65536,o=55296+(n>>>10&1023),n=56320+(n&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=n%256,e[s++]=n>>>8;return e.slice(0,s).toString("ucs2")}function ej(t){return yu(t,"binary").toString("utf8")}var By="foo bar baz",ag=er&&(ej(By)==Yb(By)&&ej||QT(By)==Yb(By)&&QT)||Yb,Zg=er?function(t){return yu(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,r=0,i=0;n<t.length;)switch(r=t.charCodeAt(n++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=t.charCodeAt(n++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Tae=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var r=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<t.length;++i)r=r.replace(t[i][0],t[i][1]);return r}}(),vI=/(^\s|\s$|\n)/;function ls(t,e){return"<"+t+(e.match(vI)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Qg(t){return ds(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function bt(t,e,n){return"<"+t+(n!=null?Qg(n):"")+(e!=null?(e.match(vI)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function O_(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function jae(t,e){switch(typeof t){case"string":var n=bt("vt:lpwstr",hr(t));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return bt((t|0)==t?"vt:i4":"vt:r8",hr(String(t)));case"boolean":return bt("vt:bool",t?"true":"false")}if(t instanceof Date)return bt("vt:filetime",O_(t));throw new Error("Unable to serialize "+t)}var Ri={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},D0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Qo={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pae(t,e){for(var n=1-2*(t[e+7]>>>7),r=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),i=t[e+6]&15,s=5;s>=0;--s)i=i*256+t[e+s];return r==2047?i==0?n*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),n*Math.pow(2,r-52)*i)}function Dae(t,e,n){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)t[n+a]=s&255;t[n+6]=(i&15)<<4|s&15,t[n+7]=i>>4|r}var tj=function(t){for(var e=[],n=10240,r=0;r<t[0].length;++r)if(t[0][r])for(var i=0,s=t[0][r].length;i<s;i+=n)e.push.apply(e,t[0][r].slice(i,i+n));return e},nj=er?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:yu(e)})):tj(t)}:tj,rj=function(t,e,n){for(var r=[],i=e;i<n;i+=2)r.push(String.fromCharCode(Om(t,i)));return r.join("").replace(og,"")},ik=er?function(t,e,n){return Buffer.isBuffer(t)?t.toString("utf16le",e,n).replace(og,""):rj(t,e,n)}:rj,ij=function(t,e,n){for(var r=[],i=e;i<e+n;++i)r.push(("0"+t[i].toString(16)).slice(-2));return r.join("")},wI=er?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):ij(t,e,n)}:ij,sj=function(t,e,n){for(var r=[],i=e;i<n;i++)r.push(String.fromCharCode(Ip(t,i)));return r.join("")},k1=er?function(e,n,r){return Buffer.isBuffer(e)?e.toString("utf8",n,r):sj(e,n,r)}:sj,bI=function(t,e){var n=ea(t,e);return n>0?k1(t,e+4,e+4+n-1):""},_I=bI,SI=function(t,e){var n=ea(t,e);return n>0?k1(t,e+4,e+4+n-1):""},kI=SI,NI=function(t,e){var n=2*ea(t,e);return n>0?k1(t,e+4,e+4+n-1):""},CI=NI,EI=function(e,n){var r=ea(e,n);return r>0?ik(e,n+4,n+4+r):""},AI=EI,TI=function(t,e){var n=ea(t,e);return n>0?k1(t,e+4,e+4+n):""},jI=TI,PI=function(t,e){return Pae(t,e)},wv=PI,sk=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};er&&(_I=function(e,n){if(!Buffer.isBuffer(e))return bI(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},kI=function(e,n){if(!Buffer.isBuffer(e))return SI(e,n);var r=e.readUInt32LE(n);return r>0?e.toString("utf8",n+4,n+4+r-1):""},CI=function(e,n){if(!Buffer.isBuffer(e))return NI(e,n);var r=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r-1)},AI=function(e,n){if(!Buffer.isBuffer(e))return EI(e,n);var r=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+r)},jI=function(e,n){if(!Buffer.isBuffer(e))return TI(e,n);var r=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+r)},wv=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):PI(e,n)},sk=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Ip=function(t,e){return t[e]},Om=function(t,e){return t[e+1]*256+t[e]},Oae=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},ea=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Jf=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},Lae=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function lg(t,e){var n="",r,i,s=[],o,a,l,c;switch(e){case"dbcs":if(c=this.l,er&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)n+=String.fromCharCode(Om(this,c)),c+=2;t*=2;break;case"utf8":n=k1(this,this.l,this.l+t);break;case"utf16le":t*=2,n=ik(this,this.l,this.l+t);break;case"wstr":return lg.call(this,t,"dbcs");case"lpstr-ansi":n=_I(this,this.l),t=4+ea(this,this.l);break;case"lpstr-cp":n=kI(this,this.l),t=4+ea(this,this.l);break;case"lpwstr":n=CI(this,this.l),t=4+2*ea(this,this.l);break;case"lpp4":t=4+ea(this,this.l),n=AI(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+ea(this,this.l),n=jI(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(o=Ip(this,this.l+t++))!==0;)s.push(Ry(o));n=s.join("");break;case"_wstr":for(t=0,n="";(o=Om(this,this.l+t))!==0;)s.push(Ry(o)),t+=2;t+=2,n=s.join("");break;case"dbcs-cont":for(n="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ip(this,c),this.l=c+1,a=lg.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Ry(Om(this,c))),c+=2}n=s.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return o=Ip(this,c),this.l=c+1,a=lg.call(this,t-l,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Ry(Ip(this,c))),c+=1}n=s.join("");break;default:switch(t){case 1:return r=Ip(this,this.l),this.l++,r;case 2:return r=(e==="i"?Oae:Om)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(t>0?Jf:Lae)(this,this.l),this.l+=4,r):(i=ea(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return t==8?i=wv(this,this.l):i=wv([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;t=8;case 16:n=wI(this,this.l,t);break}}return this.l+=t,n}var Mae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},Iae=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},Rae=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function Fae(t,e,n){var r=0,i=0;if(n==="dbcs"){for(i=0;i!=e.length;++i)Rae(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(n==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(n==="hex"){for(;i<t;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(n==="utf16le"){var s=Math.min(this.l+t,this.length);for(i=0;i<Math.min(e.length,t);++i){var o=e.charCodeAt(i);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(t){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,Mae(this,e,this.l);break;case 8:if(r=8,n==="f"){Dae(this,e,this.l);break}case 16:break;case-4:r=4,Iae(this,e,this.l);break}return this.l+=r,this}function DI(t,e){var n=wI(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function Zo(t,e){t.l=e,t.read_shift=lg,t.chk=DI,t.write_shift=Fae}function yc(t,e){t.l+=e}function nt(t){var e=_h(t);return Zo(e,0),e}function To(){var t=[],e=er?256:2048,n=function(c){var u=nt(c);return Zo(u,0),u},r=n(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&t.push(r),r=null)},s=function(c){return r&&c<r.length-r.l?r:(i(),r=n(Math.max(c+1,e)))},o=function(){return i(),as(t)},a=function(c){i(),r=c,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:t}}function at(t,e,n,r){var i=+e,s;if(!isNaN(i)){r||(r=Phe[i].p||(n||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=t.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&sk(n)&&t.push(n)}}function cg(t,e,n){var r=Do(t);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!n||n.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function oj(t,e,n){var r=Do(t);return r.s=cg(r.s,e.s,n),r.e=cg(r.e,e.s,n),r}function ug(t,e){if(t.cRel&&t.c<0)for(t=Do(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Do(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=pr(t);return!t.cRel&&t.cRel!=null&&(n=Uae(n)),!t.rRel&&t.rRel!=null&&(n=zae(n)),n}function Jb(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Is(t.s.c)+":"+(t.e.cRel?"":"$")+Is(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+us(t.s.r)+":"+(t.e.rRel?"":"$")+us(t.e.r):ug(t.s,e.biff)+":"+ug(t.e,e.biff)}function ok(t){return parseInt(Bae(t),10)-1}function us(t){return""+(t+1)}function zae(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Bae(t){return t.replace(/\$(\d+)$/,"$1")}function ak(t){for(var e=$ae(t),n=0,r=0;r!==e.length;++r)n=26*n+e.charCodeAt(r)-64;return n-1}function Is(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function Uae(t){return t.replace(/^([A-Z])/,"$$$1")}function $ae(t){return t.replace(/^\$([A-Z])/,"$1")}function Wae(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function zi(t){for(var e=0,n=0,r=0;r<t.length;++r){var i=t.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(n=26*n+(i-64))}return{c:n-1,r:e-1}}function pr(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function ca(t){var e=t.indexOf(":");return e==-1?{s:zi(t),e:zi(t)}:{s:zi(t.slice(0,e)),e:zi(t.slice(e+1))}}function xi(t,e){return typeof e>"u"||typeof e=="number"?xi(t.s,t.e):(typeof t!="string"&&(t=pr(t)),typeof e!="string"&&(e=pr(e)),t==e?t:t+":"+e)}function Or(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,r=0,i=0,s=t.length;for(n=0;r<s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.s.c=--n,n=0;r<s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;if(e.s.r=--n,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,n=0;r!=s&&!((i=t.charCodeAt(r)-64)<1||i>26);++r)n=26*n+i;for(e.e.c=--n,n=0;r!=s&&!((i=t.charCodeAt(r)-48)<0||i>9);++r)n=10*n+i;return e.e.r=--n,e}function aj(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Kd(t.z,n?Po(e):e)}catch{}try{return t.w=Kd((t.XF||{}).numFmtId||(n?14:0),n?Po(e):e)}catch{return""+e}}function gu(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?N1[t.v]||t.v:e==null?aj(t,t.v):aj(t,e))}function Ph(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",r={};return r[n]=t,{SheetNames:[n],Sheets:r}}function OI(t,e,n){var r=n||{},i=t?Array.isArray(t):r.dense,s=t||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?zi(r.origin):r.origin;o=l.r,a=l.c}s["!ref"]||(s["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Or(s["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=e[d].length;++h)if(!(typeof e[d][h]>"u")){var p={v:e[d][h]},y=o+d,x=a+h;if(c.s.r>y&&(c.s.r=y),c.s.c>x&&(c.s.c=x),c.e.r<y&&(c.e.r=y),c.e.c<x&&(c.e.c=x),e[d][h]&&typeof e[d][h]=="object"&&!Array.isArray(e[d][h])&&!(e[d][h]instanceof Date))p=e[d][h];else if(Array.isArray(p.v)&&(p.f=e[d][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||Zr[14],r.cellDates?(p.t="d",p.w=Kd(p.z,Po(p.v))):(p.t="n",p.v=Po(p.v),p.w=Kd(p.z,p.v))):p.t="s";if(i)s[y]||(s[y]=[]),s[y][x]&&s[y][x].z&&(p.z=s[y][x].z),s[y][x]=p;else{var v=pr({c:x,r:y});s[v]&&s[v].z&&(p.z=s[v].z),s[v]=p}}}return c.s.c<1e7&&(s["!ref"]=xi(c)),s}function O0(t,e){return OI(null,t,e)}function Vae(t){return t.read_shift(4,"i")}function Sl(t,e){return e||(e=nt(4)),e.write_shift(4,t),e}function Rs(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Bi(t,e){var n=!1;return e==null&&(n=!0,e=nt(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function Hae(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function qae(t,e){return e||(e=nt(4)),e.write_shift(2,0),e.write_shift(2,0),e}function lk(t,e){var n=t.l,r=t.read_shift(1),i=Rs(t),s=[],o={t:i,h:i};if((r&1)!==0){for(var a=t.read_shift(4),l=0;l!=a;++l)s.push(Hae(t));o.r=s}else o.r=[{ich:0,ifnt:0}];return t.l=n+e,o}function Gae(t,e){var n=!1;return e==null&&(n=!0,e=nt(15+4*t.t.length)),e.write_shift(1,0),Bi(t.t,e),n?e.slice(0,e.l):e}var Kae=lk;function Xae(t,e){var n=!1;return e==null&&(n=!0,e=nt(23+4*t.t.length)),e.write_shift(1,1),Bi(t.t,e),e.write_shift(4,1),qae({},e),n?e.slice(0,e.l):e}function qa(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function Dh(t,e){return e==null&&(e=nt(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Oh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function Lh(t,e){return e==null&&(e=nt(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var Yae=Rs,LI=Bi;function ck(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function bv(t,e){var n=!1;return e==null&&(n=!0,e=nt(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var Jae=Rs,L_=ck,uk=bv;function MI(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,r=e[0]&2;t.l+=4;var i=r===0?wv([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Jf(e,0)>>2;return n?i/100:i}function II(t,e){e==null&&(e=nt(4));var n=0,r=0,i=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,n=1),r)e.write_shift(-4,((n?i:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function RI(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function Zae(t,e){return e||(e=nt(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var Mh=RI,L0=Zae;function M0(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Sh(t,e){return(e||nt(8)).write_shift(8,t,"f")}function Qae(t){var e={},n=t.read_shift(1),r=n>>>1,i=t.read_shift(1),s=t.read_shift(2,"i"),o=t.read_shift(1),a=t.read_shift(1),l=t.read_shift(1);switch(t.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var c=lle[i];c&&(e.rgb=xj(c));break;case 2:e.rgb=xj([o,a,l]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function _v(t,e){if(e||(e=nt(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=t.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function ele(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function tle(t,e){e||(e=nt(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}var FI=2,Jo=3,Uy=11,Sv=19,$y=64,nle=65,rle=71,ile=4108,sle=4126,rs=80,lj={1:{n:"CodePage",t:FI},2:{n:"Category",t:rs},3:{n:"PresentationFormat",t:rs},4:{n:"ByteCount",t:Jo},5:{n:"LineCount",t:Jo},6:{n:"ParagraphCount",t:Jo},7:{n:"SlideCount",t:Jo},8:{n:"NoteCount",t:Jo},9:{n:"HiddenCount",t:Jo},10:{n:"MultimediaClipCount",t:Jo},11:{n:"ScaleCrop",t:Uy},12:{n:"HeadingPairs",t:ile},13:{n:"TitlesOfParts",t:sle},14:{n:"Manager",t:rs},15:{n:"Company",t:rs},16:{n:"LinksUpToDate",t:Uy},17:{n:"CharacterCount",t:Jo},19:{n:"SharedDoc",t:Uy},22:{n:"HyperlinksChanged",t:Uy},23:{n:"AppVersion",t:Jo,p:"version"},24:{n:"DigSig",t:nle},26:{n:"ContentType",t:rs},27:{n:"ContentStatus",t:rs},28:{n:"Language",t:rs},29:{n:"Version",t:rs},255:{},2147483648:{n:"Locale",t:Sv},2147483651:{n:"Behavior",t:Sv},1919054434:{}},cj={1:{n:"CodePage",t:FI},2:{n:"Title",t:rs},3:{n:"Subject",t:rs},4:{n:"Author",t:rs},5:{n:"Keywords",t:rs},6:{n:"Comments",t:rs},7:{n:"Template",t:rs},8:{n:"LastAuthor",t:rs},9:{n:"RevNumber",t:rs},10:{n:"EditTime",t:$y},11:{n:"LastPrinted",t:$y},12:{n:"CreatedDate",t:$y},13:{n:"ModifiedDate",t:$y},14:{n:"PageCount",t:Jo},15:{n:"WordCount",t:Jo},16:{n:"CharCount",t:Jo},17:{n:"Thumbnail",t:rle},18:{n:"Application",t:rs},19:{n:"DocSecurity",t:Jo},255:{},2147483648:{n:"Locale",t:Sv},2147483651:{n:"Behavior",t:Sv},1919054434:{}};function ole(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var ale=ole([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lle=Do(ale),N1={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},cle={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Wy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function zI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function BI(t,e){var n=vae(cle),r=[],i;r[r.length]=vi,r[r.length]=bt("Types",null,{xmlns:Ri.CT,"xmlns:xsd":Ri.xsd,"xmlns:xsi":Ri.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return bt("Default",null,{Extension:l[0],ContentType:l[1]})}));var s=function(l){t[l]&&t[l].length>0&&(i=t[l][0],r[r.length]=bt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Wy[l][e.bookType]||Wy[l].xlsx}))},o=function(l){(t[l]||[]).forEach(function(c){r[r.length]=bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Wy[l][e.bookType]||Wy[l].xlsx})})},a=function(l){(t[l]||[]).forEach(function(c){r[r.length]=bt("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:n[l][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var Kn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function UI(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Jp(t){var e=[vi,bt("Relationships",null,{xmlns:Ri.RELS})];return ds(t["!id"]).forEach(function(n){e[e.length]=bt("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function dr(t,e,n,r,i,s){if(i||(i={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=n,[Kn.HLINK,Kn.XPATH,Kn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),t["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][i.Id]=i,t[("/"+i.Target).replace("//","/")]=i,e}function ule(t){var e=[vi];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function uj(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function dle(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function fle(t){var e=[vi];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(uj(t[n][0],t[n][1])),e.push(dle("",t[n][0]));return e.push(uj("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function $I(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+mv.version+"</meta:generator></office:meta></office:document-meta>"}var gh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function Zb(t,e,n,r,i){i[t]!=null||e==null||e===""||(i[t]=e,e=hr(e),r[r.length]=n?bt(t,e,n):ls(t,e))}function WI(t,e){var n=e||{},r=[vi,bt("cp:coreProperties",null,{"xmlns:cp":Ri.CORE_PROPS,"xmlns:dc":Ri.dc,"xmlns:dcterms":Ri.dcterms,"xmlns:dcmitype":Ri.dcmitype,"xmlns:xsi":Ri.xsi})],i={};if(!t&&!n.Props)return r.join("");t&&(t.CreatedDate!=null&&Zb("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:O_(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),t.ModifiedDate!=null&&Zb("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:O_(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=gh.length;++s){var o=gh[s],a=n.Props&&n.Props[o[1]]!=null?n.Props[o[1]]:t?t[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&Zb(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Zp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],VI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function HI(t){var e=[],n=bt;return t||(t={}),t.Application="SheetJS",e[e.length]=vi,e[e.length]=bt("Properties",null,{xmlns:Ri.EXT_PROPS,"xmlns:vt":Ri.vt}),Zp.forEach(function(r){if(t[r[1]]!==void 0){var i;switch(r[2]){case"string":i=hr(String(t[r[1]]));break;case"bool":i=t[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=n(r[0],i))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(r){return"<vt:lpstr>"+hr(r)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function qI(t){var e=[vi,bt("Properties",null,{xmlns:Ri.CUST_PROPS,"xmlns:vt":Ri.vt})];if(!t)return e.join("");var n=1;return ds(t).forEach(function(i){++n,e[e.length]=bt("property",jae(t[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:hr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var dj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function hle(t,e){var n=[];return ds(dj).map(function(r){for(var i=0;i<gh.length;++i)if(gh[i][1]==r)return gh[i];for(i=0;i<Zp.length;++i)if(Zp[i][1]==r)return Zp[i];throw r}).forEach(function(r){if(t[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:t[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),n.push(ls(dj[r[1]]||r[1],i))}}),bt("DocumentProperties",n.join(""),{xmlns:Qo.o})}function ple(t,e){var n=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return t&&ds(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)){for(var o=0;o<gh.length;++o)if(s==gh[o][1])return;for(o=0;o<Zp.length;++o)if(s==Zp[o][1])return;for(o=0;o<n.length;++o)if(s==n[o])return;var a=t[s],l="string";typeof a=="number"?(l="float",a=String(a)):a===!0||a===!1?(l="boolean",a=a?"1":"0"):a=String(a),i.push(bt(ZT(s),a,{"dt:dt":l}))}}),e&&ds(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(t&&Object.prototype.hasOwnProperty.call(t,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(bt(ZT(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+Qo.o+'">'+i.join("")+"</"+r+">"}function mle(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,r=n%Math.pow(2,32),i=(n-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=nt(8);return o.write_shift(4,r),o.write_shift(4,i),o}function fj(t,e){var n=nt(4),r=nt(4);switch(n.write_shift(4,t==80?31:t),t){case 3:r.write_shift(-4,e);break;case 5:r=nt(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=mle(e);break;case 31:case 80:for(r=nt(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return as([n,r])}var GI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function gle(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function hj(t,e,n){var r=nt(8),i=[],s=[],o=8,a=0,l=nt(8),c=nt(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),s.push(l),i.push(c),o+=8+l.length,!e){c=nt(8),c.write_shift(4,0),i.unshift(c);var u=[nt(4)];for(u[0].write_shift(4,t.length),a=0;a<t.length;++a){var d=t[a][0];for(l=nt(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,a+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);u.push(l)}l=as(u),s.unshift(l),o+=8+l.length}for(a=0;a<t.length;++a)if(!(e&&!e[t[a][0]])&&!(GI.indexOf(t[a][0])>-1||VI.indexOf(t[a][0])>-1)&&t[a][1]!=null){var h=t[a][1],p=0;if(e){p=+e[t[a][0]];var y=n[p];if(y.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}l=fj(y.t,h)}else{var v=gle(h);v==-1&&(v=31,h=String(h)),l=fj(v,h)}s.push(l),c=nt(8),c.write_shift(4,e?p:2+a),i.push(c),o+=8+l.length}var b=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,b),b+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),as([r].concat(i).concat(s))}function pj(t,e,n,r,i,s){var o=nt(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,mr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var l=hj(t,n,r);if(a.push(l),i){var c=hj(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+l.length),a.push(c)}return as(a)}function yle(t,e){e||(e=nt(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function xle(t,e){return t.read_shift(e)===1}function Zs(t,e){return e||(e=nt(2)),e.write_shift(2,+!!t),e}function KI(t){return t.read_shift(2,"u")}function Ma(t,e){return e||(e=nt(2)),e.write_shift(2,t),e}function XI(t,e,n){return n||(n=nt(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function YI(t,e,n){var r=t.read_shift(n&&n.biff>=12?2:1),i="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var s=t.read_shift(1);s&&(i="dbcs-cont")}else n.biff==12&&(i="wstr");n.biff>=2&&n.biff<=5&&(i="cpstr");var o=r?t.read_shift(r,i):"";return o}function vle(t){var e=t.t||"",n=nt(3);n.write_shift(2,e.length),n.write_shift(1,1);var r=nt(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[n,r];return as(i)}function wle(t,e,n){var r;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var i=t.read_shift(1);return i===0?r=t.read_shift(e,"sbcs-cont"):r=t.read_shift(e,"dbcs-cont"),r}function ble(t,e,n){var r=t.read_shift(n&&n.biff==2?1:2);return r===0?(t.l++,""):wle(t,r,n)}function _le(t,e,n){if(n.biff>5)return ble(t,e,n);var r=t.read_shift(1);return r===0?(t.l++,""):t.read_shift(r,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function JI(t,e,n){return n||(n=nt(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function mj(t,e){e||(e=nt(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function Sle(t){var e=nt(512),n=0,r=t.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(n=0;n<o.length;++n)e.write_shift(4,o[n]);if(s==28)r=r.slice(1),mj(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),n=0;n<a.length;++n)e.write_shift(2,a.charCodeAt(n));e.write_shift(2,0),s&8&&mj(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<o.length;++n)e.write_shift(1,parseInt(o[n],16));for(var l=0;r.slice(l*3,l*3+3)=="../"||r.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,r.length-3*l+1),n=0;n<r.length-3*l;++n)e.write_shift(1,r.charCodeAt(n+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function kh(t,e,n,r){return r||(r=nt(6)),r.write_shift(2,t),r.write_shift(2,e),r.write_shift(2,n||0),r}function kle(t,e,n){var r=n.biff>8?4:2,i=t.read_shift(r),s=t.read_shift(r,"i"),o=t.read_shift(r,"i");return[i,s,o]}function Nle(t){var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:n}}}function ZI(t,e){return e||(e=nt(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function dk(t,e,n){var r=1536,i=16;switch(n.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=nt(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Cle(t,e){var n=!e||e.biff==8,r=nt(n?112:54);for(r.write_shift(e.biff==8?2:1,7),n&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(n?0:536870912));r.l<r.length;)r.write_shift(1,n?0:32);return r}function Ele(t,e){var n=!e||e.biff>=8?2:1,r=nt(8+n*t.name.length);r.write_shift(4,t.pos),r.write_shift(1,t.hs||0),r.write_shift(1,t.dt),r.write_shift(1,t.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Ale(t,e){var n=nt(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var r=[],i=0;i<t.length;++i)r[i]=vle(t[i]);var s=as([n].concat(r));return s.parts=[n.length].concat(r.map(function(o){return o.length})),s}function Tle(){var t=nt(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function jle(t){var e=nt(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ple(t,e){var n=t.name||"Arial",r=e&&e.biff==5,i=r?15+n.length:16+2*n.length,s=nt(i);return s.write_shift(2,t.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,n.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*n.length,n,r?"sbcs":"utf16le"),s}function Dle(t,e,n,r){var i=nt(10);return kh(t,e,r,i),i.write_shift(4,n),i}function Ole(t,e,n,r,i){var s=!i||i.biff==8,o=nt(8+ +s+(1+s)*n.length);return kh(t,e,r,o),o.write_shift(2,n.length),s&&o.write_shift(1,1),o.write_shift((1+s)*n.length,n,s?"utf16le":"sbcs"),o}function Lle(t,e,n,r){var i=n&&n.biff==5;r||(r=nt(i?3+e.length:5+2*e.length)),r.write_shift(2,t),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function Mle(t,e){var n=e.biff==8||!e.biff?4:2,r=nt(2*n+6);return r.write_shift(n,t.s.r),r.write_shift(n,t.e.r+1),r.write_shift(2,t.s.c),r.write_shift(2,t.e.c+1),r.write_shift(2,0),r}function gj(t,e,n,r){var i=n&&n.biff==5;r||(r=nt(i?16:20)),r.write_shift(2,0),t.style?(r.write_shift(2,t.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,t.numFmtId||0),r.write_shift(2,e<<4));var s=0;return t.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function Ile(t){var e=nt(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function Rle(t,e,n,r,i,s){var o=nt(8);return kh(t,e,r,o),XI(n,s,o),o}function Fle(t,e,n,r){var i=nt(14);return kh(t,e,r,i),Sh(n,i),i}function zle(t,e,n){if(n.biff<8)return Ble(t,e,n);for(var r=[],i=t.l+e,s=t.read_shift(n.biff>8?4:2);s--!==0;)r.push(kle(t,n.biff>8?12:6,n));if(t.l!=i)throw new Error("Bad ExternSheet: "+t.l+" != "+i);return r}function Ble(t,e,n){t[t.l+1]==3&&t[t.l]++;var r=YI(t,e,n);return r.charCodeAt(0)==3?r.slice(1):r}function Ule(t){var e=nt(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)ZI(t[n],e);return e}function $le(t){var e=nt(24),n=zi(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return as([e,Sle(t[1])])}function Wle(t){var e=t[1].Tooltip,n=nt(10+2*(e.length+1));n.write_shift(2,2048);var r=zi(t[0]);n.write_shift(2,r.r),n.write_shift(2,r.r),n.write_shift(2,r.c),n.write_shift(2,r.c);for(var i=0;i<e.length;++i)n.write_shift(2,e.charCodeAt(i));return n.write_shift(2,0),n}function Vle(t){return t||(t=nt(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Hle(t,e,n){if(!n.cellStyles)return yc(t,e);var r=n&&n.biff>=12?4:2,i=t.read_shift(r),s=t.read_shift(r),o=t.read_shift(r),a=t.read_shift(r),l=t.read_shift(2);r==2&&(t.l+=2);var c={s:i,e:s,w:o,ixfe:a,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}function qle(t,e){var n=nt(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var r=0;return t.hidden&&(r|=1),n.write_shift(1,r),r=t.level||0,n.write_shift(1,r),n.write_shift(2,0),n}function Gle(t){for(var e=nt(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}function Kle(t,e,n){var r=nt(15);return E1(r,t,e),r.write_shift(8,n,"f"),r}function Xle(t,e,n){var r=nt(9);return E1(r,t,e),r.write_shift(2,n),r}var Yle=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ek({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(a,l){var c=[],u=_h(1);switch(l.type){case"base64":u=xl(mu(a));break;case"binary":u=xl(a);break;case"buffer":case"array":u=a;break}Zo(u,0);var d=u.read_shift(1),h=!!(d&136),p=!1,y=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var x=0,v=521;d==2&&(x=u.read_shift(2)),u.l+=3,d!=2&&(x=u.read_shift(4)),x>1048576&&(x=1e6),d!=2&&(v=u.read_shift(2));var b=u.read_shift(2),S=l.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(S=t[u[u.l]]),u.l+=1,u.l+=2),y&&(u.l+=36);for(var k=[],T={},j=Math.min(u.length,d==2?521:v-10-(p?264:0)),P=y?32:11;u.l<j&&u[u.l]!=13;)switch(T={},T.name=BT.utils.decode(S,u.slice(u.l,u.l+P)).replace(/[\u0000\r\n].*$/g,""),u.l+=P,T.type=String.fromCharCode(u.read_shift(1)),d!=2&&!y&&(T.offset=u.read_shift(4)),T.len=u.read_shift(1),d==2&&(T.offset=u.read_shift(2)),T.dec=u.read_shift(1),T.name.length&&k.push(T),d!=2&&(u.l+=y?13:14),T.type){case"B":(!p||T.len!=8)&&l.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(u[u.l]!==13&&(u.l=v-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=v;var C=0,N=0;for(c[0]=[],N=0;N!=k.length;++N)c[0][N]=k[N].name;for(;x-- >0;){if(u[u.l]===42){u.l+=b;continue}for(++u.l,c[++C]=[],N=0,N=0;N!=k.length;++N){var L=u.slice(u.l,u.l+k[N].len);u.l+=k[N].len,Zo(L,0);var R=BT.utils.decode(S,L);switch(k[N].type){case"C":R.trim().length&&(c[C][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?c[C][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):c[C][N]=R;break;case"F":c[C][N]=parseFloat(R.trim());break;case"+":case"I":c[C][N]=y?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":c[C][N]=!0;break;case"N":case"F":c[C][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[C][N]="##MEMO##"+(y?parseInt(R.trim(),10):L.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(c[C][N]=+R||0);break;case"@":c[C][N]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":c[C][N]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":c[C][N]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[C][N]=-L.read_shift(-8,"f");break;case"B":if(p&&k[N].len==8){c[C][N]=L.read_shift(8,"f");break}case"G":case"P":L.l+=k[N].len;break;case"0":if(k[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+k[N].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=k,c}function r(a,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var u=O0(n(a,c),c);return u["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,u}function i(a,l){try{return Ph(r(a,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,l){var c=l||{};if(+c.codepage>=0&&Xg(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=To(),d=Av(a,{header:1,raw:!0,cellDates:!0}),h=d[0],p=d.slice(1),y=a["!cols"]||[],x=0,v=0,b=0,S=1;for(x=0;x<h.length;++x){if(((y[x]||{}).DBF||{}).name){h[x]=y[x].DBF.name,++b;continue}if(h[x]!=null){if(++b,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(v=0;v<1024;++v)if(h.indexOf(h[x]+"_"+v)==-1){h[x]+="_"+v;break}}}}var k=Or(a["!ref"]),T=[],j=[],P=[];for(x=0;x<=k.e.c-k.s.c;++x){var C="",N="",L=0,R=[];for(v=0;v<p.length;++v)p[v][x]!=null&&R.push(p[v][x]);if(R.length==0||h[x]==null){T[x]="?";continue}for(v=0;v<R.length;++v){switch(typeof R[v]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[v]instanceof Date?"D":"C";break;default:N="C"}L=Math.max(L,String(R[v]).length),C=C&&C!=N?"C":N}L>250&&(L=250),N=((y[x]||{}).DBF||{}).type,N=="C"&&y[x].DBF.len>L&&(L=y[x].DBF.len),C=="B"&&N=="N"&&(C="N",P[x]=y[x].DBF.dec,L=y[x].DBF.len),j[x]=C=="C"||N=="N"?L:s[C]||0,S+=j[x],T[x]=C}var D=u.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*b),D.write_shift(2,S),x=0;x<4;++x)D.write_shift(4,0);for(D.write_shift(4,0|(+e[eI]||3)<<8),x=0,v=0;x<h.length;++x)if(h[x]!=null){var M=u.next(32),H=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);M.write_shift(1,H,"sbcs"),M.write_shift(1,T[x]=="?"?"C":T[x],"sbcs"),M.write_shift(4,v),M.write_shift(1,j[x]||s[T[x]]||0),M.write_shift(1,P[x]||0),M.write_shift(1,2),M.write_shift(4,0),M.write_shift(1,0),M.write_shift(4,0),M.write_shift(4,0),v+=j[x]||s[T[x]]||0}var W=u.next(264);for(W.write_shift(4,13),x=0;x<65;++x)W.write_shift(4,0);for(x=0;x<p.length;++x){var Z=u.next(S);for(Z.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":Z.write_shift(1,p[x][v]==null?63:p[x][v]?84:70);break;case"B":Z.write_shift(8,p[x][v]||0,"f");break;case"N":var B="0";for(typeof p[x][v]=="number"&&(B=p[x][v].toFixed(P[v]||0)),b=0;b<j[v]-B.length;++b)Z.write_shift(1,32);Z.write_shift(1,B,"sbcs");break;case"D":p[x][v]?(Z.write_shift(4,("0000"+p[x][v].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(p[x][v].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+p[x][v].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var F=String(p[x][v]!=null?p[x][v]:"").slice(0,j[v]);for(Z.write_shift(1,F,"sbcs"),b=0;b<j[v]-F.length;++b)Z.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),Jle=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ds(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(h,p){var y=t[p];return typeof y=="number"?zT(y):y},r=function(h,p,y){var x=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return x==59?h:zT(x)};t["|"]=254;function i(h,p){switch(p.type){case"base64":return s(mu(h),p);case"binary":return s(h,p);case"buffer":return s(er&&Buffer.isBuffer(h)?h.toString("binary"):_1(h),p);case"array":return s(E2(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var y=h.split(/[\n\r]+/),x=-1,v=-1,b=0,S=0,k=[],T=[],j=null,P={},C=[],N=[],L=[],R=0,D;for(+p.codepage>=0&&Xg(+p.codepage);b!==y.length;++b){R=0;var M=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,n),H=M.replace(/;;/g,"\0").split(";").map(function(V){return V.replace(/\u0000/g,";")}),W=H[0],Z;if(M.length>0)switch(W){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":H[1].charAt(0)=="P"&&T.push(M.slice(3).replace(/;;/g,";"));break;case"C":var B=!1,F=!1,Q=!1,ee=!1,te=-1,re=-1;for(S=1;S<H.length;++S)switch(H[S].charAt(0)){case"A":break;case"X":v=parseInt(H[S].slice(1))-1,F=!0;break;case"Y":for(x=parseInt(H[S].slice(1))-1,F||(v=0),D=k.length;D<=x;++D)k[D]=[];break;case"K":Z=H[S].slice(1),Z.charAt(0)==='"'?Z=Z.slice(1,Z.length-1):Z==="TRUE"?Z=!0:Z==="FALSE"?Z=!1:isNaN(cu(Z))?isNaN(Jg(Z).getDate())||(Z=to(Z)):(Z=cu(Z),j!==null&&fI(j)&&(Z=gI(Z))),B=!0;break;case"E":ee=!0;var O=Xce(H[S].slice(1),{r:x,c:v});k[x][v]=[k[x][v],O];break;case"S":Q=!0,k[x][v]=[k[x][v],"S5S"];break;case"G":break;case"R":te=parseInt(H[S].slice(1))-1;break;case"C":re=parseInt(H[S].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}if(B&&(k[x][v]&&k[x][v].length==2?k[x][v][0]=Z:k[x][v]=Z,j=null),Q){if(ee)throw new Error("SYLK shared formula cannot have own formula");var X=te>-1&&k[te][re];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");k[x][v][1]=Yce(X[1],{r:x-te,c:v-re})}break;case"F":var q=0;for(S=1;S<H.length;++S)switch(H[S].charAt(0)){case"X":v=parseInt(H[S].slice(1))-1,++q;break;case"Y":for(x=parseInt(H[S].slice(1))-1,D=k.length;D<=x;++D)k[D]=[];break;case"M":R=parseInt(H[S].slice(1))/20;break;case"F":break;case"G":break;case"P":j=T[parseInt(H[S].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=H[S].slice(1).split(" "),D=parseInt(L[0],10);D<=parseInt(L[1],10);++D)R=parseInt(L[2],10),N[D-1]=R===0?{hidden:!0}:{wch:R},fk(N[D-1]);break;case"C":v=parseInt(H[S].slice(1))-1,N[v]||(N[v]={});break;case"R":x=parseInt(H[S].slice(1))-1,C[x]||(C[x]={}),R>0?(C[x].hpt=R,C[x].hpx=rR(R)):R===0&&(C[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}q<1&&(j=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+M)}}return C.length>0&&(P["!rows"]=C),N.length>0&&(P["!cols"]=N),p&&p.sheetRows&&(k=k.slice(0,p.sheetRows)),[k,P]}function o(h,p){var y=i(h,p),x=y[0],v=y[1],b=O0(x,p);return ds(v).forEach(function(S){b[S]=v[S]}),b}function a(h,p){return Ph(o(h,p),p)}function l(h,p,y,x){var v="C;Y"+(y+1)+";X"+(x+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+pk(h.f,{r:y,c:x}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function c(h,p){p.forEach(function(y,x){var v="F;W"+(x+1)+" "+(x+1)+" ";y.hidden?v+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=kv(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=Nv(y.wpx)),typeof y.wch=="number"&&(v+=Math.round(y.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function u(h,p){p.forEach(function(y,x){var v="F;";y.hidden?v+="M0;":y.hpt?v+="M"+20*y.hpt+";":y.hpx&&(v+="M"+20*Cv(y.hpx)+";"),v.length>2&&h.push(v+"R"+(x+1))})}function d(h,p){var y=["ID;PWXL;N;E"],x=[],v=Or(h["!ref"]),b,S=Array.isArray(h),k=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),h["!cols"]&&c(y,h["!cols"]),h["!rows"]&&u(y,h["!rows"]),y.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var j=v.s.c;j<=v.e.c;++j){var P=pr({r:T,c:j});b=S?(h[T]||[])[j]:h[P],!(!b||b.v==null&&(!b.f||b.F))&&x.push(l(b,h,T,j))}return y.join(k)+k+x.join(k)+k+"E"+k}return{to_workbook:a,to_sheet:o,from_sheet:d}}(),Zle=function(){function t(s,o){switch(o.type){case"base64":return e(mu(s),o);case"binary":return e(s,o);case"buffer":return e(er&&Buffer.isBuffer(s)?s.toString("binary"):_1(s),o);case"array":return e(E2(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),l=-1,c=-1,u=0,d=[];u!==a.length;++u){if(a[u].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var h=a[u].trim().split(","),p=h[0],y=h[1];++u;for(var x=a[u]||"";(x.match(/["]/g)||[]).length&1&&u<a.length-1;)x+=`
`+a[++u];switch(x=x.trim(),+p){case-1:if(x==="BOT"){d[++l]=[],c=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?d[l][c]=!0:x==="FALSE"?d[l][c]=!1:isNaN(cu(y))?isNaN(Jg(y).getDate())?d[l][c]=y:d[l][c]=to(y):d[l][c]=cu(y),++c;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),d[l][c++]=x!==""?x:null;break}if(x==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function n(s,o){return O0(t(s,o),o)}function r(s,o){return Ph(n(s,o),o)}var i=function(){var s=function(l,c,u,d,h){l.push(c),l.push(u+","+d),l.push('"'+h.replace(/"/g,'""')+'"')},o=function(l,c,u,d){l.push(c+","+u),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],u=Or(l["!ref"]),d,h=Array.isArray(l);s(c,"TABLE",0,1,"sheetjs"),s(c,"VECTORS",0,u.e.r-u.s.r+1,""),s(c,"TUPLES",0,u.e.c-u.s.c+1,""),s(c,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(c,-1,0,"BOT");for(var y=u.s.c;y<=u.e.c;++y){var x=pr({r:p,c:y});if(d=h?(l[p]||[])[y]:l[x],!d){o(c,1,0,"");continue}switch(d.t){case"n":var v=d.w;!v&&d.v!=null&&(v=d.v),v==null?d.f&&!d.F?o(c,1,0,"="+d.f):o(c,1,0,""):o(c,0,v,"V");break;case"b":o(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=Kd(d.z||Zr[14],Po(to(d.v)))),o(c,0,d.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var b=`\r
`,S=c.join(b);return S}}();return{to_workbook:r,to_sheet:n,from_sheet:i}}(),QI=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(d,h){for(var p=d.split(`
`),y=-1,x=-1,v=0,b=[];v!==p.length;++v){var S=p[v].trim().split(":");if(S[0]==="cell"){var k=zi(S[1]);if(b.length<=k.r)for(y=b.length;y<=k.r;++y)b[y]||(b[y]=[]);switch(y=k.r,x=k.c,S[2]){case"t":b[y][x]=t(S[3]);break;case"v":b[y][x]=+S[3];break;case"vtf":var T=S[S.length-1];case"vtc":switch(S[3]){case"nl":b[y][x]=!!+S[4];break;default:b[y][x]=+S[4];break}S[2]=="vtf"&&(b[y][x]=[b[y][x],T])}}}return h&&h.sheetRows&&(b=b.slice(0,h.sheetRows)),b}function r(d,h){return O0(n(d,h),h)}function i(d,h){return Ph(r(d,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var h=[],p=[],y,x="",v=ca(d["!ref"]),b=Array.isArray(d),S=v.s.r;S<=v.e.r;++S)for(var k=v.s.c;k<=v.e.c;++k)if(x=pr({r:S,c:k}),y=b?(d[S]||[])[k]:d[x],!(!y||y.v==null||y.t==="z")){switch(p=["cell",x,"t"],y.t){case"s":case"str":p.push(e(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=e(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=e(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var T=Po(to(y.v));p[2]="vtc",p[3]="nd",p[4]=""+T,p[5]=y.w||Kd(y.z||Zr[14],T);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function u(d){return[s,o,a,o,c(d),l].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),Qle=function(){function t(u,d,h,p,y){y.raw?d[h][p]=u:u===""||(u==="TRUE"?d[h][p]=!0:u==="FALSE"?d[h][p]=!1:isNaN(cu(u))?isNaN(Jg(u).getDate())?d[h][p]=u:d[h][p]=to(u):d[h][p]=cu(u))}function e(u,d){var h=d||{},p=[];if(!u||u.length===0)return p;for(var y=u.split(/[\r\n]/),x=y.length-1;x>=0&&y[x].length===0;)--x;for(var v=10,b=0,S=0;S<=x;++S)b=y[S].indexOf(" "),b==-1?b=y[S].length:b++,v=Math.max(v,b);for(S=0;S<=x;++S){p[S]=[];var k=0;for(t(y[S].slice(0,v).trim(),p,S,k,h),k=1;k<=(y[S].length-v)/10+1;++k)t(y[S].slice(v+(k-1)*10,v+k*10).trim(),p,S,k,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var n={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var d={},h=!1,p=0,y=0;p<u.length;++p)(y=u.charCodeAt(p))==34?h=!h:!h&&y in n&&(d[y]=(d[y]||0)+1);y=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p]);if(!y.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p])}return y.sort(function(x,v){return x[0]-v[0]||r[x[1]]-r[v[1]]}),n[y.pop()[1]]||44}function s(u,d){var h=d||{},p="",y=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=i(u.slice(0,1024)):h&&h.FS?p=h.FS:p=i(u.slice(0,1024));var v=0,b=0,S=0,k=0,T=0,j=p.charCodeAt(0),P=!1,C=0,N=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var L=h.dateNF!=null?mae(h.dateNF):null;function R(){var D=u.slice(k,T),M={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)M.t="z";else if(h.raw)M.t="s",M.v=D;else if(D.trim().length===0)M.t="s",M.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(M.t="s",M.v=D.slice(2,-1).replace(/""/g,'"')):Jce(D)?(M.t="n",M.f=D.slice(1)):(M.t="s",M.v=D);else if(D=="TRUE")M.t="b",M.v=!0;else if(D=="FALSE")M.t="b",M.v=!1;else if(!isNaN(S=cu(D)))M.t="n",h.cellText!==!1&&(M.w=D),M.v=S;else if(!isNaN(Jg(D).getDate())||L&&D.match(L)){M.z=h.dateNF||Zr[14];var H=0;L&&D.match(L)&&(D=gae(D,h.dateNF,D.match(L)||[]),H=1),h.cellDates?(M.t="d",M.v=to(D,H)):(M.t="n",M.v=Po(to(D,H))),h.cellText!==!1&&(M.w=Kd(M.z,M.v instanceof Date?Po(M.v):M.v)),h.cellNF||delete M.z}else M.t="s",M.v=D;if(M.t=="z"||(h.dense?(y[v]||(y[v]=[]),y[v][b]=M):y[pr({c:b,r:v})]=M),k=T+1,N=u.charCodeAt(k),x.e.c<b&&(x.e.c=b),x.e.r<v&&(x.e.r=v),C==j)++b;else if(b=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<u.length;++T)switch(C=u.charCodeAt(T)){case 34:N===34&&(P=!P);break;case j:case 10:case 13:if(!P&&R())break e;break}return T-k>0&&R(),y["!ref"]=xi(x),y}function o(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,d):O0(e(u,d),d)}function a(u,d){var h="",p=d.type=="string"?[0,0,0,0]:dpe(u,d);switch(d.type){case"base64":h=mu(u);break;case"binary":h=u;break;case"buffer":d.codepage==65001?h=u.toString("utf8"):(d.codepage,h=er&&Buffer.isBuffer(u)?u.toString("binary"):_1(u));break;case"array":h=E2(u);break;case"string":h=u;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=ag(h.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?h=ag(h):d.type=="binary",h.slice(0,19)=="socialcalc:version:"?QI.to_sheet(d.type=="string"?h:ag(h),d):o(h,d)}function l(u,d){return Ph(a(u,d),d)}function c(u){for(var d=[],h=Or(u["!ref"]),p,y=Array.isArray(u),x=h.s.r;x<=h.e.r;++x){for(var v=[],b=h.s.c;b<=h.e.c;++b){var S=pr({r:x,c:b});if(p=y?(u[x]||[])[b]:u[S],!p||p.v==null){v.push("          ");continue}for(var k=(p.w||(gu(p),p.w)||"").slice(0,10);k.length<10;)k+=" ";v.push(k+(b===0?" ":""))}d.push(v.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:a,from_sheet:c}}(),yj=function(){function t(O,X,q){if(O){Zo(O,O.l||0);for(var V=q.Enum||te;O.l<O.length;){var ne=O.read_shift(2),ge=V[ne]||V[65535],ye=O.read_shift(2),xe=O.l+ye,Se=ge.f&&ge.f(O,ye,q);if(O.l=xe,X(Se,ge,ne))return}}}function e(O,X){switch(X.type){case"base64":return n(xl(mu(O)),X);case"binary":return n(xl(O),X);case"buffer":case"array":return n(O,X)}throw"Unsupported type "+X.type}function n(O,X){if(!O)return O;var q=X||{},V=q.dense?[]:{},ne="Sheet1",ge="",ye=0,xe={},Se=[],He=[],$e={s:{r:0,c:0},e:{r:0,c:0}},Ge=q.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)q.Enum=te,t(O,function(qe,Ze,Me){switch(Me){case 0:q.vers=qe,qe>=4096&&(q.qpro=!0);break;case 6:$e=qe;break;case 204:qe&&(ge=qe);break;case 222:ge=qe;break;case 15:case 51:q.qpro||(qe[1].v=qe[1].v.slice(1));case 13:case 14:case 16:Me==14&&(qe[2]&112)==112&&(qe[2]&15)>1&&(qe[2]&15)<15&&(qe[1].z=q.dateNF||Zr[14],q.cellDates&&(qe[1].t="d",qe[1].v=gI(qe[1].v))),q.qpro&&qe[3]>ye&&(V["!ref"]=xi($e),xe[ne]=V,Se.push(ne),V=q.dense?[]:{},$e={s:{r:0,c:0},e:{r:0,c:0}},ye=qe[3],ne=ge||"Sheet"+(ye+1),ge="");var ke=q.dense?(V[qe[0].r]||[])[qe[0].c]:V[pr(qe[0])];if(ke){ke.t=qe[1].t,ke.v=qe[1].v,qe[1].z!=null&&(ke.z=qe[1].z),qe[1].f!=null&&(ke.f=qe[1].f);break}q.dense?(V[qe[0].r]||(V[qe[0].r]=[]),V[qe[0].r][qe[0].c]=qe[1]):V[pr(qe[0])]=qe[1];break}},q);else if(O[2]==26||O[2]==14)q.Enum=re,O[2]==14&&(q.qpro=!0,O.l=0),t(O,function(qe,Ze,Me){switch(Me){case 204:ne=qe;break;case 22:qe[1].v=qe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(qe[3]>ye&&(V["!ref"]=xi($e),xe[ne]=V,Se.push(ne),V=q.dense?[]:{},$e={s:{r:0,c:0},e:{r:0,c:0}},ye=qe[3],ne="Sheet"+(ye+1)),Ge>0&&qe[0].r>=Ge)break;q.dense?(V[qe[0].r]||(V[qe[0].r]=[]),V[qe[0].r][qe[0].c]=qe[1]):V[pr(qe[0])]=qe[1],$e.e.c<qe[0].c&&($e.e.c=qe[0].c),$e.e.r<qe[0].r&&($e.e.r=qe[0].r);break;case 27:qe[14e3]&&(He[qe[14e3][0]]=qe[14e3][1]);break;case 1537:He[qe[0]]=qe[1],qe[0]==ye&&(ne=qe[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(V["!ref"]=xi($e),xe[ge||ne]=V,Se.push(ge||ne),!He.length)return{SheetNames:Se,Sheets:xe};for(var ze={},Ne=[],pe=0;pe<He.length;++pe)xe[Se[pe]]?(Ne.push(He[pe]||Se[pe]),ze[He[pe]]=xe[He[pe]]||xe[Se[pe]]):(Ne.push(He[pe]),ze[He[pe]]={"!ref":"A1"});return{SheetNames:Ne,Sheets:ze}}function r(O,X){var q=X||{};if(+q.codepage>=0&&Xg(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var V=To(),ne=Or(O["!ref"]),ge=Array.isArray(O),ye=[];_t(V,0,s(1030)),_t(V,6,l(ne));for(var xe=Math.min(ne.e.r,8191),Se=ne.s.r;Se<=xe;++Se)for(var He=us(Se),$e=ne.s.c;$e<=ne.e.c;++$e){Se===ne.s.r&&(ye[$e]=Is($e));var Ge=ye[$e]+He,ze=ge?(O[Se]||[])[$e]:O[Ge];if(!(!ze||ze.t=="z"))if(ze.t=="n")(ze.v|0)==ze.v&&ze.v>=-32768&&ze.v<=32767?_t(V,13,p(Se,$e,ze.v)):_t(V,14,x(Se,$e,ze.v));else{var Ne=gu(ze);_t(V,15,d(Se,$e,Ne.slice(0,239)))}}return _t(V,1),V.end()}function i(O,X){var q=X||{};if(+q.codepage>=0&&Xg(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var V=To();_t(V,0,o(O));for(var ne=0,ge=0;ne<O.SheetNames.length;++ne)(O.Sheets[O.SheetNames[ne]]||{})["!ref"]&&_t(V,27,ee(O.SheetNames[ne],ge++));var ye=0;for(ne=0;ne<O.SheetNames.length;++ne){var xe=O.Sheets[O.SheetNames[ne]];if(!(!xe||!xe["!ref"])){for(var Se=Or(xe["!ref"]),He=Array.isArray(xe),$e=[],Ge=Math.min(Se.e.r,8191),ze=Se.s.r;ze<=Ge;++ze)for(var Ne=us(ze),pe=Se.s.c;pe<=Se.e.c;++pe){ze===Se.s.r&&($e[pe]=Is(pe));var qe=$e[pe]+Ne,Ze=He?(xe[ze]||[])[pe]:xe[qe];if(!(!Ze||Ze.t=="z"))if(Ze.t=="n")_t(V,23,R(ze,pe,ye,Ze.v));else{var Me=gu(Ze);_t(V,22,C(ze,pe,ye,Me.slice(0,239)))}}++ye}}return _t(V,1),V.end()}function s(O){var X=nt(2);return X.write_shift(2,O),X}function o(O){var X=nt(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var q=0,V=0,ne=0,ge=0;ge<O.SheetNames.length;++ge){var ye=O.SheetNames[ge],xe=O.Sheets[ye];if(!(!xe||!xe["!ref"])){++ne;var Se=ca(xe["!ref"]);q<Se.e.r&&(q=Se.e.r),V<Se.e.c&&(V=Se.e.c)}}return q>8191&&(q=8191),X.write_shift(2,q),X.write_shift(1,ne),X.write_shift(1,V),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function a(O,X,q){var V={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&q.qpro?(V.s.c=O.read_shift(1),O.l++,V.s.r=O.read_shift(2),V.e.c=O.read_shift(1),O.l++,V.e.r=O.read_shift(2),V):(V.s.c=O.read_shift(2),V.s.r=O.read_shift(2),X==12&&q.qpro&&(O.l+=2),V.e.c=O.read_shift(2),V.e.r=O.read_shift(2),X==12&&q.qpro&&(O.l+=2),V.s.c==65535&&(V.s.c=V.e.c=V.s.r=V.e.r=0),V)}function l(O){var X=nt(8);return X.write_shift(2,O.s.c),X.write_shift(2,O.s.r),X.write_shift(2,O.e.c),X.write_shift(2,O.e.r),X}function c(O,X,q){var V=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(V[0].c=O.read_shift(1),V[3]=O.read_shift(1),V[0].r=O.read_shift(2),O.l+=2):(V[2]=O.read_shift(1),V[0].c=O.read_shift(2),V[0].r=O.read_shift(2)),V}function u(O,X,q){var V=O.l+X,ne=c(O,X,q);if(ne[1].t="s",q.vers==20768){O.l++;var ge=O.read_shift(1);return ne[1].v=O.read_shift(ge,"utf8"),ne}return q.qpro&&O.l++,ne[1].v=O.read_shift(V-O.l,"cstr"),ne}function d(O,X,q){var V=nt(7+q.length);V.write_shift(1,255),V.write_shift(2,X),V.write_shift(2,O),V.write_shift(1,39);for(var ne=0;ne<V.length;++ne){var ge=q.charCodeAt(ne);V.write_shift(1,ge>=128?95:ge)}return V.write_shift(1,0),V}function h(O,X,q){var V=c(O,X,q);return V[1].v=O.read_shift(2,"i"),V}function p(O,X,q){var V=nt(7);return V.write_shift(1,255),V.write_shift(2,X),V.write_shift(2,O),V.write_shift(2,q,"i"),V}function y(O,X,q){var V=c(O,X,q);return V[1].v=O.read_shift(8,"f"),V}function x(O,X,q){var V=nt(13);return V.write_shift(1,255),V.write_shift(2,X),V.write_shift(2,O),V.write_shift(8,q,"f"),V}function v(O,X,q){var V=O.l+X,ne=c(O,X,q);if(ne[1].v=O.read_shift(8,"f"),q.qpro)O.l=V;else{var ge=O.read_shift(2);T(O.slice(O.l,O.l+ge),ne),O.l+=ge}return ne}function b(O,X,q){var V=X&32768;return X&=-32769,X=(V?O:0)+(X>=8192?X-16384:X),(V?"":"$")+(q?Is(X):us(X))}var S={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},k=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(O,X){Zo(O,0);for(var q=[],V=0,ne="",ge="",ye="",xe="";O.l<O.length;){var Se=O[O.l++];switch(Se){case 0:q.push(O.read_shift(8,"f"));break;case 1:ge=b(X[0].c,O.read_shift(2),!0),ne=b(X[0].r,O.read_shift(2),!1),q.push(ge+ne);break;case 2:{var He=b(X[0].c,O.read_shift(2),!0),$e=b(X[0].r,O.read_shift(2),!1);ge=b(X[0].c,O.read_shift(2),!0),ne=b(X[0].r,O.read_shift(2),!1),q.push(He+$e+":"+ge+ne)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(O.read_shift(2));break;case 6:{for(var Ge="";Se=O[O.l++];)Ge+=String.fromCharCode(Se);q.push('"'+Ge.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:xe=q.pop(),ye=q.pop(),q.push(["AND","OR"][Se-20]+"("+ye+","+xe+")");break;default:if(Se<32&&k[Se])xe=q.pop(),ye=q.pop(),q.push(ye+k[Se]+xe);else if(S[Se]){if(V=S[Se][1],V==69&&(V=O[O.l++]),V>q.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+q.join("|")+"|");return}var ze=q.slice(-V);q.length-=V,q.push(S[Se][0]+"("+ze.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}q.length==1?X[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function j(O){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=O.read_shift(2),X[3]=O[O.l++],X[0].c=O[O.l++],X}function P(O,X){var q=j(O);return q[1].t="s",q[1].v=O.read_shift(X-4,"cstr"),q}function C(O,X,q,V){var ne=nt(6+V.length);ne.write_shift(2,O),ne.write_shift(1,q),ne.write_shift(1,X),ne.write_shift(1,39);for(var ge=0;ge<V.length;++ge){var ye=V.charCodeAt(ge);ne.write_shift(1,ye>=128?95:ye)}return ne.write_shift(1,0),ne}function N(O,X){var q=j(O);q[1].v=O.read_shift(2);var V=q[1].v>>1;if(q[1].v&1)switch(V&7){case 0:V=(V>>3)*5e3;break;case 1:V=(V>>3)*500;break;case 2:V=(V>>3)/20;break;case 3:V=(V>>3)/200;break;case 4:V=(V>>3)/2e3;break;case 5:V=(V>>3)/2e4;break;case 6:V=(V>>3)/16;break;case 7:V=(V>>3)/64;break}return q[1].v=V,q}function L(O,X){var q=j(O),V=O.read_shift(4),ne=O.read_shift(4),ge=O.read_shift(2);if(ge==65535)return V===0&&ne===3221225472?(q[1].t="e",q[1].v=15):V===0&&ne===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var ye=ge&32768;return ge=(ge&32767)-16446,q[1].v=(1-ye*2)*(ne*Math.pow(2,ge+32)+V*Math.pow(2,ge)),q}function R(O,X,q,V){var ne=nt(14);if(ne.write_shift(2,O),ne.write_shift(1,q),ne.write_shift(1,X),V==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var ge=0,ye=0,xe=0,Se=0;return V<0&&(ge=1,V=-V),ye=Math.log2(V)|0,V/=Math.pow(2,ye-31),Se=V>>>0,(Se&2147483648)==0&&(V/=2,++ye,Se=V>>>0),V-=Se,Se|=2147483648,Se>>>=0,V*=Math.pow(2,32),xe=V>>>0,ne.write_shift(4,xe),ne.write_shift(4,Se),ye+=16383+(ge?32768:0),ne.write_shift(2,ye),ne}function D(O,X){var q=L(O);return O.l+=X-14,q}function M(O,X){var q=j(O),V=O.read_shift(4);return q[1].v=V>>6,q}function H(O,X){var q=j(O),V=O.read_shift(8,"f");return q[1].v=V,q}function W(O,X){var q=H(O);return O.l+=X-10,q}function Z(O,X){return O[O.l+X-1]==0?O.read_shift(X,"cstr"):""}function B(O,X){var q=O[O.l++];q>X-1&&(q=X-1);for(var V="";V.length<q;)V+=String.fromCharCode(O[O.l++]);return V}function F(O,X,q){if(!(!q.qpro||X<21)){var V=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var ne=O.read_shift(X-21,"cstr");return[V,ne]}}function Q(O,X){for(var q={},V=O.l+X;O.l<V;){var ne=O.read_shift(2);if(ne==14e3){for(q[ne]=[0,""],q[ne][0]=O.read_shift(2);O[O.l];)q[ne][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return q}function ee(O,X){var q=nt(5+O.length);q.write_shift(2,14e3),q.write_shift(2,X);for(var V=0;V<O.length;++V){var ne=O.charCodeAt(V);q[q.l++]=ne>127?95:ne}return q[q.l++]=0,q}var te={0:{n:"BOF",f:KI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:y},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Z},222:{n:"SHEETNAMELP",f:B},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:M},38:{n:"??"},39:{n:"NUMBER27",f:H},40:{n:"FORMULA28",f:W},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Z},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:F},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}(),ece=/^\s|\s$|[\t\n\r]/;function eR(t,e){if(!e.bookSST)return"";var n=[vi];n[n.length]=bt("sst",null,{xmlns:D0[0],count:t.Count,uniqueCount:t.Unique});for(var r=0;r!=t.length;++r)if(t[r]!=null){var i=t[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(ece)&&(s+=' xml:space="preserve"'),s+=">"+hr(i.t)+"</t>"),s+="</si>",n[n.length]=s}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function tce(t){return[t.read_shift(4),t.read_shift(4)]}function nce(t,e){return e||(e=nt(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var rce=Gae;function ice(t){var e=To();at(e,159,nce(t));for(var n=0;n<t.length;++n)at(e,19,rce(t[n]));return at(e,160),e.end()}function sce(t){for(var e=[],n=t.split(""),r=0;r<n.length;++r)e[r]=n[r].charCodeAt(0);return e}function tR(t){var e=0,n,r=sce(t),i=r.length+1,s,o,a,l,c;for(n=_h(i),n[0]=r.length,s=1;s!=i;++s)n[s]=r[s-1];for(s=i-1;s>=0;--s)o=n[s],a=(e&16384)===0?0:1,l=e<<1&32767,c=a|l,e=c^o;return e^52811}var oce=function(){function t(i,s){switch(s.type){case"base64":return e(mu(i),s);case"binary":return e(i,s);case"buffer":return e(er&&Buffer.isBuffer(i)?i.toString("binary"):_1(i),s);case"array":return e(E2(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},l=i.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(u,d){Array.isArray(a)&&(a[d]=[]);for(var h=/\\\w+\b/g,p=0,y,x=-1;y=h.exec(u);){switch(y[0]){case"\\cell":var v=u.slice(p,h.lastIndex-y[0].length);if(v[0]==" "&&(v=v.slice(1)),++x,v.length){var b={v,t:"s"};Array.isArray(a)?a[d][x]=b:a[pr({r:d,c:x})]=b}break}p=h.lastIndex}x>c.e.c&&(c.e.c=x)}),a["!ref"]=xi(c),a}function n(i,s){return Ph(t(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=Or(i["!ref"]),a,l=Array.isArray(i),c=o.s.r;c<=o.e.r;++c){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var d=pr({r:c,c:u});a=l?(i[c]||[])[u]:i[d],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(gu(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:n,to_sheet:t,from_sheet:r}}();function xj(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}var ace=6,uu=ace;function kv(t){return Math.floor((t+Math.round(128/uu)/256)*uu)}function Nv(t){return Math.floor((t-5)/uu*100+.5)/100}function M_(t){return Math.round((t*uu+5)/uu*256)/256}function fk(t){t.width?(t.wpx=kv(t.width),t.wch=Nv(t.wpx),t.MDW=uu):t.wpx?(t.wch=Nv(t.wpx),t.width=M_(t.wch),t.MDW=uu):typeof t.wch=="number"&&(t.width=M_(t.wch),t.wpx=kv(t.width),t.MDW=uu),t.customWidth&&delete t.customWidth}var lce=96,nR=lce;function Cv(t){return t*96/nR}function rR(t){return t*nR/96}function cce(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var r=n[0];r<=n[1];++r)t[r]!=null&&(e[e.length]=bt("numFmt",null,{numFmtId:r,formatCode:hr(t[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=bt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function uce(t){var e=[];return e[e.length]=bt("cellXfs",null),t.forEach(function(n){e[e.length]=bt("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=bt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function iR(t,e){var n=[vi,bt("styleSheet",null,{xmlns:D0[0],"xmlns:vt":Ri.vt})],r;return t.SSF&&(r=cce(t.SSF))!=null&&(n[n.length]=r),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=uce(e.cellXfs))&&(n[n.length]=r),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function dce(t,e){var n=t.read_shift(2),r=Rs(t);return[n,r]}function fce(t,e,n){n||(n=nt(6+4*e.length)),n.write_shift(2,t),Bi(e,n);var r=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),r}function hce(t,e,n){var r={};r.sz=t.read_shift(2)/20;var i=ele(t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=t.read_shift(2);switch(s===700&&(r.bold=1),t.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=t.read_shift(1);o!=0&&(r.underline=o);var a=t.read_shift(1);a>0&&(r.family=a);var l=t.read_shift(1);switch(l>0&&(r.charset=l),t.l++,r.color=Qae(t),t.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Rs(t),r}function pce(t,e){e||(e=nt(25+4*32)),e.write_shift(2,t.sz*20),tle(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),_v(t.color,e);var r=0;return r=2,e.write_shift(1,r),Bi(t.name,e),e.length>e.l?e.slice(0,e.l):e}var mce=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Qb,gce=yc;function vj(t,e){e||(e=nt(4*3+8*7+16*1)),Qb||(Qb=ek(mce));var n=Qb[t.patternType];n==null&&(n=40),e.write_shift(4,n);var r=0;if(n!=40)for(_v({auto:1},e),_v({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function yce(t,e){var n=t.l+e,r=t.read_shift(2),i=t.read_shift(2);return t.l=n,{ixfe:r,numFmtId:i}}function sR(t,e,n){n||(n=nt(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var r=0;return n.write_shift(1,r),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function vm(t,e){return e||(e=nt(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var xce=yc;function vce(t,e){return e||(e=nt(51)),e.write_shift(1,0),vm(null,e),vm(null,e),vm(null,e),vm(null,e),vm(null,e),e.length>e.l?e.slice(0,e.l):e}function wce(t,e){return e||(e=nt(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),bv(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function bce(t,e,n){var r=nt(2052);return r.write_shift(4,t),bv(e,r),bv(n,r),r.length>r.l?r.slice(0,r.l):r}function _ce(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++n}),n!=0&&(at(t,615,Sl(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&at(t,44,fce(i,e[i]))}),at(t,616))}}function Sce(t){var e=1;at(t,611,Sl(e)),at(t,43,pce({sz:12,color:{theme:1},name:"Calibri",family:2})),at(t,612)}function kce(t){var e=2;at(t,603,Sl(e)),at(t,45,vj({patternType:"none"})),at(t,45,vj({patternType:"gray125"})),at(t,604)}function Nce(t){var e=1;at(t,613,Sl(e)),at(t,46,vce()),at(t,614)}function Cce(t){var e=1;at(t,626,Sl(e)),at(t,47,sR({numFmtId:0},65535)),at(t,627)}function Ece(t,e){at(t,617,Sl(e.length)),e.forEach(function(n){at(t,47,sR(n,0))}),at(t,618)}function Ace(t){var e=1;at(t,619,Sl(e)),at(t,48,wce({xfId:0,name:"Normal"})),at(t,620)}function Tce(t){var e=0;at(t,505,Sl(e)),at(t,506)}function jce(t){var e=0;at(t,508,bce(e,"TableStyleMedium9","PivotStyleMedium4")),at(t,509)}function Pce(t,e){var n=To();return at(n,278),_ce(n,t.SSF),Sce(n),kce(n),Nce(n),Cce(n),Ece(n,e.cellXfs),Ace(n),Tce(n),jce(n),at(n,279),n.end()}function oR(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[vi];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface=" "/>',n[n.length]='<a:font script="Hang" typeface=" "/>',n[n.length]='<a:font script="Hans" typeface=""/>',n[n.length]='<a:font script="Hant" typeface=""/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function Dce(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Rs(t)}}function Oce(t){var e=nt(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Bi(t.name,e),e.slice(0,e.l)}function Lce(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function Mce(t){var e=nt(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function Ice(t,e){var n=nt(8+2*e.length);return n.write_shift(4,t),Bi(e,n),n.slice(0,n.l)}function Rce(t){return t.l+=4,t.read_shift(4)!=0}function Fce(t,e){var n=nt(8);return n.write_shift(4,t),n.write_shift(4,1),n}function zce(){var t=To();return at(t,332),at(t,334,Sl(1)),at(t,335,Oce({name:"XLDAPR",version:12e4,flags:3496657072})),at(t,336),at(t,339,Ice(1,"XLDAPR")),at(t,52),at(t,35,Sl(514)),at(t,4096,Sl(0)),at(t,4097,Ma(1)),at(t,36),at(t,53),at(t,340),at(t,337,Fce(1)),at(t,51,Mce([[1,0]])),at(t,338),at(t,333),t.end()}function aR(){var t=[vi];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Bce(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=pr(n);var r=t.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Hp=1024;function lR(t,e){for(var n=[21600,21600],r=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),i=[bt("xml",null,{"xmlns:v":Qo.v,"xmlns:o":Qo.o,"xmlns:x":Qo.x,"xmlns:mv":Qo.mv}).replace(/\/>/,">"),bt("o:shapelayout",bt("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),bt("v:shapetype",[bt("v:stroke",null,{joinstyle:"miter"}),bt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:r})];Hp<t*1e3;)Hp+=1e3;return e.forEach(function(s){var o=zi(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var l=a.type=="gradient"?bt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=bt("v:fill",l,a),u={on:"t",obscured:"t"};++Hp,i=i.concat(["<v:shape"+Qg({id:"_x0000_s"+Hp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,bt("v:shadow",null,u),bt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ls("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),ls("x:AutoFill","False"),ls("x:Row",String(o.r)),ls("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function cR(t){var e=[vi,bt("comments",null,{xmlns:D0[0]})],n=[];return e.push("<authors>"),t.forEach(function(r){r[1].forEach(function(i){var s=hr(i.a);n.indexOf(s)==-1&&(n.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&n.indexOf("tc="+i.ID)==-1&&(n.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=n.indexOf("tc="+r[1][0].ID):r[1].forEach(function(l){l.a&&(i=n.indexOf(hr(l.a))),s.push(l.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ls("t",hr(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(ls("t",hr(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Uce(t,e,n){var r=[vi,bt("ThreadedComments",null,{xmlns:Ri.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var l={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};a==0?s=l.id:l.parentId=s,o.ID=l.id,o.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(bt("threadedComment",ls("text",o.t||""),l))})}),r.push("</ThreadedComments>"),r.join("")}function $ce(t){var e=[vi,bt("personList",null,{xmlns:Ri.TCMNT,"xmlns:x":D0[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,r){e.push(bt("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Wce(t){var e={};e.iauthor=t.read_shift(4);var n=Mh(t);return e.rfx=n.s,e.ref=pr(n.s),t.l+=16,e}function Vce(t,e){return e==null&&(e=nt(36)),e.write_shift(4,t[1].iauthor),L0(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Hce=Rs;function qce(t){return Bi(t.slice(0,54))}function Gce(t){var e=To(),n=[];return at(e,628),at(e,630),t.forEach(function(r){r[1].forEach(function(i){n.indexOf(i.a)>-1||(n.push(i.a.slice(0,54)),at(e,632,qce(i.a)))})}),at(e,631),at(e,633),t.forEach(function(r){r[1].forEach(function(i){i.iauthor=n.indexOf(i.a);var s={s:zi(r[0]),e:zi(r[0])};at(e,635,Vce([s,i])),i.t&&i.t.length>0&&at(e,637,Xae(i)),at(e,636),delete i.iauthor})}),at(e,634),at(e,629),e.end()}function Kce(t,e){e.FullPaths.forEach(function(n,r){if(r!=0){var i=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&mr.utils.cfb_add(t,i,e.FileIndex[r].content)}})}var uR=["xlsb","xlsm","xlam","biff8","xla"],Xce=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(r,i,s,o){var a=!1,l=!1;s.length==0?l=!0:s.charAt(0)=="["&&(l=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var c=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,l?c+=e.r:--c,i+(a?"":"$")+Is(u)+(l?"":"$")+us(c)}return function(i,s){return e=s,i.replace(t,n)}}(),hk=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,pk=function(){return function(e,n){return e.replace(hk,function(r,i,s,o,a,l){var c=ak(o)-(s?0:n.c),u=ok(l)-(a?0:n.r),d=u==0?"":a?u+1:"["+u+"]",h=c==0?"":s?c+1:"["+c+"]";return i+"R"+d+"C"+h})}}();function Yce(t,e){return t.replace(hk,function(n,r,i,s,o,a){return r+(i=="$"?i+s:Is(ak(s)+e.c))+(o=="$"?o+a:us(ok(a)+e.r))})}function Jce(t){return t.length!=1}function mi(t){t.l+=1}function Xd(t,e){var n=t.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function dR(t,e,n){var r=2;if(n){if(n.biff>=2&&n.biff<=5)return fR(t);n.biff==12&&(r=4)}var i=t.read_shift(r),s=t.read_shift(r),o=Xd(t),a=Xd(t);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function fR(t){var e=Xd(t),n=Xd(t),r=t.read_shift(1),i=t.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:n[0],c:i,cRel:n[1],rRel:n[2]}}}function Zce(t,e,n){if(n.biff<8)return fR(t);var r=t.read_shift(n.biff==12?4:2),i=t.read_shift(n.biff==12?4:2),s=Xd(t),o=Xd(t);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function hR(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return Qce(t);var r=t.read_shift(n&&n.biff==12?4:2),i=Xd(t);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function Qce(t){var e=Xd(t),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function eue(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function tue(t,e,n){var r=n&&n.biff?n.biff:8;if(r>=2&&r<=5)return nue(t);var i=t.read_shift(r>=12?4:2),s=t.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function nue(t){var e=t.read_shift(2),n=t.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:i,rRel:r}}function rue(t,e,n){var r=(t[t.l++]&96)>>5,i=dR(t,n.biff>=2&&n.biff<=5?6:8,n);return[r,i]}function iue(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2,"i"),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}var o=dR(t,s,n);return[r,i,o]}function sue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[r]}function oue(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=8;if(n)switch(n.biff){case 5:t.l+=12,s=6;break;case 12:s=12;break}return t.l+=s,[r,i]}function aue(t,e,n){var r=(t[t.l++]&96)>>5,i=Zce(t,e-1,n);return[r,i]}function lue(t,e,n){var r=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[r]}function wj(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function cue(t,e,n){t.l+=2;for(var r=t.read_shift(n&&n.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(t.read_shift(n&&n.biff==2?1:2));return i}function uue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function due(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=2,[r,t.read_shift(n&&n.biff==2?1:2)]}function fue(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function hue(t,e,n){var r=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[r]}function pR(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function pue(t){return t.read_shift(2),pR(t)}function mue(t){return t.read_shift(2),pR(t)}function gue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=hR(t,0,n);return[r,i]}function yue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=tue(t,0,n);return[r,i]}function xue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var s=hR(t,0,n);return[r,i,s]}function vue(t,e,n){var r=(t[t.l]&96)>>5;t.l+=1;var i=t.read_shift(n&&n.biff<=3?1:2);return[vde[i],yR[i],r]}function wue(t,e,n){var r=t[t.l++],i=t.read_shift(1),s=n&&n.biff<=3?[r==88?-1:0,t.read_shift(1)]:bue(t);return[i,(s[0]===0?yR:xde)[s[1]]]}function bue(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function _ue(t,e,n){t.l+=n&&n.biff==2?3:4}function Sue(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var r=t.read_shift(2),i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function kue(t){return t.l++,N1[t.read_shift(1)]}function Nue(t){return t.l++,t.read_shift(2)}function Cue(t){return t.l++,t.read_shift(1)!==0}function Eue(t){return t.l++,M0(t)}function Aue(t,e,n){return t.l++,YI(t,e-1,n)}function Tue(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=xle(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=N1[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=M0(t);break;case 2:n[1]=_le(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function jue(t,e,n){for(var r=t.read_shift(n.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((n.biff==12?Mh:Nle)(t));return i}function Pue(t,e,n){var r=0,i=0;n.biff==12?(r=t.read_shift(4),i=t.read_shift(4)):(i=1+t.read_shift(1),r=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Tue(t,n.biff);return o}function Due(t,e,n){var r=t.read_shift(1)>>>5&3,i=!n||n.biff>=8?4:2,s=t.read_shift(i);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[r,0,s]}function Oue(t,e,n){if(n.biff==5)return Lue(t);var r=t.read_shift(1)>>>5&3,i=t.read_shift(2),s=t.read_shift(4);return[r,i,s]}function Lue(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var r=t.read_shift(2);return t.l+=12,[e,n,r]}function Mue(t,e,n){var r=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Iue(t,e,n){var r=t.read_shift(1)>>>5&3,i=t.read_shift(n&&n.biff==2?1:2);return[r,i]}function Rue(t,e,n){var r=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[r]}function Fue(t,e,n){var r=(t[t.l++]&96)>>5,i=t.read_shift(2),s=4;if(n)switch(n.biff){case 5:s=15;break;case 12:s=6;break}return t.l+=s,[r,i]}var zue=yc,Bue=yc,Uue=yc;function C1(t,e,n){return t.l+=2,[eue(t)]}function mk(t){return t.l+=6,[]}var $ue=C1,Wue=mk,Vue=mk,Hue=C1;function mR(t){return t.l+=2,[KI(t),t.read_shift(2)&1]}var que=C1,Gue=mR,Kue=mk,Xue=C1,Yue=C1,Jue=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zue(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),r=t.read_shift(4),i=t.read_shift(2),s=t.read_shift(2),o=Jue[n>>2&31];return{ixti:e,coltype:n&3,rt:o,idx:r,c:i,C:s}}function Que(t){return t.l+=2,[t.read_shift(4)]}function ede(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function tde(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function nde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function rde(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function ide(t){return t.l+=4,[0,0]}var bj={1:{n:"PtgExp",f:Sue},2:{n:"PtgTbl",f:Uue},3:{n:"PtgAdd",f:mi},4:{n:"PtgSub",f:mi},5:{n:"PtgMul",f:mi},6:{n:"PtgDiv",f:mi},7:{n:"PtgPower",f:mi},8:{n:"PtgConcat",f:mi},9:{n:"PtgLt",f:mi},10:{n:"PtgLe",f:mi},11:{n:"PtgEq",f:mi},12:{n:"PtgGe",f:mi},13:{n:"PtgGt",f:mi},14:{n:"PtgNe",f:mi},15:{n:"PtgIsect",f:mi},16:{n:"PtgUnion",f:mi},17:{n:"PtgRange",f:mi},18:{n:"PtgUplus",f:mi},19:{n:"PtgUminus",f:mi},20:{n:"PtgPercent",f:mi},21:{n:"PtgParen",f:mi},22:{n:"PtgMissArg",f:mi},23:{n:"PtgStr",f:Aue},26:{n:"PtgSheet",f:ede},27:{n:"PtgEndSheet",f:tde},28:{n:"PtgErr",f:kue},29:{n:"PtgBool",f:Cue},30:{n:"PtgInt",f:Nue},31:{n:"PtgNum",f:Eue},32:{n:"PtgArray",f:lue},33:{n:"PtgFunc",f:vue},34:{n:"PtgFuncVar",f:wue},35:{n:"PtgName",f:Due},36:{n:"PtgRef",f:gue},37:{n:"PtgArea",f:rue},38:{n:"PtgMemArea",f:Mue},39:{n:"PtgMemErr",f:zue},40:{n:"PtgMemNoMem",f:Bue},41:{n:"PtgMemFunc",f:Iue},42:{n:"PtgRefErr",f:Rue},43:{n:"PtgAreaErr",f:sue},44:{n:"PtgRefN",f:yue},45:{n:"PtgAreaN",f:aue},46:{n:"PtgMemAreaN",f:nde},47:{n:"PtgMemNoMemN",f:rde},57:{n:"PtgNameX",f:Oue},58:{n:"PtgRef3d",f:xue},59:{n:"PtgArea3d",f:iue},60:{n:"PtgRefErr3d",f:Fue},61:{n:"PtgAreaErr3d",f:oue},255:{}},sde={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ode={1:{n:"PtgElfLel",f:mR},2:{n:"PtgElfRw",f:Xue},3:{n:"PtgElfCol",f:$ue},6:{n:"PtgElfRwV",f:Yue},7:{n:"PtgElfColV",f:Hue},10:{n:"PtgElfRadical",f:que},11:{n:"PtgElfRadicalS",f:Kue},13:{n:"PtgElfColS",f:Wue},15:{n:"PtgElfColSV",f:Vue},16:{n:"PtgElfRadicalLel",f:Gue},25:{n:"PtgList",f:Zue},29:{n:"PtgSxName",f:Que},255:{}},ade={0:{n:"PtgAttrNoop",f:ide},1:{n:"PtgAttrSemi",f:hue},2:{n:"PtgAttrIf",f:due},4:{n:"PtgAttrChoose",f:cue},8:{n:"PtgAttrGoto",f:uue},16:{n:"PtgAttrSum",f:_ue},32:{n:"PtgAttrBaxcel",f:wj},33:{n:"PtgAttrBaxcel",f:wj},64:{n:"PtgAttrSpace",f:pue},65:{n:"PtgAttrSpaceSemi",f:mue},128:{n:"PtgAttrIfError",f:fue},255:{}};function lde(t,e,n,r){if(r.biff<8)return yc(t,e);for(var i=t.l+e,s=[],o=0;o!==n.length;++o)switch(n[o][0]){case"PtgArray":n[o][1]=Pue(t,0,r),s.push(n[o][1]);break;case"PtgMemArea":n[o][2]=jue(t,n[o][1],r),s.push(n[o][2]);break;case"PtgExp":r&&r.biff==12&&(n[o][1][1]=t.read_shift(4),s.push(n[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[o][0]}return e=i-t.l,e!==0&&s.push(yc(t,e)),s}function cde(t,e,n){for(var r=t.l+e,i,s,o=[];r!=t.l;)e=r-t.l,s=t[t.l],i=bj[s]||bj[sde[s]],(s===24||s===25)&&(i=(s===24?ode:ade)[t[t.l+1]]),!i||!i.f?yc(t,e):o.push([i.n,i.f(t,e,n)]);return o}function ude(t){for(var e=[],n=0;n<t.length;++n){for(var r=t[n],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var dde={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function fde(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function gR(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var r=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(n.biff>8)switch(t[r[0]][0]){case 357:return i=r[1]==-1?"#REF":t.SheetNames[r[1]],r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[r[0]][0];case 355:default:return"SH33TJSSRC"+t[r[0]][0]}switch(t[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":t.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+t.SheetNames[r[2]];case 14849:return t[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return t[r[0]][0][3]?(i=r[1]==-1?"#REF":t[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+t[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function _j(t,e,n){var r=gR(t,e,n);return r=="#REF"?r:fde(r,n)}function m0(t,e,n,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0}},a=[],l,c,u,d=0,h=0,p,y="";if(!t[0]||!t[0][0])return"";for(var x=-1,v="",b=0,S=t[0].length;b<S;++b){var k=t[0][b];switch(k[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=a.pop(),c=a.pop(),x>=0){switch(t[0][x][1][0]){case 0:v=Yr(" ",t[0][x][1][1]);break;case 1:v=Yr("\r",t[0][x][1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}c=c+v,x=-1}a.push(c+dde[k[0]]+l);break;case"PtgIsect":l=a.pop(),c=a.pop(),a.push(c+" "+l);break;case"PtgUnion":l=a.pop(),c=a.pop(),a.push(c+","+l);break;case"PtgRange":l=a.pop(),c=a.pop(),a.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=cg(k[1][1],o,i),a.push(ug(u,s));break;case"PtgRefN":u=n?cg(k[1][1],n,i):k[1][1],a.push(ug(u,s));break;case"PtgRef3d":d=k[1][1],u=cg(k[1][2],o,i),y=_j(r,d,i),a.push(y+"!"+ug(u,s));break;case"PtgFunc":case"PtgFuncVar":var T=k[1][0],j=k[1][1];T||(T=0),T&=127;var P=T==0?[]:a.slice(-T);a.length-=T,j==="User"&&(j=P.shift()),a.push(j+"("+P.join(",")+")");break;case"PtgBool":a.push(k[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(k[1]);break;case"PtgNum":a.push(String(k[1]));break;case"PtgStr":a.push('"'+k[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(k[1]);break;case"PtgAreaN":p=oj(k[1][1],n?{s:n}:o,i),a.push(Jb(p,i));break;case"PtgArea":p=oj(k[1][1],o,i),a.push(Jb(p,i));break;case"PtgArea3d":d=k[1][1],p=k[1][2],y=_j(r,d,i),a.push(y+"!"+Jb(p,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=k[1][2];var C=(r.names||[])[h-1]||(r[0]||[])[h],N=C?C.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!i.xlfn&&(N=N.slice(6)),a.push(N);break;case"PtgNameX":var L=k[1][1];h=k[1][2];var R;if(i.biff<=5)L<0&&(L=-L),r[L]&&(R=r[L][h]);else{var D="";if(((r[L]||[])[0]||[])[0]==14849||(((r[L]||[])[0]||[])[0]==1025?r[L][h]&&r[L][h].itab>0&&(D=r.SheetNames[r[L][h].itab-1]+"!"):D=r.SheetNames[h-1]+"!"),r[L]&&r[L][h])D+=r[L][h].Name;else if(r[0]&&r[0][h])D+=r[0][h].Name;else{var M=(gR(r,L,i)||"").split(";;");M[h-1]?D=M[h-1]:D+="SH33TJSERRX"}a.push(D);break}R||(R={Name:"SH33TJSERRY"}),a.push(R.Name);break;case"PtgParen":var H="(",W=")";if(x>=0){switch(v="",t[0][x][1][0]){case 2:H=Yr(" ",t[0][x][1][1])+H;break;case 3:H=Yr("\r",t[0][x][1][1])+H;break;case 4:W=Yr(" ",t[0][x][1][1])+W;break;case 5:W=Yr("\r",t[0][x][1][1])+W;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][x][1][0])}x=-1}a.push(H+a.pop()+W);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:k[1][1],r:k[1][0]};var Z={c:n.c,r:n.r};if(r.sharedf[pr(u)]){var B=r.sharedf[pr(u)];a.push(m0(B,o,Z,r,i))}else{var F=!1;for(l=0;l!=r.arrayf.length;++l)if(c=r.arrayf[l],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){a.push(m0(c[1],o,Z,r,i)),F=!0;break}F||a.push(k[1])}break;case"PtgArray":a.push("{"+ude(k[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+k[1].idx+"[#"+k[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(k));default:throw new Error("Unrecognized Formula Token: "+String(k))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&x>=0&&Q.indexOf(t[0][b][0])==-1){k=t[0][x];var ee=!0;switch(k[1][0]){case 4:ee=!1;case 0:v=Yr(" ",k[1][1]);break;case 5:ee=!1;case 1:v=Yr("\r",k[1][1]);break;default:if(v="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+k[1][0])}a.push((ee?v:"")+a.pop()+(ee?"":v)),x=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function hde(t){if(t==null){var e=nt(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Sh(t);return Sh(0)}function pde(t,e,n,r,i){var s=kh(e,n,i),o=hde(t.v),a=nt(6),l=33;a.write_shift(2,l),a.write_shift(4,0);for(var c=nt(t.bf.length),u=0;u<t.bf.length;++u)c[u]=t.bf[u];var d=as([s,o,a,c]);return d}function A2(t,e,n){var r=t.read_shift(4),i=cde(t,r,n),s=t.read_shift(4),o=s>0?lde(t,s,i,n):null;return[i,o]}var mde=A2,T2=A2,gde=A2,yde=A2,xde={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},yR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},vde={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function wde(t){var e="of:="+t.replace(hk,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function bde(t){return t.replace(/\./,"!")}var dg=typeof Map<"u";function gk(t,e,n){var r=0,i=t.length;if(n){if(dg?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var s=dg?n.get(e):n[e];r<s.length;++r)if(t[s[r]].t===e)return t.Count++,s[r]}}else for(;r<i;++r)if(t[r].t===e)return t.Count++,r;return t[i]={t:e},t.Count++,t.Unique++,n&&(dg?(n.has(e)||n.set(e,[]),n.get(e).push(i)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(i))),i}function j2(t,e){var n={min:t+1,max:t+1},r=-1;return e.MDW&&(uu=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?r=Nv(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(n.width=M_(r),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function xR(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function sf(t,e,n){var r=n.revssf[e.z!=null?e.z:"General"],i=60,s=t.length;if(r==null&&n.ssf){for(;i<392;++i)if(n.ssf[i]==null){hI(e.z,i),n.ssf[i]=e.z,n.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(t[i].numFmtId===r)return i;return t[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function _de(t,e,n){if(t&&t["!ref"]){var r=Or(t["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function Sde(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+xi(t[n])+'"/>';return e+"</mergeCells>"}function kde(t,e,n,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[n];try{e.Workbook&&(l=e.Workbook.Sheets[n].CodeName||l)}catch{}s=!0,o.codeName=Zg(hr(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),a=(a||"")+bt("outlinePr",null,c)}!s&&!a||(i[i.length]=bt("sheetPr",a,o))}var Nde=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Cde=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Ede(t){var e={sheet:1};return Nde.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),Cde.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=tR(t.password).toString(16).toUpperCase()),bt("sheetProtection",null,e)}function Ade(t){return xR(t),bt("pageMargins",null,t)}function Tde(t,e){for(var n=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(n[n.length]=bt("col",null,j2(i,r)));return n[n.length]="</cols>",n.join("")}function jde(t,e,n,r){var i=typeof t.ref=="string"?t.ref:xi(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var s=n.Workbook.Names,o=ca(i);o.s.r==o.e.r&&(o.e.r=ca(e["!ref"]).e.r,i=xi(o));for(var a=0;a<s.length;++a){var l=s[a];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+n.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+i}),bt("autoFilter",null,{ref:i})}function Pde(t,e,n,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),bt("sheetViews",bt("sheetView",null,i),{})}function Dde(t,e,n,r){if(t.c&&n["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var i="",s=t.t,o=t.v;if(t.t!=="z")switch(t.t){case"b":i=t.v?"1":"0";break;case"n":i=""+t.v;break;case"e":i=N1[t.v];break;case"d":r&&r.cellDates?i=to(t.v,-1).toISOString():(t=Do(t),t.t="n",i=""+(t.v=Po(to(t.v)))),typeof t.z>"u"&&(t.z=Zr[14]);break;default:i=t.v;break}var a=ls("v",hr(i)),l={r:e},c=sf(r.cellXfs,t,r);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=ls("v",""+gk(r.Strings,t.v,r.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=s&&(t.t=s,t.v=o),typeof t.f=="string"&&t.f){var u=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;a=bt("f",hr(t.f),u)+(t.v!=null?a:"")}return t.l&&n["!links"].push([e,t.l]),t.D&&(l.cm=1),bt("c",a,l)}function Ode(t,e,n,r){var i=[],s=[],o=Or(t["!ref"]),a="",l,c="",u=[],d=0,h=0,p=t["!rows"],y=Array.isArray(t),x={r:c},v,b=-1;for(h=o.s.c;h<=o.e.c;++h)u[h]=Is(h);for(d=o.s.r;d<=o.e.r;++d){for(s=[],c=us(d),h=o.s.c;h<=o.e.c;++h){l=u[h]+c;var S=y?(t[d]||[])[h]:t[l];S!==void 0&&(a=Dde(S,l,t,e))!=null&&s.push(a)}(s.length>0||p&&p[d])&&(x={r:c},p&&p[d]&&(v=p[d],v.hidden&&(x.hidden=1),b=-1,v.hpx?b=Cv(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(x.ht=b,x.customHeight=1),v.level&&(x.outlineLevel=v.level)),i[i.length]=bt("row",s.join(""),x))}if(p)for(;d<p.length;++d)p&&p[d]&&(x={r:d+1},v=p[d],v.hidden&&(x.hidden=1),b=-1,v.hpx?b=Cv(v.hpx):v.hpt&&(b=v.hpt),b>-1&&(x.ht=b,x.customHeight=1),v.level&&(x.outlineLevel=v.level),i[i.length]=bt("row","",x));return i.join("")}function vR(t,e,n,r){var i=[vi,bt("worksheet",null,{xmlns:D0[0],"xmlns:r":Ri.r})],s=n.SheetNames[t],o=0,a="",l=n.Sheets[s];l==null&&(l={});var c=l["!ref"]||"A1",u=Or(c);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=xi(u)}r||(r={}),l["!comments"]=[];var d=[];kde(l,n,t,e,i),i[i.length]=bt("dimension",null,{ref:c}),i[i.length]=Pde(l,e,t,n),e.sheetFormat&&(i[i.length]=bt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(i[i.length]=Tde(l,l["!cols"])),i[o=i.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(a=Ode(l,e),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),l["!protect"]&&(i[i.length]=Ede(l["!protect"])),l["!autofilter"]!=null&&(i[i.length]=jde(l["!autofilter"],l,n,t)),l["!merges"]!=null&&l["!merges"].length>0&&(i[i.length]=Sde(l["!merges"]));var h=-1,p,y=-1;return l["!links"].length>0&&(i[i.length]="<hyperlinks>",l["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(y=dr(r,-1,hr(x[1].Target).replace(/#.*$/,""),Kn.HLINK),p["r:id"]="rId"+y),(h=x[1].Target.indexOf("#"))>-1&&(p.location=hr(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=hr(x[1].Tooltip)),i[i.length]=bt("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(i[i.length]=Ade(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ls("ignoredErrors",bt("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(y=dr(r,-1,"../drawings/drawing"+(t+1)+".xml",Kn.DRAW),i[i.length]=bt("drawing",null,{"r:id":"rId"+y}),l["!drawing"]=d),l["!comments"].length>0&&(y=dr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",Kn.VML),i[i.length]=bt("legacyDrawing",null,{"r:id":"rId"+y}),l["!legacy"]=y),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Lde(t,e){var n={},r=t.l+e;n.r=t.read_shift(4),t.l+=4;var i=t.read_shift(2);t.l+=1;var s=t.read_shift(1);return t.l=r,s&7&&(n.level=s&7),s&16&&(n.hidden=!0),s&32&&(n.hpt=i/20),n}function Mde(t,e,n){var r=nt(145),i=(n["!rows"]||[])[t]||{};r.write_shift(4,t),r.write_shift(4,0);var s=320;i.hpx?s=Cv(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,l=r.l;r.l+=4;for(var c={r:t,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var d=-1,h=-1,p=u<<10;p<u+1<<10;++p){c.c=p;var y=Array.isArray(n)?(n[c.r]||[])[c.c]:n[pr(c)];y&&(d<0&&(d=p),h=p)}d<0||(++a,r.write_shift(4,d),r.write_shift(4,h))}var x=r.l;return r.l=l,r.write_shift(4,a),r.l=x,r.length>r.l?r.slice(0,r.l):r}function Ide(t,e,n,r){var i=Mde(r,n,e);(i.length>17||(e["!rows"]||[])[r])&&at(t,0,i)}var Rde=Mh,Fde=L0;function zde(){}function Bde(t,e){var n={},r=t[t.l];return++t.l,n.above=!(r&64),n.left=!(r&128),t.l+=18,n.name=Yae(t),n}function Ude(t,e,n){n==null&&(n=nt(84+4*t.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),n.write_shift(1,r);for(var i=1;i<3;++i)n.write_shift(1,0);return _v({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),LI(t,n),n.slice(0,n.l)}function $de(t){var e=qa(t);return[e]}function Wde(t,e,n){return n==null&&(n=nt(8)),Dh(e,n)}function Vde(t){var e=Oh(t);return[e]}function Hde(t,e,n){return n==null&&(n=nt(4)),Lh(e,n)}function qde(t){var e=qa(t),n=t.read_shift(1);return[e,n,"b"]}function Gde(t,e,n){return n==null&&(n=nt(9)),Dh(e,n),n.write_shift(1,t.v?1:0),n}function Kde(t){var e=Oh(t),n=t.read_shift(1);return[e,n,"b"]}function Xde(t,e,n){return n==null&&(n=nt(5)),Lh(e,n),n.write_shift(1,t.v?1:0),n}function Yde(t){var e=qa(t),n=t.read_shift(1);return[e,n,"e"]}function Jde(t,e,n){return n==null&&(n=nt(9)),Dh(e,n),n.write_shift(1,t.v),n}function Zde(t){var e=Oh(t),n=t.read_shift(1);return[e,n,"e"]}function Qde(t,e,n){return n==null&&(n=nt(8)),Lh(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function efe(t){var e=qa(t),n=t.read_shift(4);return[e,n,"s"]}function tfe(t,e,n){return n==null&&(n=nt(12)),Dh(e,n),n.write_shift(4,e.v),n}function nfe(t){var e=Oh(t),n=t.read_shift(4);return[e,n,"s"]}function rfe(t,e,n){return n==null&&(n=nt(8)),Lh(e,n),n.write_shift(4,e.v),n}function ife(t){var e=qa(t),n=M0(t);return[e,n,"n"]}function sfe(t,e,n){return n==null&&(n=nt(16)),Dh(e,n),Sh(t.v,n),n}function ofe(t){var e=Oh(t),n=M0(t);return[e,n,"n"]}function afe(t,e,n){return n==null&&(n=nt(12)),Lh(e,n),Sh(t.v,n),n}function lfe(t){var e=qa(t),n=MI(t);return[e,n,"n"]}function cfe(t,e,n){return n==null&&(n=nt(12)),Dh(e,n),II(t.v,n),n}function ufe(t){var e=Oh(t),n=MI(t);return[e,n,"n"]}function dfe(t,e,n){return n==null&&(n=nt(8)),Lh(e,n),II(t.v,n),n}function ffe(t){var e=qa(t),n=lk(t);return[e,n,"is"]}function hfe(t){var e=qa(t),n=Rs(t);return[e,n,"str"]}function pfe(t,e,n){return n==null&&(n=nt(12+4*t.v.length)),Dh(e,n),Bi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function mfe(t){var e=Oh(t),n=Rs(t);return[e,n,"str"]}function gfe(t,e,n){return n==null&&(n=nt(8+4*t.v.length)),Lh(e,n),Bi(t.v,n),n.length>n.l?n.slice(0,n.l):n}function yfe(t,e,n){var r=t.l+e,i=qa(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"b"];if(n.cellFormula){t.l+=2;var a=T2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function xfe(t,e,n){var r=t.l+e,i=qa(t);i.r=n["!row"];var s=t.read_shift(1),o=[i,s,"e"];if(n.cellFormula){t.l+=2;var a=T2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function vfe(t,e,n){var r=t.l+e,i=qa(t);i.r=n["!row"];var s=M0(t),o=[i,s,"n"];if(n.cellFormula){t.l+=2;var a=T2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}function wfe(t,e,n){var r=t.l+e,i=qa(t);i.r=n["!row"];var s=Rs(t),o=[i,s,"str"];if(n.cellFormula){t.l+=2;var a=T2(t,r-t.l,n);o[3]=m0(a,null,i,n.supbooks,n)}else t.l=r;return o}var bfe=Mh,_fe=L0;function Sfe(t,e){return e==null&&(e=nt(4)),e.write_shift(4,t),e}function kfe(t,e){var n=t.l+e,r=Mh(t),i=ck(t),s=Rs(t),o=Rs(t),a=Rs(t);t.l=n;var l={rfx:r,relId:i,loc:s,display:a};return o&&(l.Tooltip=o),l}function Nfe(t,e){var n=nt(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));L0({s:zi(t[0]),e:zi(t[0])},n),uk("rId"+e,n);var r=t[1].Target.indexOf("#"),i=r==-1?"":t[1].Target.slice(r+1);return Bi(i||"",n),Bi(t[1].Tooltip||"",n),Bi("",n),n.slice(0,n.l)}function Cfe(){}function Efe(t,e,n){var r=t.l+e,i=RI(t),s=t.read_shift(1),o=[i];if(o[2]=s,n.cellFormula){var a=mde(t,r-t.l,n);o[1]=a}else t.l=r;return o}function Afe(t,e,n){var r=t.l+e,i=Mh(t),s=[i];if(n.cellFormula){var o=yde(t,r-t.l,n);s[1]=o,t.l=r}else t.l=r;return s}function Tfe(t,e,n){n==null&&(n=nt(18));var r=j2(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(r.width||10)*256),n.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),n.write_shift(2,i),n}var wR=["left","right","top","bottom","header","footer"];function jfe(t){var e={};return wR.forEach(function(n){e[n]=M0(t)}),e}function Pfe(t,e){return e==null&&(e=nt(6*8)),xR(t),wR.forEach(function(n){Sh(t[n],e)}),e}function Dfe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function Ofe(t,e,n){n==null&&(n=nt(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),n.write_shift(2,r),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function Lfe(t){var e=nt(24);return e.write_shift(4,4),e.write_shift(4,1),L0(t,e),e}function Mfe(t,e){return e==null&&(e=nt(16*4+2)),e.write_shift(2,t.password?tR(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function Ife(){}function Rfe(){}function Ffe(t,e,n,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=Do(e),e.z=e.z||Zr[14],e.v=Po(to(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var l={r:n,c:r};switch(l.s=sf(i.cellXfs,e,i),e.l&&s["!links"].push([pr(l),e.l]),e.c&&s["!comments"].push([pr(l),e.c]),e.t){case"s":case"str":return i.bookSST?(a=gk(i.Strings,e.v,i.revStrings),l.t="s",l.v=a,o?at(t,18,rfe(e,l)):at(t,7,tfe(e,l))):(l.t="str",o?at(t,17,gfe(e,l)):at(t,6,pfe(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?at(t,13,dfe(e,l)):at(t,2,cfe(e,l)):o?at(t,16,afe(e,l)):at(t,5,sfe(e,l)),!0;case"b":return l.t="b",o?at(t,15,Xde(e,l)):at(t,4,Gde(e,l)),!0;case"e":return l.t="e",o?at(t,14,Qde(e,l)):at(t,3,Jde(e,l)),!0}return o?at(t,12,Hde(e,l)):at(t,1,Wde(e,l)),!0}function zfe(t,e,n,r){var i=Or(e["!ref"]||"A1"),s,o="",a=[];at(t,145);var l=Array.isArray(e),c=i.e.r;e["!rows"]&&(c=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=c;++u){o=us(u),Ide(t,e,i,u);var d=!1;if(u<=i.e.r)for(var h=i.s.c;h<=i.e.c;++h){u===i.s.r&&(a[h]=Is(h)),s=a[h]+o;var p=l?(e[u]||[])[h]:e[s];if(!p){d=!1;continue}d=Ffe(t,p,u,h,r,e,d)}}at(t,146)}function Bfe(t,e){!e||!e["!merges"]||(at(t,177,Sfe(e["!merges"].length)),e["!merges"].forEach(function(n){at(t,176,_fe(n))}),at(t,178))}function Ufe(t,e){!e||!e["!cols"]||(at(t,390),e["!cols"].forEach(function(n,r){n&&at(t,60,Tfe(r,n))}),at(t,391))}function $fe(t,e){!e||!e["!ref"]||(at(t,648),at(t,649,Lfe(Or(e["!ref"]))),at(t,650))}function Wfe(t,e,n){e["!links"].forEach(function(r){if(r[1].Target){var i=dr(n,-1,r[1].Target.replace(/#.*$/,""),Kn.HLINK);at(t,494,Nfe(r,i))}}),delete e["!links"]}function Vfe(t,e,n,r){if(e["!comments"].length>0){var i=dr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",Kn.VML);at(t,551,uk("rId"+i)),e["!legacy"]=i}}function Hfe(t,e,n,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:xi(i.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var o=n.Workbook.Names,a=ca(s);a.s.r==a.e.r&&(a.e.r=ca(e["!ref"]).e.r,s=xi(a));for(var l=0;l<o.length;++l){var c=o[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+n.SheetNames[r]+"'!"+s;break}}l==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+n.SheetNames[r]+"'!"+s}),at(t,161,L0(Or(s))),at(t,162)}}function qfe(t,e,n){at(t,133),at(t,137,Ofe(e,n)),at(t,138),at(t,134)}function Gfe(t,e){e["!protect"]&&at(t,535,Mfe(e["!protect"]))}function Kfe(t,e,n,r){var i=To(),s=n.SheetNames[t],o=n.Sheets[s]||{},a=s;try{n&&n.Workbook&&(a=n.Workbook.Sheets[t].CodeName||a)}catch{}var l=Or(o["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],at(i,129),(n.vbaraw||o["!outline"])&&at(i,147,Ude(a,o["!outline"])),at(i,148,Fde(l)),qfe(i,o,n.Workbook),Ufe(i,o),zfe(i,o,t,e),Gfe(i,o),Hfe(i,o,n,t),Bfe(i,o),Wfe(i,o,r),o["!margins"]&&at(i,476,Pfe(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&$fe(i,o),Vfe(i,o,t,r),at(i,130),i.end()}function Xfe(t,e){t.l+=10;var n=Rs(t);return{name:n}}var Yfe=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Jfe(t){return!t.Workbook||!t.Workbook.WBProps?"false":Aae(t.Workbook.WBProps.date1904)?"true":"false"}var Zfe="][*?/\\".split("");function bR(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return Zfe.forEach(function(r){if(t.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function Qfe(t,e,n){t.forEach(function(r,i){bR(r);for(var s=0;s<i;++s)if(r==t[s])throw new Error("Duplicate Sheet Name: "+r);if(n){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function ehe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Qfe(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)_de(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n)}function _R(t){var e=[vi];e[e.length]=bt("workbook",null,{xmlns:D0[0],"xmlns:r":Ri.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(Yfe.forEach(function(a){t.Workbook.WBProps[a[0]]!=null&&t.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=t.Workbook.WBProps[a[0]])}),t.Workbook.WBProps.CodeName&&(r.codeName=t.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=bt("workbookPr",null,r);var i=t.Workbook&&t.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=t.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==t.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=t.SheetNames.length;++s){var o={name:hr(t.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=bt("sheet",null,o)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(a){var l={name:a.Name};a.Comment&&(l.comment=a.Comment),a.Sheet!=null&&(l.localSheetId=""+a.Sheet),a.Hidden&&(l.hidden="1"),a.Ref&&(e[e.length]=bt("definedName",hr(a.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function the(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=L_(t),n.name=Rs(t),n}function nhe(t,e){return e||(e=nt(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),uk(t.strRelID,e),Bi(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function rhe(t,e){var n={},r=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var i=e>8?Rs(t):"";return i.length>0&&(n.CodeName=i),n.autoCompressPictures=!!(r&65536),n.backupFile=!!(r&64),n.checkCompatibility=!!(r&4096),n.date1904=!!(r&1),n.filterPrivacy=!!(r&8),n.hidePivotFieldList=!!(r&1024),n.promptedSolutions=!!(r&16),n.publishItems=!!(r&2048),n.refreshAllConnections=!!(r&262144),n.saveExternalLinkValues=!!(r&128),n.showBorderUnselectedTables=!!(r&4),n.showInkAnnotation=!!(r&32),n.showObjects=["all","placeholders","none"][r>>13&3],n.showPivotChartFilter=!!(r&32768),n.updateLinks=["userSet","never","always"][r>>8&3],n}function ihe(t,e){e||(e=nt(72));var n=0;return t&&t.filterPrivacy&&(n|=8),e.write_shift(4,n),e.write_shift(4,0),LI(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function she(t,e,n){var r=t.l+e;t.l+=4,t.l+=1;var i=t.read_shift(4),s=Jae(t),o=gde(t,0,n),a=ck(t);t.l=r;var l={Name:s,Ptg:o};return i<268435455&&(l.Sheet=i),a&&(l.Comment=a),l}function ohe(t,e){at(t,143);for(var n=0;n!=e.SheetNames.length;++n){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,i={Hidden:r,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};at(t,156,nhe(i))}at(t,144)}function ahe(t,e){e||(e=nt(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return Bi("SheetJS",e),Bi(mv.version,e),Bi(mv.version,e),Bi("7262",e),e.length>e.l?e.slice(0,e.l):e}function lhe(t,e){e||(e=nt(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function che(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,r=0,i=-1,s=-1;r<n.length;++r)!n[r]||!n[r].Hidden&&i==-1?i=r:n[r].Hidden==1&&s==-1&&(s=r);s>i||(at(t,135),at(t,158,lhe(i)),at(t,136))}}function uhe(t,e){var n=To();return at(n,131),at(n,128,ahe()),at(n,153,ihe(t.Workbook&&t.Workbook.WBProps||null)),che(n,t),ohe(n,t),at(n,132),n.end()}function dhe(t,e,n){return(e.slice(-4)===".bin"?uhe:_R)(t)}function fhe(t,e,n,r,i){return(e.slice(-4)===".bin"?Kfe:vR)(t,n,r,i)}function hhe(t,e,n){return(e.slice(-4)===".bin"?Pce:iR)(t,n)}function phe(t,e,n){return(e.slice(-4)===".bin"?ice:eR)(t,n)}function mhe(t,e,n){return(e.slice(-4)===".bin"?Gce:cR)(t)}function ghe(t){return(t.slice(-4)===".bin"?zce:aR)()}function yhe(t,e){var n=[];return t.Props&&n.push(hle(t.Props,e)),t.Custprops&&n.push(ple(t.Props,t.Custprops)),n.join("")}function xhe(){return""}function vhe(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(bt("NumberFormat",null,{"ss:Format":hr(Zr[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};n.push(bt("Style",s.join(""),o))}),bt("Styles",n.join(""))}function SR(t){return bt("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+pk(t.Ref,{r:0,c:0})})}function whe(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||n.push(SR(i)))}return bt("Names",n.join(""))}function bhe(t,e,n,r){if(!t||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==n&&(a.Name.match(/^_xlfn\./)||s.push(SR(a)))}return s.join("")}function _he(t,e,n,r){if(!t)return"";var i=[];if(t["!margins"]&&(i.push("<PageSetup>"),t["!margins"].header&&i.push(bt("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&i.push(bt("Footer",null,{"x:Margin":t["!margins"].footer})),i.push(bt("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[n])if(r.Workbook.Sheets[n].Hidden)i.push(bt("Visible",r.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<n&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==n&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),t["!protect"]&&(i.push(ls("ProtectContents","True")),t["!protect"].objects&&i.push(ls("ProtectObjects","True")),t["!protect"].scenarios&&i.push(ls("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?i.push(ls("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&i.push(ls("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){t["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":bt("WorksheetOptions",i.join(""),{xmlns:Qo.x})}function She(t){return t.map(function(e){var n=Eae(e.t||""),r=bt("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return bt("Comment",r,{"ss:Author":e.a})}).join("")}function khe(t,e,n,r,i,s,o){if(!t||t.v==null&&t.f==null)return"";var a={};if(t.f&&(a["ss:Formula"]="="+hr(pk(t.f,o))),t.F&&t.F.slice(0,e.length)==e){var l=zi(t.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(l.r==o.r?"":"["+(l.r-o.r)+"]")+"C"+(l.c==o.c?"":"["+(l.c-o.c)+"]")}if(t.l&&t.l.Target&&(a["ss:HRef"]=hr(t.l.Target),t.l.Tooltip&&(a["x:HRefScreenTip"]=hr(t.l.Tooltip))),n["!merges"])for(var c=n["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(a["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(a["ss:MergeDown"]=c[u].e.r-c[u].s.r));var d="",h="";switch(t.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",h=String(t.v);break;case"b":d="Boolean",h=t.v?"1":"0";break;case"e":d="Error",h=N1[t.v];break;case"d":d="DateTime",h=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Zr[14]);break;case"s":d="String",h=Cae(t.v||"");break}var p=sf(r.cellXfs,t,r);a["ss:StyleID"]="s"+(21+p),a["ss:Index"]=o.c+1;var y=t.v!=null?h:"",x=t.t=="z"?"":'<Data ss:Type="'+d+'">'+y+"</Data>";return(t.c||[]).length>0&&(x+=She(t.c)),bt("Cell",x,a)}function Nhe(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=rR(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function Che(t,e,n,r){if(!t["!ref"])return"";var i=Or(t["!ref"]),s=t["!merges"]||[],o=0,a=[];t["!cols"]&&t["!cols"].forEach(function(v,b){fk(v);var S=!!v.width,k=j2(b,v),T={"ss:Index":b+1};S&&(T["ss:Width"]=kv(k.width)),v.hidden&&(T["ss:Hidden"]="1"),a.push(bt("Column",null,T))});for(var l=Array.isArray(t),c=i.s.r;c<=i.e.r;++c){for(var u=[Nhe(c,(t["!rows"]||[])[c])],d=i.s.c;d<=i.e.c;++d){var h=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>d)&&!(s[o].s.r>c)&&!(s[o].e.c<d)&&!(s[o].e.r<c)){(s[o].s.c!=d||s[o].s.r!=c)&&(h=!0);break}if(!h){var p={r:c,c:d},y=pr(p),x=l?(t[c]||[])[d]:t[y];u.push(khe(x,y,t,e,n,r,p))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function Ehe(t,e,n){var r=[],i=n.SheetNames[t],s=n.Sheets[i],o=s?bhe(s,e,t,n):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?Che(s,e,t,n):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(_he(s,e,t,n)),r.join("")}function Ahe(t,e){e||(e={}),t.SSF||(t.SSF=Do(Zr)),t.SSF&&(N2(),k2(t.SSF),e.revssf=C2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],sf(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(yhe(t,e)),n.push(xhe()),n.push(""),n.push("");for(var r=0;r<t.SheetNames.length;++r)n.push(bt("Worksheet",Ehe(r,e,t),{"ss:Name":hr(t.SheetNames[r])}));return n[2]=vhe(t,e),n[3]=whe(t),vi+bt("Workbook",n.join(""),{xmlns:Qo.ss,"xmlns:o":Qo.o,"xmlns:x":Qo.x,"xmlns:ss":Qo.ss,"xmlns:dt":Qo.dt,"xmlns:html":Qo.html})}var e5={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function The(t,e){var n=[],r=[],i=[],s=0,o,a=XT(lj,"n"),l=XT(cj,"n");if(t.Props)for(o=ds(t.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Props[o[s]]]);if(t.Custprops)for(o=ds(t.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(t.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?n:Object.prototype.hasOwnProperty.call(l,o[s])?r:i).push([o[s],t.Custprops[o[s]]]);var c=[];for(s=0;s<i.length;++s)GI.indexOf(i[s][0])>-1||VI.indexOf(i[s][0])>-1||i[s][1]!=null&&c.push(i[s]);r.length&&mr.utils.cfb_add(e,"/SummaryInformation",pj(r,e5.SI,l,cj)),(n.length||c.length)&&mr.utils.cfb_add(e,"/DocumentSummaryInformation",pj(n,e5.DSI,a,lj,c.length?c:null,e5.UDI))}function jhe(t,e){var n=e||{},r=mr.utils.cfb_new({root:"R"}),i="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":i="/Workbook",n.biff=8;break;case"biff5":i="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return mr.utils.cfb_add(r,i,kR(t,n)),n.biff==8&&(t.Props||t.Custprops)&&The(t,r),n.biff==8&&t.vbaraw&&Kce(r,mr.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),r}var Phe={0:{f:Lde},1:{f:$de},2:{f:lfe},3:{f:Yde},4:{f:qde},5:{f:ife},6:{f:hfe},7:{f:efe},8:{f:wfe},9:{f:vfe},10:{f:yfe},11:{f:xfe},12:{f:Vde},13:{f:ufe},14:{f:Zde},15:{f:Kde},16:{f:ofe},17:{f:mfe},18:{f:nfe},19:{f:lk},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:she},40:{},42:{},43:{f:hce},44:{f:dce},45:{f:gce},46:{f:xce},47:{f:yce},48:{},49:{f:Vae},50:{},51:{f:Lce},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Hle},62:{f:ffe},63:{f:Bce},64:{f:Ife},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:yc,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Dfe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Bde},148:{f:Rde,p:16},151:{f:Cfe},152:{},153:{f:rhe},154:{},155:{},156:{f:the},157:{},158:{},159:{T:1,f:tce},160:{T:-1},161:{T:1,f:Mh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:bfe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Dce},336:{T:-1},337:{f:Rce,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:L_},357:{},358:{},359:{},360:{T:1},361:{},362:{f:zle},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Efe},427:{f:Afe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:jfe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:zde},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kfe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:L_},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Hce},633:{T:1},634:{T:-1},635:{T:1,f:Wce},636:{T:-1},637:{f:Kae},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Xfe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Rfe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function _t(t,e,n,r){var i=e;if(!isNaN(i)){var s=r||(n||[]).length||0,o=t.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&sk(n)&&t.push(n)}}function Dhe(t,e,n,r){var i=(n||[]).length||0;if(i<=8224)return _t(t,e,n,i);var s=e;if(!isNaN(s)){for(var o=n.parts||[],a=0,l=0,c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;var u=t.next(4);for(u.write_shift(2,s),u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c;l<i;){for(u=t.next(4),u.write_shift(2,60),c=0;c+(o[a]||8224)<=8224;)c+=o[a]||8224,a++;u.write_shift(2,c),t.push(n.slice(l,l+c)),l+=c}}}function E1(t,e,n){return t||(t=nt(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function Ohe(t,e,n,r){var i=nt(9);return E1(i,t,e),XI(n,r||"b",i),i}function Lhe(t,e,n){var r=nt(8+2*n.length);return E1(r,t,e),r.write_shift(1,n.length),r.write_shift(n.length,n,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Mhe(t,e,n,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Po(to(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?_t(t,2,Xle(n,r,i)):_t(t,3,Kle(n,r,i));return;case"b":case"e":_t(t,5,Ohe(n,r,e.v,e.t));return;case"s":case"str":_t(t,4,Lhe(n,r,(e.v||"").slice(0,255)));return}_t(t,1,E1(null,n,r))}function Ihe(t,e,n,r){var i=Array.isArray(e),s=Or(e["!ref"]||"A1"),o,a="",l=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=xi(s)}for(var c=s.s.r;c<=s.e.r;++c){a=us(c);for(var u=s.s.c;u<=s.e.c;++u){c===s.s.r&&(l[u]=Is(u)),o=l[u]+a;var d=i?(e[c]||[])[u]:e[o];d&&Mhe(t,d,c,u)}}}function Rhe(t,e){for(var n=e||{},r=To(),i=0,s=0;s<t.SheetNames.length;++s)t.SheetNames[s]==n.sheet&&(i=s);if(i==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return _t(r,n.biff==4?1033:n.biff==3?521:9,dk(t,16,n)),Ihe(r,t.Sheets[t.SheetNames[i]],i,n),_t(r,10),r.end()}function Fhe(t,e,n){_t(t,49,Ple({sz:12,name:"Arial"},n))}function zhe(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&_t(t,1054,Lle(i,e[i],n))})}function Bhe(t,e){var n=nt(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),_t(t,2151,n),n=nt(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),ZI(Or(e["!ref"]||"A1"),n),n.write_shift(4,4),_t(t,2152,n)}function Uhe(t,e){for(var n=0;n<16;++n)_t(t,224,gj({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){_t(t,224,gj(r,0,e))})}function $he(t,e){for(var n=0;n<e["!links"].length;++n){var r=e["!links"][n];_t(t,440,$le(r)),r[1].Tooltip&&_t(t,2048,Wle(r))}delete e["!links"]}function Whe(t,e){if(e){var n=0;e.forEach(function(r,i){++n<=256&&r&&_t(t,125,qle(j2(i,r),i))})}}function Vhe(t,e,n,r,i){var s=16+sf(i.cellXfs,e,i);if(e.v==null&&!e.bf){_t(t,513,kh(n,r,s));return}if(e.bf)_t(t,6,pde(e,n,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?Po(to(e.v)):e.v;_t(t,515,Fle(n,r,o,s));break;case"b":case"e":_t(t,517,Rle(n,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=gk(i.Strings,e.v,i.revStrings);_t(t,253,Dle(n,r,a,s))}else _t(t,516,Ole(n,r,(e.v||"").slice(0,255),s,i));break;default:_t(t,513,kh(n,r,s))}}function Hhe(t,e,n){var r=To(),i=n.SheetNames[t],s=n.Sheets[i]||{},o=(n||{}).Workbook||{},a=(o.Sheets||[])[t]||{},l=Array.isArray(s),c=e.biff==8,u,d="",h=[],p=Or(s["!ref"]||"A1"),y=c?65536:16384;if(p.e.c>255||p.e.r>=y){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}_t(r,2057,dk(n,16,e)),_t(r,13,Ma(1)),_t(r,12,Ma(100)),_t(r,15,Zs(!0)),_t(r,17,Zs(!1)),_t(r,16,Sh(.001)),_t(r,95,Zs(!0)),_t(r,42,Zs(!1)),_t(r,43,Zs(!1)),_t(r,130,Ma(1)),_t(r,128,Ile()),_t(r,131,Zs(!1)),_t(r,132,Zs(!1)),c&&Whe(r,s["!cols"]),_t(r,512,Mle(p,e)),c&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){d=us(x);for(var v=p.s.c;v<=p.e.c;++v){x===p.s.r&&(h[v]=Is(v)),u=h[v]+d;var b=l?(s[x]||[])[v]:s[u];b&&(Vhe(r,b,x,v,e),c&&b.l&&s["!links"].push([u,b.l]))}}var S=a.CodeName||a.name||i;return c&&_t(r,574,jle((o.Views||[])[0])),c&&(s["!merges"]||[]).length&&_t(r,229,Ule(s["!merges"])),c&&$he(r,s),_t(r,442,JI(S)),c&&Bhe(r,s),_t(r,10),r.end()}function qhe(t,e,n){var r=To(),i=(t||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=n.biff==8,l=n.biff==5;if(_t(r,2057,dk(t,5,n)),n.bookType=="xla"&&_t(r,135),_t(r,225,a?Ma(1200):null),_t(r,193,yle(2)),l&&_t(r,191),l&&_t(r,192),_t(r,226),_t(r,92,Cle("SheetJS",n)),_t(r,66,Ma(a?1200:1252)),a&&_t(r,353,Ma(0)),a&&_t(r,448),_t(r,317,Gle(t.SheetNames.length)),a&&t.vbaraw&&_t(r,211),a&&t.vbaraw){var c=o.CodeName||"ThisWorkbook";_t(r,442,JI(c))}_t(r,156,Ma(17)),_t(r,25,Zs(!1)),_t(r,18,Zs(!1)),_t(r,19,Ma(0)),a&&_t(r,431,Zs(!1)),a&&_t(r,444,Ma(0)),_t(r,61,Tle()),_t(r,64,Zs(!1)),_t(r,141,Ma(0)),_t(r,34,Zs(Jfe(t)=="true")),_t(r,14,Zs(!0)),a&&_t(r,439,Zs(!1)),_t(r,218,Ma(0)),Fhe(r,t,n),zhe(r,t.SSF,n),Uhe(r,n),a&&_t(r,352,Zs(!1));var u=r.end(),d=To();a&&_t(d,140,Vle()),a&&n.Strings&&Dhe(d,252,Ale(n.Strings)),_t(d,10);var h=d.end(),p=To(),y=0,x=0;for(x=0;x<t.SheetNames.length;++x)y+=(a?12:11)+(a?2:1)*t.SheetNames[x].length;var v=u.length+y+h.length;for(x=0;x<t.SheetNames.length;++x){var b=s[x]||{};_t(p,133,Ele({pos:v,hs:b.Hidden||0,dt:0,name:t.SheetNames[x]},n)),v+=e[x].length}var S=p.end();if(y!=S.length)throw new Error("BS8 "+y+" != "+S.length);var k=[];return u.length&&k.push(u),S.length&&k.push(S),h.length&&k.push(h),as(k)}function Ghe(t,e){var n=e||{},r=[];t&&!t.SSF&&(t.SSF=Do(Zr)),t&&t.SSF&&(N2(),k2(t.SSF),n.revssf=C2(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,yk(n),n.cellXfs=[],sf(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var i=0;i<t.SheetNames.length;++i)r[r.length]=Hhe(i,n,t);return r.unshift(qhe(t,r,n)),as(r)}function kR(t,e){for(var n=0;n<=t.SheetNames.length;++n){var r=t.Sheets[t.SheetNames[n]];if(!(!r||!r["!ref"])){var i=ca(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return Ghe(t,e);case 4:case 3:case 2:return Rhe(t,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function Khe(t,e,n,r){for(var i=t["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,l=0,c=0;c<i.length;++c)if(!(i[c].s.r>n||i[c].s.c>o)&&!(i[c].e.r<n||i[c].e.c<o)){if(i[c].s.r<n||i[c].s.c<o){a=-1;break}a=i[c].e.r-i[c].s.r+1,l=i[c].e.c-i[c].s.c+1;break}if(!(a<0)){var u=pr({r:n,c:o}),d=r.dense?(t[n]||[])[o]:t[u],h=d&&d.v!=null&&(d.h||Nae(d.w||(gu(d),d.w)||""))||"",p={};a>1&&(p.rowspan=a),l>1&&(p.colspan=l),r.editable?h='<span contenteditable="true">'+h+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+d.l.Target+'">'+h+"</a>")),p.id=(r.id||"sjs")+"-"+u,s.push(bt("td",h,p))}}var y="<tr>";return y+s.join("")+"</tr>"}var Xhe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Yhe="</body></html>";function Jhe(t,e,n){var r=[];return r.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function NR(t,e){var n=e||{},r=n.header!=null?n.header:Xhe,i=n.footer!=null?n.footer:Yhe,s=[r],o=ca(t["!ref"]);n.dense=Array.isArray(t),s.push(Jhe(t,o,n));for(var a=o.s.r;a<=o.e.r;++a)s.push(Khe(t,o,a,n));return s.push("</table>"+i),s.join("")}function CR(t,e,n){var r=n||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?zi(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),l=Math.min(r.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:i,c:s}};if(t["!ref"]){var u=ca(t["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),i==-1&&(c.e.r=i=u.e.r+1)}var d=[],h=0,p=t["!rows"]||(t["!rows"]=[]),y=0,x=0,v=0,b=0,S=0,k=0;for(t["!cols"]||(t["!cols"]=[]);y<a.length&&x<l;++y){var T=a[y];if(Sj(T)){if(r.display)continue;p[x]={hidden:!0}}var j=T.children;for(v=b=0;v<j.length;++v){var P=j[v];if(!(r.display&&Sj(P))){var C=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):Tae(P.innerHTML),N=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<d.length;++h){var L=d[h];L.s.c==b+s&&L.s.r<x+i&&x+i<=L.e.r&&(b=L.e.c+1-s,h=-1)}k=+P.getAttribute("colspan")||1,((S=+P.getAttribute("rowspan")||1)>1||k>1)&&d.push({s:{r:x+i,c:b+s},e:{r:x+i+(S||1)-1,c:b+s+(k||1)-1}});var R={t:"s",v:C},D=P.getAttribute("data-t")||P.getAttribute("t")||"";C!=null&&(C.length==0?R.t=D||"z":r.raw||C.trim().length==0||D=="s"||(C==="TRUE"?R={t:"b",v:!0}:C==="FALSE"?R={t:"b",v:!1}:isNaN(cu(C))?isNaN(Jg(C).getDate())||(R={t:"d",v:to(C)},r.cellDates||(R={t:"n",v:Po(R.v)}),R.z=r.dateNF||Zr[14]):R={t:"n",v:cu(C)})),R.z===void 0&&N!=null&&(R.z=N);var M="",H=P.getElementsByTagName("A");if(H&&H.length)for(var W=0;W<H.length&&!(H[W].hasAttribute("href")&&(M=H[W].getAttribute("href"),M.charAt(0)!="#"));++W);M&&M.charAt(0)!="#"&&(R.l={Target:M}),r.dense?(t[x+i]||(t[x+i]=[]),t[x+i][b+s]=R):t[pr({c:b+s,r:x+i})]=R,c.e.c<b+s&&(c.e.c=b+s),b+=k}}++x}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,x-1+i),t["!ref"]=xi(c),x>=l&&(t["!fullref"]=xi((c.e.r=a.length-y+x-1+i,c))),t}function ER(t,e){var n=e||{},r=n.dense?[]:{};return CR(r,t,e)}function Zhe(t,e){return Ph(ER(t,e),e)}function Sj(t){var e="",n=Qhe(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function Qhe(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var epe=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Qg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return vi+e}}(),kj=function(){var t=function(s){return hr(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,r=function(s,o,a){var l=[];l.push('      <table:table table:name="'+hr(o.SheetNames[a])+`" table:style-name="ta1">
`);var c=0,u=0,d=ca(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,y=Array.isArray(s);if(s["!cols"])for(u=0;u<=d.e.c;++u)l.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var x="",v=s["!rows"]||[];for(c=0;c<d.s.r;++c)x=v[c]?' table:style-name="ro'+v[c].ods+'"':"",l.push("        <table:table-row"+x+`></table:table-row>
`);for(;c<=d.e.r;++c){for(x=v[c]?' table:style-name="ro'+v[c].ods+'"':"",l.push("        <table:table-row"+x+`>
`),u=0;u<d.s.c;++u)l.push(e);for(;u<=d.e.c;++u){var b=!1,S={},k="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>u)&&!(h[p].s.r>c)&&!(h[p].e.c<u)&&!(h[p].e.r<c)){(h[p].s.c!=u||h[p].s.r!=c)&&(b=!0),S["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,S["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(b){l.push(n);continue}var T=pr({r:c,c:u}),j=y?(s[c]||[])[u]:s[T];if(j&&j.f&&(S["table:formula"]=hr(wde(j.f)),j.F&&j.F.slice(0,T.length)==T)){var P=ca(j.F);S["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,S["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!j){l.push(e);continue}switch(j.t){case"b":k=j.v?"TRUE":"FALSE",S["office:value-type"]="boolean",S["office:boolean-value"]=j.v?"true":"false";break;case"n":k=j.w||String(j.v||0),S["office:value-type"]="float",S["office:value"]=j.v||0;break;case"s":case"str":k=j.v==null?"":j.v,S["office:value-type"]="string";break;case"d":k=j.w||to(j.v).toISOString(),S["office:value-type"]="date",S["office:date-value"]=to(j.v).toISOString(),S["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(k);if(j.l&&j.l.Target){var N=j.l.Target;N=N.charAt(0)=="#"?"#"+bde(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),C=bt("text:a",C,{"xlink:href":N.replace(/&/g,"&amp;")})}l.push("          "+bt("table:table-cell",bt("text:p",C,{}),S)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var d=c["!cols"][u];if(d.width==null&&d.wpx==null&&d.wch==null)continue;fk(d),d.ods=a;var h=c["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++a}}});var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=l;var d=c["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++l}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var l=[vi],c=Qg({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Qg({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(l.push("<office:document"+c+u+`>
`),l.push($I().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),i(l,o),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)l.push(r(o.Sheets[o.SheetNames[d]],o,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),a.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function AR(t,e){if(e.bookType=="fods")return kj(t,e);var n=tk(),r="",i=[],s=[];return r="mimetype",kn(n,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",kn(n,r,kj(t,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",kn(n,r,epe(t,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",kn(n,r,vi+$I()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",kn(n,r,fle(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",kn(n,r,ule(i)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ev(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function tpe(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):xl(Zg(t))}function npe(t,e){e:for(var n=0;n<=t.length-e.length;++n){for(var r=0;r<e.length;++r)if(t[n+r]!=e[r])continue e;return!0}return!1}function Yd(t){var e=t.reduce(function(i,s){return i+s.length},0),n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(i,r),r+=i.length}),n}function rpe(t,e,n){var r=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,i=n/Math.pow(10,r-6176);t[e+15]|=r>>7,t[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)t[e+s]=i&255;t[e+15]|=n>=0?0:128}function e1(t,e){var n=e?e[0]:0,r=t[n]&127;e:if(t[n++]>=128&&(r|=(t[n]&127)<<7,t[n++]<128||(r|=(t[n]&127)<<14,t[n++]<128)||(r|=(t[n]&127)<<21,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(r+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e&&(e[0]=n),r}function ur(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e.slice(0,n)}function Qp(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function ki(t){for(var e=[],n=[0];n[0]<t.length;){var r=n[0],i=e1(t,n),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var l=n[0];t[n[0]++]>=128;);a=t.slice(l,n[0])}break;case 5:o=4,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=e1(t,n),a=t.slice(n[0],n[0]+o),n[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var c={data:a,type:s};e[i]==null?e[i]=[c]:e[i].push(c)}return e}function es(t){var e=[];return t.forEach(function(n,r){n.forEach(function(i){i.data&&(e.push(ur(r*8+i.type)),i.type==2&&e.push(ur(i.data.length)),e.push(i.data))})}),Yd(e)}function fl(t){for(var e,n=[],r=[0];r[0]<t.length;){var i=e1(t,r),s=ki(t.slice(r[0],r[0]+i));r[0]+=i;var o={id:Qp(s[1][0].data),messages:[]};s[2].forEach(function(a){var l=ki(a.data),c=Qp(l[3][0].data);o.messages.push({meta:l,data:t.slice(r[0],r[0]+c)}),r[0]+=c}),(e=s[3])!=null&&e[0]&&(o.merge=Qp(s[3][0].data)>>>0>0),n.push(o)}return n}function Ap(t){var e=[];return t.forEach(function(n){var r=[];r[1]=[{data:ur(n.id),type:0}],r[2]=[],n.merge!=null&&(r[3]=[{data:ur(+!!n.merge),type:0}]);var i=[];n.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:ur(o.data.length)}],r[2].push({data:es(o.meta),type:2})});var s=es(r);e.push(ur(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),Yd(e)}function ipe(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n=[0],r=e1(e,n),i=[];n[0]<e.length;){var s=e[n[0]]&3;if(s==0){var o=e[n[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[n[0]],a>1&&(o|=e[n[0]+1]<<8),a>2&&(o|=e[n[0]+2]<<16),a>3&&(o|=e[n[0]+3]<<24),o>>>=0,o++,n[0]+=a}i.push(e.slice(n[0],n[0]+o)),n[0]+=o;continue}else{var l=0,c=0;if(s==1?(c=(e[n[0]]>>2&7)+4,l=(e[n[0]++]&224)<<3,l|=e[n[0]++]):(c=(e[n[0]++]>>2)+1,s==2?(l=e[n[0]]|e[n[0]+1]<<8,n[0]+=2):(l=(e[n[0]]|e[n[0]+1]<<8|e[n[0]+2]<<16|e[n[0]+3]<<24)>>>0,n[0]+=4)),i=[Yd(i)],l==0)throw new Error("Invalid offset 0");if(l>i[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(i.push(i[0].slice(-l)),c-=l;c>=i[i.length-1].length;)i.push(i[i.length-1]),c-=i[i.length-1].length;i.push(i[0].slice(-l,-l+c))}}var u=Yd(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function hl(t){for(var e=[],n=0;n<t.length;){var r=t[n++],i=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push(ipe(r,t.slice(n,n+i))),n+=i}if(n!==t.length)throw new Error("data is not a valid framed stream!");return Yd(e)}function Tp(t){for(var e=[],n=0;n<t.length;){var r=Math.min(t.length-n,268435455),i=new Uint8Array(4);e.push(i);var s=ur(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(t.slice(n,n+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,n+=r}return Yd(e)}function t5(t,e){var n=new Uint8Array(32),r=Ev(n),i=12,s=0;switch(n[0]=5,t.t){case"n":n[1]=2,rpe(n,i,t.v),s|=1,i+=16;break;case"b":n[1]=6,r.setFloat64(i,t.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[1]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(8,s,!0),n.slice(0,i)}function n5(t,e){var n=new Uint8Array(32),r=Ev(n),i=12,s=0;switch(n[0]=3,t.t){case"n":n[2]=2,r.setFloat64(i,t.v,!0),s|=32,i+=8;break;case"b":n[2]=6,r.setFloat64(i,t.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));n[2]=3,r.setUint32(i,e.indexOf(t.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+t.t}return r.setUint32(4,s,!0),n.slice(0,i)}function od(t){var e=ki(t);return e1(e[1][0].data)}function spe(t,e,n){var r,i,s,o;if(!((r=t[6])!=null&&r[0])||!((i=t[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=t[8])==null?void 0:s[0])==null?void 0:o.data)&&Qp(t[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var l=0,c=Ev(t[7][0].data),u=0,d=[],h=Ev(t[4][0].data),p=0,y=[],x=0;x<e.length;++x){if(e[x]==null){c.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}c.setUint16(x*2,u,!0),h.setUint16(x*2,p,!0);var v,b;switch(typeof e[x]){case"string":v=t5({t:"s",v:e[x]},n),b=n5({t:"s",v:e[x]},n);break;case"number":v=t5({t:"n",v:e[x]},n),b=n5({t:"n",v:e[x]},n);break;case"boolean":v=t5({t:"b",v:e[x]},n),b=n5({t:"b",v:e[x]},n);break;default:throw new Error("Unsupported value "+e[x])}d.push(v),u+=v.length,y.push(b),p+=b.length,++l}for(t[2][0].data=ur(l);x<t[7][0].data.length/2;++x)c.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return t[6][0].data=Yd(d),t[3][0].data=Yd(y),l}function ope(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=ca(n["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(xi(r)));var s=Av(n,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(X){return X.forEach(function(q){typeof q=="string"&&o.push(q)})});var a={},l=[],c=mr.read(e.numbers,{type:"base64"});c.FileIndex.map(function(X,q){return[X,c.FullPaths[q]]}).forEach(function(X){var q=X[0],V=X[1];if(q.type==2&&q.name.match(/\.iwa/)){var ne=q.content,ge=hl(ne),ye=fl(ge);ye.forEach(function(xe){l.push(xe.id),a[xe.id]={deps:[],location:V,type:Qp(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(X,q){return X-q});var u=l.filter(function(X){return X>1}).map(function(X){return[X,ur(X)]});c.FileIndex.map(function(X,q){return[X,c.FullPaths[q]]}).forEach(function(X){var q=X[0];if(X[1],!!q.name.match(/\.iwa/)){var V=fl(hl(q.content));V.forEach(function(ne){ne.messages.forEach(function(ge){u.forEach(function(ye){ne.messages.some(function(xe){return Qp(xe.meta[1][0].data)!=11006&&npe(xe.data,ye[1])})&&a[ye[0]].deps.push(ne.id)})})})}});for(var d=mr.find(c,a[1].location),h=fl(hl(d.content)),p,y=0;y<h.length;++y){var x=h[y];x.id==1&&(p=x)}var v=od(ki(p.messages[0].data)[1][0].data);for(d=mr.find(c,a[v].location),h=fl(hl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);for(v=od(ki(p.messages[0].data)[2][0].data),d=mr.find(c,a[v].location),h=fl(hl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);for(v=od(ki(p.messages[0].data)[2][0].data),d=mr.find(c,a[v].location),h=fl(hl(d.content)),y=0;y<h.length;++y)x=h[y],x.id==v&&(p=x);var b=ki(p.messages[0].data);{b[6][0].data=ur(r.e.r+1),b[7][0].data=ur(r.e.c+1);var S=od(b[46][0].data),k=mr.find(c,a[S].location),T=fl(hl(k.content));{for(var j=0;j<T.length&&T[j].id!=S;++j);if(T[j].id!=S)throw"Bad ColumnRowUIDMapArchive";var P=ki(T[j].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var C=0;C<=r.e.c;++C){var N=[];N[1]=N[2]=[{type:0,data:ur(C+420690)}],P[1].push({type:2,data:es(N)}),P[2].push({type:0,data:ur(C)}),P[3].push({type:0,data:ur(C)})}P[4]=[],P[5]=[],P[6]=[];for(var L=0;L<=r.e.r;++L)N=[],N[1]=N[2]=[{type:0,data:ur(L+726270)}],P[4].push({type:2,data:es(N)}),P[5].push({type:0,data:ur(L)}),P[6].push({type:0,data:ur(L)});T[j].messages[0].data=es(P)}k.content=Tp(Ap(T)),k.size=k.content.length,delete b[46];var R=ki(b[4][0].data);{R[7][0].data=ur(r.e.r+1);var D=ki(R[1][0].data),M=od(D[2][0].data);k=mr.find(c,a[M].location),T=fl(hl(k.content));{if(T[0].id!=M)throw"Bad HeaderStorageBucket";var H=ki(T[0].messages[0].data);for(L=0;L<s.length;++L){var W=ki(H[2][0].data);W[1][0].data=ur(L),W[4][0].data=ur(s[L].length),H[2][L]={type:H[2][0].type,data:es(W)}}T[0].messages[0].data=es(H)}k.content=Tp(Ap(T)),k.size=k.content.length;var Z=od(R[2][0].data);k=mr.find(c,a[Z].location),T=fl(hl(k.content));{if(T[0].id!=Z)throw"Bad HeaderStorageBucket";for(H=ki(T[0].messages[0].data),C=0;C<=r.e.c;++C)W=ki(H[2][0].data),W[1][0].data=ur(C),W[4][0].data=ur(r.e.r+1),H[2][C]={type:H[2][0].type,data:es(W)};T[0].messages[0].data=es(H)}k.content=Tp(Ap(T)),k.size=k.content.length;var B=od(R[4][0].data);(function(){for(var X=mr.find(c,a[B].location),q=fl(hl(X.content)),V,ne=0;ne<q.length;++ne){var ge=q[ne];ge.id==B&&(V=ge)}var ye=ki(V.messages[0].data);{ye[3]=[];var xe=[];o.forEach(function($e,Ge){xe[1]=[{type:0,data:ur(Ge)}],xe[2]=[{type:0,data:ur(1)}],xe[3]=[{type:2,data:tpe($e)}],ye[3].push({type:2,data:es(xe)})})}V.messages[0].data=es(ye);var Se=Ap(q),He=Tp(Se);X.content=He,X.size=X.content.length})();var F=ki(R[3][0].data);{var Q=F[1][0];delete F[2];var ee=ki(Q.data);{var te=od(ee[2][0].data);(function(){for(var X=mr.find(c,a[te].location),q=fl(hl(X.content)),V,ne=0;ne<q.length;++ne){var ge=q[ne];ge.id==te&&(V=ge)}var ye=ki(V.messages[0].data);{delete ye[6],delete F[7];var xe=new Uint8Array(ye[5][0].data);ye[5]=[];for(var Se=0,He=0;He<=r.e.r;++He){var $e=ki(xe);Se+=spe($e,s[He],o),$e[1][0].data=ur(He),ye[5].push({data:es($e),type:2})}ye[1]=[{type:0,data:ur(r.e.c+1)}],ye[2]=[{type:0,data:ur(r.e.r+1)}],ye[3]=[{type:0,data:ur(Se)}],ye[4]=[{type:0,data:ur(r.e.r+1)}]}V.messages[0].data=es(ye);var Ge=Ap(q),ze=Tp(Ge);X.content=ze,X.size=X.content.length})()}Q.data=es(ee)}R[3][0].data=es(F)}b[4][0].data=es(R)}p.messages[0].data=es(b);var re=Ap(h),O=Tp(re);return d.content=O,d.size=d.content.length,c}function ape(t){return function(n){for(var r=0;r!=t.length;++r){var i=t[r];n[i[0]]===void 0&&(n[i[0]]=i[1]),i[2]==="n"&&(n[i[0]]=Number(n[i[0]]))}}}function yk(t){ape([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function lpe(t,e){return e.bookType=="ods"?AR(t,e):e.bookType=="numbers"?ope(t,e):e.bookType=="xlsb"?cpe(t,e):upe(t,e)}function cpe(t,e){Hp=1024,t&&!t.SSF&&(t.SSF=Do(Zr)),t&&t.SSF&&(N2(),k2(t.SSF),e.revssf=C2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,dg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n=e.bookType=="xlsb"?"bin":"xml",r=uR.indexOf(e.bookType)>-1,i=zI();yk(e=e||{});var s=tk(),o="",a=0;if(e.cellXfs=[],sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,WI(t.Props,e)),i.coreprops.push(o),dr(e.rels,2,o,Kn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,HI(t.Props)),i.extprops.push(o),dr(e.rels,3,o,Kn.EXT_PROPS),t.Custprops!==t.Props&&ds(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,qI(t.Custprops)),i.custprops.push(o),dr(e.rels,4,o,Kn.CUST_PROPS)),a=1;a<=t.SheetNames.length;++a){var u={"!id":{}},d=t.Sheets[t.SheetNames[a-1]],h=(d||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,kn(s,o,fhe(a-1,o,e,t,u)),i.sheets.push(o),dr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,Kn.WS[0])}if(d){var p=d["!comments"],y=!1,x="";p&&p.length>0&&(x="xl/comments"+a+"."+n,kn(s,x,mhe(p,x)),i.comments.push(x),dr(u,-1,"../comments"+a+"."+n,Kn.CMNT),y=!0),d["!legacy"]&&y&&kn(s,"xl/drawings/vmlDrawing"+a+".vml",lR(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&kn(s,UI(o),Jp(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,kn(s,o,phe(e.Strings,o,e)),i.strs.push(o),dr(e.wbrels,-1,"sharedStrings."+n,Kn.SST)),o="xl/workbook."+n,kn(s,o,dhe(t,o)),i.workbooks.push(o),dr(e.rels,1,o,Kn.WB),o="xl/theme/theme1.xml",kn(s,o,oR(t.Themes,e)),i.themes.push(o),dr(e.wbrels,-1,"theme/theme1.xml",Kn.THEME),o="xl/styles."+n,kn(s,o,hhe(t,o,e)),i.styles.push(o),dr(e.wbrels,-1,"styles."+n,Kn.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),i.vba.push(o),dr(e.wbrels,-1,"vbaProject.bin",Kn.VBA)),o="xl/metadata."+n,kn(s,o,ghe(o)),i.metadata.push(o),dr(e.wbrels,-1,"metadata."+n,Kn.XLMETA),kn(s,"[Content_Types].xml",BI(i,e)),kn(s,"_rels/.rels",Jp(e.rels)),kn(s,"xl/_rels/workbook."+n+".rels",Jp(e.wbrels)),delete e.revssf,delete e.ssf,s}function upe(t,e){Hp=1024,t&&!t.SSF&&(t.SSF=Do(Zr)),t&&t.SSF&&(N2(),k2(t.SSF),e.revssf=C2(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,dg?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",r=uR.indexOf(e.bookType)>-1,i=zI();yk(e=e||{});var s=tk(),o="",a=0;if(e.cellXfs=[],sf(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),o="docProps/core.xml",kn(s,o,WI(t.Props,e)),i.coreprops.push(o),dr(e.rels,2,o,Kn.CORE_PROPS),o="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,kn(s,o,HI(t.Props)),i.extprops.push(o),dr(e.rels,3,o,Kn.EXT_PROPS),t.Custprops!==t.Props&&ds(t.Custprops||{}).length>0&&(o="docProps/custom.xml",kn(s,o,qI(t.Custprops)),i.custprops.push(o),dr(e.rels,4,o,Kn.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=t.SheetNames.length;++a){var d={"!id":{}},h=t.Sheets[t.SheetNames[a-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+a+"."+n,kn(s,o,vR(a-1,e,t,d)),i.sheets.push(o),dr(e.wbrels,-1,"worksheets/sheet"+a+"."+n,Kn.WS[0])}if(h){var y=h["!comments"],x=!1,v="";if(y&&y.length>0){var b=!1;y.forEach(function(S){S[1].forEach(function(k){k.T==!0&&(b=!0)})}),b&&(v="xl/threadedComments/threadedComment"+a+"."+n,kn(s,v,Uce(y,u,e)),i.threadedcomments.push(v),dr(d,-1,"../threadedComments/threadedComment"+a+"."+n,Kn.TCMNT)),v="xl/comments"+a+"."+n,kn(s,v,cR(y)),i.comments.push(v),dr(d,-1,"../comments"+a+"."+n,Kn.CMNT),x=!0}h["!legacy"]&&x&&kn(s,"xl/drawings/vmlDrawing"+a+".vml",lR(a,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&kn(s,UI(o),Jp(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+n,kn(s,o,eR(e.Strings,e)),i.strs.push(o),dr(e.wbrels,-1,"sharedStrings."+n,Kn.SST)),o="xl/workbook."+n,kn(s,o,_R(t)),i.workbooks.push(o),dr(e.rels,1,o,Kn.WB),o="xl/theme/theme1.xml",kn(s,o,oR(t.Themes,e)),i.themes.push(o),dr(e.wbrels,-1,"theme/theme1.xml",Kn.THEME),o="xl/styles."+n,kn(s,o,iR(t,e)),i.styles.push(o),dr(e.wbrels,-1,"styles."+n,Kn.STY),t.vbaraw&&r&&(o="xl/vbaProject.bin",kn(s,o,t.vbaraw),i.vba.push(o),dr(e.wbrels,-1,"vbaProject.bin",Kn.VBA)),o="xl/metadata."+n,kn(s,o,aR()),i.metadata.push(o),dr(e.wbrels,-1,"metadata."+n,Kn.XLMETA),u.length>1&&(o="xl/persons/person.xml",kn(s,o,$ce(u)),i.people.push(o),dr(e.wbrels,-1,"persons/person.xml",Kn.PEOPLE)),kn(s,"[Content_Types].xml",BI(i,e)),kn(s,"_rels/.rels",Jp(e.rels)),kn(s,"xl/_rels/workbook."+n+".rels",Jp(e.wbrels)),delete e.revssf,delete e.ssf,s}function dpe(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=mu(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function TR(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return S1(e.file,mr.write(t,{type:er?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return mr.write(t,e)}function fpe(t,e){var n=Do(e||{}),r=lpe(t,n);return hpe(r,n)}function hpe(t,e){var n={},r=er?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=r;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=t.FullPaths?mr.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(S2(i))}return e.password&&typeof encrypt_agile<"u"?TR(encrypt_agile(i,e.password),e):e.type==="file"?S1(e.file,i):e.type=="string"?ag(i):i}function ppe(t,e){var n=e||{},r=jhe(t,n);return TR(r,n)}function ec(t,e,n){n||(n="");var r=n+t;switch(e.type){case"base64":return Yg(Zg(r));case"binary":return Zg(r);case"string":return t;case"file":return S1(e.file,r,"utf8");case"buffer":return er?yu(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):ec(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function mpe(t,e){switch(e.type){case"base64":return Yg(t);case"binary":return t;case"string":return t;case"file":return S1(e.file,t,"binary");case"buffer":return er?yu(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Vy(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",r=0;r<t.length;++r)n+=String.fromCharCode(t[r]);return e.type=="base64"?Yg(n):e.type=="string"?ag(n):n;case"file":return S1(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function jR(t,e){Woe(),ehe(t);var n=Do(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var r=jR(t,n);return n.type="array",S2(r)}var i=0;if(n.sheet&&(typeof n.sheet=="number"?i=n.sheet:i=t.SheetNames.indexOf(n.sheet),!t.SheetNames[i]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return ec(Ahe(t,n),n);case"slk":case"sylk":return ec(Jle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"htm":case"html":return ec(NR(t.Sheets[t.SheetNames[i]],n),n);case"txt":return mpe(PR(t.Sheets[t.SheetNames[i]],n),n);case"csv":return ec(xk(t.Sheets[t.SheetNames[i]],n),n,"\uFEFF");case"dif":return ec(Zle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"dbf":return Vy(Yle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"prn":return ec(Qle.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"rtf":return ec(oce.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"eth":return ec(QI.from_sheet(t.Sheets[t.SheetNames[i]],n),n);case"fods":return ec(AR(t,n),n);case"wk1":return Vy(yj.sheet_to_wk1(t.Sheets[t.SheetNames[i]],n),n);case"wk3":return Vy(yj.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),Vy(kR(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),ppe(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return fpe(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function gpe(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function ype(t,e,n){var r={};return r.type="file",r.file=e,gpe(r),jR(t,r)}function xpe(t,e,n,r,i,s,o,a){var l=us(n),c=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,h=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:n,enumerable:!1})}catch{h.__rowNum__=n}else h.__rowNum__=n;if(!o||t[n])for(var p=e.s.c;p<=e.e.c;++p){var y=o?t[n][p]:t[r[p]+l];if(y===void 0||y.t===void 0){if(c===void 0)continue;s[p]!=null&&(h[s[p]]=c);continue}var x=y.v;switch(y.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(s[p]!=null){if(x==null)if(y.t=="e"&&x===null)h[s[p]]=null;else if(c!==void 0)h[s[p]]=c;else if(u&&x===null)h[s[p]]=null;else continue;else h[s[p]]=u&&(y.t!=="n"||y.t==="n"&&a.rawNumbers!==!1)?x:gu(y,x,a);x!=null&&(d=!1)}}return{row:h,isempty:d}}function Av(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},r=0,i=1,s=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},u=c.range!=null?c.range:t["!ref"];switch(c.header===1?r=1:c.header==="A"?r=2:Array.isArray(c.header)?r=3:c.header==null&&(r=0),typeof u){case"string":l=Or(u);break;case"number":l=Or(t["!ref"]),l.s.r=u;break;default:l=u}r>0&&(i=0);var d=us(l.s.r),h=[],p=[],y=0,x=0,v=Array.isArray(t),b=l.s.r,S=0,k={};v&&!t[b]&&(t[b]=[]);var T=c.skipHidden&&t["!cols"]||[],j=c.skipHidden&&t["!rows"]||[];for(S=l.s.c;S<=l.e.c;++S)if(!(T[S]||{}).hidden)switch(h[S]=Is(S),n=v?t[b][S]:t[h[S]+d],r){case 1:s[S]=S-l.s.c;break;case 2:s[S]=h[S];break;case 3:s[S]=c.header[S-l.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),a=o=gu(n,null,c),x=k[o]||0,!x)k[o]=1;else{do a=o+"_"+x++;while(k[a]);k[o]=x,k[a]=1}s[S]=a}for(b=l.s.r+i;b<=l.e.r;++b)if(!(j[b]||{}).hidden){var P=xpe(t,l,b,h,r,s,v,c);(P.isempty===!1||(r===1?c.blankrows!==!1:c.blankrows))&&(p[y++]=P.row)}return p.length=y,p}var Nj=/"/g;function vpe(t,e,n,r,i,s,o,a){for(var l=!0,c=[],u="",d=us(n),h=e.s.c;h<=e.e.c;++h)if(r[h]){var p=a.dense?(t[n]||[])[h]:t[r[h]+d];if(p==null)u="";else if(p.v!=null){l=!1,u=""+(a.rawNumbers&&p.t=="n"?p.v:gu(p,null,a));for(var y=0,x=0;y!==u.length;++y)if((x=u.charCodeAt(y))===i||x===s||x===34||a.forceQuotes){u='"'+u.replace(Nj,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(l=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(Nj,'""')+'"')):u="";c.push(u)}return a.blankrows===!1&&l?null:c.join(o)}function xk(t,e){var n=[],r=e??{};if(t==null||t["!ref"]==null)return"";var i=Or(t["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,l=a.charCodeAt(0),c=new RegExp((s=="|"?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(t);for(var h=r.skipHidden&&t["!cols"]||[],p=r.skipHidden&&t["!rows"]||[],y=i.s.c;y<=i.e.c;++y)(h[y]||{}).hidden||(d[y]=Is(y));for(var x=0,v=i.s.r;v<=i.e.r;++v)(p[v]||{}).hidden||(u=vpe(t,i,v,d,o,l,s,r),u!=null&&(r.strip&&(u=u.replace(c,"")),(u||r.blankrows!==!1)&&n.push((x++?a:"")+u)));return delete r.dense,n.join("")}function PR(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=xk(t,e);return n}function wpe(t){var e="",n,r="";if(t==null||t["!ref"]==null)return[];var i=Or(t["!ref"]),s="",o=[],a,l=[],c=Array.isArray(t);for(a=i.s.c;a<=i.e.c;++a)o[a]=Is(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=us(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,n=c?(t[u]||[])[a]:t[e],r="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;r=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)r=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)r=""+n.v;else if(n.t=="b")r=n.v?"TRUE":"FALSE";else if(n.w!==void 0)r="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?r="'"+n.v:r=""+n.v}}l[l.length]=e+"="+r}return l}function DR(t,e,n){var r=n||{},i=+!r.skipHeader,s=t||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var l=typeof r.origin=="string"?zi(r.origin):r.origin;o=l.r,a=l.c}var c,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var d=Or(s["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(o=d.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var h=r.header||[],p=0;e.forEach(function(x,v){ds(x).forEach(function(b){(p=h.indexOf(b))==-1&&(h[p=h.length]=b);var S=x[b],k="z",T="",j=pr({c:a+p,r:o+v+i});c=t1(s,j),S&&typeof S=="object"&&!(S instanceof Date)?s[j]=S:(typeof S=="number"?k="n":typeof S=="boolean"?k="b":typeof S=="string"?k="s":S instanceof Date?(k="d",r.cellDates||(k="n",S=Po(S)),T=r.dateNF||Zr[14]):S===null&&r.nullError&&(k="e",S=0),c?(c.t=k,c.v=S,delete c.w,delete c.R,T&&(c.z=T)):s[j]=c={t:k,v:S},T&&(c.z=T))})}),u.e.c=Math.max(u.e.c,a+h.length-1);var y=us(o);if(i)for(p=0;p<h.length;++p)s[Is(p+a)+y]={t:"s",v:h[p]};return s["!ref"]=xi(u),s}function bpe(t,e){return DR(null,t,e)}function t1(t,e,n){if(typeof e=="string"){if(Array.isArray(t)){var r=zi(e);return t[r.r]||(t[r.r]=[]),t[r.r][r.c]||(t[r.r][r.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?t1(t,pr(e)):t1(t,pr({r:e,c:n||0}))}function _pe(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Spe(){return{SheetNames:[],Sheets:{}}}function kpe(t,e,n,r){var i=1;if(!n)for(;i<=65535&&t.SheetNames.indexOf(n="Sheet"+i)!=-1;++i,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&t.SheetNames.indexOf(n)>=0){var s=n.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||n;for(++i;i<=65535&&t.SheetNames.indexOf(n=o+i)!=-1;++i);}if(bR(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function Npe(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var r=_pe(t,e);switch(t.Workbook.Sheets[r]||(t.Workbook.Sheets[r]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[r].Hidden=n}function Cpe(t,e){return t.z=e,t}function OR(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function Epe(t,e,n){return OR(t,"#"+e,n)}function Ape(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function Tpe(t,e,n,r){for(var i=typeof e!="string"?e:Or(e),s=typeof e=="string"?e:xi(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var l=t1(t,o,a);l.t="n",l.F=s,delete l.v,o==i.s.r&&a==i.s.c&&(l.f=n,r&&(l.D=!0))}return t}var r5={encode_col:Is,encode_row:us,encode_cell:pr,encode_range:xi,decode_col:ak,decode_row:ok,split_cell:Wae,decode_cell:zi,decode_range:ca,format_cell:gu,sheet_add_aoa:OI,sheet_add_json:DR,sheet_add_dom:CR,aoa_to_sheet:O0,json_to_sheet:bpe,table_to_sheet:ER,table_to_book:Zhe,sheet_to_csv:xk,sheet_to_txt:PR,sheet_to_json:Av,sheet_to_html:NR,sheet_to_formulae:wpe,sheet_to_row_object_array:Av,sheet_get_cell:t1,book_new:Spe,book_append_sheet:kpe,book_set_sheet_visibility:Npe,cell_set_number_format:Cpe,cell_set_hyperlink:OR,cell_set_internal_link:Epe,cell_add_comment:Ape,sheet_set_array_formula:Tpe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const jpe=()=>{const t=ua(),[e,n]=Y.useState([]),[r,i]=Y.useState(!0),[s,o]=Y.useState(null),[a,l]=Y.useState("table"),[c,u]=Y.useState({search:"",payoffStatus:"all",sortBy:"name",sortOrder:"asc"}),[d,h]=Y.useState(!1);Y.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const{data:S,error:k}=await ct.from("equipment").select(`
          id,
          name,
          purchase_price,
          purchase_date,
          price,
          promotional_price,
          deposit,
          image,
          categories,
          quantity,
          description
        `);if(k)throw k;const T=await Promise.all(S.map(async j=>{const{data:P,error:C}=await ct.from("reservations").select("total_price").eq("equipment_id",j.id).eq("status","completed");if(C)throw C;const N=(P==null?void 0:P.reduce((R,D)=>R+(D.total_price||0),0))||0,L=j.purchase_price?N/j.purchase_price*100:0;return{...j,total_revenue:N,payoff_percentage:L}}));n(T),o(null)}catch(S){console.error("Error loading stats:",S),o("Nie udao si zaadowa statystyk")}finally{i(!1)}},y=S=>S>=100?"bg-green-500":S>=75?"bg-emerald-400":S>=50?"bg-yellow-400":S>=25?"bg-orange-400":"bg-red-400",x=Y.useMemo(()=>e.filter(S=>{const k=S.name.toLowerCase().includes(c.search.toLowerCase()),T=c.payoffStatus==="all"?!0:c.payoffStatus==="paid"?S.payoff_percentage>=100:S.payoff_percentage<100;return k&&T}).sort((S,k)=>{const T=C=>{switch(c.sortBy){case"name":return C.name;case"purchase_price":return C.purchase_price;case"total_revenue":return C.total_revenue;case"payoff_percentage":return C.payoff_percentage;default:return C.name}},j=T(S),P=T(k);return typeof j=="string"?c.sortOrder==="asc"?j.localeCompare(P):P.localeCompare(j):c.sortOrder==="asc"?j-P:P-j}),[e,c]),v=()=>{const S=x.map(P=>({"Nazwa sprztu":P.name,"Cena zakupu (z)":P.purchase_price.toFixed(2),"Przychd czny (z)":P.total_revenue.toFixed(2),"Postp spaty (%)":P.payoff_percentage.toFixed(1),Status:P.payoff_percentage>=100?"Spacono":"W trakcie","Data zakupu":new Date(P.purchase_date).toLocaleDateString("pl-PL")})),k=r5.json_to_sheet(S),T=r5.book_new();r5.book_append_sheet(T,k,"Statystyki sprztu");const j=[{wch:30},{wch:15},{wch:15},{wch:15},{wch:12},{wch:12}];k["!cols"]=j,ype(T,`Statystyki_sprztu_${new Date().toISOString().split("T")[0]}.xlsx`)},b=S=>{t(`/admin/panel/equipment-stats/${S}`)};return r?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})}):s?m.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:m.jsx("p",{children:s})}):m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Statystyki spaty sprztu"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[m.jsx("button",{onClick:()=>l("table"),className:`p-2 rounded-md transition-colors ${a==="table"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Widok tabeli",children:m.jsx(Pz,{className:"w-5 h-5"})}),m.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-md transition-colors ${a==="grid"?"bg-white shadow-sm":"hover:bg-gray-200"}`,title:"Widok kafelkw",children:m.jsx(Ez,{className:"w-5 h-5"})})]}),m.jsx("button",{onClick:()=>h(!d),className:`p-2 rounded-lg transition-colors ${d?"bg-gray-200":"bg-gray-100 hover:bg-gray-200"}`,title:"Filtry",children:m.jsx(Fz,{className:"w-5 h-5"})}),m.jsxs("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[m.jsx(Ch,{className:"w-5 h-5"}),"Eksportuj do Excel"]})]})]}),d&&m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Wyszukaj"}),m.jsxs("div",{className:"relative",children:[m.jsx(tS,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),m.jsx("input",{type:"text",value:c.search,onChange:S=>u(k=>({...k,search:S.target.value})),placeholder:"Nazwa sprztu...",className:"pl-10 w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status spaty"}),m.jsxs("select",{value:c.payoffStatus,onChange:S=>u(k=>({...k,payoffStatus:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[m.jsx("option",{value:"all",children:"Wszystkie"}),m.jsx("option",{value:"paid",children:"Spacone"}),m.jsx("option",{value:"pending",children:"W trakcie spaty"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sortuj wedug"}),m.jsxs("select",{value:c.sortBy,onChange:S=>u(k=>({...k,sortBy:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[m.jsx("option",{value:"name",children:"Nazwa"}),m.jsx("option",{value:"purchase_price",children:"Cena zakupu"}),m.jsx("option",{value:"total_revenue",children:"Przychd"}),m.jsx("option",{value:"payoff_percentage",children:"Postp spaty"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kolejno"}),m.jsxs("select",{value:c.sortOrder,onChange:S=>u(k=>({...k,sortOrder:S.target.value})),className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-solrent-orange focus:ring-solrent-orange",children:[m.jsx("option",{value:"asc",children:"Rosnco"}),m.jsx("option",{value:"desc",children:"Malejco"})]})]})]}),a==="table"?m.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nazwa sprztu"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cena zakupu"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Przychd czny"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Postp spaty"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(S=>m.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>b(S.id),children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.name})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900",children:[S.purchase_price.toFixed(2)," z"]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900",children:[S.total_revenue.toFixed(2)," z"]})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:m.jsx("div",{className:`h-2.5 rounded-full ${y(S.payoff_percentage)}`,style:{width:`${Math.min(S.payoff_percentage,100)}%`}})}),m.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[S.payoff_percentage.toFixed(1),"%"]})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${S.payoff_percentage>=100?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:S.payoff_percentage>=100?"Spacono":"W trakcie"})})]},S.id))})]})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(S=>m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>b(S.id),children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:S.name}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Cena zakupu"}),m.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[S.purchase_price.toFixed(2)," z"]})]}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Przychd czny"}),m.jsxs("p",{className:"text-lg font-medium text-gray-900",children:[S.total_revenue.toFixed(2)," z"]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Postp spaty"}),m.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[S.payoff_percentage.toFixed(1),"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:m.jsx("div",{className:`h-2.5 rounded-full ${y(S.payoff_percentage)}`,style:{width:`${Math.min(S.payoff_percentage,100)}%`}})})]}),m.jsx("div",{className:"pt-2",children:m.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ${S.payoff_percentage>=100?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:S.payoff_percentage>=100?"Spacono":"W trakcie"})})]})]},S.id))})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function A1(t){return t+.5|0}const Ad=(t,e,n)=>Math.max(Math.min(t,n),e);function Lm(t){return Ad(A1(t*2.55),0,255)}function zd(t){return Ad(A1(t*255),0,255)}function tu(t){return Ad(A1(t/2.55)/100,0,1)}function Cj(t){return Ad(A1(t*100),0,100)}const Da={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},I_=[..."0123456789ABCDEF"],Ppe=t=>I_[t&15],Dpe=t=>I_[(t&240)>>4]+I_[t&15],Hy=t=>(t&240)>>4===(t&15),Ope=t=>Hy(t.r)&&Hy(t.g)&&Hy(t.b)&&Hy(t.a);function Lpe(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Da[t[1]]*17,g:255&Da[t[2]]*17,b:255&Da[t[3]]*17,a:e===5?Da[t[4]]*17:255}:(e===7||e===9)&&(n={r:Da[t[1]]<<4|Da[t[2]],g:Da[t[3]]<<4|Da[t[4]],b:Da[t[5]]<<4|Da[t[6]],a:e===9?Da[t[7]]<<4|Da[t[8]]:255})),n}const Mpe=(t,e)=>t<255?e(t):"";function Ipe(t){var e=Ope(t)?Ppe:Dpe;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Mpe(t.a,e):void 0}const Rpe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function LR(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Fpe(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function zpe(t,e,n){const r=LR(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Bpe(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function vk(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Bpe(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function wk(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(zd)}function bk(t,e,n){return wk(LR,t,e,n)}function Upe(t,e,n){return wk(zpe,t,e,n)}function $pe(t,e,n){return wk(Fpe,t,e,n)}function MR(t){return(t%360+360)%360}function Wpe(t){const e=Rpe.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Lm(+e[5]):zd(+e[5]));const i=MR(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Upe(i,s,o):e[1]==="hsv"?r=$pe(i,s,o):r=bk(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Vpe(t,e){var n=vk(t);n[0]=MR(n[0]+e),n=bk(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Hpe(t){if(!t)return;const e=vk(t),n=e[0],r=Cj(e[1]),i=Cj(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${tu(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Ej={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Aj={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function qpe(){const t={},e=Object.keys(Aj),n=Object.keys(Ej);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Ej[s]);s=parseInt(Aj[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let qy;function Gpe(t){qy||(qy=qpe(),qy.transparent=[0,0,0,0]);const e=qy[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Kpe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xpe(t){const e=Kpe.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Lm(o):Ad(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Lm(r):Ad(r,0,255)),i=255&(e[4]?Lm(i):Ad(i,0,255)),s=255&(e[6]?Lm(s):Ad(s,0,255)),{r,g:i,b:s,a:n}}}function Ype(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${tu(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const i5=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,jp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Jpe(t,e,n){const r=jp(tu(t.r)),i=jp(tu(t.g)),s=jp(tu(t.b));return{r:zd(i5(r+n*(jp(tu(e.r))-r))),g:zd(i5(i+n*(jp(tu(e.g))-i))),b:zd(i5(s+n*(jp(tu(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Gy(t,e,n){if(t){let r=vk(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=bk(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function IR(t,e){return t&&Object.assign(e||{},t)}function Tj(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=zd(t[3]))):(e=IR(t,{r:0,g:0,b:0,a:1}),e.a=zd(e.a)),e}function Zpe(t){return t.charAt(0)==="r"?Xpe(t):Wpe(t)}class n1{constructor(e){if(e instanceof n1)return e;const n=typeof e;let r;n==="object"?r=Tj(e):n==="string"&&(r=Lpe(e)||Gpe(e)||Zpe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=IR(this._rgb);return e&&(e.a=tu(e.a)),e}set rgb(e){this._rgb=Tj(e)}rgbString(){return this._valid?Ype(this._rgb):void 0}hexString(){return this._valid?Ipe(this._rgb):void 0}hslString(){return this._valid?Hpe(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Jpe(this._rgb,e._rgb,n)),this}clone(){return new n1(this.rgb)}alpha(e){return this._rgb.a=zd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=A1(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Gy(this._rgb,2,e),this}darken(e){return Gy(this._rgb,2,-e),this}saturate(e){return Gy(this._rgb,1,e),this}desaturate(e){return Gy(this._rgb,1,-e),this}rotate(e){return Vpe(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Xc(){}const Qpe=(()=>{let t=0;return()=>t++})();function _r(t){return t==null}function Fi(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function tr(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Va(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Yl(t,e){return Va(t)?t:e}function zn(t,e){return typeof t>"u"?e:t}const e0e=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function jr(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function fr(t,e,n,r){let i,s,o;if(Fi(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(tr(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Tv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function jv(t){if(Fi(t))return t.map(jv);if(tr(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=jv(t[n[i]]);return e}return t}function RR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function t0e(t,e,n,r){if(!RR(t))return;const i=e[t],s=n[t];tr(i)&&tr(s)?r1(i,s,r):e[t]=jv(s)}function r1(t,e,n){const r=Fi(e)?e:[e],i=r.length;if(!tr(t))return t;n=n||{};const s=n.merger||t0e;let o;for(let a=0;a<i;++a){if(o=r[a],!tr(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function fg(t,e){return r1(t,e,{merger:n0e})}function n0e(t,e,n){if(!RR(t))return;const r=e[t],i=n[t];tr(r)&&tr(i)?fg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=jv(i))}const jj={"":t=>t,x:t=>t.x,y:t=>t.y};function r0e(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function i0e(t){const e=r0e(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pv(t,e){return(jj[e]||(jj[e]=i0e(e)))(t)}function _k(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Dv=t=>typeof t<"u",Jd=t=>typeof t=="function",Pj=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function s0e(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Vi=Math.PI,fc=2*Vi,o0e=fc+Vi,Ov=Number.POSITIVE_INFINITY,a0e=Vi/180,bl=Vi/2,Ff=Vi/4,Dj=Vi*2/3,FR=Math.log10,g0=Math.sign;function hg(t,e,n){return Math.abs(t-e)<n}function Oj(t){const e=Math.round(t);t=hg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(FR(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function l0e(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function c0e(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function i1(t){return!c0e(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function u0e(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function d0e(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ih(t){return t*(Vi/180)}function f0e(t){return t*(180/Vi)}function Lj(t){if(!Va(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function h0e(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Vi&&(s+=fc),{angle:s,distance:i}}function R_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function p0e(t,e){return(t-e+o0e)%fc-Vi}function fd(t){return(t%fc+fc)%fc}function zR(t,e,n,r){const i=fd(t),s=fd(e),o=fd(n),a=fd(s-i),l=fd(o-i),c=fd(i-s),u=fd(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Ba(t,e,n){return Math.max(e,Math.min(n,t))}function m0e(t){return Ba(t,-32768,32767)}function Mm(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Sk(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const sh=(t,e,n,r)=>Sk(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),g0e=(t,e,n)=>Sk(t,n,r=>t[r][e]>=n);function y0e(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const BR=["push","pop","shift","splice","unshift"];function x0e(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),BR.forEach(n=>{const r="_onData"+_k(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Mj(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(BR.forEach(s=>{delete t[s]}),delete t._chartjs)}function v0e(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const UR=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function $R(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,UR.call(window,()=>{r=!1,t.apply(e,n)}))}}function w0e(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const kk=t=>t==="start"?"left":t==="end"?"right":"center",Ts=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,b0e=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function _0e(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:p,maxDefined:y}=o.getUserBounds();if(p){if(i=Math.min(sh(l,u,d).lo,n?r:sh(e,u,o.getPixelForValue(d)).lo),c){const x=l.slice(0,i+1).reverse().findIndex(v=>!_r(v[a.axis]));i-=Math.max(0,x)}i=Ba(i,0,r-1)}if(y){let x=Math.max(sh(l,o.axis,h,!0).hi+1,n?0:sh(e,u,o.getPixelForValue(h),!0).hi+1);if(c){const v=l.slice(x-1).findIndex(b=>!_r(b[a.axis]));x+=Math.max(0,v)}s=Ba(x,i,r)-i}else s=r-i}return{start:i,count:s}}function S0e(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Ky=t=>t===0||t===1,Ij=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*fc/n)),Rj=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*fc/n)+1,pg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*bl)+1,easeOutSine:t=>Math.sin(t*bl),easeInOutSine:t=>-.5*(Math.cos(Vi*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ky(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ky(t)?t:Ij(t,.075,.3),easeOutElastic:t=>Ky(t)?t:Rj(t,.075,.3),easeInOutElastic(t){return Ky(t)?t:t<.5?.5*Ij(t*2,.1125,.45):.5+.5*Rj(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-pg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?pg.easeInBounce(t*2)*.5:pg.easeOutBounce(t*2-1)*.5+.5};function Nk(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Fj(t){return Nk(t)?t:new n1(t)}function s5(t){return Nk(t)?t:new n1(t).saturate(.5).darken(.1).hexString()}const k0e=["x","y","borderWidth","radius","tension"],N0e=["color","borderColor","backgroundColor"];function C0e(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:N0e},numbers:{type:"number",properties:k0e}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function E0e(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const zj=new Map;function A0e(t,e){e=e||{};const n=t+JSON.stringify(e);let r=zj.get(n);return r||(r=new Intl.NumberFormat(t,e),zj.set(n,r)),r}function WR(t,e,n){return A0e(e,n).format(t)}const T0e={values(t){return Fi(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=j0e(t,n)}const o=FR(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),WR(t,r,l)}};function j0e(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var VR={formatters:T0e};function P0e(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:VR.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Nh=Object.create(null),F_=Object.create(null);function mg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function o5(t,e,n){return typeof e=="string"?r1(mg(t,e),n):r1(mg(t,""),e)}class D0e{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>s5(i.backgroundColor),this.hoverBorderColor=(r,i)=>s5(i.borderColor),this.hoverColor=(r,i)=>s5(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return o5(this,e,n)}get(e){return mg(this,e)}describe(e,n){return o5(F_,e,n)}override(e,n){return o5(Nh,e,n)}route(e,n,r,i){const s=mg(this,e),o=mg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return tr(l)?Object.assign({},c,l):zn(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var di=new D0e({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[C0e,E0e,P0e]);function O0e(t){return!t||_r(t.size)||_r(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Bj(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function zf(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function Uj(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function z_(t,e,n,r){HR(t,e,n,r,null)}function HR(t,e,n,r,i){let s,o,a,l,c,u,d,h;const p=e.pointStyle,y=e.rotation,x=e.radius;let v=(y||0)*a0e;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(v),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,x,0,0,fc):t.arc(n,r,x,0,fc),t.closePath();break;case"triangle":u=i?i/2:x,t.moveTo(n+Math.sin(v)*u,r-Math.cos(v)*x),v+=Dj,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*x),v+=Dj,t.lineTo(n+Math.sin(v)*u,r-Math.cos(v)*x),t.closePath();break;case"rectRounded":c=x*.516,l=x-c,o=Math.cos(v+Ff)*l,d=Math.cos(v+Ff)*(i?i/2-c:l),a=Math.sin(v+Ff)*l,h=Math.sin(v+Ff)*(i?i/2-c:l),t.arc(n-d,r-a,c,v-Vi,v-bl),t.arc(n+h,r-o,c,v-bl,v),t.arc(n+d,r+a,c,v,v+bl),t.arc(n-h,r+o,c,v+bl,v+Vi),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}v+=Ff;case"rectRot":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+h,r-o),t.lineTo(n+d,r+a),t.lineTo(n-h,r+o),t.closePath();break;case"crossRot":v+=Ff;case"cross":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"star":d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o),v+=Ff,d=Math.cos(v)*(i?i/2:x),o=Math.cos(v)*x,a=Math.sin(v)*x,h=Math.sin(v)*(i?i/2:x),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+h,r-o),t.lineTo(n-h,r+o);break;case"line":o=i?i/2:Math.cos(v)*x,a=Math.sin(v)*x,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(v)*(i?i/2:x),r+Math.sin(v)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function s1(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ck(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ek(t){t.restore()}function L0e(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function M0e(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function I0e(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_r(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function R0e(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function F0e(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function o1(t,e,n,r,i,s={}){const o=Fi(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,I0e(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&F0e(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),_r(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),R0e(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function B_(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Vi,Vi,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Vi,bl,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,bl,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-bl,!0),t.lineTo(n+o.topLeft,r)}const z0e=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,B0e=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function U0e(t,e){const n=(""+t).match(z0e);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const $0e=t=>+t||0;function qR(t,e){const n={},r=tr(e),i=r?Object.keys(e):e,s=tr(t)?r?o=>zn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=$0e(s(o));return n}function W0e(t){return qR(t,{top:"y",right:"x",bottom:"y",left:"x"})}function gg(t){return qR(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ha(t){const e=W0e(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ms(t,e){t=t||{},e=e||di.font;let n=zn(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=zn(t.style,e.style);r&&!(""+r).match(B0e)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:zn(t.family,e.family),lineHeight:U0e(zn(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:zn(t.weight,e.weight),string:""};return i.string=O0e(i),i}function Xy(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function V0e(t,e,n){const{min:r,max:i}=t,s=e0e(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ih(t,e){return Object.assign(Object.create(t),e)}function Ak(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=YR("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Ak([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return KR(a,l,()=>Z0e(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Wj(a).includes(l)},ownKeys(a){return Wj(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function y0(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:GR(t,r),setContext:s=>y0(t,s,n,r),override:s=>y0(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return KR(s,o,()=>q0e(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function GR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Jd(n)?n:()=>n,isIndexable:Jd(r)?r:()=>r}}const H0e=(t,e)=>t?t+_k(e):e,Tk=(t,e)=>tr(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function KR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function q0e(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Jd(a)&&o.isScriptable(e)&&(a=G0e(e,a,t,n)),Fi(a)&&a.length&&(a=K0e(e,a,t,o.isIndexable)),Tk(e,a)&&(a=y0(a,i,s&&s[e],o)),a}function G0e(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Tk(t,l)&&(l=jk(i._scopes,i,t,l)),l}function K0e(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(tr(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=jk(c,i,t,u);e.push(y0(d,s,o&&o[t],a))}}return e}function XR(t,e,n){return Jd(t)?t(e,n):t}const X0e=(t,e)=>t===!0?e:typeof t=="string"?Pv(e,t):void 0;function Y0e(t,e,n,r,i){for(const s of e){const o=X0e(n,s);if(o){t.add(o);const a=XR(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function jk(t,e,n,r){const i=e._rootScopes,s=XR(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=$j(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=$j(a,o,s,l,r),l===null)?!1:Ak(Array.from(a),[""],i,s,()=>J0e(e,n,r))}function $j(t,e,n,r,i){for(;n;)n=Y0e(t,e,n,r,i);return n}function J0e(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Fi(i)&&tr(n)?n:i||{}}function Z0e(t,e,n,r){let i;for(const s of e)if(i=YR(H0e(s,t),n),typeof i<"u")return Tk(t,i)?jk(n,r,t,i):i}function YR(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Wj(t){let e=t._keys;return e||(e=t._keys=Q0e(t._scopes)),e}function Q0e(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const eme=Number.EPSILON||1e-14,x0=(t,e)=>e<t.length&&!t[e].skip&&t[e],JR=t=>t==="x"?"y":"x";function tme(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=R_(s,i),l=R_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function nme(t,e,n){const r=t.length;let i,s,o,a,l,c=x0(t,0);for(let u=0;u<r-1;++u)if(l=c,c=x0(t,u+1),!(!l||!c)){if(hg(e[u],0,eme)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function rme(t,e,n="x"){const r=JR(n),i=t.length;let s,o,a,l=x0(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=x0(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function ime(t,e="x"){const n=JR(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=x0(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=x0(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?g0(i[o-1])!==g0(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}nme(t,i,s),rme(t,s,e)}function Yy(t,e,n){return Math.max(Math.min(t,n),e)}function sme(t,e){let n,r,i,s,o,a=s1(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&s1(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Yy(i.cp1x,e.left,e.right),i.cp1y=Yy(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Yy(i.cp2x,e.left,e.right),i.cp2y=Yy(i.cp2y,e.top,e.bottom)))}function ome(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")ime(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=tme(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&sme(t,n)}function Pk(){return typeof window<"u"&&typeof document<"u"}function Dk(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const P2=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function ame(t,e){return P2(t).getPropertyValue(e)}const lme=["top","right","bottom","left"];function yh(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=lme[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const cme=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ume(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(cme(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function qf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=P2(n),s=i.boxSizing==="border-box",o=yh(i,"padding"),a=yh(i,"border","width"),{x:l,y:c,box:u}=ume(t,n),d=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:p,height:y}=e;return s&&(p-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/p*n.width/r),y:Math.round((c-h)/y*n.height/r)}}function dme(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Dk(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=P2(s),l=yh(a,"border","width"),c=yh(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Lv(a.maxWidth,s,"clientWidth"),i=Lv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ov,maxHeight:i||Ov}}const Jy=t=>Math.round(t*10)/10;function fme(t,e,n,r){const i=P2(t),s=yh(i,"margin"),o=Lv(i.maxWidth,t,"clientWidth")||Ov,a=Lv(i.maxHeight,t,"clientHeight")||Ov,l=dme(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const h=yh(i,"border","width"),p=yh(i,"padding");c-=p.width+h.width,u-=p.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Jy(Math.min(c,o,l.maxWidth)),u=Jy(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Jy(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Jy(Math.floor(u*r))),{width:c,height:u}}function Vj(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const hme=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Pk()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Hj(t,e){const n=ame(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Gf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function pme(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function mme(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Gf(t,i,n),a=Gf(i,s,n),l=Gf(s,e,n),c=Gf(o,a,n),u=Gf(a,l,n);return Gf(c,u,n)}const gme=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},yme=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function e0(t,e,n){return t?gme(e,n):yme()}function ZR(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function QR(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function eF(t){return t==="angle"?{between:zR,compare:p0e,normalize:fd}:{between:Mm,compare:(e,n)=>e-n,normalize:e=>e}}function qj({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function xme(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=eF(r),l=e.length;let{start:c,end:u,loop:d}=t,h,p;if(d){for(c+=l,u+=l,h=0,p=l;h<p&&o(a(e[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function vme(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=eF(r),{start:u,end:d,loop:h,style:p}=xme(t,e,n),y=[];let x=!1,v=null,b,S,k;const T=()=>l(i,k,b)&&a(i,k)!==0,j=()=>a(s,b)===0||l(s,k,b),P=()=>x||T(),C=()=>!x||j();for(let N=u,L=u;N<=d;++N)S=e[N%o],!S.skip&&(b=c(S[r]),b!==k&&(x=l(b,i,s),v===null&&P()&&(v=a(b,i)===0?N:L),v!==null&&C()&&(y.push(qj({start:v,end:N,loop:h,count:o,style:p})),v=null),L=N,k=b));return v!==null&&y.push(qj({start:v,end:d,loop:h,count:o,style:p})),y}function wme(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=vme(r[i],t.points,e);s.length&&n.push(...s)}return n}function bme(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function _me(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function Sme(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=bme(n,i,s,r);if(r===!0)return Gj(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Gj(t,_me(n,o,l,c),n,e)}function Gj(t,e,n,r){return!r||!r.setContext||!n?e:kme(t,e,n,r)}function kme(t,e,n,r){const i=t._chart.getContext(),s=Kj(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,h=d;function p(y,x,v,b){const S=a?-1:1;if(y!==x){for(y+=l;n[y%l].skip;)y-=S;for(;n[x%l].skip;)x+=S;y%l!==x%l&&(c.push({start:y%l,end:x%l,loop:v,style:b}),u=b,d=x%l)}}for(const y of e){d=a?d:y.start;let x=n[d%l],v;for(h=d+1;h<=y.end;h++){const b=n[h%l];v=Kj(r.setContext(Ih(i,{type:"segment",p0:x,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),Nme(v,u)&&p(d,h-1,y.loop,u),x=b,u=v}d<h-1&&p(d,h-1,y.loop,u)}return c}function Kj(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Nme(t,e){if(!e)return!1;const n=[],r=function(i,s){return Nk(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Cme{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=UR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Yc=new Cme;const Xj="transparent",Eme={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Fj(t||Xj),i=r.valid&&Fj(e||Xj);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Ame{constructor(e,n,r,i){const s=n[r];i=Xy([e.to,i,s,e.from]);const o=Xy([e.from,s,i]);this._active=!0,this._fn=e.fn||Eme[e.type||typeof o],this._easing=pg[e.easing]||pg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Xy([e.to,n,i,e.from]),this._from=Xy([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class tF{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!tr(e))return;const n=Object.keys(di.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!tr(s))return;const o={};for(const a of n)o[a]=s[a];(Fi(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=jme(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&Tme(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new Ame(h,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Yc.add(this._chart,r),!0}}function Tme(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function jme(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Yj(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function Pme(t,e,n){if(n===!1)return!1;const r=Yj(t,n),i=Yj(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Dme(t){let e,n,r,i;return tr(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function nF(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Jj(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Va(c)&&(s||e===0||g0(e)===g0(c))&&(e+=c)}return!u&&!r.all?0:e}function Ome(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function a5(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Lme(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Mme(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function Ime(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Zj(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Qj(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=Lme(s,o,r),d=e.length;let h;for(let p=0;p<d;++p){const y=e[p],{[l]:x,[c]:v}=y,b=y._stacks||(y._stacks={});h=b[c]=Ime(i,u,x),h[a]=v,h._top=Zj(h,o,!0,r.type),h._bottom=Zj(h,o,!1,r.type);const S=h._visualValues||(h._visualValues={});S[a]=v}}function l5(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function Rme(t,e){return Ih(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Fme(t,e,n){return Ih(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function wm(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const c5=t=>t==="reset"||t==="none",e6=(t,e)=>e?t:Object.assign({},t),zme=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:nF(n,!0),values:null};class yg{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=a5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&wm(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,h,p,y)=>d==="x"?h:d==="r"?y:p,s=n.xAxisID=zn(r.xAxisID,l5(e,"x")),o=n.yAxisID=zn(r.yAxisID,l5(e,"y")),a=n.rAxisID=zn(r.rAxisID,l5(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Mj(this._data,this),e._stacked&&wm(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(tr(n)){const i=this._cachedMeta;this._data=Ome(n,i)}else if(r!==n){if(r){Mj(r,this);const i=this._cachedMeta;wm(i),i._parsed=[]}n&&Object.isExtensible(n)&&x0e(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=a5(n.vScale,n),n.stack!==r.stack&&(i=!0,wm(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Qj(this,n._parsed),n._stacked=a5(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,h;if(this._parsing===!1)r._parsed=i,r._sorted=!0,h=i;else{Fi(i[e])?h=this.parseArrayData(r,i,e,n):tr(i[e])?h=this.parseObjectData(r,i,e,n):h=this.parsePrimitiveData(r,i,e,n);const p=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=h[u],l&&(p()&&(l=!1),c=d);r._sorted=l}o&&Qj(this,h)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let h,p,y;for(h=0,p=i;h<p;++h)y=h+r,d[h]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,h,p;for(u=0,d=i;u<d;++u)h=u+r,p=n[h],c[u]={x:s.parse(Pv(p,a),h),y:o.parse(Pv(p,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:nF(i,!0),values:n._stacks[e.axis]._visualValues};return Jj(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Jj(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=zme(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=Mme(a);let h,p;function y(){p=i[h];const x=p[a.axis];return!Va(p[e.axis])||u>x||d<x}for(h=0;h<o&&!(!y()&&(this.updateRangeFromParsed(c,e,p,l),s));++h);if(s){for(h=o-1;h>=0;--h)if(!y()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Va(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Dme(zn(this.options.clip,Pme(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Fme(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Rme(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Dv(r);if(a)return e6(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),p=Object.keys(di.elements[e]),y=()=>this.getContext(r,i,n),x=c.resolveNamedOptions(h,p,y,d);return x.$shared&&(x.$shared=l,s[o]=Object.freeze(e6(x,l))),x}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(h,this.getContext(e,r,n))}const c=new tF(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||c5(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){c5(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!c5(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&wm(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Sn(yg,"defaults",{}),Sn(yg,"datasetElementType",null),Sn(yg,"dataElementType",null);class xx extends yg{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=_0e(n,i,o);this._drawStart=a,this._drawCount=l,S0e(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),h=o.axis,p=a.axis,{spanGaps:y,segment:x}=this.options,v=i1(y)?y:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||i==="none",S=n+r,k=e.length;let T=n>0&&this.getParsed(n-1);for(let j=0;j<k;++j){const P=e[j],C=b?P:{};if(j<n||j>=S){C.skip=!0;continue}const N=this.getParsed(j),L=_r(N[p]),R=C[h]=o.getPixelForValue(N[h],j),D=C[p]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[p],j);C.skip=isNaN(R)||isNaN(D)||L,C.stop=j>0&&Math.abs(N[h]-T[h])>v,x&&(C.parsed=N,C.raw=c.data[j]),d&&(C.options=u||this.resolveDataElementOptions(j,P.active?"active":i)),b||this.updateElement(P,j,C,i),T=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Sn(xx,"id","line"),Sn(xx,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Sn(xx,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Bf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ok{constructor(e){Sn(this,"options");this.options=e||{}}static override(e){Object.assign(Ok.prototype,e)}init(){}formats(){return Bf()}parse(){return Bf()}format(){return Bf()}add(){return Bf()}diff(){return Bf()}startOf(){return Bf()}endOf(){return Bf()}}var Bme={_date:Ok};function Ume(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?g0e:sh;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const h=c(s,e,n-d),p=c(s,e,n+d);return{lo:h.lo,hi:p.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:h}=t,p=h.slice(0,u.lo+1).reverse().findIndex(x=>!_r(x[d.axis]));u.lo-=Math.max(0,p);const y=h.slice(u.hi).findIndex(x=>!_r(x[d.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function D2(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:h}=Ume(s[a],e,o,i);for(let p=d;p<=h;++p){const y=u[p];y.skip||r(y,c,p)}}}function $me(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function u5(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||D2(t,n,e,function(a,l,c){!i&&!s1(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Wme(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=h0e(o,{x:e.x,y:e.y});zR(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return D2(t,n,e,s),i}function Vme(t,e,n,r,i,s){let o=[];const a=$me(n);let l=Number.POSITIVE_INFINITY;function c(u,d,h){const p=u.inRange(e.x,e.y,i);if(r&&!p)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!p)return;const v=a(e,y);v<l?(o=[{element:u,datasetIndex:d,index:h}],l=v):v===l&&o.push({element:u,datasetIndex:d,index:h})}return D2(t,n,e,c),o}function d5(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?Wme(t,e,n,i):Vme(t,e,n,r,i,s)}function t6(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return D2(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var Hme={modes:{index(t,e,n,r){const i=qf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?u5(t,i,s,r,o):d5(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=qf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?u5(t,i,s,r,o):d5(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=qf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return u5(t,i,s,r,o)},nearest(t,e,n,r){const i=qf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return d5(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=qf(e,t);return t6(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=qf(e,t);return t6(t,i,"y",n.intersect,r)}}};const rF=["left","top","right","bottom"];function bm(t,e){return t.filter(n=>n.pos===e)}function n6(t,e){return t.filter(n=>rF.indexOf(n.pos)===-1&&n.box.axis===e)}function _m(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function qme(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function Gme(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!rF.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Kme(t,e){const n=Gme(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function Xme(t){const e=qme(t),n=_m(e.filter(c=>c.box.fullSize),!0),r=_m(bm(e,"left"),!0),i=_m(bm(e,"right")),s=_m(bm(e,"top"),!0),o=_m(bm(e,"bottom")),a=n6(e,"x"),l=n6(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:bm(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function r6(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function iF(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Yme(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!tr(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&iF(o,s.getPadding());const a=Math.max(0,e.outerWidth-r6(o,t,"left","right")),l=Math.max(0,e.outerHeight-r6(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function Jme(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function Zme(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Im(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,Zme(a.horizontal,e));const{same:d,other:h}=Yme(e,n,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Im(i,e,n,r)||u}function Zy(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function i6(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,h=c.size||l.height;Dv(c.start)&&(o=c.start),l.fullSize?Zy(l,i.left,o,n.outerWidth-i.right-i.left,h):Zy(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,h=c.size||l.width;Dv(c.start)&&(s=c.start),l.fullSize?Zy(l,s,i.top,h,n.outerHeight-i.bottom-i.top):Zy(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var Ua={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ha(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=Xme(t.boxes),l=a.vertical,c=a.horizontal;fr(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=l.reduce((x,v)=>v.box.options&&v.box.options.display===!1?x:x+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);iF(h,Ha(r));const p=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),y=Kme(l.concat(c),d);Im(a.fullSize,p,d,y),Im(l,p,d,y),Im(c,p,d,y)&&Im(l,p,d,y),Jme(p),i6(a.leftAndTop,p,d,y),p.x+=p.w,p.y+=p.h,i6(a.rightAndBottom,p,d,y),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},fr(a.chartArea,x=>{const v=x.box;Object.assign(v,t.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class sF{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Qme extends sF{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const vx="$chartjs",ege={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},s6=t=>t===null||t==="";function tge(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[vx]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",s6(i)){const s=Hj(t,"width");s!==void 0&&(t.width=s)}if(s6(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Hj(t,"height");s!==void 0&&(t.height=s)}return t}const oF=hme?{passive:!0}:!1;function nge(t,e,n){t&&t.addEventListener(e,n,oF)}function rge(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oF)}function ige(t,e){const n=ege[t.type]||t.type,{x:r,y:i}=qf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Mv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function sge(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mv(a.addedNodes,r),o=o&&!Mv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function oge(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mv(a.removedNodes,r),o=o&&!Mv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const a1=new Map;let o6=0;function aF(){const t=window.devicePixelRatio;t!==o6&&(o6=t,a1.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function age(t,e){a1.size||window.addEventListener("resize",aF),a1.set(t,e)}function lge(t){a1.delete(t),a1.size||window.removeEventListener("resize",aF)}function cge(t,e,n){const r=t.canvas,i=r&&Dk(r);if(!i)return;const s=$R((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),age(t,s),o}function f5(t,e,n){n&&n.disconnect(),e==="resize"&&lge(t)}function uge(t,e,n){const r=t.canvas,i=$R(s=>{t.ctx!==null&&n(ige(s,t))},t);return nge(r,e,i),i}class dge extends sF{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(tge(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[vx])return!1;const r=n[vx].initial;["height","width"].forEach(s=>{const o=r[s];_r(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[vx],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:sge,detach:oge,resize:cge}[n]||uge;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:f5,detach:f5,resize:f5}[n]||rge)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return fme(e,n,r,i)}isAttached(e){const n=e&&Dk(e);return!!(n&&n.isConnected)}}function fge(t){return!Pk()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Qme:dge}var sx;let Rh=(sx=class{constructor(){Sn(this,"x");Sn(this,"y");Sn(this,"active",!1);Sn(this,"options");Sn(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return i1(this.x)&&i1(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Sn(sx,"defaults",{}),Sn(sx,"defaultRoutes"),sx);function hge(t,e){const n=t.options.ticks,r=pge(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?gge(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return yge(e,c,s,o/i),c;const u=mge(s,e,i);if(o>0){let d,h;const p=o>1?Math.round((l-a)/(o-1)):null;for(Qy(e,c,u,_r(p)?0:a-p,a),d=0,h=o-1;d<h;d++)Qy(e,c,u,s[d],s[d+1]);return Qy(e,c,u,l,_r(p)?e.length:l+p),c}return Qy(e,c,u),c}function pge(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function mge(t,e,n){const r=xge(t),i=e.length/n;if(!r)return Math.max(i,1);const s=l0e(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function gge(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function yge(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Qy(t,e,n,r,i){const s=zn(r,0),o=Math.min(zn(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function xge(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const vge=t=>t==="left"?"right":t==="right"?"left":t,a6=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,l6=(t,e)=>Math.min(e||t,t);function c6(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function wge(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function bge(t,e){fr(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Sm(t){return t.drawTicks?t.tickLength:0}function u6(t,e){if(!t.display)return 0;const n=Ms(t.font,e),r=Ha(t.padding);return(Fi(t.text)?t.text.length:1)*n.lineHeight+r.height}function _ge(t,e){return Ih(t,{scale:e,type:"scale"})}function Sge(t,e,n){return Ih(t,{tick:n,index:e,type:"tick"})}function kge(t,e,n){let r=kk(t);return(n&&e!=="right"||!n&&e==="right")&&(r=vge(r)),r}function Nge(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,h,p,y;const x=o-i,v=a-s;if(t.isHorizontal()){if(p=Ts(r,s,a),tr(n)){const b=Object.keys(n)[0],S=n[b];y=u[b].getPixelForValue(S)+x-e}else n==="center"?y=(c.bottom+c.top)/2+x-e:y=a6(t,n,e);h=a-s}else{if(tr(n)){const b=Object.keys(n)[0],S=n[b];p=u[b].getPixelForValue(S)-v+e}else n==="center"?p=(c.left+c.right)/2-v+e:p=a6(t,n,e);y=Ts(r,o,i),d=n==="left"?-bl:bl}return{titleX:p,titleY:y,maxWidth:h,rotation:d}}class I0 extends Rh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Yl(e,Number.POSITIVE_INFINITY),n=Yl(n,Number.NEGATIVE_INFINITY),r=Yl(r,Number.POSITIVE_INFINITY),i=Yl(i,Number.NEGATIVE_INFINITY),{min:Yl(e,r),max:Yl(n,i),minDefined:Va(e),maxDefined:Va(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Yl(n,Yl(r,n)),max:Yl(r,Yl(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){jr(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=V0e(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?c6(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hge(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){jr(this.options.afterUpdate,[this])}beforeSetDimensions(){jr(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){jr(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),jr(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){jr(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=jr(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){jr(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){jr(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=l6(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,p=Ba(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),d+6>a&&(a=p/(r-(e.offset?.5:1)),l=this.maxHeight-Sm(e.grid)-n.padding-u6(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=f0e(Math.min(Math.asin(Ba((u.highest.height+6)/a,-1,1)),Math.asin(Ba(l/c,-1,1))-Math.asin(Ba(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){jr(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){jr(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=u6(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Sm(s)+l):(e.height=this.maxHeight,e.width=Sm(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),p=r.padding*2,y=ih(this.labelRotation),x=Math.cos(y),v=Math.sin(y);if(a){const b=r.mirror?0:v*d.width+x*h.height;e.height=Math.min(this.maxHeight,e.height+b+p)}else{const b=r.mirror?0:x*d.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+b+p)}this._calculatePadding(c,u,v,x)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;l?c?(h=i*e.width,p=r*n.height):(h=r*e.height,p=i*n.width):s==="start"?p=n.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,p=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){jr(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_r(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=c6(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/l6(n,r));let c=0,u=0,d,h,p,y,x,v,b,S,k,T,j;for(d=0;d<n;d+=l){if(y=e[d].label,x=this._resolveTickFontOptions(d),i.font=v=x.string,b=s[v]=s[v]||{data:{},gc:[]},S=x.lineHeight,k=T=0,!_r(y)&&!Fi(y))k=Bj(i,b.data,b.gc,k,y),T=S;else if(Fi(y))for(h=0,p=y.length;h<p;++h)j=y[h],!_r(j)&&!Fi(j)&&(k=Bj(i,b.data,b.gc,k,j),T+=S);o.push(k),a.push(T),c=Math.max(k,c),u=Math.max(T,u)}bge(s,n);const P=o.indexOf(c),C=a.indexOf(u),N=L=>({width:o[L]||0,height:a[L]||0});return{first:N(0),last:N(n-1),widest:N(P),highest:N(C),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return m0e(this._alignToPixels?zf(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=Sge(this.getContext(),e,r))}return this.$context||(this.$context=_ge(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ih(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Sm(s),p=[],y=a.setContext(this.getContext()),x=y.display?y.width:0,v=x/2,b=function(B){return zf(r,B,x)};let S,k,T,j,P,C,N,L,R,D,M,H;if(o==="top")S=b(this.bottom),C=this.bottom-h,L=S-v,D=b(e.top)+v,H=e.bottom;else if(o==="bottom")S=b(this.top),D=e.top,H=b(e.bottom)-v,C=S+v,L=this.top+h;else if(o==="left")S=b(this.right),P=this.right-h,N=S-v,R=b(e.left)+v,M=e.right;else if(o==="right")S=b(this.left),R=e.left,M=b(e.right)-v,P=S+v,N=this.left+h;else if(n==="x"){if(o==="center")S=b((e.top+e.bottom)/2+.5);else if(tr(o)){const B=Object.keys(o)[0],F=o[B];S=b(this.chart.scales[B].getPixelForValue(F))}D=e.top,H=e.bottom,C=S+v,L=C+h}else if(n==="y"){if(o==="center")S=b((e.left+e.right)/2);else if(tr(o)){const B=Object.keys(o)[0],F=o[B];S=b(this.chart.scales[B].getPixelForValue(F))}P=S-v,N=P-h,R=e.left,M=e.right}const W=zn(i.ticks.maxTicksLimit,d),Z=Math.max(1,Math.ceil(d/W));for(k=0;k<d;k+=Z){const B=this.getContext(k),F=s.setContext(B),Q=a.setContext(B),ee=F.lineWidth,te=F.color,re=Q.dash||[],O=Q.dashOffset,X=F.tickWidth,q=F.tickColor,V=F.tickBorderDash||[],ne=F.tickBorderDashOffset;T=wge(this,k,l),T!==void 0&&(j=zf(r,T,ee),c?P=N=R=M=j:C=L=D=H=j,p.push({tx1:P,ty1:C,tx2:N,ty2:L,x1:R,y1:D,x2:M,y2:H,width:ee,color:te,borderDash:re,borderDashOffset:O,tickWidth:X,tickColor:q,tickBorderDash:V,tickBorderDashOffset:ne}))}return this._ticksLength=d,this._borderValue=S,p}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=Sm(r.grid),p=h+u,y=d?-u:p,x=-ih(this.labelRotation),v=[];let b,S,k,T,j,P,C,N,L,R,D,M,H="middle";if(i==="top")P=this.bottom-y,C=this._getXAxisLabelAlignment();else if(i==="bottom")P=this.top+y,C=this._getXAxisLabelAlignment();else if(i==="left"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,j=Z.x}else if(i==="right"){const Z=this._getYAxisLabelAlignment(h);C=Z.textAlign,j=Z.x}else if(n==="x"){if(i==="center")P=(e.top+e.bottom)/2+p;else if(tr(i)){const Z=Object.keys(i)[0],B=i[Z];P=this.chart.scales[Z].getPixelForValue(B)+p}C=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")j=(e.left+e.right)/2-p;else if(tr(i)){const Z=Object.keys(i)[0],B=i[Z];j=this.chart.scales[Z].getPixelForValue(B)}C=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?H="top":l==="end"&&(H="bottom"));const W=this._getLabelSizes();for(b=0,S=a.length;b<S;++b){k=a[b],T=k.label;const Z=s.setContext(this.getContext(b));N=this.getPixelForTick(b)+s.labelOffset,L=this._resolveTickFontOptions(b),R=L.lineHeight,D=Fi(T)?T.length:1;const B=D/2,F=Z.color,Q=Z.textStrokeColor,ee=Z.textStrokeWidth;let te=C;o?(j=N,C==="inner"&&(b===S-1?te=this.options.reverse?"left":"right":b===0?te=this.options.reverse?"right":"left":te="center"),i==="top"?c==="near"||x!==0?M=-D*R+R/2:c==="center"?M=-W.highest.height/2-B*R+R:M=-W.highest.height+R/2:c==="near"||x!==0?M=R/2:c==="center"?M=W.highest.height/2-B*R:M=W.highest.height-D*R,d&&(M*=-1),x!==0&&!Z.showLabelBackdrop&&(j+=R/2*Math.sin(x))):(P=N,M=(1-D)*R/2);let re;if(Z.showLabelBackdrop){const O=Ha(Z.backdropPadding),X=W.heights[b],q=W.widths[b];let V=M-O.top,ne=0-O.left;switch(H){case"middle":V-=X/2;break;case"bottom":V-=X;break}switch(C){case"center":ne-=q/2;break;case"right":ne-=q;break;case"inner":b===S-1?ne-=q:b>0&&(ne-=q/2);break}re={left:ne,top:V,width:q+O.width,height:X+O.height,color:Z.backdropColor}}v.push({label:T,font:L,textOffset:M,options:{rotation:x,color:F,strokeColor:Q,strokeWidth:ee,textAlign:te,textBaseline:H,translation:[j,P],backdrop:re}})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ih(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,h;this.isHorizontal()?(c=zf(e,this.left,o)-o/2,u=zf(e,this.right,a)+a/2,d=h=l):(d=zf(e,this.top,o)-o/2,h=zf(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Ck(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;o1(r,c,0,u,l,a)}i&&Ek(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Ms(r.font),o=Ha(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||tr(n)?(l+=o.bottom,Fi(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:h}=Nge(this,l,n,a);o1(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:kge(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=zn(e.grid&&e.grid.z,-1),i=zn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==I0.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ms(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ex{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Age(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Cge(e,o,r),this.override&&di.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in di[i]&&(delete di[i][r],this.override&&delete Nh[r])}}function Cge(t,e,n){const r=r1(Object.create(null),[n?di.get(n):{},di.get(e),t.defaults]);di.set(e,r),t.defaultRoutes&&Ege(e,t.defaultRoutes),t.descriptors&&di.describe(e,t.descriptors)}function Ege(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");di.route(s,i,l,a)})}function Age(t){return"id"in t&&"defaults"in t}class Tge{constructor(){this.controllers=new ex(yg,"datasets",!0),this.elements=new ex(Rh,"elements"),this.plugins=new ex(Object,"plugins"),this.scales=new ex(I0,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):fr(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=_k(e);jr(r["before"+i],[],r),n[e](r),jr(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var rc=new Tge;class jge{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(jr(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){_r(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=zn(r.options&&r.options.plugins,{}),s=Pge(r);return i===!1&&!n?[]:Oge(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Pge(t){const e={},n=[],r=Object.keys(rc.plugins.items);for(let s=0;s<r.length;s++)n.push(rc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Dge(t,e){return!e&&t===!1?null:t===!0?{}:t}function Oge(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Dge(r[l],i);c!==null&&s.push({plugin:a,options:Lge(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Lge(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function U_(t,e){const n=di.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Mge(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Ige(t,e){return t===e?"_index_":"_value_"}function d6(t){if(t==="x"||t==="y"||t==="r")return t}function Rge(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function $_(t,...e){if(d6(t))return t;for(const n of e){const r=n.axis||Rge(n.position)||t.length>1&&d6(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function f6(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Fge(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return f6(t,"x",n[0])||f6(t,"y",n[0])}return{}}function zge(t,e){const n=Nh[t.type]||{scales:{}},r=e.scales||{},i=U_(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!tr(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=$_(o,a,Fge(o,t),di.scales[a.type]),c=Ige(l,i),u=n.scales||{};s[o]=fg(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||U_(a,e),u=(Nh[a]||{}).scales||{};Object.keys(u).forEach(d=>{const h=Mge(d,l),p=o[h+"AxisID"]||h;s[p]=s[p]||Object.create(null),fg(s[p],[{axis:h},r[p],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];fg(a,[di.scales[a.type],di.scale])}),s}function lF(t){const e=t.options||(t.options={});e.plugins=zn(e.plugins,{}),e.scales=zge(t,e)}function cF(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Bge(t){return t=t||{},t.data=cF(t.data),lF(t),t}const h6=new Map,uF=new Set;function tx(t,e){let n=h6.get(t);return n||(n=e(),h6.set(t,n),uF.add(n)),n}const km=(t,e,n)=>{const r=Pv(e,n);r!==void 0&&t.add(r)};class Uge{constructor(e){this._config=Bge(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cF(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lF(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return tx(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return tx(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return tx(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>km(l,e,d))),u.forEach(d=>km(l,i,d)),u.forEach(d=>km(l,Nh[s]||{},d)),u.forEach(d=>km(l,di,d)),u.forEach(d=>km(l,F_,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),uF.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Nh[n]||{},di.datasets[n]||{},{type:n},di,F_]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=p6(this._resolverCache,e,i);let l=o;if(Wge(o,n)){s.$shared=!1,r=Jd(r)?r():r;const c=this.createResolver(e,r,a);l=y0(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=p6(this._resolverCache,e,r);return tr(n)?y0(s,n,void 0,i):s}}function p6(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Ak(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const $ge=t=>tr(t)&&Object.getOwnPropertyNames(t).some(e=>Jd(t[e]));function Wge(t,e){const{isScriptable:n,isIndexable:r}=GR(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Jd(a)||$ge(a))||o&&Fi(a))return!0}return!1}var Vge="4.4.8";const Hge=["top","bottom","left","right","chartArea"];function m6(t,e){return t==="top"||t==="bottom"||Hge.indexOf(t)===-1&&e==="x"}function g6(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function y6(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),jr(n&&n.onComplete,[t],e)}function qge(t){const e=t.chart,n=e.options.animation;jr(n&&n.onProgress,[t],e)}function dF(t){return Pk()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const wx={},x6=t=>{const e=dF(t);return Object.values(wx).filter(n=>n.canvas===e).pop()};function Gge(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Kge(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function nx(t,e,n){return t.options.clip?t[n]:e[n]}function Xge(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:nx(n,e,"left"),right:nx(n,e,"right"),top:nx(r,e,"top"),bottom:nx(r,e,"bottom")}:e}var ad;let O2=(ad=class{static register(...e){rc.add(...e),v6()}static unregister(...e){rc.remove(...e),v6()}constructor(e,n){const r=this.config=new Uge(n),i=dF(e),s=x6(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||fge(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Qpe(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new jge,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=w0e(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],wx[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Yc.listen(this,"complete",y6),Yc.listen(this,"progress",qge),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return _r(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Vj(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Uj(this.canvas,this.ctx),this}stop(){return Yc.stop(this),this}resize(e,n){Yc.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Vj(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),jr(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};fr(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=$_(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),fr(s,o=>{const a=o.options,l=a.id,c=$_(l,a),u=zn(a.type,o.dtype);(a.position===void 0||m6(a.position,c)!==m6(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const h=rc.getScale(u);d=new h({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),fr(i,(o,a)=>{o||delete r[a]}),fr(r,o=>{Ua.configure(this,o,o.options),Ua.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(g6("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||U_(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rc.getController(a),{datasetElementType:c,dataElementType:u}=di.datasets[a];Object.assign(l,{dataElementType:rc.getElement(u),datasetElementType:c&&rc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){fr(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),h=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(h),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||fr(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(g6("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){fr(this.scales,e=>{Ua.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Pj(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Gge(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Pj(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ua.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],fr(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Jd(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Yc.has(this)?this.attached&&!Yc.running(this)&&Yc.start(this):(this.draw(),y6({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Xge(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Ck(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ek(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return s1(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=Hme.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ih(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Dv(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Yc.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Uj(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete wx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};fr(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){fr(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},fr(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Tv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=s0e(e),c=Kge(e,this._lastEvent,r,l);r&&(this._lastEvent=null,jr(s.onHover,[e,a,this],this),l&&jr(s.onClick,[e,a,this],this));const u=!Tv(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},Sn(ad,"defaults",di),Sn(ad,"instances",wx),Sn(ad,"overrides",Nh),Sn(ad,"registry",rc),Sn(ad,"version",Vge),Sn(ad,"getChart",x6),ad);function v6(){return fr(O2.instances,t=>t._plugins.invalidate())}function fF(t,e,n=e){t.lineCap=zn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(zn(n.borderDash,e.borderDash)),t.lineDashOffset=zn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=zn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=zn(n.borderWidth,e.borderWidth),t.strokeStyle=zn(n.borderColor,e.borderColor)}function Yge(t,e,n){t.lineTo(n.x,n.y)}function Jge(t){return t.stepped?L0e:t.tension||t.cubicInterpolationMode==="monotone"?M0e:Yge}function hF(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function Zge(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=hF(i,n,r),u=Jge(s);let{move:d=!0,reverse:h}=r||{},p,y,x;for(p=0;p<=c;++p)y=i[(a+(h?c-p:p))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):u(t,x,y,h,s.stepped),x=y);return l&&(y=i[(a+(h?c:0))%o],u(t,x,y,h,s.stepped)),!!l}function Qge(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=hF(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,h,p,y,x,v,b;const S=T=>(o+(c?a-T:T))%s,k=()=>{x!==v&&(t.lineTo(u,v),t.lineTo(u,x),t.lineTo(u,b))};for(l&&(p=i[S(0)],t.moveTo(p.x,p.y)),h=0;h<=a;++h){if(p=i[S(h)],p.skip)continue;const T=p.x,j=p.y,P=T|0;P===y?(j<x?x=j:j>v&&(v=j),u=(d*u+T)/++d):(k(),t.lineTo(T,j),y=P,d=0,x=v=j),b=j}k()}function W_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Qge:Zge}function e1e(t){return t.stepped?pme:t.tension||t.cubicInterpolationMode==="monotone"?mme:Gf}function t1e(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),fF(t,e.options),t.stroke(i)}function n1e(t,e,n,r){const{segments:i,options:s}=e,o=W_(e);for(const a of i)fF(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const r1e=typeof Path2D=="function";function i1e(t,e,n,r){r1e&&!e.options.segment?t1e(t,e,n,r):n1e(t,e,n,r)}class Rm extends Rh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;ome(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Sme(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=wme(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=e1e(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:h}=o[c],p=s[d],y=s[h];if(p===y){a.push(p);continue}const x=Math.abs((i-p[n])/(y[n]-p[n])),v=l(p,y,x,r.stepped);v[n]=e[n],a.push(v)}return a.length===1?a[0]:a}pathSegment(e,n,r){return W_(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=W_(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),i1e(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Sn(Rm,"id","line"),Sn(Rm,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Sn(Rm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Sn(Rm,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function w6(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class bx extends Rh{constructor(n){super();Sn(this,"parsed");Sn(this,"skip");Sn(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return w6(this,n,"x",r)}inYRange(n,r){return w6(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!s1(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,z_(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Sn(bx,"id","point"),Sn(bx,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Sn(bx,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const b6=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},s1e=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class _6 extends Rh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=jr(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ms(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=b6(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,p=-u;return this.legendItems.forEach((y,x)=>{const v=r+n/2+s.measureText(y.text).width;(x===0||c[c.length-1]+v+2*a>o)&&(d+=u,c[c.length-(x>0?0:1)]=0,p+=u,h++),l[x]={left:0,top:p,row:h,width:v,height:i},c[c.length-1]+=v+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,h=0,p=0,y=0,x=0;return this.legendItems.forEach((v,b)=>{const{itemWidth:S,itemHeight:k}=o1e(r,n,s,v,i);b>0&&p+k+2*a>u&&(d+=h+a,c.push({width:h,height:p}),y+=h+a,x++,h=p=0),l[b]={left:y,top:p,col:x,width:S,height:k},h=Math.max(h,S),p+=k+a}),d+=h,c.push({width:h,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=e0(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ts(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ts(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ts(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ts(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ck(e,this),this._draw(),Ek(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=di.color,l=e0(e.rtl,this.left,this.width),c=Ms(o.font),{padding:u}=o,d=c.size,h=d/2;let p;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:x,itemHeight:v}=b6(o,d),b=function(P,C,N){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;i.save();const L=zn(N.lineWidth,1);if(i.fillStyle=zn(N.fillStyle,a),i.lineCap=zn(N.lineCap,"butt"),i.lineDashOffset=zn(N.lineDashOffset,0),i.lineJoin=zn(N.lineJoin,"miter"),i.lineWidth=L,i.strokeStyle=zn(N.strokeStyle,a),i.setLineDash(zn(N.lineDash,[])),o.usePointStyle){const R={radius:x*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:L},D=l.xPlus(P,y/2),M=C+h;HR(i,R,D,M,o.pointStyleWidth&&y)}else{const R=C+Math.max((d-x)/2,0),D=l.leftForLtr(P,y),M=gg(N.borderRadius);i.beginPath(),Object.values(M).some(H=>H!==0)?B_(i,{x:D,y:R,w:y,h:x,radius:M}):i.rect(D,R,y,x),i.fill(),L!==0&&i.stroke()}i.restore()},S=function(P,C,N){o1(i,N.text,P,C+v/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},k=this.isHorizontal(),T=this._computeTitleHeight();k?p={x:Ts(s,this.left+u,this.right-r[0]),y:this.top+u+T,line:0}:p={x:this.left+u,y:Ts(s,this.top+T+u,this.bottom-n[0].height),line:0},ZR(this.ctx,e.textDirection);const j=v+u;this.legendItems.forEach((P,C)=>{i.strokeStyle=P.fontColor,i.fillStyle=P.fontColor;const N=i.measureText(P.text).width,L=l.textAlign(P.textAlign||(P.textAlign=o.textAlign)),R=y+h+N;let D=p.x,M=p.y;l.setWidth(this.width),k?C>0&&D+R+u>this.right&&(M=p.y+=j,p.line++,D=p.x=Ts(s,this.left+u,this.right-r[p.line])):C>0&&M+j>this.bottom&&(D=p.x=D+n[p.line].width+u,p.line++,M=p.y=Ts(s,this.top+T+u,this.bottom-n[p.line].height));const H=l.x(D);if(b(H,M,P),D=b0e(L,D+y+h,k?D+R:this.right,e.rtl),S(l.x(D),M,P),k)p.x+=R+u;else if(typeof P.text!="string"){const W=c.lineHeight;p.y+=pF(P,W)+u}else p.y+=j}),QR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ms(n.font),i=Ha(n.padding);if(!n.display)return;const s=e0(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ts(e.align,d,this.right-h);else{const y=this.columnSizes.reduce((x,v)=>Math.max(x,v.height),0);u=c+Ts(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const p=Ts(a,d,d+h);o.textAlign=s.textAlign(kk(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,o1(o,n.text,p,u,r)}_computeTitleHeight(){const e=this.options.title,n=Ms(e.font),r=Ha(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Mm(e,this.left,this.right)&&Mm(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Mm(e,i.left,i.left+i.width)&&Mm(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!c1e(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=s1e(i,r);i&&!s&&jr(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&jr(n.onHover,[e,r,this],this)}else r&&jr(n.onClick,[e,r,this],this)}}function o1e(t,e,n,r,i){const s=a1e(r,t,e,n),o=l1e(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function a1e(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function l1e(t,e,n){let r=t;return typeof e.text!="string"&&(r=pF(e,n)),r}function pF(t,e){const n=t.text?t.text.length:0;return e*n}function c1e(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var u1e={id:"legend",_element:_6,start(t,e,n){const r=t.legend=new _6({ctx:t.ctx,options:n,chart:t});Ua.configure(t,r,n),Ua.addBox(t,r)},stop(t){Ua.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Ua.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Ha(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class mF extends Rh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Fi(r.text)?r.text.length:1;this._padding=Ha(r.padding);const s=i*Ms(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=Ts(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=Ts(a,i,n),l=Vi*-.5):(u=s-e,d=Ts(a,n,i),l=Vi*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Ms(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);o1(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:kk(n.align),textBaseline:"middle",translation:[o,a]})}}function d1e(t,e){const n=new mF({ctx:t.ctx,options:e,chart:t});Ua.configure(t,n,e),Ua.addBox(t,n),t.titleBlock=n}var f1e={id:"title",_element:mF,start(t,e,n){d1e(t,n)},stop(t){const e=t.titleBlock;Ua.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Ua.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fm={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=R_(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tc(t,e){return e&&(Fi(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Jc(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function h1e(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function S6(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ms(e.bodyFont),c=Ms(e.titleFont),u=Ms(e.footerFont),d=s.length,h=i.length,p=r.length,y=Ha(e.padding);let x=y.height,v=0,b=r.reduce((T,j)=>T+j.before.length+j.lines.length+j.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,d&&(x+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),b){const T=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;x+=p*T+(b-p)*l.lineHeight+(b-1)*e.bodySpacing}h&&(x+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let S=0;const k=function(T){v=Math.max(v,n.measureText(T).width+S)};return n.save(),n.font=c.string,fr(t.title,k),n.font=l.string,fr(t.beforeBody.concat(t.afterBody),k),S=e.displayColors?o+2+e.boxPadding:0,fr(r,T=>{fr(T.before,k),fr(T.lines,k),fr(T.after,k)}),S=0,n.font=u.string,fr(t.footer,k),n.restore(),v+=y.width,{width:v,height:x}}function p1e(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function m1e(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function g1e(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),m1e(c,t,e,n)&&(c="center"),c}function k6(t,e,n){const r=n.yAlign||e.yAlign||p1e(t,n);return{xAlign:n.xAlign||e.xAlign||g1e(t,e,n,r),yAlign:r}}function y1e(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function x1e(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function N6(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:p}=gg(o);let y=y1e(e,a);const x=x1e(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,h)+i:a==="right"&&(y+=Math.max(d,p)+i),{x:Ba(y,0,r.width-e.width),y:Ba(x,0,r.height-e.height)}}function rx(t,e,n){const r=Ha(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function C6(t){return tc([],Jc(t))}function v1e(t,e,n){return Ih(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function E6(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const gF={beforeTitle:Xc,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Xc,beforeBody:Xc,beforeLabel:Xc,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _r(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Xc,afterBody:Xc,beforeFooter:Xc,footer:Xc,afterFooter:Xc};function So(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?gF[e].call(n,r):i}class V_ extends Rh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new tF(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=v1e(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=So(r,"beforeTitle",this,e),s=So(r,"title",this,e),o=So(r,"afterTitle",this,e);let a=[];return a=tc(a,Jc(i)),a=tc(a,Jc(s)),a=tc(a,Jc(o)),a}getBeforeBody(e,n){return C6(So(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return fr(e,s=>{const o={before:[],lines:[],after:[]},a=E6(r,s);tc(o.before,Jc(So(a,"beforeLabel",this,s))),tc(o.lines,So(a,"label",this,s)),tc(o.after,Jc(So(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return C6(So(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=So(r,"beforeFooter",this,e),s=So(r,"footer",this,e),o=So(r,"afterFooter",this,e);let a=[];return a=tc(a,Jc(i)),a=tc(a,Jc(s)),a=tc(a,Jc(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(h1e(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,h)=>e.filter(u,d,h,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),fr(a,u=>{const d=E6(e.callbacks,u);i.push(So(d,"labelColor",this,u)),s.push(So(d,"labelPointStyle",this,u)),o.push(So(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Fm[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=S6(this,r),c=Object.assign({},a,l),u=k6(this.chart,r,c),d=N6(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=gg(a),{x:h,y:p}=e,{width:y,height:x}=n;let v,b,S,k,T,j;return s==="center"?(T=p+x/2,i==="left"?(v=h,b=v-o,k=T+o,j=T-o):(v=h+y,b=v+o,k=T-o,j=T+o),S=v):(i==="left"?b=h+Math.max(l,u)+o:i==="right"?b=h+y-Math.max(c,d)-o:b=this.caretX,s==="top"?(k=p,T=k-o,v=b-o,S=b+o):(k=p+x,T=k+o,v=b+o,S=b-o),j=k),{x1:v,x2:b,x3:S,y1:k,y2:T,y3:j}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=e0(r.rtl,this.x,this.width);for(e.x=rx(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Ms(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=Ms(s.bodyFont),d=rx(this,"left",s),h=i.x(d),p=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+p;if(s.usePointStyle){const x={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},v=i.leftForLtr(h,c)+c/2,b=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,z_(e,x,v,b),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,z_(e,x,v,b)}else{e.lineWidth=tr(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=i.leftForLtr(h,c),v=i.leftForLtr(i.xPlus(h,1),c-2),b=gg(o.borderRadius);Object.values(b).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,B_(e,{x,y,w:c,h:l,radius:b}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),B_(e,{x:v,y:y+1,w:c-2,h:l-2,radius:b}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,y,c,l),e.strokeRect(x,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(v,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=Ms(r.bodyFont);let h=d.lineHeight,p=0;const y=e0(r.rtl,this.x,this.width),x=function(N){n.fillText(N,y.x(e.x+p),e.y+h/2),e.y+=h+s},v=y.textAlign(o);let b,S,k,T,j,P,C;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=rx(this,v,r),n.fillStyle=r.bodyColor,fr(this.beforeBody,x),p=a&&v!=="right"?o==="center"?c/2+u:c+2+u:0,T=0,P=i.length;T<P;++T){for(b=i[T],S=this.labelTextColors[T],n.fillStyle=S,fr(b.before,x),k=b.lines,a&&k.length&&(this._drawColorBox(n,e,T,y,r),h=Math.max(d.lineHeight,l)),j=0,C=k.length;j<C;++j)x(k[j]),h=d.lineHeight;fr(b.after,x)}p=0,h=d.lineHeight,fr(this.afterBody,x),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=e0(r.rtl,this.x,this.width);for(e.x=rx(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ms(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:h,bottomLeft:p,bottomRight:y}=gg(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Fm[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=S6(this,e),l=Object.assign({},o,this._size),c=k6(n,e,l),u=N6(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ha(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),ZR(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),QR(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Tv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Tv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Fm[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Sn(V_,"positioners",Fm);var w1e={id:"tooltip",_element:V_,positioners:Fm,afterInit(t,e,n){n&&(t.tooltip=new V_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gF},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const b1e=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function _1e(t,e,n,r){const i=t.indexOf(e);if(i===-1)return b1e(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const S1e=(t,e)=>t===null?null:Ba(Math.round(t),0,e);function A6(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class H_ extends I0{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_r(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:_1e(r,e,zn(n,e),this._addedLabels),S1e(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return A6.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Sn(H_,"id","category"),Sn(H_,"defaults",{ticks:{callback:A6}});function k1e(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,p=s||1,y=u-1,{min:x,max:v}=e,b=!_r(o),S=!_r(a),k=!_r(c),T=(v-x)/(d+1);let j=Oj((v-x)/y/p)*p,P,C,N,L;if(j<1e-14&&!b&&!S)return[{value:x},{value:v}];L=Math.ceil(v/j)-Math.floor(x/j),L>y&&(j=Oj(L*j/y/p)*p),_r(l)||(P=Math.pow(10,l),j=Math.ceil(j*P)/P),i==="ticks"?(C=Math.floor(x/j)*j,N=Math.ceil(v/j)*j):(C=x,N=v),b&&S&&s&&u0e((a-o)/s,j/1e3)?(L=Math.round(Math.min((a-o)/j,u)),j=(a-o)/L,C=o,N=a):k?(C=b?o:C,N=S?a:N,L=c-1,j=(N-C)/L):(L=(N-C)/j,hg(L,Math.round(L),j/1e3)?L=Math.round(L):L=Math.ceil(L));const R=Math.max(Lj(j),Lj(C));P=Math.pow(10,_r(l)?R:l),C=Math.round(C*P)/P,N=Math.round(N*P)/P;let D=0;for(b&&(h&&C!==o?(n.push({value:o}),C<o&&D++,hg(Math.round((C+D*j)*P)/P,o,T6(o,T,t))&&D++):C<o&&D++);D<L;++D){const M=Math.round((C+D*j)*P)/P;if(S&&M>a)break;n.push({value:M})}return S&&h&&N!==a?n.length&&hg(n[n.length-1].value,a,T6(a,T,t))?n[n.length-1].value=a:n.push({value:a}):(!S||N===a)&&n.push({value:N}),n}function T6(t,e,{horizontal:n,minRotation:r}){const i=ih(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class N1e extends I0{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _r(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=g0(i),c=g0(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=k1e(i,s);return e.bounds==="ticks"&&d0e(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return WR(e,this.chart.options.locale,this.options.ticks.format)}}class q_ extends N1e{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Va(e)?e:0,this.max=Va(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=ih(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Sn(q_,"id","linear"),Sn(q_,"defaults",{ticks:{callback:VR.formatters.numeric}});const L2={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Co=Object.keys(L2);function j6(t,e){return t-e}function P6(t,e){if(_r(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Va(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(i1(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function D6(t,e,n,r){const i=Co.length;for(let s=Co.indexOf(t);s<i-1;++s){const o=L2[Co[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Co[s]}return Co[i-1]}function C1e(t,e,n,r,i){for(let s=Co.length-1;s>=Co.indexOf(n);s--){const o=Co[s];if(L2[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Co[n?Co.indexOf(n):0]}function E1e(t){for(let e=Co.indexOf(t)+1,n=Co.length;e<n;++e)if(L2[Co[e]].common)return Co[e]}function O6(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Sk(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function A1e(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function L6(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:A1e(t,r,i,n)}class Iv extends I0{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new Bme._date(e.adapters.date);i.init(n),fg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:P6(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Va(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Va(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=y0e(i,s,o);return this._unit=n.unit||(r.autoSkip?D6(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):C1e(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:E1e(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),L6(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ba(n,0,o),r=Ba(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||D6(s.minUnit,n,r,this._getLabelCapacity(n)),a=zn(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=i1(l)||l===!0,u={};let d=n,h,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(h=d,p=0;h<r;h=+e.add(h,a,o),p++)O6(u,h,y);return(h===r||i.bounds==="ticks"||p===1)&&O6(u,h,y),Object.keys(u).sort(j6).map(x=>+x)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return jr(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],h=r[n],p=c&&d&&h&&h.major;return this._adapter.format(e,i||(p?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=ih(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,L6(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(P6(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return v0e(e.sort(j6))}}Sn(Iv,"id","time"),Sn(Iv,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ix(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=sh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=sh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class M6 extends Iv{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ix(n,this.min),this._tableRange=ix(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(ix(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return ix(this._table,r*this._tableRange+this._minPos,!0)}}Sn(M6,"id","timeseries"),Sn(M6,"defaults",Iv.defaults);const yF="label";function I6(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function T1e(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function xF(t,e){t.labels=e}function vF(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yF;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function j1e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yF;const n={labels:[],datasets:[]};return xF(n,t.labels),vF(n,t.datasets,e),n}function P1e(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...h}=t,p=Y.useRef(null),y=Y.useRef(null),x=()=>{p.current&&(y.current=new O2(p.current,{type:o,data:j1e(a,s),options:l&&{...l},plugins:c}),I6(e,y.current))},v=()=>{I6(e,null),y.current&&(y.current.destroy(),y.current=null)};return Y.useEffect(()=>{!i&&y.current&&l&&T1e(y.current,l)},[i,l]),Y.useEffect(()=>{!i&&y.current&&xF(y.current.config.data,a.labels)},[i,a.labels]),Y.useEffect(()=>{!i&&y.current&&a.datasets&&vF(y.current.config.data,a.datasets,s)},[i,a.datasets]),Y.useEffect(()=>{y.current&&(i?(v(),setTimeout(x)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),Y.useEffect(()=>{y.current&&(v(),setTimeout(x))},[o]),Y.useEffect(()=>(x(),()=>v()),[]),Pt.createElement("canvas",{ref:p,role:"img",height:n,width:r,...h},u)}const D1e=Y.forwardRef(P1e);function O1e(t,e){return O2.register(e),Y.forwardRef((n,r)=>Pt.createElement(D1e,{...n,ref:r,type:t}))}const L1e=O1e("line",xx);O2.register(H_,q_,bx,Rm,f1e,w1e,u1e);const M1e=()=>{const{id:t}=zv(),[e,n]=Y.useState(null),[r,i]=Y.useState(!0),[s,o]=Y.useState(null);Y.useEffect(()=>{t?a():(o("Nie znaleziono identyfikatora sprztu"),i(!1))},[t]);const a=async()=>{try{i(!0);const{data:h,error:p}=await ct.from("equipment").select("*").eq("id",t).single();if(p)throw p;const{data:y,error:x}=await ct.from("reservation_items").select("reservation_id, quantity").eq("equipment_id",t);if(x)throw x;if(!y||y.length===0){n({...h,total_revenue:0,payoff_percentage:0,rental_history:[],monthly_revenue:[]}),o(null),i(!1);return}const v=y.map(R=>R.reservation_id),{data:b,error:S}=await ct.from("reservations").select(`
          id,
          start_date,
          end_date,
          total_price,
          status,
          customers (
            first_name,
            last_name
          )
        `).in("id",v).order("start_date",{ascending:!1});if(S)throw S;const k=b.filter(R=>R.status==="completed").reduce((R,D)=>{const M=new Date(D.start_date).toISOString().slice(0,7);return R[M]=(R[M]||0)+D.total_price,R},{}),T=Object.keys(k).sort();let j=0;const P=T.map(R=>(j+=k[R],{month:R,revenue:k[R],cumulative_revenue:j})),C=b.map(R=>({id:R.id,start_date:R.start_date,end_date:R.end_date,total_price:R.total_price,customer_name:R.customers?`${R.customers.first_name} ${R.customers.last_name}`:"Nieznany klient",status:R.status})),N=b.filter(R=>R.status==="completed").reduce((R,D)=>R+(D.total_price||0),0),L=h.purchase_price?N/h.purchase_price*100:0;n({...h,total_revenue:N,payoff_percentage:L,rental_history:C,monthly_revenue:P}),o(null)}catch(h){console.error("Error loading equipment details:",h),o("Nie udao si zaadowa szczegw sprztu")}finally{i(!1)}},l=()=>{if(!e||e.payoff_percentage>=100)return null;const h=e.monthly_revenue;if(h.length<2)return null;const p=h.slice(-3),y=p.reduce((S,k)=>S+k.revenue,0)/p.length;if(y<=0)return null;const x=e.purchase_price-e.total_revenue,v=Math.ceil(x/y),b=new Date;return b.setMonth(b.getMonth()+v),b.toLocaleDateString("pl-PL")};if(r)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx(b0,{className:"w-8 h-8 text-solrent-orange animate-spin"})});if(s||!e)return m.jsx("div",{className:"bg-red-50 p-4 rounded-lg text-red-700",children:m.jsx("p",{children:s||"Nie znaleziono sprztu"})});const c={labels:e.monthly_revenue.map(h=>{const[p,y]=h.month.split("-");return`${y}/${p}`}),datasets:[{label:"Miesiczny przychd",data:e.monthly_revenue.map(h=>h.revenue),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.5)",tension:.1},{label:"Przychd skumulowany",data:e.monthly_revenue.map(h=>h.cumulative_revenue),borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.5)",tension:.1}]},u={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Przychody w czasie"}},scales:{y:{beginAtZero:!0,ticks:{callback:h=>`${h.toFixed(2)} z`}}}},d=l();return m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:e.name}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Cena zakupu"}),m.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.purchase_price.toFixed(2)," z"]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Przychd czny"}),m.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.total_revenue.toFixed(2)," z"]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsx("p",{className:"text-sm text-gray-500",children:"Postp spaty"}),m.jsxs("p",{className:"text-xl font-medium text-gray-900",children:[e.payoff_percentage.toFixed(1),"%"]})]})]}),d&&m.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:m.jsxs("p",{className:"text-sm text-blue-800",children:["Szacowana data penej spaty: ",m.jsx("span",{className:"font-medium",children:d})]})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Wykres przychodw"}),m.jsx(L1e,{data:c,options:u})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Historia wypoycze"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data rozpoczcia"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data zakoczenia"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Klient"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kwota"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.rental_history.map(h=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(h.start_date).toLocaleDateString("pl-PL")}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(h.end_date).toLocaleDateString("pl-PL")}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h.customer_name}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[h.total_price.toFixed(2)," z"]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.status==="completed"?"bg-green-100 text-green-800":h.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:h.status==="completed"?"Zakoczone":h.status==="pending"?"Oczekujce":h.status==="cancelled"?"Anulowane":h.status})})]},h.id))})]})})]})]})},I1e=()=>(Y.useEffect(()=>{window.location.href="/"},[]),null);function R1e(){return m.jsx(dz,{children:m.jsx("div",{className:"relative min-h-screen",children:m.jsxs(rz,{children:[m.jsx(oi,{path:"/admin",element:m.jsx(GH,{onLogin:()=>window.location.href="/admin/panel"})}),m.jsx(oi,{path:"/admin/forgot-password",element:m.jsx(XH,{})}),m.jsx(oi,{path:"/admin/reset-password",element:m.jsx(JH,{})}),m.jsxs(oi,{path:"/admin/panel",element:m.jsx(ZH,{onLogout:()=>window.location.href="/admin"}),children:[m.jsx(oi,{index:!0,element:m.jsx(ez,{to:"/admin/panel/dashboard",replace:!0})}),m.jsx(oi,{path:"dashboard",element:m.jsx(eq,{})}),m.jsx(oi,{path:"reservations",element:m.jsx(RG,{})}),m.jsx(oi,{path:"reservations/:id",element:m.jsx(zoe,{})}),m.jsx(oi,{path:"reservations/new",element:m.jsx(IM,{})}),m.jsx(oi,{path:"crm",element:m.jsx(zG,{})}),m.jsx(oi,{path:"equipment",element:m.jsx(Ose,{})}),m.jsx(oi,{path:"equipment-stats",element:m.jsx(jpe,{})}),m.jsx(oi,{path:"equipment-stats/:id",element:m.jsx(M1e,{})}),m.jsx(oi,{path:"advertisements",element:m.jsx(Lse,{})}),m.jsx(oi,{path:"calendar",element:m.jsx(Rse,{})}),m.jsx(oi,{path:"customers",element:m.jsx(FG,{})}),m.jsx(oi,{path:"customers/:id",element:m.jsx(Boe,{})}),m.jsx(oi,{path:"statistics",element:m.jsx(Foe,{})})]}),m.jsx(oi,{path:"/admin/*",element:m.jsx(I1e,{})}),m.jsx(oi,{path:"/",element:m.jsxs("div",{className:"min-h-screen bg-solrent-light relative",children:[m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative pt-28",children:[m.jsx("img",{src:"/assets/solrent-logo.png",alt:"SOLRENT Logo",className:"absolute top-4 left-4 md:left-8 h-20 object-contain"}),m.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-center mb-8 md:mb-12 text-solrent-dark max-w-4xl mx-auto",children:"Rezerwacja sprztu budowlanego i ogrodniczego"}),m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx(IH,{})})]}),m.jsx(zH,{})]})})]})})})}const F1e=()=>m.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Regulamin wypoyczalni SOLRENT"}),m.jsxs("div",{className:"space-y-6 text-gray-600",children:[m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"1. Postanowienia oglne"}),m.jsx("p",{children:"1. Niniejszy regulamin okrela zasady wypoyczania sprztu budowlanego i ogrodniczego przez SOLRENT Sp. z o.o."}),m.jsx("p",{children:"2. Wypoyczalnia prowadzi dziaalno w zakresie krtkoterminowego wynajmu sprztu budowlanego i ogrodniczego."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"2. Zasady wypoyczania sprztu"}),m.jsx("p",{children:"1. Wypoyczenie sprztu nastpuje na podstawie zoonego zamwienia online lub bezporednio w siedzibie firmy."}),m.jsx("p",{children:"2. Warunkiem wypoyczenia sprztu jest:"}),m.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[m.jsx("li",{children:"Ukoczenie 18 roku ycia"}),m.jsx("li",{children:"Posiadanie wanego dokumentu tosamoci"}),m.jsx("li",{children:"Wpacenie kaucji zwrotnej"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"3. Obowizki Wypoyczajcego"}),m.jsx("p",{children:"Wypoyczajcy zobowizuje si do:"}),m.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[m.jsx("li",{children:"Uytkowania sprztu zgodnie z jego przeznaczeniem i instrukcj obsugi"}),m.jsx("li",{children:"Zwrotu sprztu w stanie niepogorszonym"}),m.jsx("li",{children:"Terminowego regulowania nalenoci"}),m.jsx("li",{children:"Pokrycia kosztw ewentualnych napraw lub odszkodowania"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"4. Rezerwacja sprztu"}),m.jsx("p",{children:"1. Rezerwacji mona dokona online poprzez stron internetow lub telefonicznie."}),m.jsx("p",{children:"2. Rezerwacja jest wana po otrzymaniu potwierdzenia od wypoyczalni."}),m.jsx("p",{children:"3. Wypoyczalnia zastrzega sobie prawo do odmowy realizacji rezerwacji w przypadku:"}),m.jsxs("ul",{className:"list-disc pl-6 mt-2",children:[m.jsx("li",{children:"Braku dostpnoci sprztu"}),m.jsx("li",{children:"Niespenienia warunkw wypoyczenia"}),m.jsx("li",{children:"Wczeniejszych narusze regulaminu przez klienta"})]})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"5. Patnoci i kaucja"}),m.jsx("p",{children:"1. Opata za wypoyczenie naliczana jest zgodnie z aktualnym cennikiem."}),m.jsx("p",{children:"2. Kaucja zwrotna jest zabezpieczeniem na wypadek uszkodzenia lub nieterminowego zwrotu sprztu."}),m.jsx("p",{children:"3. Wysoko kaucji jest uzaleniona od rodzaju wypoyczanego sprztu."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"6. Odpowiedzialno"}),m.jsx("p",{children:"1. Wypoyczajcy ponosi pen odpowiedzialno za wypoyczony sprzt od momentu jego odbioru do zwrotu."}),m.jsx("p",{children:"2. W przypadku uszkodzenia, zniszczenia lub utraty sprztu, Wypoyczajcy zobowizany jest do pokrycia kosztw naprawy lub odkupienia sprztu."})]}),m.jsxs("section",{children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"7. Postanowienia kocowe"}),m.jsx("p",{children:"1. W sprawach nieuregulowanych niniejszym regulaminem zastosowanie maj przepisy Kodeksu Cywilnego."}),m.jsx("p",{children:"2. Wszelkie spory bd rozstrzygane przez sd waciwy dla siedziby Wypoyczalni."})]})]}),m.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200",children:m.jsx("p",{className:"text-sm text-gray-500",children:"Regulamin obowizuje od dnia 01.03.2025 r. SOLRENT Sp. z o.o."})})]})}),z1e=window.location.pathname,B1e=z1e==="/terms"?F1e:R1e;u7.createRoot(document.getElementById("root")).render(m.jsx(Y.StrictMode,{children:m.jsx(B1e,{})}));export{dee as _,t7 as c,Rv as g};
